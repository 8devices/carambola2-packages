diff -ruN xsupplicant-1.2.8-old/configure xsupplicant-1.2.8-new/configure
--- xsupplicant-1.2.8-old/configure	2007-01-10 02:18:33.000000000 +0100
+++ xsupplicant-1.2.8-new/configure	2007-01-10 02:24:21.000000000 +0100
@@ -4759,6 +4759,11 @@
    #ifndef __user
    #define __user
    #endif
+   #include <linux/version.h>
+   #if LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,19)
+   #include <linux/types.h>
+   #include <linux/if.h>
+   #endif
    #include <linux/wireless.h>
 
 #include <$ac_header>
@@ -4823,6 +4828,11 @@
 		   #ifndef __user
 		   #define __user
 		   #endif
+		   #include <linux/version.h>
+		   #if LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,19)
+		   #include <linux/types.h>
+		   #include <linux/if.h>
+		   #endif
                    #include <linux/wireless.h>
                    #include <iwlib.h>
 int
diff -ruN xsupplicant-1.2.8-old/configure.in xsupplicant-1.2.8-new/configure.in
--- xsupplicant-1.2.8-old/configure.in	2007-01-10 02:18:33.000000000 +0100
+++ xsupplicant-1.2.8-new/configure.in	2007-01-10 02:22:28.000000000 +0100
@@ -119,6 +119,11 @@
    #ifndef __user
    #define __user
    #endif
+   #include <linux/version.h>
+   #if LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,19)
+   #include <linux/types.h>
+   #include <linux/if.h>
+   #endif
    #include <linux/wireless.h>])
 
    AC_MSG_CHECKING([iwlib version])
@@ -127,6 +132,11 @@
 		   #ifndef __user
 		   #define __user
 		   #endif
+		   #include <linux/version.h>
+		   #if LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,19)
+		   #include <linux/types.h>
+		   #include <linux/if.h>
+		   #endif
                    #include <linux/wireless.h>
                    #include <iwlib.h>], 
                [iw_extract_event_stream(NULL, NULL, 0);], [AC_DEFINE(NEW_IWLIB) AC_MSG_RESULT([3 params])], [AC_MSG_RESULT([2 params])])
diff -ruN xsupplicant-1.2.8-old/src/cardif/linux/cardif_linux_wext.c xsupplicant-1.2.8-new/src/cardif/linux/cardif_linux_wext.c
--- xsupplicant-1.2.8-old/src/cardif/linux/cardif_linux_wext.c	2006-10-08 05:42:53.000000000 +0200
+++ xsupplicant-1.2.8-new/src/cardif/linux/cardif_linux_wext.c	2007-01-10 02:31:22.000000000 +0100
@@ -204,6 +204,7 @@
 #include <linux/types.h>
 #include <linux/socket.h>
 #include <linux/compiler.h>
+#include <linux/if.h>
 #include <linux/wireless.h>
 #include <iwlib.h>
 #include <linux/if_packet.h>
