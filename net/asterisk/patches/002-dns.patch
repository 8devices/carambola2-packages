diff -Nru asterisk-1.2.24.org/dns.c asterisk-1.2.24/dns.c
--- asterisk-1.2.24.org/dns.c	2007-07-16 22:46:58.000000000 +0200
+++ asterisk-1.2.24/dns.c	2007-09-04 18:53:32.000000000 +0200
@@ -237,7 +237,13 @@
 #if defined(res_ndestroy)
 #define HAS_RES_NDESTROY
 #endif
-#else
+#endif
+
+#ifdef __UCLIBC__
+#undef HAS_RES_NINIT
+#endif
+
+#ifndef HAS_RES_NINIT
 AST_MUTEX_DEFINE_STATIC(res_lock);
 #if 0
 #warning "Warning, res_ninit is missing...  Could have reentrancy issues"
