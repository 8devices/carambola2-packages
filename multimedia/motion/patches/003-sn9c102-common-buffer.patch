Index: motion-3.2.7/motion.c
===================================================================
--- motion-3.2.7.orig/motion.c	2007-06-11 08:27:35.000000000 +0100
+++ motion-3.2.7/motion.c	2007-06-11 08:28:30.000000000 +0100
@@ -474,8 +474,8 @@
 	cnt->imgs.shotstamp = mymalloc(sizeof(int));
 
 	/* Allocate a buffer for temp. usage in some places */
-	/* Only despeckle for now... */
-	cnt->imgs.common_buffer = mymalloc(3 * cnt->imgs.width);
+	/* Only despeckle & bayer2rgb24() for now... */
+	cnt->imgs.common_buffer = mymalloc(3 * cnt->imgs.width * cnt->imgs.height);
 
 	/* Now is a good time to init rotation data. Since vid_start has been
 	 * called, we know that we have imgs.width and imgs.height. When capturing
