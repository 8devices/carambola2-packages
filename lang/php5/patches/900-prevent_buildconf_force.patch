--- a/configure
+++ b/configure
@@ -847,6 +847,30 @@ ac_help="$ac_help
 ac_help="$ac_help
   --with-zlib-dir=<DIR>   Define the location of zlib install directory"
 ac_help="$ac_help
+  --enable-apc           Enable APC support"
+ac_help="$ac_help
+  --enable-apc-debug     Enable APC debugging"
+ac_help="$ac_help
+  --enable-apc-filehits   Enable per request file info about files used from the APC cache (ie: apc_cache_info('filehits')) "
+ac_help="$ac_help
+  --disable-apc-mmap
+                          Disable mmap support and use IPC shm instead"
+ac_help="$ac_help
+  --enable-apc-sem
+                          Enable semaphore locks instead of fcntl"
+ac_help="$ac_help
+  --disable-apc-pthreadmutex
+                          Disable pthread mutex locking "
+ac_help="$ac_help
+  --enable-apc-spinlocks
+                          Enable spin locks  EXPERIMENTAL "
+ac_help="$ac_help
+  --enable-apc-memprotect
+                          Enable mmap/shm memory protection"
+ac_help="$ac_help
+  --disable-valgrind-checks
+                          Disable valgrind based memory checks"
+ac_help="$ac_help
   --enable-bcmath         Enable bc style precision math functions"
 ac_help="$ac_help
   --with-bz2[=DIR]        Include BZip2 support"
@@ -884,6 +908,8 @@ ac_help="$ac_help
 ac_help="$ac_help
   --disable-flatfile        DBA: FlatFile support (bundled)"
 ac_help="$ac_help
+  --enable-dio            Enable direct I/O support"
+ac_help="$ac_help
   --disable-dom           Disable DOM support"
 ac_help="$ac_help
   --with-libxml-dir[=DIR]   DOM: libxml2 install prefix"
@@ -951,6 +977,8 @@ ac_help="$ac_help
 ac_help="$ac_help
   --with-ldap-sasl[=DIR]    LDAP: Include Cyrus SASL support"
 ac_help="$ac_help
+  --with-libevent             Include libevent support"
+ac_help="$ac_help
   --enable-mbstring       Enable multibyte string support"
 ac_help="$ac_help
   --disable-mbregex         MBSTRING: Disable multibyte regex support"
@@ -1165,6 +1193,24 @@ ac_help="$ac_help
 ac_help="$ac_help
   --with-pcre-dir           ZIP: pcre install prefix"
 ac_help="$ac_help
+  --enable-http           Enable extended HTTP support"
+ac_help="$ac_help
+  --with-http-shared-deps
+                           HTTP: disable to not depend on extensions like hash,
+                                 iconv and session (when built shared)"
+ac_help="$ac_help
+  --with-http-curl-requests[=LIBCURLDIR]
+                           HTTP: with cURL request support"
+ac_help="$ac_help
+  --with-http-curl-libevent[=LIBEVENTDIR]
+                           HTTP: libevent install directory"
+ac_help="$ac_help
+  --with-http-zlib-compression[=LIBZDIR]
+                           HTTP: with zlib encodings support"
+ac_help="$ac_help
+  --with-http-magic-mime[=LIBMAGICDIR]
+                           HTTP: with magic mime response content type guessing"
+ac_help="$ac_help
   --disable-mysqlnd-compression-support
                             Enable support for the MySQL compressed protocol in mysqlnd"
 ac_help="$ac_help
@@ -1888,12 +1934,12 @@ fi
 
 
 echo $ac_n "checking for Cygwin environment""... $ac_c" 1>&6
-echo "configure:1892: checking for Cygwin environment" >&5
+echo "configure:1938: checking for Cygwin environment" >&5
 if eval "test \"`echo '$''{'ac_cv_cygwin'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1897 "configure"
+#line 1943 "configure"
 #include "confdefs.h"
 
 int main() {
@@ -1904,7 +1950,7 @@ int main() {
 return __CYGWIN__;
 ; return 0; }
 EOF
-if { (eval echo configure:1908: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:1954: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_cygwin=yes
 else
@@ -1921,19 +1967,19 @@ echo "$ac_t""$ac_cv_cygwin" 1>&6
 CYGWIN=
 test "$ac_cv_cygwin" = yes && CYGWIN=yes
 echo $ac_n "checking for mingw32 environment""... $ac_c" 1>&6
-echo "configure:1925: checking for mingw32 environment" >&5
+echo "configure:1971: checking for mingw32 environment" >&5
 if eval "test \"`echo '$''{'ac_cv_mingw32'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1930 "configure"
+#line 1976 "configure"
 #include "confdefs.h"
 
 int main() {
 return __MINGW32__;
 ; return 0; }
 EOF
-if { (eval echo configure:1937: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:1983: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_mingw32=yes
 else
@@ -1952,7 +1998,7 @@ test "$ac_cv_mingw32" = yes && MINGW32=y
 
 
 echo $ac_n "checking for egrep""... $ac_c" 1>&6
-echo "configure:1956: checking for egrep" >&5
+echo "configure:2002: checking for egrep" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_egrep'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1967,7 +2013,7 @@ echo "$ac_t""$ac_cv_prog_egrep" 1>&6
  
 
 echo $ac_n "checking for a sed that does not truncate output""... $ac_c" 1>&6
-echo "configure:1971: checking for a sed that does not truncate output" >&5
+echo "configure:2017: checking for a sed that does not truncate output" >&5
 if eval "test \"`echo '$''{'lt_cv_path_SED'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2117,7 +2163,7 @@ else { echo "configure: error: can not r
 fi
 
 echo $ac_n "checking host system type""... $ac_c" 1>&6
-echo "configure:2121: checking host system type" >&5
+echo "configure:2167: checking host system type" >&5
 
 host_alias=$host
 case "$host_alias" in
@@ -2138,7 +2184,7 @@ host_os=`echo $host | sed 's/^\([^-]*\)-
 echo "$ac_t""$host" 1>&6
 
 echo $ac_n "checking target system type""... $ac_c" 1>&6
-echo "configure:2142: checking target system type" >&5
+echo "configure:2188: checking target system type" >&5
 
 target_alias=$target
 case "$target_alias" in
@@ -2250,7 +2296,7 @@ rm -f libs/*
 # Extract the first word of "gcc", so it can be a program name with args.
 set dummy gcc; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2254: checking for $ac_word" >&5
+echo "configure:2300: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2280,7 +2326,7 @@ if test -z "$CC"; then
   # Extract the first word of "cc", so it can be a program name with args.
 set dummy cc; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2284: checking for $ac_word" >&5
+echo "configure:2330: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2331,7 +2377,7 @@ fi
       # Extract the first word of "cl", so it can be a program name with args.
 set dummy cl; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2335: checking for $ac_word" >&5
+echo "configure:2381: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2363,7 +2409,7 @@ fi
 fi
 
 echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
-echo "configure:2367: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5
+echo "configure:2413: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5
 
 ac_ext=c
 # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
@@ -2374,12 +2420,12 @@ cross_compiling=$ac_cv_prog_cc_cross
 
 cat > conftest.$ac_ext << EOF
 
-#line 2378 "configure"
+#line 2424 "configure"
 #include "confdefs.h"
 
 main(){return(0);}
 EOF
-if { (eval echo configure:2383: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2429: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   ac_cv_prog_cc_works=yes
   # If we can't run a trivial program, we are probably using a cross compiler.
   if (./conftest; exit) 2>/dev/null; then
@@ -2405,12 +2451,12 @@ if test $ac_cv_prog_cc_works = no; then
   { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
 fi
 echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
-echo "configure:2409: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
+echo "configure:2455: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
 echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
 cross_compiling=$ac_cv_prog_cc_cross
 
 echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
-echo "configure:2414: checking whether we are using GNU C" >&5
+echo "configure:2460: checking whether we are using GNU C" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2419,7 +2465,7 @@ else
   yes;
 #endif
 EOF
-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:2423: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:2469: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
   ac_cv_prog_gcc=yes
 else
   ac_cv_prog_gcc=no
@@ -2438,7 +2484,7 @@ ac_test_CFLAGS="${CFLAGS+set}"
 ac_save_CFLAGS="$CFLAGS"
 CFLAGS=
 echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
-echo "configure:2442: checking whether ${CC-cc} accepts -g" >&5
+echo "configure:2488: checking whether ${CC-cc} accepts -g" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_cc_g'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2470,7 +2516,7 @@ else
 fi
 
 echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
-echo "configure:2474: checking how to run the C preprocessor" >&5
+echo "configure:2520: checking how to run the C preprocessor" >&5
 # On Suns, sometimes $CPP names a directory.
 if test -n "$CPP" && test -d "$CPP"; then
   CPP=
@@ -2485,13 +2531,13 @@ else
   # On the NeXT, cc -E runs the code through the compiler's parser,
   # not just through cpp.
   cat > conftest.$ac_ext <<EOF
-#line 2489 "configure"
+#line 2535 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2495: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:2541: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -2502,13 +2548,13 @@ else
   rm -rf conftest*
   CPP="${CC-cc} -E -traditional-cpp"
   cat > conftest.$ac_ext <<EOF
-#line 2506 "configure"
+#line 2552 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2512: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:2558: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -2519,13 +2565,13 @@ else
   rm -rf conftest*
   CPP="${CC-cc} -nologo -E"
   cat > conftest.$ac_ext <<EOF
-#line 2523 "configure"
+#line 2569 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2529: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:2575: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -2552,9 +2598,9 @@ echo "$ac_t""$CPP" 1>&6
 
   ICC="no"
   echo $ac_n "checking for icc""... $ac_c" 1>&6
-echo "configure:2556: checking for icc" >&5
+echo "configure:2602: checking for icc" >&5
   cat > conftest.$ac_ext <<EOF
-#line 2558 "configure"
+#line 2604 "configure"
 #include "confdefs.h"
 __INTEL_COMPILER
 EOF
@@ -2576,9 +2622,9 @@ rm -f conftest*
 
   SUNCC="no"
   echo $ac_n "checking for suncc""... $ac_c" 1>&6
-echo "configure:2580: checking for suncc" >&5
+echo "configure:2626: checking for suncc" >&5
   cat > conftest.$ac_ext <<EOF
-#line 2582 "configure"
+#line 2628 "configure"
 #include "confdefs.h"
 __SUNPRO_C
 EOF
@@ -2601,10 +2647,10 @@ rm -f conftest*
 
 if test "x$CC" != xcc; then
   echo $ac_n "checking whether $CC and cc understand -c and -o together""... $ac_c" 1>&6
-echo "configure:2605: checking whether $CC and cc understand -c and -o together" >&5
+echo "configure:2651: checking whether $CC and cc understand -c and -o together" >&5
 else
   echo $ac_n "checking whether cc understands -c and -o together""... $ac_c" 1>&6
-echo "configure:2608: checking whether cc understands -c and -o together" >&5
+echo "configure:2654: checking whether cc understands -c and -o together" >&5
 fi
 set dummy $CC; ac_cc="`echo $2 |
 		       sed -e 's/[^a-zA-Z0-9_]/_/g' -e 's/^[0-9]/_/'`"
@@ -2616,16 +2662,16 @@ else
 # We do the test twice because some compilers refuse to overwrite an
 # existing .o file with -o, though they will create one.
 ac_try='${CC-cc} -c conftest.c -o conftest.o 1>&5'
-if { (eval echo configure:2620: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; } &&
-   test -f conftest.o && { (eval echo configure:2621: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; };
+if { (eval echo configure:2666: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; } &&
+   test -f conftest.o && { (eval echo configure:2667: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; };
 then
   eval ac_cv_prog_cc_${ac_cc}_c_o=yes
   if test "x$CC" != xcc; then
     # Test first that cc exists at all.
-    if { ac_try='cc -c conftest.c 1>&5'; { (eval echo configure:2626: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; }; then
+    if { ac_try='cc -c conftest.c 1>&5'; { (eval echo configure:2672: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; }; then
       ac_try='cc -c conftest.c -o conftest.o 1>&5'
-      if { (eval echo configure:2628: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; } &&
-	 test -f conftest.o && { (eval echo configure:2629: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; };
+      if { (eval echo configure:2674: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; } &&
+	 test -f conftest.o && { (eval echo configure:2675: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; };
       then
         # cc works too.
         :
@@ -2652,7 +2698,7 @@ EOF
 fi
 
 echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
-echo "configure:2656: checking how to run the C preprocessor" >&5
+echo "configure:2702: checking how to run the C preprocessor" >&5
 # On Suns, sometimes $CPP names a directory.
 if test -n "$CPP" && test -d "$CPP"; then
   CPP=
@@ -2667,13 +2713,13 @@ else
   # On the NeXT, cc -E runs the code through the compiler's parser,
   # not just through cpp.
   cat > conftest.$ac_ext <<EOF
-#line 2671 "configure"
+#line 2717 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2677: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:2723: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -2684,13 +2730,13 @@ else
   rm -rf conftest*
   CPP="${CC-cc} -E -traditional-cpp"
   cat > conftest.$ac_ext <<EOF
-#line 2688 "configure"
+#line 2734 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2694: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:2740: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -2701,13 +2747,13 @@ else
   rm -rf conftest*
   CPP="${CC-cc} -nologo -E"
   cat > conftest.$ac_ext <<EOF
-#line 2705 "configure"
+#line 2751 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2711: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:2757: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -2732,9 +2778,9 @@ fi
 echo "$ac_t""$CPP" 1>&6
 
 echo $ac_n "checking for AIX""... $ac_c" 1>&6
-echo "configure:2736: checking for AIX" >&5
+echo "configure:2782: checking for AIX" >&5
 cat > conftest.$ac_ext <<EOF
-#line 2738 "configure"
+#line 2784 "configure"
 #include "confdefs.h"
 #ifdef _AIX
   yes
@@ -2756,7 +2802,7 @@ rm -f conftest*
 
 
 echo $ac_n "checking whether ln -s works""... $ac_c" 1>&6
-echo "configure:2760: checking whether ln -s works" >&5
+echo "configure:2806: checking whether ln -s works" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_LN_S'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2781,7 +2827,7 @@ fi
 php_with_libdir=lib
 
 echo $ac_n "checking for system library directory""... $ac_c" 1>&6
-echo "configure:2785: checking for system library directory" >&5
+echo "configure:2831: checking for system library directory" >&5
 # Check whether --with-libdir or --without-libdir was given.
 if test "${with_libdir+set}" = set; then
   withval="$with_libdir"
@@ -2804,7 +2850,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_enable_rpath=yes
 
 echo $ac_n "checking whether to enable runpaths""... $ac_c" 1>&6
-echo "configure:2808: checking whether to enable runpaths" >&5
+echo "configure:2854: checking whether to enable runpaths" >&5
 # Check whether --enable-rpath or --disable-rpath was given.
 if test "${enable_rpath+set}" = set; then
   enableval="$enable_rpath"
@@ -2825,7 +2871,7 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 echo $ac_n "checking if compiler supports -R""... $ac_c" 1>&6
-echo "configure:2829: checking if compiler supports -R" >&5
+echo "configure:2875: checking if compiler supports -R" >&5
 if eval "test \"`echo '$''{'php_cv_cc_dashr'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2833,14 +2879,14 @@ else
   SAVE_LIBS=$LIBS
   LIBS="-R /usr/$PHP_LIBDIR $LIBS"
   cat > conftest.$ac_ext <<EOF
-#line 2837 "configure"
+#line 2883 "configure"
 #include "confdefs.h"
 
 int main() {
 
 ; return 0; }
 EOF
-if { (eval echo configure:2844: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2890: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   php_cv_cc_dashr=yes
 else
@@ -2858,7 +2904,7 @@ if test $php_cv_cc_dashr = "yes"; then
   ld_runpath_switch=-R
 else
   echo $ac_n "checking if compiler supports -Wl,-rpath,""... $ac_c" 1>&6
-echo "configure:2862: checking if compiler supports -Wl,-rpath," >&5
+echo "configure:2908: checking if compiler supports -Wl,-rpath," >&5
   if eval "test \"`echo '$''{'php_cv_cc_rpath'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2866,14 +2912,14 @@ else
     SAVE_LIBS=$LIBS
     LIBS="-Wl,-rpath,/usr/$PHP_LIBDIR $LIBS"
     cat > conftest.$ac_ext <<EOF
-#line 2870 "configure"
+#line 2916 "configure"
 #include "confdefs.h"
 
 int main() {
 
 ; return 0; }
 EOF
-if { (eval echo configure:2877: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2923: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   php_cv_cc_rpath=yes
 else
@@ -2904,7 +2950,7 @@ do
 # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2908: checking for $ac_word" >&5
+echo "configure:2954: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_AWK'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2945,7 +2991,7 @@ test -n "$AWK" || AWK="bork"
       ;;
     *)
       echo $ac_n "checking if $AWK is broken""... $ac_c" 1>&6
-echo "configure:2949: checking if $AWK is broken" >&5
+echo "configure:2995: checking if $AWK is broken" >&5
       if ! $AWK 'function foo() {}' >/dev/null 2>&1 ; then
         echo "$ac_t""yes" 1>&6
         { echo "configure: error: You should install GNU awk" 1>&2; exit 1; }
@@ -2964,7 +3010,7 @@ do
 # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2968: checking for $ac_word" >&5
+echo "configure:3014: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_YACC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3004,7 +3050,7 @@ test -n "$YACC" || YACC="yacc"
   bison_version=none
   if test "$YACC"; then
     echo $ac_n "checking for bison version""... $ac_c" 1>&6
-echo "configure:3008: checking for bison version" >&5
+echo "configure:3054: checking for bison version" >&5
 if eval "test \"`echo '$''{'php_cv_bison_version'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3042,7 +3088,7 @@ echo "$ac_t""$php_cv_bison_version" 1>&6
   # Extract the first word of "re2c", so it can be a program name with args.
 set dummy re2c; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:3046: checking for $ac_word" >&5
+echo "configure:3092: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_RE2C'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3070,7 +3116,7 @@ fi
 
   if test -n "$RE2C"; then
     echo $ac_n "checking for re2c version""... $ac_c" 1>&6
-echo "configure:3074: checking for re2c version" >&5
+echo "configure:3120: checking for re2c version" >&5
 if eval "test \"`echo '$''{'php_cv_re2c_version'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3109,7 +3155,7 @@ esac
 php_enable_re2c_cgoto=no
 
 echo $ac_n "checking whether to enable computed goto gcc extension with re2c""... $ac_c" 1>&6
-echo "configure:3113: checking whether to enable computed goto gcc extension with re2c" >&5
+echo "configure:3159: checking whether to enable computed goto gcc extension with re2c" >&5
 # Check whether --enable-re2c-cgoto or --disable-re2c-cgoto was given.
 if test "${enable_re2c_cgoto+set}" = set; then
   enableval="$enable_re2c_cgoto"
@@ -3132,9 +3178,9 @@ if test "$PHP_RE2C_CGOTO" = "no"; then
   RE2C_FLAGS=""
 else
   echo $ac_n "checking whether re2c -g works""... $ac_c" 1>&6
-echo "configure:3136: checking whether re2c -g works" >&5
+echo "configure:3182: checking whether re2c -g works" >&5
   cat > conftest.$ac_ext <<EOF
-#line 3138 "configure"
+#line 3184 "configure"
 #include "confdefs.h"
 
 int main() {
@@ -3152,7 +3198,7 @@ label2:
   
 ; return 0; }
 EOF
-if { (eval echo configure:3156: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:3202: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     RE2C_FLAGS=""
@@ -3218,7 +3264,7 @@ case $host_alias in
       
   gcc_arg_name=ac_cv_gcc_arg_no_cpp_precomp
   echo $ac_n "checking whether $CC supports -no-cpp-precomp""... $ac_c" 1>&6
-echo "configure:3222: checking whether $CC supports -no-cpp-precomp" >&5
+echo "configure:3268: checking whether $CC supports -no-cpp-precomp" >&5
 if eval "test \"`echo '$''{'ac_cv_gcc_arg_no_cpp_precomp'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3419,7 +3465,7 @@ esac
 # Disable PIC mode by default where it is known to be safe to do so,
 # to avoid the performance hit from the lost register
 echo $ac_n "checking whether to force non-PIC code in shared modules""... $ac_c" 1>&6
-echo "configure:3423: checking whether to force non-PIC code in shared modules" >&5
+echo "configure:3469: checking whether to force non-PIC code in shared modules" >&5
 case $host_alias in
   i?86-*-linux*|i?86-*-freebsd*)
     if test "${with_pic+set}" != "set" || test "$with_pic" = "no"; then
@@ -3449,7 +3495,7 @@ esac
 
 
 echo $ac_n "checking whether /dev/urandom exists""... $ac_c" 1>&6
-echo "configure:3453: checking whether /dev/urandom exists" >&5 
+echo "configure:3499: checking whether /dev/urandom exists" >&5 
 if test -r "/dev/urandom" && test -c "/dev/urandom"; then 
   cat >> confdefs.h <<\EOF
 #define HAVE_DEV_URANDOM 1
@@ -3510,7 +3556,7 @@ if test "$cross_compiling" = yes; then
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 3514 "configure"
+#line 3560 "configure"
 #include "confdefs.h"
 
 #include <pthread.h>
@@ -3528,7 +3574,7 @@ int main() {
     return pthread_create(&thd, NULL, thread_routine, &data);
 } 
 EOF
-if { (eval echo configure:3532: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:3578: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   pthreads_working=yes
@@ -3548,7 +3594,7 @@ fi
   CFLAGS=$save_CFLAGS
 
   echo $ac_n "checking for pthreads_cflags""... $ac_c" 1>&6
-echo "configure:3552: checking for pthreads_cflags" >&5
+echo "configure:3598: checking for pthreads_cflags" >&5
 if eval "test \"`echo '$''{'ac_cv_pthreads_cflags'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3570,7 +3616,7 @@ if test "$cross_compiling" = yes; then
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 3574 "configure"
+#line 3620 "configure"
 #include "confdefs.h"
 
 #include <pthread.h>
@@ -3588,7 +3634,7 @@ int main() {
     return pthread_create(&thd, NULL, thread_routine, &data);
 } 
 EOF
-if { (eval echo configure:3592: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:3638: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   pthreads_working=yes
@@ -3618,7 +3664,7 @@ fi
 echo "$ac_t""$ac_cv_pthreads_cflags" 1>&6
 
 echo $ac_n "checking for pthreads_lib""... $ac_c" 1>&6
-echo "configure:3622: checking for pthreads_lib" >&5
+echo "configure:3668: checking for pthreads_lib" >&5
 if eval "test \"`echo '$''{'ac_cv_pthreads_lib'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3640,7 +3686,7 @@ if test "$cross_compiling" = yes; then
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 3644 "configure"
+#line 3690 "configure"
 #include "confdefs.h"
 
 #include <pthread.h>
@@ -3658,7 +3704,7 @@ int main() {
     return pthread_create(&thd, NULL, thread_routine, &data);
 } 
 EOF
-if { (eval echo configure:3662: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:3708: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   pthreads_working=yes
@@ -3789,7 +3835,7 @@ ext_output=$PHP_AOLSERVER
 
 
 echo $ac_n "checking for AOLserver support""... $ac_c" 1>&6
-echo "configure:3793: checking for AOLserver support" >&5
+echo "configure:3839: checking for AOLserver support" >&5
 
 if test "$PHP_AOLSERVER" != "no"; then
   if test -d "$PHP_AOLSERVER/include"; then
@@ -4054,7 +4100,7 @@ ext_output=$PHP_APXS
 
 
 echo $ac_n "checking for Apache 1.x module support via DSO through APXS""... $ac_c" 1>&6
-echo "configure:4058: checking for Apache 1.x module support via DSO through APXS" >&5
+echo "configure:4104: checking for Apache 1.x module support via DSO through APXS" >&5
 
 if test "$PHP_APXS" != "no"; then
   if test "$PHP_APXS" = "yes"; then
@@ -4385,7 +4431,7 @@ ext_output=$PHP_APACHE
 
 
 echo $ac_n "checking for Apache 1.x module support""... $ac_c" 1>&6
-echo "configure:4389: checking for Apache 1.x module support" >&5
+echo "configure:4435: checking for Apache 1.x module support" >&5
 
 if test "$PHP_SAPI" != "apache" && test "$PHP_APACHE" != "no"; then
   
@@ -5262,7 +5308,7 @@ fi
 php_enable_mod_charset=no
 
 echo $ac_n "checking whether to enable Apache charset compatibility option""... $ac_c" 1>&6
-echo "configure:5266: checking whether to enable Apache charset compatibility option" >&5
+echo "configure:5312: checking whether to enable Apache charset compatibility option" >&5
 # Check whether --enable-mod-charset or --disable-mod-charset was given.
 if test "${enable_mod_charset+set}" = set; then
   enableval="$enable_mod_charset"
@@ -5294,7 +5340,7 @@ if test "$APACHE_MODULE" = "yes"; then
         
   gcc_arg_name=ac_cv_gcc_arg_rdynamic
   echo $ac_n "checking whether $CC supports -rdynamic""... $ac_c" 1>&6
-echo "configure:5298: checking whether $CC supports -rdynamic" >&5
+echo "configure:5344: checking whether $CC supports -rdynamic" >&5
 if eval "test \"`echo '$''{'ac_cv_gcc_arg_rdynamic'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -5337,7 +5383,7 @@ if test -n "$APACHE_INSTALL"; then
 
   
 echo $ac_n "checking for member fd in BUFF *""... $ac_c" 1>&6
-echo "configure:5341: checking for member fd in BUFF *" >&5
+echo "configure:5387: checking for member fd in BUFF *" >&5
 if eval "test \"`echo '$''{'ac_cv_php_fd_in_buff'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -5349,14 +5395,14 @@ else
     CPPFLAGS="$CPPFLAGS $APACHE_INCLUDE"
   fi
   cat > conftest.$ac_ext <<EOF
-#line 5353 "configure"
+#line 5399 "configure"
 #include "confdefs.h"
 #include <httpd.h>
 int main() {
 conn_rec *c; int fd = c->client->fd;
 ; return 0; }
 EOF
-if { (eval echo configure:5360: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:5406: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     ac_cv_php_fd_in_buff=yes
@@ -5429,7 +5475,7 @@ ext_output=$PHP_APXS2FILTER
 
 
 echo $ac_n "checking for Apache 2.0 filter-module support via DSO through APXS""... $ac_c" 1>&6
-echo "configure:5433: checking for Apache 2.0 filter-module support via DSO through APXS" >&5
+echo "configure:5479: checking for Apache 2.0 filter-module support via DSO through APXS" >&5
 
 if test "$PHP_APXS2FILTER" != "no"; then
   if test "$PHP_APXS2FILTER" = "yes"; then
@@ -6318,7 +6364,7 @@ ext_output=$PHP_APXS2
 
 
 echo $ac_n "checking for Apache 2.0 handler-module support via DSO through APXS""... $ac_c" 1>&6
-echo "configure:6322: checking for Apache 2.0 handler-module support via DSO through APXS" >&5
+echo "configure:6368: checking for Apache 2.0 handler-module support via DSO through APXS" >&5
 
 if test "$PHP_APXS2" != "no"; then
   if test "$PHP_APXS2" = "yes"; then
@@ -7208,7 +7254,7 @@ ext_output=$PHP_APACHE_HOOKS
 
 
 echo $ac_n "checking for Apache 1.x (hooks) module support via DSO through APXS""... $ac_c" 1>&6
-echo "configure:7212: checking for Apache 1.x (hooks) module support via DSO through APXS" >&5
+echo "configure:7258: checking for Apache 1.x (hooks) module support via DSO through APXS" >&5
 
 if test "$PHP_APACHE_HOOKS" != "no"; then
   if test "$PHP_APACHE_HOOKS" = "yes"; then
@@ -7539,7 +7585,7 @@ ext_output=$PHP_APACHE_HOOKS_STATIC
 
 
 echo $ac_n "checking for Apache 1.x (hooks) module support""... $ac_c" 1>&6
-echo "configure:7543: checking for Apache 1.x (hooks) module support" >&5
+echo "configure:7589: checking for Apache 1.x (hooks) module support" >&5
 
 if test "$PHP_SAPI" != "apache" && test "$PHP_SAPI" != "apache_hooks" && test "$PHP_APACHE_HOOKS_STATIC" != "no"; then
 
@@ -8416,7 +8462,7 @@ fi
 php_enable_mod_charset=no
 
 echo $ac_n "checking whether to enable Apache charset compatibility option""... $ac_c" 1>&6
-echo "configure:8420: checking whether to enable Apache charset compatibility option" >&5
+echo "configure:8466: checking whether to enable Apache charset compatibility option" >&5
 # Check whether --enable-mod-charset or --disable-mod-charset was given.
 if test "${enable_mod_charset+set}" = set; then
   enableval="$enable_mod_charset"
@@ -8448,7 +8494,7 @@ if test "$APACHE_HOOKS_MODULE" = "yes";
         
   gcc_arg_name=ac_cv_gcc_arg_rdynamic
   echo $ac_n "checking whether $CC supports -rdynamic""... $ac_c" 1>&6
-echo "configure:8452: checking whether $CC supports -rdynamic" >&5
+echo "configure:8498: checking whether $CC supports -rdynamic" >&5
 if eval "test \"`echo '$''{'ac_cv_gcc_arg_rdynamic'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -8491,7 +8537,7 @@ if test -n "$APACHE_HOOKS_INSTALL"; then
 
   
 echo $ac_n "checking for member fd in BUFF *""... $ac_c" 1>&6
-echo "configure:8495: checking for member fd in BUFF *" >&5
+echo "configure:8541: checking for member fd in BUFF *" >&5
 if eval "test \"`echo '$''{'ac_cv_php_fd_in_buff'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -8503,14 +8549,14 @@ else
     CPPFLAGS="$CPPFLAGS $APACHE_INCLUDE"
   fi
   cat > conftest.$ac_ext <<EOF
-#line 8507 "configure"
+#line 8553 "configure"
 #include "confdefs.h"
 #include <httpd.h>
 int main() {
 conn_rec *c; int fd = c->client->fd;
 ; return 0; }
 EOF
-if { (eval echo configure:8514: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:8560: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     ac_cv_php_fd_in_buff=yes
@@ -8584,7 +8630,7 @@ ext_output=$PHP_CAUDIUM
 
 
 echo $ac_n "checking for Caudium support""... $ac_c" 1>&6
-echo "configure:8588: checking for Caudium support" >&5
+echo "configure:8634: checking for Caudium support" >&5
 
 if test "$PHP_CAUDIUM" != "no"; then
   if test "$prefix" = "NONE"; then CPREF=/usr/local/; fi
@@ -8654,7 +8700,7 @@ if test "$PHP_CAUDIUM" != "no"; then
       PIKE_C_INCLUDE=/usr/local/include/`basename $PIKE`
     fi
     echo $ac_n "checking for C includes in $PIKE_C_INCLUDE""... $ac_c" 1>&6
-echo "configure:8658: checking for C includes in $PIKE_C_INCLUDE" >&5
+echo "configure:8704: checking for C includes in $PIKE_C_INCLUDE" >&5
     if test -f $PIKE_C_INCLUDE/version.h; then
       PIKE_TEST_VER=`$PIKE -e 'string v; int rel;sscanf(version(), "Pike v%s release %d", v, rel); write(v+"."+rel);'`
       ###### VERSION MATCH CHECK #######
@@ -8943,7 +8989,7 @@ ext_output=$PHP_CLI
 
 
 echo $ac_n "checking for CLI build""... $ac_c" 1>&6
-echo "configure:8947: checking for CLI build" >&5
+echo "configure:8993: checking for CLI build" >&5
 if test "$PHP_CLI" != "no"; then
   
   src=$abs_srcdir/sapi/cli/Makefile.frag
@@ -8993,7 +9039,7 @@ echo "$ac_t""$PHP_CLI" 1>&6
 php_with_continuity=no
 
 echo $ac_n "checking for Continuity support""... $ac_c" 1>&6
-echo "configure:8997: checking for Continuity support" >&5
+echo "configure:9043: checking for Continuity support" >&5
 # Check whether --with-continuity or --without-continuity was given.
 if test "${with_continuity+set}" = set; then
   withval="$with_continuity"
@@ -9017,7 +9063,7 @@ if test "$PHP_CONTINUITY" != "no"; then
     { echo "configure: error: Please specify the path to the root of your Continuity server using --with-continuity=DIR" 1>&2; exit 1; }
   fi
   echo $ac_n "checking for Continuity include files""... $ac_c" 1>&6
-echo "configure:9021: checking for Continuity include files" >&5
+echo "configure:9067: checking for Continuity include files" >&5
   if test -d $PHP_CONTINUITY/include ; then
     CAPI_INCLUDE=$PHP_CONTINUITY/include
     echo "$ac_t""Continuity Binary Distribution" 1>&6
@@ -9275,7 +9321,7 @@ ext_output=$PHP_EMBED
 
 
 echo $ac_n "checking for embedded SAPI library support""... $ac_c" 1>&6
-echo "configure:9279: checking for embedded SAPI library support" >&5
+echo "configure:9325: checking for embedded SAPI library support" >&5
 
 if test "$PHP_EMBED" != "no"; then
   case "$PHP_EMBED" in
@@ -9534,7 +9580,7 @@ ext_output=$PHP_FPM
 
 
 echo $ac_n "checking for FPM build""... $ac_c" 1>&6
-echo "configure:9538: checking for FPM build" >&5
+echo "configure:9584: checking for FPM build" >&5
 if test "$PHP_FPM" != "no"; then
   echo "$ac_t""$PHP_FPM" 1>&6
 
@@ -9542,12 +9588,12 @@ if test "$PHP_FPM" != "no"; then
   for ac_func in setenv clearenv setproctitle
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:9546: checking for $ac_func" >&5
+echo "configure:9592: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 9551 "configure"
+#line 9597 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -9570,7 +9616,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:9574: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:9620: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -9597,14 +9643,14 @@ done
 
   
 echo $ac_n "checking for library containing socket""... $ac_c" 1>&6
-echo "configure:9601: checking for library containing socket" >&5
+echo "configure:9647: checking for library containing socket" >&5
 if eval "test \"`echo '$''{'ac_cv_search_socket'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_func_search_save_LIBS="$LIBS"
 ac_cv_search_socket="no"
 cat > conftest.$ac_ext <<EOF
-#line 9608 "configure"
+#line 9654 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -9615,7 +9661,7 @@ int main() {
 socket()
 ; return 0; }
 EOF
-if { (eval echo configure:9619: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:9665: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_search_socket="none required"
 else
@@ -9626,7 +9672,7 @@ rm -f conftest*
 test "$ac_cv_search_socket" = "no" && for i in socket; do
 LIBS="-l$i  $ac_func_search_save_LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 9630 "configure"
+#line 9676 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -9637,7 +9683,7 @@ int main() {
 socket()
 ; return 0; }
 EOF
-if { (eval echo configure:9641: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:9687: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_search_socket="-l$i"
 break
@@ -9659,14 +9705,14 @@ else :
 fi
   
 echo $ac_n "checking for library containing inet_addr""... $ac_c" 1>&6
-echo "configure:9663: checking for library containing inet_addr" >&5
+echo "configure:9709: checking for library containing inet_addr" >&5
 if eval "test \"`echo '$''{'ac_cv_search_inet_addr'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_func_search_save_LIBS="$LIBS"
 ac_cv_search_inet_addr="no"
 cat > conftest.$ac_ext <<EOF
-#line 9670 "configure"
+#line 9716 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -9677,7 +9723,7 @@ int main() {
 inet_addr()
 ; return 0; }
 EOF
-if { (eval echo configure:9681: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:9727: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_search_inet_addr="none required"
 else
@@ -9688,7 +9734,7 @@ rm -f conftest*
 test "$ac_cv_search_inet_addr" = "no" && for i in nsl; do
 LIBS="-l$i  $ac_func_search_save_LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 9692 "configure"
+#line 9738 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -9699,7 +9745,7 @@ int main() {
 inet_addr()
 ; return 0; }
 EOF
-if { (eval echo configure:9703: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:9749: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_search_inet_addr="-l$i"
 break
@@ -9724,17 +9770,17 @@ fi
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:9728: checking for $ac_hdr" >&5
+echo "configure:9774: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 9733 "configure"
+#line 9779 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:9738: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:9784: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -9764,17 +9810,17 @@ done
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:9768: checking for $ac_hdr" >&5
+echo "configure:9814: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 9773 "configure"
+#line 9819 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:9778: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:9824: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -9804,17 +9850,17 @@ done
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:9808: checking for $ac_hdr" >&5
+echo "configure:9854: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 9813 "configure"
+#line 9859 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:9818: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:9864: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -9843,17 +9889,17 @@ done
 
   
   echo $ac_n "checking for prctl""... $ac_c" 1>&6
-echo "configure:9847: checking for prctl" >&5
+echo "configure:9893: checking for prctl" >&5
 
   cat > conftest.$ac_ext <<EOF
-#line 9850 "configure"
+#line 9896 "configure"
 #include "confdefs.h"
  #include <sys/prctl.h> 
 int main() {
 prctl(0, 0, 0, 0, 0);
 ; return 0; }
 EOF
-if { (eval echo configure:9857: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:9903: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     cat >> confdefs.h <<\EOF
@@ -9876,17 +9922,17 @@ rm -f conftest*
   have_clock_gettime=no
 
   echo $ac_n "checking for clock_gettime""... $ac_c" 1>&6
-echo "configure:9880: checking for clock_gettime" >&5
+echo "configure:9926: checking for clock_gettime" >&5
 
   cat > conftest.$ac_ext <<EOF
-#line 9883 "configure"
+#line 9929 "configure"
 #include "confdefs.h"
  #include <time.h> 
 int main() {
 struct timespec ts; clock_gettime(CLOCK_MONOTONIC, &ts);
 ; return 0; }
 EOF
-if { (eval echo configure:9890: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:9936: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   
     have_clock_gettime=yes
@@ -9904,20 +9950,20 @@ rm -f conftest*
 
   if test "$have_clock_gettime" = "no"; then
     echo $ac_n "checking for clock_gettime in -lrt""... $ac_c" 1>&6
-echo "configure:9908: checking for clock_gettime in -lrt" >&5
+echo "configure:9954: checking for clock_gettime in -lrt" >&5
 
     SAVED_LIBS="$LIBS"
     LIBS="$LIBS -lrt"
 
     cat > conftest.$ac_ext <<EOF
-#line 9914 "configure"
+#line 9960 "configure"
 #include "confdefs.h"
  #include <time.h> 
 int main() {
 struct timespec ts; clock_gettime(CLOCK_MONOTONIC, &ts);
 ; return 0; }
 EOF
-if { (eval echo configure:9921: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:9967: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   
       have_clock_gettime=yes
@@ -9946,13 +9992,13 @@ EOF
 
   if test "$have_clock_gettime" = "no"; then
     echo $ac_n "checking for clock_get_time""... $ac_c" 1>&6
-echo "configure:9950: checking for clock_get_time" >&5
+echo "configure:9996: checking for clock_get_time" >&5
 
     if test "$cross_compiling" = yes; then
     { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
 else
   cat > conftest.$ac_ext <<EOF
-#line 9956 "configure"
+#line 10002 "configure"
 #include "confdefs.h"
  #include <mach/mach.h>
       #include <mach/clock.h>
@@ -9976,7 +10022,7 @@ else
       }
     
 EOF
-if { (eval echo configure:9980: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:10026: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
       have_clock_get_time=yes
@@ -10007,10 +10053,10 @@ EOF
   have_broken_ptrace=no
 
   echo $ac_n "checking for ptrace""... $ac_c" 1>&6
-echo "configure:10011: checking for ptrace" >&5
+echo "configure:10057: checking for ptrace" >&5
 
   cat > conftest.$ac_ext <<EOF
-#line 10014 "configure"
+#line 10060 "configure"
 #include "confdefs.h"
 
     #include <sys/types.h>
@@ -10019,7 +10065,7 @@ int main() {
 ptrace(0, 0, (void *) 0, 0);
 ; return 0; }
 EOF
-if { (eval echo configure:10023: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:10069: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     have_ptrace=yes
@@ -10037,13 +10083,13 @@ rm -f conftest*
 
   if test "$have_ptrace" = "yes"; then
     echo $ac_n "checking whether ptrace works""... $ac_c" 1>&6
-echo "configure:10041: checking whether ptrace works" >&5
+echo "configure:10087: checking whether ptrace works" >&5
 
     if test "$cross_compiling" = yes; then
     { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
 else
   cat > conftest.$ac_ext <<EOF
-#line 10047 "configure"
+#line 10093 "configure"
 #include "confdefs.h"
 
       #include <unistd.h>
@@ -10114,7 +10160,7 @@ else
       }
     
 EOF
-if { (eval echo configure:10118: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:10164: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
       echo "$ac_t""yes" 1>&6
@@ -10145,10 +10191,10 @@ EOF
 
   if test "$have_broken_ptrace" = "yes"; then
     echo $ac_n "checking for mach_vm_read""... $ac_c" 1>&6
-echo "configure:10149: checking for mach_vm_read" >&5
+echo "configure:10195: checking for mach_vm_read" >&5
 
     cat > conftest.$ac_ext <<EOF
-#line 10152 "configure"
+#line 10198 "configure"
 #include "confdefs.h"
  #include <mach/mach.h>
       #include <mach/mach_vm.h>
@@ -10159,7 +10205,7 @@ int main() {
     
 ; return 0; }
 EOF
-if { (eval echo configure:10163: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:10209: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
       have_mach_vm_read=yes
@@ -10195,13 +10241,13 @@ EOF
 
   if test -n "$proc_mem_file" ; then
     echo $ac_n "checking for proc mem file""... $ac_c" 1>&6
-echo "configure:10199: checking for proc mem file" >&5
+echo "configure:10245: checking for proc mem file" >&5
   
     if test "$cross_compiling" = yes; then
     { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
 else
   cat > conftest.$ac_ext <<EOF
-#line 10205 "configure"
+#line 10251 "configure"
 #include "confdefs.h"
 
       #define _GNU_SOURCE
@@ -10231,7 +10277,7 @@ else
       }
     
 EOF
-if { (eval echo configure:10235: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:10281: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
       echo "$ac_t""$proc_mem_file" 1>&6
@@ -10275,9 +10321,9 @@ EOF
 
   
   echo $ac_n "checking if gcc supports __sync_bool_compare_and_swap""... $ac_c" 1>&6
-echo "configure:10279: checking if gcc supports __sync_bool_compare_and_swap" >&5
+echo "configure:10325: checking if gcc supports __sync_bool_compare_and_swap" >&5
   cat > conftest.$ac_ext <<EOF
-#line 10281 "configure"
+#line 10327 "configure"
 #include "confdefs.h"
 
 int main() {
@@ -10288,7 +10334,7 @@ int main() {
   
 ; return 0; }
 EOF
-if { (eval echo configure:10292: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:10338: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   
     echo "$ac_t""yes" 1>&6
@@ -10311,17 +10357,17 @@ rm -f conftest*
   have_lq=no
 
   echo $ac_n "checking for TCP_INFO""... $ac_c" 1>&6
-echo "configure:10315: checking for TCP_INFO" >&5
+echo "configure:10361: checking for TCP_INFO" >&5
 
   cat > conftest.$ac_ext <<EOF
-#line 10318 "configure"
+#line 10364 "configure"
 #include "confdefs.h"
  #include <netinet/tcp.h> 
 int main() {
 struct tcp_info ti; int x = TCP_INFO;
 ; return 0; }
 EOF
-if { (eval echo configure:10325: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:10371: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     have_lq=tcp_info
@@ -10346,17 +10392,17 @@ EOF
 
   if test "$have_lq" = "no" ; then
     echo $ac_n "checking for SO_LISTENQLEN""... $ac_c" 1>&6
-echo "configure:10350: checking for SO_LISTENQLEN" >&5
+echo "configure:10396: checking for SO_LISTENQLEN" >&5
 
     cat > conftest.$ac_ext <<EOF
-#line 10353 "configure"
+#line 10399 "configure"
 #include "confdefs.h"
  #include <sys/socket.h> 
 int main() {
 int x = SO_LISTENQLIMIT; int y = SO_LISTENQLEN;
 ; return 0; }
 EOF
-if { (eval echo configure:10360: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:10406: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
       have_lq=so_listenq
@@ -10732,7 +10778,7 @@ fi
 php_with_isapi=no
 
 echo $ac_n "checking for Zeus ISAPI support""... $ac_c" 1>&6
-echo "configure:10736: checking for Zeus ISAPI support" >&5
+echo "configure:10782: checking for Zeus ISAPI support" >&5
 # Check whether --with-isapi or --without-isapi was given.
 if test "${with_isapi+set}" = set; then
   withval="$with_isapi"
@@ -10986,7 +11032,7 @@ fi
 
 
 echo $ac_n "checking for LiteSpeed support""... $ac_c" 1>&6
-echo "configure:10990: checking for LiteSpeed support" >&5
+echo "configure:11036: checking for LiteSpeed support" >&5
 
 
 php_with_litespeed=no
@@ -11249,7 +11295,7 @@ echo "$ac_t""$PHP_LITESPEED" 1>&6
 php_with_milter=no
 
 echo $ac_n "checking for Milter support""... $ac_c" 1>&6
-echo "configure:11253: checking for Milter support" >&5
+echo "configure:11299: checking for Milter support" >&5
 # Check whether --with-milter or --without-milter was given.
 if test "${with_milter+set}" = set; then
   withval="$with_milter"
@@ -11541,7 +11587,7 @@ fi
 php_with_nsapi=no
 
 echo $ac_n "checking for NSAPI support""... $ac_c" 1>&6
-echo "configure:11545: checking for NSAPI support" >&5
+echo "configure:11591: checking for NSAPI support" >&5
 # Check whether --with-nsapi or --without-nsapi was given.
 if test "${with_nsapi+set}" = set; then
   withval="$with_nsapi"
@@ -11565,7 +11611,7 @@ if test "$PHP_NSAPI" != "no"; then
     { echo "configure: error: Please specify the path to the root of your Netscape/iPlanet/Sun Webserver using --with-nsapi=DIR" 1>&2; exit 1; }
   fi
   echo $ac_n "checking for NSAPI include files""... $ac_c" 1>&6
-echo "configure:11569: checking for NSAPI include files" >&5
+echo "configure:11615: checking for NSAPI include files" >&5
   if test -d $PHP_NSAPI/include ; then
     NSAPI_INC_DIR="$PHP_NSAPI/include"
     echo "$ac_t""Netscape 3.x / Sun 7.x style" 1>&6
@@ -11573,17 +11619,17 @@ echo "configure:11569: checking for NSAP
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:11577: checking for $ac_hdr" >&5
+echo "configure:11623: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 11582 "configure"
+#line 11628 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:11587: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:11633: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -11618,17 +11664,17 @@ done
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:11622: checking for $ac_hdr" >&5
+echo "configure:11668: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 11627 "configure"
+#line 11673 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:11632: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:11678: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -11901,7 +11947,7 @@ fi
 php_with_phttpd=no
 
 echo $ac_n "checking for PHTTPD support""... $ac_c" 1>&6
-echo "configure:11905: checking for PHTTPD support" >&5
+echo "configure:11951: checking for PHTTPD support" >&5
 # Check whether --with-phttpd or --without-phttpd was given.
 if test "${with_phttpd+set}" = set; then
   withval="$with_phttpd"
@@ -12155,7 +12201,7 @@ fi
 php_with_pi3web=no
 
 echo $ac_n "checking for Pi3Web support""... $ac_c" 1>&6
-echo "configure:12159: checking for Pi3Web support" >&5
+echo "configure:12205: checking for Pi3Web support" >&5
 # Check whether --with-pi3web or --without-pi3web was given.
 if test "${with_pi3web+set}" = set; then
   withval="$with_pi3web"
@@ -12527,7 +12573,7 @@ ext_output=$PHP_ROXEN
 php_enable_roxen_zts=no
 
 echo $ac_n "checking whether Roxen module is build using ZTS""... $ac_c" 1>&6
-echo "configure:12531: checking whether Roxen module is build using ZTS" >&5
+echo "configure:12577: checking whether Roxen module is build using ZTS" >&5
 # Check whether --enable-roxen-zts or --disable-roxen-zts was given.
 if test "${enable_roxen_zts+set}" = set; then
   enableval="$enable_roxen_zts"
@@ -12548,7 +12594,7 @@ echo "$ac_t""$ext_output" 1>&6
 
 RESULT=
 echo $ac_n "checking for Roxen/Pike support""... $ac_c" 1>&6
-echo "configure:12552: checking for Roxen/Pike support" >&5
+echo "configure:12598: checking for Roxen/Pike support" >&5
 if test "$PHP_ROXEN" != "no"; then
   if test ! -d $PHP_ROXEN ; then
     { echo "configure: error: You did not specify a directory" 1>&2; exit 1; }
@@ -12834,7 +12880,7 @@ ext_output=$PHP_THTTPD
 
 
 echo $ac_n "checking for thttpd""... $ac_c" 1>&6
-echo "configure:12838: checking for thttpd" >&5
+echo "configure:12884: checking for thttpd" >&5
 
 if test "$PHP_THTTPD" != "no"; then
   if test ! -d $PHP_THTTPD; then
@@ -12867,7 +12913,7 @@ if test "$PHP_THTTPD" != "no"; then
         
   gcc_arg_name=ac_cv_gcc_arg_rdynamic
   echo $ac_n "checking whether $CC supports -rdynamic""... $ac_c" 1>&6
-echo "configure:12871: checking whether $CC supports -rdynamic" >&5
+echo "configure:12917: checking whether $CC supports -rdynamic" >&5
 if eval "test \"`echo '$''{'ac_cv_gcc_arg_rdynamic'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -13103,24 +13149,24 @@ ext_output=$PHP_TUX
 
 
 echo $ac_n "checking for TUX""... $ac_c" 1>&6
-echo "configure:13107: checking for TUX" >&5
+echo "configure:13153: checking for TUX" >&5
 if test "$PHP_TUX" != "no"; then
   INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED $PHP_TUX/php5.tux.so"
   for ac_hdr in tuxmodule.h
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:13114: checking for $ac_hdr" >&5
+echo "configure:13160: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 13119 "configure"
+#line 13165 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:13124: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:13170: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -13357,7 +13403,7 @@ ext_output=$PHP_WEBJAMES
 
 
 echo $ac_n "checking for webjames""... $ac_c" 1>&6
-echo "configure:13361: checking for webjames" >&5
+echo "configure:13407: checking for webjames" >&5
 
 if test "$PHP_WEBJAMES" != "no"; then
   
@@ -13617,14 +13663,14 @@ ext_output=$PHP_CGI
 
 if test "$PHP_SAPI" = "default"; then
   echo $ac_n "checking whether to build CGI binary""... $ac_c" 1>&6
-echo "configure:13621: checking whether to build CGI binary" >&5
+echo "configure:13667: checking whether to build CGI binary" >&5
   if test "$PHP_CGI" != "no"; then
     echo "$ac_t""yes" 1>&6
 
     echo $ac_n "checking for socklen_t in sys/socket.h""... $ac_c" 1>&6
-echo "configure:13626: checking for socklen_t in sys/socket.h" >&5
+echo "configure:13672: checking for socklen_t in sys/socket.h" >&5
     cat > conftest.$ac_ext <<EOF
-#line 13628 "configure"
+#line 13674 "configure"
 #include "confdefs.h"
 #include <sys/socket.h>
 EOF
@@ -13644,9 +13690,9 @@ rm -f conftest*
 
 
     echo $ac_n "checking for sun_len in sys/un.h""... $ac_c" 1>&6
-echo "configure:13648: checking for sun_len in sys/un.h" >&5
+echo "configure:13694: checking for sun_len in sys/un.h" >&5
     cat > conftest.$ac_ext <<EOF
-#line 13650 "configure"
+#line 13696 "configure"
 #include "confdefs.h"
 #include <sys/un.h>
 EOF
@@ -13666,7 +13712,7 @@ rm -f conftest*
 
 
     echo $ac_n "checking whether cross-process locking is required by accept()""... $ac_c" 1>&6
-echo "configure:13670: checking whether cross-process locking is required by accept()" >&5
+echo "configure:13716: checking whether cross-process locking is required by accept()" >&5
     case "`uname -sr`" in
       IRIX\ 5.* | SunOS\ 5.* | UNIX_System_V\ 4.0)	
         echo "$ac_t""yes" 1>&6
@@ -13910,7 +13956,7 @@ fi
 
 
 echo $ac_n "checking for chosen SAPI module""... $ac_c" 1>&6
-echo "configure:13914: checking for chosen SAPI module" >&5
+echo "configure:13960: checking for chosen SAPI module" >&5
 echo "$ac_t""$PHP_SAPI" 1>&6
 
 if test "$enable_maintainer_zts" = "yes"; then
@@ -13967,7 +14013,7 @@ fi
   # Extract the first word of "sendmail", so it can be a program name with args.
 set dummy sendmail; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:13971: checking for $ac_word" >&5
+echo "configure:14017: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_PROG_SENDMAIL'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -14006,7 +14052,7 @@ fi
 
 
   echo $ac_n "checking whether system uses EBCDIC""... $ac_c" 1>&6
-echo "configure:14010: checking whether system uses EBCDIC" >&5
+echo "configure:14056: checking whether system uses EBCDIC" >&5
 if eval "test \"`echo '$''{'ac_cv_ebcdic'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -14017,7 +14063,7 @@ else
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 14021 "configure"
+#line 14067 "configure"
 #include "confdefs.h"
 
 int main(void) { 
@@ -14025,7 +14071,7 @@ int main(void) {
 } 
 
 EOF
-if { (eval echo configure:14029: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:14075: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   ac_cv_ebcdic=yes
@@ -14053,7 +14099,7 @@ EOF
 
 
 echo $ac_n "checking whether byte ordering is bigendian""... $ac_c" 1>&6
-echo "configure:14057: checking whether byte ordering is bigendian" >&5
+echo "configure:14103: checking whether byte ordering is bigendian" >&5
 if eval "test \"`echo '$''{'ac_cv_c_bigendian_php'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -14063,7 +14109,7 @@ else
   ac_cv_c_bigendian_php=unknown
 else
   cat > conftest.$ac_ext <<EOF
-#line 14067 "configure"
+#line 14113 "configure"
 #include "confdefs.h"
 
 int main(void)
@@ -14079,7 +14125,7 @@ int main(void)
 }
   
 EOF
-if { (eval echo configure:14083: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:14129: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_c_bigendian_php=yes
 else
@@ -14105,7 +14151,7 @@ EOF
 
 
   echo $ac_n "checking whether writing to stdout works""... $ac_c" 1>&6
-echo "configure:14109: checking whether writing to stdout works" >&5
+echo "configure:14155: checking whether writing to stdout works" >&5
 if eval "test \"`echo '$''{'ac_cv_write_stdout'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -14116,7 +14162,7 @@ else
     
 else
   cat > conftest.$ac_ext <<EOF
-#line 14120 "configure"
+#line 14166 "configure"
 #include "confdefs.h"
 
 #ifdef HAVE_UNISTD_H
@@ -14134,7 +14180,7 @@ main()
 }
     
 EOF
-if { (eval echo configure:14138: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:14184: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
       ac_cv_write_stdout=yes
@@ -14209,12 +14255,12 @@ test -d /usr/ucblib &&
   unset found
   
   echo $ac_n "checking for socket""... $ac_c" 1>&6
-echo "configure:14213: checking for socket" >&5
+echo "configure:14259: checking for socket" >&5
 if eval "test \"`echo '$''{'ac_cv_func_socket'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 14218 "configure"
+#line 14264 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char socket(); below.  */
@@ -14237,7 +14283,7 @@ socket();
 
 ; return 0; }
 EOF
-if { (eval echo configure:14241: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:14287: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_socket=yes"
 else
@@ -14255,12 +14301,12 @@ if eval "test \"`echo '$ac_cv_func_'sock
 else
   echo "$ac_t""no" 1>&6
  echo $ac_n "checking for __socket""... $ac_c" 1>&6
-echo "configure:14259: checking for __socket" >&5
+echo "configure:14305: checking for __socket" >&5
 if eval "test \"`echo '$''{'ac_cv_func___socket'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 14264 "configure"
+#line 14310 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char __socket(); below.  */
@@ -14283,7 +14329,7 @@ __socket();
 
 ; return 0; }
 EOF
-if { (eval echo configure:14287: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:14333: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func___socket=yes"
 else
@@ -14321,7 +14367,7 @@ EOF
   unset ac_cv_lib_socket___socket
   unset found
   echo $ac_n "checking for socket in -lsocket""... $ac_c" 1>&6
-echo "configure:14325: checking for socket in -lsocket" >&5
+echo "configure:14371: checking for socket in -lsocket" >&5
 ac_lib_var=`echo socket'_'socket | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -14329,7 +14375,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lsocket  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 14333 "configure"
+#line 14379 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -14340,7 +14386,7 @@ int main() {
 socket()
 ; return 0; }
 EOF
-if { (eval echo configure:14344: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:14390: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -14360,7 +14406,7 @@ else
   echo "$ac_t""no" 1>&6
 
     echo $ac_n "checking for __socket in -lsocket""... $ac_c" 1>&6
-echo "configure:14364: checking for __socket in -lsocket" >&5
+echo "configure:14410: checking for __socket in -lsocket" >&5
 ac_lib_var=`echo socket'_'__socket | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -14368,7 +14414,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lsocket  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 14372 "configure"
+#line 14418 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -14379,7 +14425,7 @@ int main() {
 __socket()
 ; return 0; }
 EOF
-if { (eval echo configure:14383: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:14429: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -14411,11 +14457,11 @@ fi
   found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 14415 "configure"
+#line 14461 "configure"
 #include "confdefs.h"
 main() { return (0); }
 EOF
-if { (eval echo configure:14419: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:14465: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   found=yes
 else
@@ -14466,12 +14512,12 @@ EOF
   unset found
   
   echo $ac_n "checking for socketpair""... $ac_c" 1>&6
-echo "configure:14470: checking for socketpair" >&5
+echo "configure:14516: checking for socketpair" >&5
 if eval "test \"`echo '$''{'ac_cv_func_socketpair'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 14475 "configure"
+#line 14521 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char socketpair(); below.  */
@@ -14494,7 +14540,7 @@ socketpair();
 
 ; return 0; }
 EOF
-if { (eval echo configure:14498: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:14544: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_socketpair=yes"
 else
@@ -14512,12 +14558,12 @@ if eval "test \"`echo '$ac_cv_func_'sock
 else
   echo "$ac_t""no" 1>&6
  echo $ac_n "checking for __socketpair""... $ac_c" 1>&6
-echo "configure:14516: checking for __socketpair" >&5
+echo "configure:14562: checking for __socketpair" >&5
 if eval "test \"`echo '$''{'ac_cv_func___socketpair'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 14521 "configure"
+#line 14567 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char __socketpair(); below.  */
@@ -14540,7 +14586,7 @@ __socketpair();
 
 ; return 0; }
 EOF
-if { (eval echo configure:14544: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:14590: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func___socketpair=yes"
 else
@@ -14578,7 +14624,7 @@ EOF
   unset ac_cv_lib_socket___socketpair
   unset found
   echo $ac_n "checking for socketpair in -lsocket""... $ac_c" 1>&6
-echo "configure:14582: checking for socketpair in -lsocket" >&5
+echo "configure:14628: checking for socketpair in -lsocket" >&5
 ac_lib_var=`echo socket'_'socketpair | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -14586,7 +14632,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lsocket  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 14590 "configure"
+#line 14636 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -14597,7 +14643,7 @@ int main() {
 socketpair()
 ; return 0; }
 EOF
-if { (eval echo configure:14601: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:14647: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -14617,7 +14663,7 @@ else
   echo "$ac_t""no" 1>&6
 
     echo $ac_n "checking for __socketpair in -lsocket""... $ac_c" 1>&6
-echo "configure:14621: checking for __socketpair in -lsocket" >&5
+echo "configure:14667: checking for __socketpair in -lsocket" >&5
 ac_lib_var=`echo socket'_'__socketpair | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -14625,7 +14671,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lsocket  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 14629 "configure"
+#line 14675 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -14636,7 +14682,7 @@ int main() {
 __socketpair()
 ; return 0; }
 EOF
-if { (eval echo configure:14640: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:14686: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -14668,11 +14714,11 @@ fi
   found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 14672 "configure"
+#line 14718 "configure"
 #include "confdefs.h"
 main() { return (0); }
 EOF
-if { (eval echo configure:14676: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:14722: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   found=yes
 else
@@ -14723,12 +14769,12 @@ EOF
   unset found
   
   echo $ac_n "checking for htonl""... $ac_c" 1>&6
-echo "configure:14727: checking for htonl" >&5
+echo "configure:14773: checking for htonl" >&5
 if eval "test \"`echo '$''{'ac_cv_func_htonl'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 14732 "configure"
+#line 14778 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char htonl(); below.  */
@@ -14751,7 +14797,7 @@ htonl();
 
 ; return 0; }
 EOF
-if { (eval echo configure:14755: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:14801: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_htonl=yes"
 else
@@ -14769,12 +14815,12 @@ if eval "test \"`echo '$ac_cv_func_'hton
 else
   echo "$ac_t""no" 1>&6
  echo $ac_n "checking for __htonl""... $ac_c" 1>&6
-echo "configure:14773: checking for __htonl" >&5
+echo "configure:14819: checking for __htonl" >&5
 if eval "test \"`echo '$''{'ac_cv_func___htonl'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 14778 "configure"
+#line 14824 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char __htonl(); below.  */
@@ -14797,7 +14843,7 @@ __htonl();
 
 ; return 0; }
 EOF
-if { (eval echo configure:14801: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:14847: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func___htonl=yes"
 else
@@ -14835,7 +14881,7 @@ EOF
   unset ac_cv_lib_socket___htonl
   unset found
   echo $ac_n "checking for htonl in -lsocket""... $ac_c" 1>&6
-echo "configure:14839: checking for htonl in -lsocket" >&5
+echo "configure:14885: checking for htonl in -lsocket" >&5
 ac_lib_var=`echo socket'_'htonl | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -14843,7 +14889,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lsocket  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 14847 "configure"
+#line 14893 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -14854,7 +14900,7 @@ int main() {
 htonl()
 ; return 0; }
 EOF
-if { (eval echo configure:14858: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:14904: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -14874,7 +14920,7 @@ else
   echo "$ac_t""no" 1>&6
 
     echo $ac_n "checking for __htonl in -lsocket""... $ac_c" 1>&6
-echo "configure:14878: checking for __htonl in -lsocket" >&5
+echo "configure:14924: checking for __htonl in -lsocket" >&5
 ac_lib_var=`echo socket'_'__htonl | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -14882,7 +14928,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lsocket  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 14886 "configure"
+#line 14932 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -14893,7 +14939,7 @@ int main() {
 __htonl()
 ; return 0; }
 EOF
-if { (eval echo configure:14897: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:14943: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -14925,11 +14971,11 @@ fi
   found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 14929 "configure"
+#line 14975 "configure"
 #include "confdefs.h"
 main() { return (0); }
 EOF
-if { (eval echo configure:14933: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:14979: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   found=yes
 else
@@ -14980,12 +15026,12 @@ EOF
   unset found
   
   echo $ac_n "checking for gethostname""... $ac_c" 1>&6
-echo "configure:14984: checking for gethostname" >&5
+echo "configure:15030: checking for gethostname" >&5
 if eval "test \"`echo '$''{'ac_cv_func_gethostname'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 14989 "configure"
+#line 15035 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char gethostname(); below.  */
@@ -15008,7 +15054,7 @@ gethostname();
 
 ; return 0; }
 EOF
-if { (eval echo configure:15012: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15058: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_gethostname=yes"
 else
@@ -15026,12 +15072,12 @@ if eval "test \"`echo '$ac_cv_func_'geth
 else
   echo "$ac_t""no" 1>&6
  echo $ac_n "checking for __gethostname""... $ac_c" 1>&6
-echo "configure:15030: checking for __gethostname" >&5
+echo "configure:15076: checking for __gethostname" >&5
 if eval "test \"`echo '$''{'ac_cv_func___gethostname'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 15035 "configure"
+#line 15081 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char __gethostname(); below.  */
@@ -15054,7 +15100,7 @@ __gethostname();
 
 ; return 0; }
 EOF
-if { (eval echo configure:15058: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15104: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func___gethostname=yes"
 else
@@ -15092,7 +15138,7 @@ EOF
   unset ac_cv_lib_nsl___gethostname
   unset found
   echo $ac_n "checking for gethostname in -lnsl""... $ac_c" 1>&6
-echo "configure:15096: checking for gethostname in -lnsl" >&5
+echo "configure:15142: checking for gethostname in -lnsl" >&5
 ac_lib_var=`echo nsl'_'gethostname | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -15100,7 +15146,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lnsl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 15104 "configure"
+#line 15150 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -15111,7 +15157,7 @@ int main() {
 gethostname()
 ; return 0; }
 EOF
-if { (eval echo configure:15115: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15161: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -15131,7 +15177,7 @@ else
   echo "$ac_t""no" 1>&6
 
     echo $ac_n "checking for __gethostname in -lnsl""... $ac_c" 1>&6
-echo "configure:15135: checking for __gethostname in -lnsl" >&5
+echo "configure:15181: checking for __gethostname in -lnsl" >&5
 ac_lib_var=`echo nsl'_'__gethostname | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -15139,7 +15185,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lnsl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 15143 "configure"
+#line 15189 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -15150,7 +15196,7 @@ int main() {
 __gethostname()
 ; return 0; }
 EOF
-if { (eval echo configure:15154: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15200: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -15182,11 +15228,11 @@ fi
   found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 15186 "configure"
+#line 15232 "configure"
 #include "confdefs.h"
 main() { return (0); }
 EOF
-if { (eval echo configure:15190: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:15236: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   found=yes
 else
@@ -15237,12 +15283,12 @@ EOF
   unset found
   
   echo $ac_n "checking for gethostbyaddr""... $ac_c" 1>&6
-echo "configure:15241: checking for gethostbyaddr" >&5
+echo "configure:15287: checking for gethostbyaddr" >&5
 if eval "test \"`echo '$''{'ac_cv_func_gethostbyaddr'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 15246 "configure"
+#line 15292 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char gethostbyaddr(); below.  */
@@ -15265,7 +15311,7 @@ gethostbyaddr();
 
 ; return 0; }
 EOF
-if { (eval echo configure:15269: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15315: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_gethostbyaddr=yes"
 else
@@ -15283,12 +15329,12 @@ if eval "test \"`echo '$ac_cv_func_'geth
 else
   echo "$ac_t""no" 1>&6
  echo $ac_n "checking for __gethostbyaddr""... $ac_c" 1>&6
-echo "configure:15287: checking for __gethostbyaddr" >&5
+echo "configure:15333: checking for __gethostbyaddr" >&5
 if eval "test \"`echo '$''{'ac_cv_func___gethostbyaddr'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 15292 "configure"
+#line 15338 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char __gethostbyaddr(); below.  */
@@ -15311,7 +15357,7 @@ __gethostbyaddr();
 
 ; return 0; }
 EOF
-if { (eval echo configure:15315: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15361: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func___gethostbyaddr=yes"
 else
@@ -15349,7 +15395,7 @@ EOF
   unset ac_cv_lib_nsl___gethostbyaddr
   unset found
   echo $ac_n "checking for gethostbyaddr in -lnsl""... $ac_c" 1>&6
-echo "configure:15353: checking for gethostbyaddr in -lnsl" >&5
+echo "configure:15399: checking for gethostbyaddr in -lnsl" >&5
 ac_lib_var=`echo nsl'_'gethostbyaddr | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -15357,7 +15403,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lnsl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 15361 "configure"
+#line 15407 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -15368,7 +15414,7 @@ int main() {
 gethostbyaddr()
 ; return 0; }
 EOF
-if { (eval echo configure:15372: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15418: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -15388,7 +15434,7 @@ else
   echo "$ac_t""no" 1>&6
 
     echo $ac_n "checking for __gethostbyaddr in -lnsl""... $ac_c" 1>&6
-echo "configure:15392: checking for __gethostbyaddr in -lnsl" >&5
+echo "configure:15438: checking for __gethostbyaddr in -lnsl" >&5
 ac_lib_var=`echo nsl'_'__gethostbyaddr | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -15396,7 +15442,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lnsl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 15400 "configure"
+#line 15446 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -15407,7 +15453,7 @@ int main() {
 __gethostbyaddr()
 ; return 0; }
 EOF
-if { (eval echo configure:15411: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15457: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -15439,11 +15485,11 @@ fi
   found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 15443 "configure"
+#line 15489 "configure"
 #include "confdefs.h"
 main() { return (0); }
 EOF
-if { (eval echo configure:15447: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:15493: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   found=yes
 else
@@ -15494,12 +15540,12 @@ EOF
   unset found
   
   echo $ac_n "checking for yp_get_default_domain""... $ac_c" 1>&6
-echo "configure:15498: checking for yp_get_default_domain" >&5
+echo "configure:15544: checking for yp_get_default_domain" >&5
 if eval "test \"`echo '$''{'ac_cv_func_yp_get_default_domain'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 15503 "configure"
+#line 15549 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char yp_get_default_domain(); below.  */
@@ -15522,7 +15568,7 @@ yp_get_default_domain();
 
 ; return 0; }
 EOF
-if { (eval echo configure:15526: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15572: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_yp_get_default_domain=yes"
 else
@@ -15540,12 +15586,12 @@ if eval "test \"`echo '$ac_cv_func_'yp_g
 else
   echo "$ac_t""no" 1>&6
  echo $ac_n "checking for __yp_get_default_domain""... $ac_c" 1>&6
-echo "configure:15544: checking for __yp_get_default_domain" >&5
+echo "configure:15590: checking for __yp_get_default_domain" >&5
 if eval "test \"`echo '$''{'ac_cv_func___yp_get_default_domain'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 15549 "configure"
+#line 15595 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char __yp_get_default_domain(); below.  */
@@ -15568,7 +15614,7 @@ __yp_get_default_domain();
 
 ; return 0; }
 EOF
-if { (eval echo configure:15572: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15618: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func___yp_get_default_domain=yes"
 else
@@ -15606,7 +15652,7 @@ EOF
   unset ac_cv_lib_nsl___yp_get_default_domain
   unset found
   echo $ac_n "checking for yp_get_default_domain in -lnsl""... $ac_c" 1>&6
-echo "configure:15610: checking for yp_get_default_domain in -lnsl" >&5
+echo "configure:15656: checking for yp_get_default_domain in -lnsl" >&5
 ac_lib_var=`echo nsl'_'yp_get_default_domain | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -15614,7 +15660,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lnsl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 15618 "configure"
+#line 15664 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -15625,7 +15671,7 @@ int main() {
 yp_get_default_domain()
 ; return 0; }
 EOF
-if { (eval echo configure:15629: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15675: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -15645,7 +15691,7 @@ else
   echo "$ac_t""no" 1>&6
 
     echo $ac_n "checking for __yp_get_default_domain in -lnsl""... $ac_c" 1>&6
-echo "configure:15649: checking for __yp_get_default_domain in -lnsl" >&5
+echo "configure:15695: checking for __yp_get_default_domain in -lnsl" >&5
 ac_lib_var=`echo nsl'_'__yp_get_default_domain | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -15653,7 +15699,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lnsl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 15657 "configure"
+#line 15703 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -15664,7 +15710,7 @@ int main() {
 __yp_get_default_domain()
 ; return 0; }
 EOF
-if { (eval echo configure:15668: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15714: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -15696,11 +15742,11 @@ fi
   found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 15700 "configure"
+#line 15746 "configure"
 #include "confdefs.h"
 main() { return (0); }
 EOF
-if { (eval echo configure:15704: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:15750: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   found=yes
 else
@@ -15752,12 +15798,12 @@ EOF
   unset found
   
   echo $ac_n "checking for dlopen""... $ac_c" 1>&6
-echo "configure:15756: checking for dlopen" >&5
+echo "configure:15802: checking for dlopen" >&5
 if eval "test \"`echo '$''{'ac_cv_func_dlopen'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 15761 "configure"
+#line 15807 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char dlopen(); below.  */
@@ -15780,7 +15826,7 @@ dlopen();
 
 ; return 0; }
 EOF
-if { (eval echo configure:15784: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15830: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_dlopen=yes"
 else
@@ -15798,12 +15844,12 @@ if eval "test \"`echo '$ac_cv_func_'dlop
 else
   echo "$ac_t""no" 1>&6
  echo $ac_n "checking for __dlopen""... $ac_c" 1>&6
-echo "configure:15802: checking for __dlopen" >&5
+echo "configure:15848: checking for __dlopen" >&5
 if eval "test \"`echo '$''{'ac_cv_func___dlopen'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 15807 "configure"
+#line 15853 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char __dlopen(); below.  */
@@ -15826,7 +15872,7 @@ __dlopen();
 
 ; return 0; }
 EOF
-if { (eval echo configure:15830: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15876: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func___dlopen=yes"
 else
@@ -15864,7 +15910,7 @@ EOF
   unset ac_cv_lib_dl___dlopen
   unset found
   echo $ac_n "checking for dlopen in -ldl""... $ac_c" 1>&6
-echo "configure:15868: checking for dlopen in -ldl" >&5
+echo "configure:15914: checking for dlopen in -ldl" >&5
 ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -15872,7 +15918,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-ldl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 15876 "configure"
+#line 15922 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -15883,7 +15929,7 @@ int main() {
 dlopen()
 ; return 0; }
 EOF
-if { (eval echo configure:15887: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15933: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -15903,7 +15949,7 @@ else
   echo "$ac_t""no" 1>&6
 
     echo $ac_n "checking for __dlopen in -ldl""... $ac_c" 1>&6
-echo "configure:15907: checking for __dlopen in -ldl" >&5
+echo "configure:15953: checking for __dlopen in -ldl" >&5
 ac_lib_var=`echo dl'_'__dlopen | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -15911,7 +15957,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-ldl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 15915 "configure"
+#line 15961 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -15922,7 +15968,7 @@ int main() {
 __dlopen()
 ; return 0; }
 EOF
-if { (eval echo configure:15926: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15972: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -15954,11 +16000,11 @@ fi
   found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 15958 "configure"
+#line 16004 "configure"
 #include "confdefs.h"
 main() { return (0); }
 EOF
-if { (eval echo configure:15962: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:16008: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   found=yes
 else
@@ -16010,7 +16056,7 @@ EOF
 
 fi
 echo $ac_n "checking for sin in -lm""... $ac_c" 1>&6
-echo "configure:16014: checking for sin in -lm" >&5
+echo "configure:16060: checking for sin in -lm" >&5
 ac_lib_var=`echo m'_'sin | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -16018,7 +16064,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lm  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 16022 "configure"
+#line 16068 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -16029,7 +16075,7 @@ int main() {
 sin()
 ; return 0; }
 EOF
-if { (eval echo configure:16033: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:16079: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -16063,12 +16109,12 @@ fi
   unset found
   
   echo $ac_n "checking for inet_aton""... $ac_c" 1>&6
-echo "configure:16067: checking for inet_aton" >&5
+echo "configure:16113: checking for inet_aton" >&5
 if eval "test \"`echo '$''{'ac_cv_func_inet_aton'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 16072 "configure"
+#line 16118 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char inet_aton(); below.  */
@@ -16091,7 +16137,7 @@ inet_aton();
 
 ; return 0; }
 EOF
-if { (eval echo configure:16095: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:16141: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_inet_aton=yes"
 else
@@ -16109,12 +16155,12 @@ if eval "test \"`echo '$ac_cv_func_'inet
 else
   echo "$ac_t""no" 1>&6
  echo $ac_n "checking for __inet_aton""... $ac_c" 1>&6
-echo "configure:16113: checking for __inet_aton" >&5
+echo "configure:16159: checking for __inet_aton" >&5
 if eval "test \"`echo '$''{'ac_cv_func___inet_aton'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 16118 "configure"
+#line 16164 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char __inet_aton(); below.  */
@@ -16137,7 +16183,7 @@ __inet_aton();
 
 ; return 0; }
 EOF
-if { (eval echo configure:16141: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:16187: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func___inet_aton=yes"
 else
@@ -16175,7 +16221,7 @@ EOF
   unset ac_cv_lib_resolv___inet_aton
   unset found
   echo $ac_n "checking for inet_aton in -lresolv""... $ac_c" 1>&6
-echo "configure:16179: checking for inet_aton in -lresolv" >&5
+echo "configure:16225: checking for inet_aton in -lresolv" >&5
 ac_lib_var=`echo resolv'_'inet_aton | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -16183,7 +16229,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lresolv  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 16187 "configure"
+#line 16233 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -16194,7 +16240,7 @@ int main() {
 inet_aton()
 ; return 0; }
 EOF
-if { (eval echo configure:16198: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:16244: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -16214,7 +16260,7 @@ else
   echo "$ac_t""no" 1>&6
 
     echo $ac_n "checking for __inet_aton in -lresolv""... $ac_c" 1>&6
-echo "configure:16218: checking for __inet_aton in -lresolv" >&5
+echo "configure:16264: checking for __inet_aton in -lresolv" >&5
 ac_lib_var=`echo resolv'_'__inet_aton | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -16222,7 +16268,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lresolv  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 16226 "configure"
+#line 16272 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -16233,7 +16279,7 @@ int main() {
 __inet_aton()
 ; return 0; }
 EOF
-if { (eval echo configure:16237: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:16283: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -16265,11 +16311,11 @@ fi
   found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 16269 "configure"
+#line 16315 "configure"
 #include "confdefs.h"
 main() { return (0); }
 EOF
-if { (eval echo configure:16273: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:16319: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   found=yes
 else
@@ -16311,7 +16357,7 @@ EOF
   unset ac_cv_lib_bind___inet_aton
   unset found
   echo $ac_n "checking for inet_aton in -lbind""... $ac_c" 1>&6
-echo "configure:16315: checking for inet_aton in -lbind" >&5
+echo "configure:16361: checking for inet_aton in -lbind" >&5
 ac_lib_var=`echo bind'_'inet_aton | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -16319,7 +16365,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lbind  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 16323 "configure"
+#line 16369 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -16330,7 +16376,7 @@ int main() {
 inet_aton()
 ; return 0; }
 EOF
-if { (eval echo configure:16334: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:16380: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -16350,7 +16396,7 @@ else
   echo "$ac_t""no" 1>&6
 
     echo $ac_n "checking for __inet_aton in -lbind""... $ac_c" 1>&6
-echo "configure:16354: checking for __inet_aton in -lbind" >&5
+echo "configure:16400: checking for __inet_aton in -lbind" >&5
 ac_lib_var=`echo bind'_'__inet_aton | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -16358,7 +16404,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lbind  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 16362 "configure"
+#line 16408 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -16369,7 +16415,7 @@ int main() {
 __inet_aton()
 ; return 0; }
 EOF
-if { (eval echo configure:16373: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:16419: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -16401,11 +16447,11 @@ fi
   found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 16405 "configure"
+#line 16451 "configure"
 #include "confdefs.h"
 main() { return (0); }
 EOF
-if { (eval echo configure:16409: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:16455: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   found=yes
 else
@@ -16456,12 +16502,12 @@ EOF
 
 
 echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
-echo "configure:16460: checking for ANSI C header files" >&5
+echo "configure:16506: checking for ANSI C header files" >&5
 if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 16465 "configure"
+#line 16511 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 #include <stdarg.h>
@@ -16469,7 +16515,7 @@ else
 #include <float.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:16473: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:16519: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -16486,7 +16532,7 @@ rm -f conftest*
 if test $ac_cv_header_stdc = yes; then
   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
 cat > conftest.$ac_ext <<EOF
-#line 16490 "configure"
+#line 16536 "configure"
 #include "confdefs.h"
 #include <string.h>
 EOF
@@ -16504,7 +16550,7 @@ fi
 if test $ac_cv_header_stdc = yes; then
   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
 cat > conftest.$ac_ext <<EOF
-#line 16508 "configure"
+#line 16554 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 EOF
@@ -16525,7 +16571,7 @@ if test "$cross_compiling" = yes; then
   :
 else
   cat > conftest.$ac_ext <<EOF
-#line 16529 "configure"
+#line 16575 "configure"
 #include "confdefs.h"
 #include <ctype.h>
 #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
@@ -16536,7 +16582,7 @@ if (XOR (islower (i), ISLOWER (i)) || to
 exit (0); }
 
 EOF
-if { (eval echo configure:16540: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:16586: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   :
 else
@@ -16564,12 +16610,12 @@ for ac_hdr in dirent.h sys/ndir.h sys/di
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr that defines DIR""... $ac_c" 1>&6
-echo "configure:16568: checking for $ac_hdr that defines DIR" >&5
+echo "configure:16614: checking for $ac_hdr that defines DIR" >&5
 if eval "test \"`echo '$''{'ac_cv_header_dirent_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 16573 "configure"
+#line 16619 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <$ac_hdr>
@@ -16577,7 +16623,7 @@ int main() {
 DIR *dirp = 0;
 ; return 0; }
 EOF
-if { (eval echo configure:16581: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:16627: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   eval "ac_cv_header_dirent_$ac_safe=yes"
 else
@@ -16602,7 +16648,7 @@ done
 # Two versions of opendir et al. are in -ldir and -lx on SCO Xenix.
 if test $ac_header_dirent = dirent.h; then
 echo $ac_n "checking for opendir in -ldir""... $ac_c" 1>&6
-echo "configure:16606: checking for opendir in -ldir" >&5
+echo "configure:16652: checking for opendir in -ldir" >&5
 ac_lib_var=`echo dir'_'opendir | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -16610,7 +16656,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-ldir  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 16614 "configure"
+#line 16660 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -16621,7 +16667,7 @@ int main() {
 opendir()
 ; return 0; }
 EOF
-if { (eval echo configure:16625: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:16671: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -16643,7 +16689,7 @@ fi
 
 else
 echo $ac_n "checking for opendir in -lx""... $ac_c" 1>&6
-echo "configure:16647: checking for opendir in -lx" >&5
+echo "configure:16693: checking for opendir in -lx" >&5
 ac_lib_var=`echo x'_'opendir | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -16651,7 +16697,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lx  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 16655 "configure"
+#line 16701 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -16662,7 +16708,7 @@ int main() {
 opendir()
 ; return 0; }
 EOF
-if { (eval echo configure:16666: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:16712: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -16744,17 +16790,17 @@ assert.h
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:16748: checking for $ac_hdr" >&5
+echo "configure:16794: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 16753 "configure"
+#line 16799 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:16758: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:16804: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -16783,12 +16829,12 @@ done
 
 
   echo $ac_n "checking for fopencookie""... $ac_c" 1>&6
-echo "configure:16787: checking for fopencookie" >&5
+echo "configure:16833: checking for fopencookie" >&5
 if eval "test \"`echo '$''{'ac_cv_func_fopencookie'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 16792 "configure"
+#line 16838 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char fopencookie(); below.  */
@@ -16811,7 +16857,7 @@ fopencookie();
 
 ; return 0; }
 EOF
-if { (eval echo configure:16815: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:16861: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_fopencookie=yes"
 else
@@ -16833,7 +16879,7 @@ fi
 
   if test "$have_glibc_fopencookie" = "yes"; then
 cat > conftest.$ac_ext <<EOF
-#line 16837 "configure"
+#line 16883 "configure"
 #include "confdefs.h"
 
 #define _GNU_SOURCE
@@ -16843,7 +16889,7 @@ int main() {
 cookie_io_functions_t cookie;
 ; return 0; }
 EOF
-if { (eval echo configure:16847: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:16893: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   have_cookie_io_functions_t=yes
 else
@@ -16862,7 +16908,7 @@ if test "$cross_compiling" = yes; then
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 16866 "configure"
+#line 16912 "configure"
 #include "confdefs.h"
 
 #define _GNU_SOURCE
@@ -16894,7 +16940,7 @@ main() {
 
 
 EOF
-if { (eval echo configure:16898: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:16944: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   cookie_io_functions_use_off64_t=yes
@@ -16914,7 +16960,7 @@ fi
     else
 
 cat > conftest.$ac_ext <<EOF
-#line 16918 "configure"
+#line 16964 "configure"
 #include "confdefs.h"
 
 #define _GNU_SOURCE
@@ -16924,7 +16970,7 @@ int main() {
  _IO_cookie_io_functions_t cookie; 
 ; return 0; }
 EOF
-if { (eval echo configure:16928: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:16974: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   have_IO_cookie_io_functions_t=yes
 else
@@ -16958,7 +17004,7 @@ EOF
 
 
   echo $ac_n "checking for broken getcwd""... $ac_c" 1>&6
-echo "configure:16962: checking for broken getcwd" >&5
+echo "configure:17008: checking for broken getcwd" >&5
   os=`uname -sr 2>/dev/null`
   case $os in
     SunOS*)
@@ -16973,14 +17019,14 @@ EOF
 
 
   echo $ac_n "checking for broken libc stdio""... $ac_c" 1>&6
-echo "configure:16977: checking for broken libc stdio" >&5
+echo "configure:17023: checking for broken libc stdio" >&5
   if eval "test \"`echo '$''{'_cv_have_broken_glibc_fopen_append'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
   if test "$cross_compiling" = yes; then
   cat > conftest.$ac_ext <<EOF
-#line 16984 "configure"
+#line 17030 "configure"
 #include "confdefs.h"
 
 #include <features.h>
@@ -16993,7 +17039,7 @@ choke me
 
 ; return 0; }
 EOF
-if { (eval echo configure:16997: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17043: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   _cv_have_broken_glibc_fopen_append=yes
 else
@@ -17006,7 +17052,7 @@ rm -f conftest*
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 17010 "configure"
+#line 17056 "configure"
 #include "confdefs.h"
 
 #include <stdio.h>
@@ -17034,7 +17080,7 @@ int main(int argc, char *argv[])
 }
 
 EOF
-if { (eval echo configure:17038: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:17084: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   _cv_have_broken_glibc_fopen_append=no
 else
@@ -17062,12 +17108,12 @@ EOF
 
 
 echo $ac_n "checking whether struct tm is in sys/time.h or time.h""... $ac_c" 1>&6
-echo "configure:17066: checking whether struct tm is in sys/time.h or time.h" >&5
+echo "configure:17112: checking whether struct tm is in sys/time.h or time.h" >&5
 if eval "test \"`echo '$''{'ac_cv_struct_tm'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 17071 "configure"
+#line 17117 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <time.h>
@@ -17075,7 +17121,7 @@ int main() {
 struct tm *tp; tp->tm_sec;
 ; return 0; }
 EOF
-if { (eval echo configure:17079: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17125: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_struct_tm=time.h
 else
@@ -17096,12 +17142,12 @@ EOF
 fi
 
 echo $ac_n "checking for tm_zone in struct tm""... $ac_c" 1>&6
-echo "configure:17100: checking for tm_zone in struct tm" >&5
+echo "configure:17146: checking for tm_zone in struct tm" >&5
 if eval "test \"`echo '$''{'ac_cv_struct_tm_zone'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 17105 "configure"
+#line 17151 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <$ac_cv_struct_tm>
@@ -17109,7 +17155,7 @@ int main() {
 struct tm tm; tm.tm_zone;
 ; return 0; }
 EOF
-if { (eval echo configure:17113: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17159: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_struct_tm_zone=yes
 else
@@ -17129,12 +17175,12 @@ EOF
 
 else
   echo $ac_n "checking for tzname""... $ac_c" 1>&6
-echo "configure:17133: checking for tzname" >&5
+echo "configure:17179: checking for tzname" >&5
 if eval "test \"`echo '$''{'ac_cv_var_tzname'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 17138 "configure"
+#line 17184 "configure"
 #include "confdefs.h"
 #include <time.h>
 #ifndef tzname /* For SGI.  */
@@ -17144,7 +17190,7 @@ int main() {
 atoi(*tzname);
 ; return 0; }
 EOF
-if { (eval echo configure:17148: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:17194: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_var_tzname=yes
 else
@@ -17168,16 +17214,16 @@ fi
 
 
   echo $ac_n "checking for missing declarations of reentrant functions""... $ac_c" 1>&6
-echo "configure:17172: checking for missing declarations of reentrant functions" >&5
+echo "configure:17218: checking for missing declarations of reentrant functions" >&5
   cat > conftest.$ac_ext <<EOF
-#line 17174 "configure"
+#line 17220 "configure"
 #include "confdefs.h"
 #include <time.h>
 int main() {
 struct tm *(*func)() = localtime_r
 ; return 0; }
 EOF
-if { (eval echo configure:17181: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17227: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     :
@@ -17195,14 +17241,14 @@ EOF
 fi
 rm -f conftest*
   cat > conftest.$ac_ext <<EOF
-#line 17199 "configure"
+#line 17245 "configure"
 #include "confdefs.h"
 #include <time.h>
 int main() {
 struct tm *(*func)() = gmtime_r
 ; return 0; }
 EOF
-if { (eval echo configure:17206: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17252: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     :
@@ -17220,14 +17266,14 @@ EOF
 fi
 rm -f conftest*
   cat > conftest.$ac_ext <<EOF
-#line 17224 "configure"
+#line 17270 "configure"
 #include "confdefs.h"
 #include <time.h>
 int main() {
 char *(*func)() = asctime_r
 ; return 0; }
 EOF
-if { (eval echo configure:17231: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17277: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     :
@@ -17245,14 +17291,14 @@ EOF
 fi
 rm -f conftest*
   cat > conftest.$ac_ext <<EOF
-#line 17249 "configure"
+#line 17295 "configure"
 #include "confdefs.h"
 #include <time.h>
 int main() {
 char *(*func)() = ctime_r
 ; return 0; }
 EOF
-if { (eval echo configure:17256: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17302: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     :
@@ -17270,14 +17316,14 @@ EOF
 fi
 rm -f conftest*
   cat > conftest.$ac_ext <<EOF
-#line 17274 "configure"
+#line 17320 "configure"
 #include "confdefs.h"
 #include <string.h>
 int main() {
 char *(*func)() = strtok_r
 ; return 0; }
 EOF
-if { (eval echo configure:17281: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17327: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     :
@@ -17298,16 +17344,16 @@ rm -f conftest*
 
 
   echo $ac_n "checking for fclose declaration""... $ac_c" 1>&6
-echo "configure:17302: checking for fclose declaration" >&5
+echo "configure:17348: checking for fclose declaration" >&5
   cat > conftest.$ac_ext <<EOF
-#line 17304 "configure"
+#line 17350 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 int main() {
 int (*func)() = fclose
 ; return 0; }
 EOF
-if { (eval echo configure:17311: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17357: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     cat >> confdefs.h <<\EOF
@@ -17333,12 +17379,12 @@ rm -f conftest*
 
 
 echo $ac_n "checking for tm_gmtoff in struct tm""... $ac_c" 1>&6
-echo "configure:17337: checking for tm_gmtoff in struct tm" >&5
+echo "configure:17383: checking for tm_gmtoff in struct tm" >&5
 if eval "test \"`echo '$''{'ac_cv_struct_tm_gmtoff'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 17342 "configure"
+#line 17388 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <$ac_cv_struct_tm>
@@ -17346,7 +17392,7 @@ int main() {
 struct tm tm; tm.tm_gmtoff;
 ; return 0; }
 EOF
-if { (eval echo configure:17350: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17396: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_struct_tm_gmtoff=yes
 else
@@ -17369,12 +17415,12 @@ fi
 
 
 echo $ac_n "checking for struct flock""... $ac_c" 1>&6
-echo "configure:17373: checking for struct flock" >&5
+echo "configure:17419: checking for struct flock" >&5
 if eval "test \"`echo '$''{'ac_cv_struct_flock'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 17378 "configure"
+#line 17424 "configure"
 #include "confdefs.h"
 
 #include <unistd.h>
@@ -17384,7 +17430,7 @@ int main() {
 struct flock x;
 ; return 0; }
 EOF
-if { (eval echo configure:17388: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17434: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
           ac_cv_struct_flock=yes
@@ -17411,12 +17457,12 @@ fi
 
 
 echo $ac_n "checking for socklen_t""... $ac_c" 1>&6
-echo "configure:17415: checking for socklen_t" >&5
+echo "configure:17461: checking for socklen_t" >&5
 if eval "test \"`echo '$''{'ac_cv_socklen_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 17420 "configure"
+#line 17466 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
@@ -17428,7 +17474,7 @@ socklen_t x;
 
 ; return 0; }
 EOF
-if { (eval echo configure:17432: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17478: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
   ac_cv_socklen_t=yes
@@ -17454,7 +17500,7 @@ fi
 
 
 echo $ac_n "checking size of size_t""... $ac_c" 1>&6
-echo "configure:17458: checking size of size_t" >&5
+echo "configure:17504: checking size of size_t" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_size_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -17462,18 +17508,19 @@ else
   ac_cv_sizeof_size_t=8
 else
   cat > conftest.$ac_ext <<EOF
-#line 17466 "configure"
+#line 17512 "configure"
 #include "confdefs.h"
 #include <stdio.h>
-int main()
+#include <sys/types.h>
+main()
 {
   FILE *f=fopen("conftestval", "w");
-  if (!f) return(1);
+  if (!f) exit(1);
   fprintf(f, "%d\n", sizeof(size_t));
-  return(0);
+  exit(0);
 }
 EOF
-if { (eval echo configure:17477: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:17524: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_size_t=`cat conftestval`
 else
@@ -17493,7 +17540,7 @@ EOF
 
 
 echo $ac_n "checking size of long long""... $ac_c" 1>&6
-echo "configure:17497: checking size of long long" >&5
+echo "configure:17544: checking size of long long" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_long_long'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -17501,18 +17548,19 @@ else
   ac_cv_sizeof_long_long=8
 else
   cat > conftest.$ac_ext <<EOF
-#line 17505 "configure"
+#line 17552 "configure"
 #include "confdefs.h"
 #include <stdio.h>
-int main()
+#include <sys/types.h>
+main()
 {
   FILE *f=fopen("conftestval", "w");
-  if (!f) return(1);
+  if (!f) exit(1);
   fprintf(f, "%d\n", sizeof(long long));
-  return(0);
+  exit(0);
 }
 EOF
-if { (eval echo configure:17516: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:17564: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_long_long=`cat conftestval`
 else
@@ -17532,7 +17580,7 @@ EOF
 
 
 echo $ac_n "checking size of long long int""... $ac_c" 1>&6
-echo "configure:17536: checking size of long long int" >&5
+echo "configure:17584: checking size of long long int" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_long_long_int'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -17540,18 +17588,19 @@ else
   ac_cv_sizeof_long_long_int=8
 else
   cat > conftest.$ac_ext <<EOF
-#line 17544 "configure"
+#line 17592 "configure"
 #include "confdefs.h"
 #include <stdio.h>
-int main()
+#include <sys/types.h>
+main()
 {
   FILE *f=fopen("conftestval", "w");
-  if (!f) return(1);
+  if (!f) exit(1);
   fprintf(f, "%d\n", sizeof(long long int));
-  return(0);
+  exit(0);
 }
 EOF
-if { (eval echo configure:17555: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:17604: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_long_long_int=`cat conftestval`
 else
@@ -17571,7 +17620,7 @@ EOF
 
 
 echo $ac_n "checking size of long""... $ac_c" 1>&6
-echo "configure:17575: checking size of long" >&5
+echo "configure:17624: checking size of long" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -17579,18 +17628,19 @@ else
   ac_cv_sizeof_long=8
 else
   cat > conftest.$ac_ext <<EOF
-#line 17583 "configure"
+#line 17632 "configure"
 #include "confdefs.h"
 #include <stdio.h>
-int main()
+#include <sys/types.h>
+main()
 {
   FILE *f=fopen("conftestval", "w");
-  if (!f) return(1);
+  if (!f) exit(1);
   fprintf(f, "%d\n", sizeof(long));
-  return(0);
+  exit(0);
 }
 EOF
-if { (eval echo configure:17594: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:17644: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_long=`cat conftestval`
 else
@@ -17610,7 +17660,7 @@ EOF
 
 
 echo $ac_n "checking size of int""... $ac_c" 1>&6
-echo "configure:17614: checking size of int" >&5
+echo "configure:17664: checking size of int" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -17618,18 +17668,19 @@ else
   ac_cv_sizeof_int=4
 else
   cat > conftest.$ac_ext <<EOF
-#line 17622 "configure"
+#line 17672 "configure"
 #include "confdefs.h"
 #include <stdio.h>
-int main()
+#include <sys/types.h>
+main()
 {
   FILE *f=fopen("conftestval", "w");
-  if (!f) return(1);
+  if (!f) exit(1);
   fprintf(f, "%d\n", sizeof(int));
-  return(0);
+  exit(0);
 }
 EOF
-if { (eval echo configure:17633: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:17684: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_int=`cat conftestval`
 else
@@ -17651,7 +17702,7 @@ EOF
 
 
   echo $ac_n "checking size of intmax_t""... $ac_c" 1>&6
-echo "configure:17655: checking size of intmax_t" >&5
+echo "configure:17706: checking size of intmax_t" >&5
   
   php_cache_value=php_cv_sizeof_intmax_t
   if eval "test \"`echo '$''{'php_cv_sizeof_intmax_t'+set}'`\" = set"; then
@@ -17668,7 +17719,7 @@ else
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 17672 "configure"
+#line 17723 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 #if STDC_HEADERS
@@ -17692,7 +17743,7 @@ int main()
 }
   
 EOF
-if { (eval echo configure:17696: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:17747: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     eval $php_cache_value=`cat conftestval`
@@ -17731,7 +17782,7 @@ EOF
 
 
   echo $ac_n "checking size of ssize_t""... $ac_c" 1>&6
-echo "configure:17735: checking size of ssize_t" >&5
+echo "configure:17786: checking size of ssize_t" >&5
   
   php_cache_value=php_cv_sizeof_ssize_t
   if eval "test \"`echo '$''{'php_cv_sizeof_ssize_t'+set}'`\" = set"; then
@@ -17748,7 +17799,7 @@ else
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 17752 "configure"
+#line 17803 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 #if STDC_HEADERS
@@ -17772,7 +17823,7 @@ int main()
 }
   
 EOF
-if { (eval echo configure:17776: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:17827: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     eval $php_cache_value=`cat conftestval`
@@ -17811,7 +17862,7 @@ EOF
 
 
   echo $ac_n "checking size of ptrdiff_t""... $ac_c" 1>&6
-echo "configure:17815: checking size of ptrdiff_t" >&5
+echo "configure:17866: checking size of ptrdiff_t" >&5
   
   php_cache_value=php_cv_sizeof_ptrdiff_t
   if eval "test \"`echo '$''{'php_cv_sizeof_ptrdiff_t'+set}'`\" = set"; then
@@ -17828,7 +17879,7 @@ else
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 17832 "configure"
+#line 17883 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 #if STDC_HEADERS
@@ -17852,7 +17903,7 @@ int main()
 }
   
 EOF
-if { (eval echo configure:17856: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:17907: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     eval $php_cache_value=`cat conftestval`
@@ -17891,12 +17942,12 @@ EOF
 
 
 echo $ac_n "checking for st_blksize in struct stat""... $ac_c" 1>&6
-echo "configure:17895: checking for st_blksize in struct stat" >&5
+echo "configure:17946: checking for st_blksize in struct stat" >&5
 if eval "test \"`echo '$''{'ac_cv_struct_st_blksize'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 17900 "configure"
+#line 17951 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/stat.h>
@@ -17904,7 +17955,7 @@ int main() {
 struct stat s; s.st_blksize;
 ; return 0; }
 EOF
-if { (eval echo configure:17908: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17959: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_struct_st_blksize=yes
 else
@@ -17926,12 +17977,12 @@ fi
 
 if test "`uname -s 2>/dev/null`" != "QNX"; then
   echo $ac_n "checking for st_blocks in struct stat""... $ac_c" 1>&6
-echo "configure:17930: checking for st_blocks in struct stat" >&5
+echo "configure:17981: checking for st_blocks in struct stat" >&5
 if eval "test \"`echo '$''{'ac_cv_struct_st_blocks'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 17935 "configure"
+#line 17986 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/stat.h>
@@ -17939,7 +17990,7 @@ int main() {
 struct stat s; s.st_blocks;
 ; return 0; }
 EOF
-if { (eval echo configure:17943: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17994: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_struct_st_blocks=yes
 else
@@ -17966,12 +18017,12 @@ else
   WARNING_LEVEL=0
 fi
 echo $ac_n "checking for st_rdev in struct stat""... $ac_c" 1>&6
-echo "configure:17970: checking for st_rdev in struct stat" >&5
+echo "configure:18021: checking for st_rdev in struct stat" >&5
 if eval "test \"`echo '$''{'ac_cv_struct_st_rdev'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 17975 "configure"
+#line 18026 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/stat.h>
@@ -17979,7 +18030,7 @@ int main() {
 struct stat s; s.st_rdev;
 ; return 0; }
 EOF
-if { (eval echo configure:17983: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:18034: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_struct_st_rdev=yes
 else
@@ -18001,12 +18052,12 @@ fi
 
 
 echo $ac_n "checking for size_t""... $ac_c" 1>&6
-echo "configure:18005: checking for size_t" >&5
+echo "configure:18056: checking for size_t" >&5
 if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 18010 "configure"
+#line 18061 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #if STDC_HEADERS
@@ -18034,12 +18085,12 @@ EOF
 fi
 
 echo $ac_n "checking for uid_t in sys/types.h""... $ac_c" 1>&6
-echo "configure:18038: checking for uid_t in sys/types.h" >&5
+echo "configure:18089: checking for uid_t in sys/types.h" >&5
 if eval "test \"`echo '$''{'ac_cv_type_uid_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 18043 "configure"
+#line 18094 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 EOF
@@ -18070,12 +18121,12 @@ fi
 
 
     echo $ac_n "checking for struct sockaddr_storage""... $ac_c" 1>&6
-echo "configure:18074: checking for struct sockaddr_storage" >&5
+echo "configure:18125: checking for struct sockaddr_storage" >&5
 if eval "test \"`echo '$''{'ac_cv_sockaddr_storage'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 18079 "configure"
+#line 18130 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/socket.h>
@@ -18083,7 +18134,7 @@ int main() {
 struct sockaddr_storage s; s
 ; return 0; }
 EOF
-if { (eval echo configure:18087: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:18138: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_sockaddr_storage=yes
 else
@@ -18104,13 +18155,13 @@ EOF
 
   fi
     echo $ac_n "checking for field sa_len in struct sockaddr""... $ac_c" 1>&6
-echo "configure:18108: checking for field sa_len in struct sockaddr" >&5
+echo "configure:18159: checking for field sa_len in struct sockaddr" >&5
 if eval "test \"`echo '$''{'ac_cv_sockaddr_sa_len'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
     cat > conftest.$ac_ext <<EOF
-#line 18114 "configure"
+#line 18165 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/socket.h>
@@ -18118,7 +18169,7 @@ int main() {
 static struct sockaddr sa; int n = (int) sa.sa_len; return n;
 ; return 0; }
 EOF
-if { (eval echo configure:18122: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:18173: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_sockaddr_sa_len=yes
 else
@@ -18141,12 +18192,12 @@ EOF
 
 
 echo $ac_n "checking for IPv6 support""... $ac_c" 1>&6
-echo "configure:18145: checking for IPv6 support" >&5
+echo "configure:18196: checking for IPv6 support" >&5
 if eval "test \"`echo '$''{'ac_cv_ipv6_support'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 18150 "configure"
+#line 18201 "configure"
 #include "confdefs.h"
  #include <sys/types.h>
 #include <sys/socket.h>
@@ -18155,7 +18206,7 @@ int main() {
 struct sockaddr_in6 s; struct in6_addr t=in6addr_any; int i=AF_INET6; s; t.s6_addr[0] = 0;
 ; return 0; }
 EOF
-if { (eval echo configure:18159: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:18210: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_ipv6_support=yes
 else
@@ -18171,12 +18222,12 @@ echo "$ac_t""$ac_cv_ipv6_support" 1>&6
 
 
 echo $ac_n "checking for vprintf""... $ac_c" 1>&6
-echo "configure:18175: checking for vprintf" >&5
+echo "configure:18226: checking for vprintf" >&5
 if eval "test \"`echo '$''{'ac_cv_func_vprintf'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 18180 "configure"
+#line 18231 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char vprintf(); below.  */
@@ -18199,7 +18250,7 @@ vprintf();
 
 ; return 0; }
 EOF
-if { (eval echo configure:18203: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:18254: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_vprintf=yes"
 else
@@ -18223,12 +18274,12 @@ fi
 
 if test "$ac_cv_func_vprintf" != yes; then
 echo $ac_n "checking for _doprnt""... $ac_c" 1>&6
-echo "configure:18227: checking for _doprnt" >&5
+echo "configure:18278: checking for _doprnt" >&5
 if eval "test \"`echo '$''{'ac_cv_func__doprnt'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 18232 "configure"
+#line 18283 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char _doprnt(); below.  */
@@ -18251,7 +18302,7 @@ _doprnt();
 
 ; return 0; }
 EOF
-if { (eval echo configure:18255: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:18306: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func__doprnt=yes"
 else
@@ -18359,12 +18410,12 @@ asprintf \
 
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:18363: checking for $ac_func" >&5
+echo "configure:18414: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 18368 "configure"
+#line 18419 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -18387,7 +18438,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:18391: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:18442: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -18418,7 +18469,7 @@ done
   unset ac_cv_lib_rt___nanosleep
   unset found
   echo $ac_n "checking for nanosleep in -lrt""... $ac_c" 1>&6
-echo "configure:18422: checking for nanosleep in -lrt" >&5
+echo "configure:18473: checking for nanosleep in -lrt" >&5
 ac_lib_var=`echo rt'_'nanosleep | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -18426,7 +18477,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lrt  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 18430 "configure"
+#line 18481 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -18437,7 +18488,7 @@ int main() {
 nanosleep()
 ; return 0; }
 EOF
-if { (eval echo configure:18441: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:18492: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -18457,7 +18508,7 @@ else
   echo "$ac_t""no" 1>&6
 
     echo $ac_n "checking for __nanosleep in -lrt""... $ac_c" 1>&6
-echo "configure:18461: checking for __nanosleep in -lrt" >&5
+echo "configure:18512: checking for __nanosleep in -lrt" >&5
 ac_lib_var=`echo rt'_'__nanosleep | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -18465,7 +18516,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lrt  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 18469 "configure"
+#line 18520 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -18476,7 +18527,7 @@ int main() {
 __nanosleep()
 ; return 0; }
 EOF
-if { (eval echo configure:18480: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:18531: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -18508,11 +18559,11 @@ fi
   found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 18512 "configure"
+#line 18563 "configure"
 #include "confdefs.h"
 main() { return (0); }
 EOF
-if { (eval echo configure:18516: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:18567: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   found=yes
 else
@@ -18556,25 +18607,25 @@ EOF
 
 
 echo $ac_n "checking for getaddrinfo""... $ac_c" 1>&6
-echo "configure:18560: checking for getaddrinfo" >&5
+echo "configure:18611: checking for getaddrinfo" >&5
 if eval "test \"`echo '$''{'ac_cv_func_getaddrinfo'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 18565 "configure"
+#line 18616 "configure"
 #include "confdefs.h"
 #include <netdb.h>
 int main() {
 struct addrinfo *g,h;g=&h;getaddrinfo("","",g,&g);
 ; return 0; }
 EOF
-if { (eval echo configure:18572: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:18623: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   if test "$cross_compiling" = yes; then
   ac_cv_func_getaddrinfo=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 18578 "configure"
+#line 18629 "configure"
 #include "confdefs.h"
 
 #include <netdb.h>
@@ -18614,7 +18665,7 @@ int main(void) {
 }
   
 EOF
-if { (eval echo configure:18618: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:18669: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_func_getaddrinfo=yes
 else
@@ -18646,12 +18697,12 @@ fi
 for ac_func in strlcat strlcpy getopt
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:18650: checking for $ac_func" >&5
+echo "configure:18701: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 18655 "configure"
+#line 18706 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -18674,7 +18725,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:18678: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:18729: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -18701,7 +18752,7 @@ done
 
 
 echo $ac_n "checking whether utime accepts a null argument""... $ac_c" 1>&6
-echo "configure:18705: checking whether utime accepts a null argument" >&5
+echo "configure:18756: checking whether utime accepts a null argument" >&5
 if eval "test \"`echo '$''{'ac_cv_func_utime_null'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -18711,7 +18762,7 @@ if test "$cross_compiling" = yes; then
   ac_cv_func_utime_null=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 18715 "configure"
+#line 18766 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/stat.h>
@@ -18722,7 +18773,7 @@ exit(!(stat ("conftestdata", &s) == 0 &&
 && t.st_mtime - s.st_mtime < 120));
 }
 EOF
-if { (eval echo configure:18726: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:18777: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_func_utime_null=yes
 else
@@ -18748,19 +18799,19 @@ fi
 # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
 # for constant arguments.  Useless!
 echo $ac_n "checking for working alloca.h""... $ac_c" 1>&6
-echo "configure:18752: checking for working alloca.h" >&5
+echo "configure:18803: checking for working alloca.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_alloca_h'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 18757 "configure"
+#line 18808 "configure"
 #include "confdefs.h"
 #include <alloca.h>
 int main() {
 char *p = alloca(2 * sizeof(int));
 ; return 0; }
 EOF
-if { (eval echo configure:18764: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:18815: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_header_alloca_h=yes
 else
@@ -18781,12 +18832,12 @@ EOF
 fi
 
 echo $ac_n "checking for alloca""... $ac_c" 1>&6
-echo "configure:18785: checking for alloca" >&5
+echo "configure:18836: checking for alloca" >&5
 if eval "test \"`echo '$''{'ac_cv_func_alloca_works'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 18790 "configure"
+#line 18841 "configure"
 #include "confdefs.h"
 
 #ifdef __GNUC__
@@ -18814,7 +18865,7 @@ int main() {
 char *p = (char *) alloca(1);
 ; return 0; }
 EOF
-if { (eval echo configure:18818: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:18869: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_func_alloca_works=yes
 else
@@ -18846,12 +18897,12 @@ EOF
 
 
 echo $ac_n "checking whether alloca needs Cray hooks""... $ac_c" 1>&6
-echo "configure:18850: checking whether alloca needs Cray hooks" >&5
+echo "configure:18901: checking whether alloca needs Cray hooks" >&5
 if eval "test \"`echo '$''{'ac_cv_os_cray'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 18855 "configure"
+#line 18906 "configure"
 #include "confdefs.h"
 #if defined(CRAY) && ! defined(CRAY2)
 webecray
@@ -18876,12 +18927,12 @@ echo "$ac_t""$ac_cv_os_cray" 1>&6
 if test $ac_cv_os_cray = yes; then
 for ac_func in _getb67 GETB67 getb67; do
   echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:18880: checking for $ac_func" >&5
+echo "configure:18931: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 18885 "configure"
+#line 18936 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -18904,7 +18955,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:18908: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:18959: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -18931,7 +18982,7 @@ done
 fi
 
 echo $ac_n "checking stack direction for C alloca""... $ac_c" 1>&6
-echo "configure:18935: checking stack direction for C alloca" >&5
+echo "configure:18986: checking stack direction for C alloca" >&5
 if eval "test \"`echo '$''{'ac_cv_c_stack_direction'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -18939,7 +18990,7 @@ else
   ac_cv_c_stack_direction=0
 else
   cat > conftest.$ac_ext <<EOF
-#line 18943 "configure"
+#line 18994 "configure"
 #include "confdefs.h"
 find_stack_direction ()
 {
@@ -18958,7 +19009,7 @@ main ()
   exit (find_stack_direction() < 0);
 }
 EOF
-if { (eval echo configure:18962: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:19013: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_c_stack_direction=1
 else
@@ -18981,13 +19032,13 @@ fi
 
 
   echo $ac_n "checking for declared timezone""... $ac_c" 1>&6
-echo "configure:18985: checking for declared timezone" >&5
+echo "configure:19036: checking for declared timezone" >&5
 if eval "test \"`echo '$''{'ac_cv_declared_timezone'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
     cat > conftest.$ac_ext <<EOF
-#line 18991 "configure"
+#line 19042 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
@@ -19002,7 +19053,7 @@ int main() {
 
 ; return 0; }
 EOF
-if { (eval echo configure:19006: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:19057: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
   ac_cv_declared_timezone=yes
@@ -19028,7 +19079,7 @@ EOF
 
 
 echo $ac_n "checking for type of reentrant time-related functions""... $ac_c" 1>&6
-echo "configure:19032: checking for type of reentrant time-related functions" >&5
+echo "configure:19083: checking for type of reentrant time-related functions" >&5
 if eval "test \"`echo '$''{'ac_cv_time_r_type'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -19039,7 +19090,7 @@ if test "$cross_compiling" = yes; then
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 19043 "configure"
+#line 19094 "configure"
 #include "confdefs.h"
 
 #include <time.h>
@@ -19057,7 +19108,7 @@ return (1);
 }
 
 EOF
-if { (eval echo configure:19061: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:19112: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   ac_cv_time_r_type=hpux
@@ -19073,7 +19124,7 @@ else
   
 else
   cat > conftest.$ac_ext <<EOF
-#line 19077 "configure"
+#line 19128 "configure"
 #include "confdefs.h"
 
 #include <time.h>
@@ -19089,7 +19140,7 @@ main() {
 }
   
 EOF
-if { (eval echo configure:19093: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:19144: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     ac_cv_time_r_type=irix
@@ -19127,12 +19178,12 @@ EOF
 
 
     echo $ac_n "checking for readdir_r""... $ac_c" 1>&6
-echo "configure:19131: checking for readdir_r" >&5
+echo "configure:19182: checking for readdir_r" >&5
 if eval "test \"`echo '$''{'ac_cv_func_readdir_r'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 19136 "configure"
+#line 19187 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char readdir_r(); below.  */
@@ -19155,7 +19206,7 @@ readdir_r();
 
 ; return 0; }
 EOF
-if { (eval echo configure:19159: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:19210: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_readdir_r=yes"
 else
@@ -19177,7 +19228,7 @@ fi
 
   if test "$ac_cv_func_readdir_r" = "yes"; then
   echo $ac_n "checking for type of readdir_r""... $ac_c" 1>&6
-echo "configure:19181: checking for type of readdir_r" >&5
+echo "configure:19232: checking for type of readdir_r" >&5
 if eval "test \"`echo '$''{'ac_cv_what_readdir_r'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -19188,7 +19239,7 @@ else
    
 else
   cat > conftest.$ac_ext <<EOF
-#line 19192 "configure"
+#line 19243 "configure"
 #include "confdefs.h"
 
 #define _REENTRANT
@@ -19213,7 +19264,7 @@ main() {
 }
     
 EOF
-if { (eval echo configure:19217: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:19268: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
       ac_cv_what_readdir_r=POSIX
@@ -19224,7 +19275,7 @@ else
   rm -fr conftest*
   
       cat > conftest.$ac_ext <<EOF
-#line 19228 "configure"
+#line 19279 "configure"
 #include "confdefs.h"
 
 #define _REENTRANT
@@ -19234,7 +19285,7 @@ int readdir_r(DIR *, struct dirent *);
         
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:19238: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:19289: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -19276,12 +19327,12 @@ EOF
 
 
 echo $ac_n "checking for in_addr_t""... $ac_c" 1>&6
-echo "configure:19280: checking for in_addr_t" >&5
+echo "configure:19331: checking for in_addr_t" >&5
 if eval "test \"`echo '$''{'ac_cv_type_in_addr_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 19285 "configure"
+#line 19336 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #if STDC_HEADERS
@@ -19315,12 +19366,12 @@ fi
 for ac_func in crypt_r
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:19319: checking for $ac_func" >&5
+echo "configure:19370: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 19324 "configure"
+#line 19375 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -19343,7 +19394,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:19347: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:19398: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -19371,14 +19422,14 @@ done
 if test "x$php_crypt_r" = "x1"; then
   
   echo $ac_n "checking which data struct is used by crypt_r""... $ac_c" 1>&6
-echo "configure:19375: checking which data struct is used by crypt_r" >&5
+echo "configure:19426: checking which data struct is used by crypt_r" >&5
 if eval "test \"`echo '$''{'php_cv_crypt_r_style'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
     php_cv_crypt_r_style=none
     cat > conftest.$ac_ext <<EOF
-#line 19382 "configure"
+#line 19433 "configure"
 #include "confdefs.h"
 
 #define _REENTRANT 1
@@ -19391,7 +19442,7 @@ crypt_r("passwd", "hash", &buffer);
 
 ; return 0; }
 EOF
-if { (eval echo configure:19395: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:19446: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   php_cv_crypt_r_style=cryptd
 else
@@ -19402,7 +19453,7 @@ rm -f conftest*
 
     if test "$php_cv_crypt_r_style" = "none"; then
       cat > conftest.$ac_ext <<EOF
-#line 19406 "configure"
+#line 19457 "configure"
 #include "confdefs.h"
 
 #define _REENTRANT 1
@@ -19415,7 +19466,7 @@ crypt_r("passwd", "hash", &buffer);
 
 ; return 0; }
 EOF
-if { (eval echo configure:19419: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:19470: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   php_cv_crypt_r_style=struct_crypt_data
 else
@@ -19427,7 +19478,7 @@ rm -f conftest*
 
     if test "$php_cv_crypt_r_style" = "none"; then
       cat > conftest.$ac_ext <<EOF
-#line 19431 "configure"
+#line 19482 "configure"
 #include "confdefs.h"
 
 #define _REENTRANT 1
@@ -19441,7 +19492,7 @@ crypt_r("passwd", "hash", &buffer);
 
 ; return 0; }
 EOF
-if { (eval echo configure:19445: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:19496: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   php_cv_crypt_r_style=struct_crypt_data_gnu_source
 else
@@ -19500,7 +19551,7 @@ fi
 php_enable_gcov=no
 
 echo $ac_n "checking whether to include gcov symbols""... $ac_c" 1>&6
-echo "configure:19504: checking whether to include gcov symbols" >&5
+echo "configure:19555: checking whether to include gcov symbols" >&5
 # Check whether --enable-gcov or --disable-gcov was given.
 if test "${enable_gcov+set}" = set; then
   enableval="$enable_gcov"
@@ -19539,7 +19590,7 @@ if test "$PHP_GCOV" = "yes"; then
   # Extract the first word of "lcov", so it can be a program name with args.
 set dummy lcov; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:19543: checking for $ac_word" >&5
+echo "configure:19594: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_LTP'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -19568,7 +19619,7 @@ fi
   # Extract the first word of "genhtml", so it can be a program name with args.
 set dummy genhtml; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:19572: checking for $ac_word" >&5
+echo "configure:19623: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_LTP_GENHTML'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -19603,7 +19654,7 @@ fi
 
   if test "$LTP"; then
     echo $ac_n "checking for ltp version""... $ac_c" 1>&6
-echo "configure:19607: checking for ltp version" >&5
+echo "configure:19658: checking for ltp version" >&5
 if eval "test \"`echo '$''{'php_cv_ltp_version'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -19660,7 +19711,7 @@ fi
 php_enable_debug=no
 
 echo $ac_n "checking whether to include debugging symbols""... $ac_c" 1>&6
-echo "configure:19664: checking whether to include debugging symbols" >&5
+echo "configure:19715: checking whether to include debugging symbols" >&5
 # Check whether --enable-debug or --disable-debug was given.
 if test "${enable_debug+set}" = set; then
   enableval="$enable_debug"
@@ -19708,7 +19759,7 @@ fi
 php_with_layout=PHP
 
 echo $ac_n "checking layout of installed files""... $ac_c" 1>&6
-echo "configure:19712: checking layout of installed files" >&5
+echo "configure:19763: checking layout of installed files" >&5
 # Check whether --with-layout or --without-layout was given.
 if test "${with_layout+set}" = set; then
   withval="$with_layout"
@@ -19740,7 +19791,7 @@ esac
 php_with_config_file_path=DEFAULT
 
 echo $ac_n "checking path to configuration file""... $ac_c" 1>&6
-echo "configure:19744: checking path to configuration file" >&5
+echo "configure:19795: checking path to configuration file" >&5
 # Check whether --with-config-file-path or --without-config-file-path was given.
 if test "${with_config_file_path+set}" = set; then
   withval="$with_config_file_path"
@@ -19771,7 +19822,7 @@ if test "$PHP_CONFIG_FILE_PATH" = "DEFAU
 fi
 
 echo $ac_n "checking where to scan for configuration files""... $ac_c" 1>&6
-echo "configure:19775: checking where to scan for configuration files" >&5
+echo "configure:19826: checking where to scan for configuration files" >&5
 
 php_with_config_file_scan_dir=DEFAULT
 
@@ -19804,7 +19855,7 @@ test -n "$DEBUG_CFLAGS" && CFLAGS="$CFLA
 php_enable_safe_mode=no
 
 echo $ac_n "checking whether to enable safe mode by default""... $ac_c" 1>&6
-echo "configure:19808: checking whether to enable safe mode by default" >&5
+echo "configure:19859: checking whether to enable safe mode by default" >&5
 # Check whether --enable-safe-mode or --disable-safe-mode was given.
 if test "${enable_safe_mode+set}" = set; then
   enableval="$enable_safe_mode"
@@ -19836,7 +19887,7 @@ EOF
 fi
 
 echo $ac_n "checking for safe mode exec dir""... $ac_c" 1>&6
-echo "configure:19840: checking for safe mode exec dir" >&5
+echo "configure:19891: checking for safe mode exec dir" >&5
 
 php_with_exec_dir=no
 
@@ -19877,7 +19928,7 @@ fi
 php_enable_sigchild=no
 
 echo $ac_n "checking whether to enable PHP's own SIGCHLD handler""... $ac_c" 1>&6
-echo "configure:19881: checking whether to enable PHP's own SIGCHLD handler" >&5
+echo "configure:19932: checking whether to enable PHP's own SIGCHLD handler" >&5
 # Check whether --enable-sigchild or --disable-sigchild was given.
 if test "${enable_sigchild+set}" = set; then
   enableval="$enable_sigchild"
@@ -19912,7 +19963,7 @@ fi
 php_enable_magic_quotes=no
 
 echo $ac_n "checking whether to enable magic quotes by default""... $ac_c" 1>&6
-echo "configure:19916: checking whether to enable magic quotes by default" >&5
+echo "configure:19967: checking whether to enable magic quotes by default" >&5
 # Check whether --enable-magic-quotes or --disable-magic-quotes was given.
 if test "${enable_magic_quotes+set}" = set; then
   enableval="$enable_magic_quotes"
@@ -19947,7 +19998,7 @@ fi
 php_enable_libgcc=no
 
 echo $ac_n "checking whether to explicitly link against libgcc""... $ac_c" 1>&6
-echo "configure:19951: checking whether to explicitly link against libgcc" >&5
+echo "configure:20002: checking whether to explicitly link against libgcc" >&5
 # Check whether --enable-libgcc or --disable-libgcc was given.
 if test "${enable_libgcc+set}" = set; then
   enableval="$enable_libgcc"
@@ -20024,7 +20075,7 @@ fi
 php_enable_short_tags=yes
 
 echo $ac_n "checking whether to enable short tags by default""... $ac_c" 1>&6
-echo "configure:20028: checking whether to enable short tags by default" >&5
+echo "configure:20079: checking whether to enable short tags by default" >&5
 # Check whether --enable-short-tags or --disable-short-tags was given.
 if test "${enable_short_tags+set}" = set; then
   enableval="$enable_short_tags"
@@ -20059,7 +20110,7 @@ fi
 php_enable_dmalloc=no
 
 echo $ac_n "checking whether to enable dmalloc""... $ac_c" 1>&6
-echo "configure:20063: checking whether to enable dmalloc" >&5
+echo "configure:20114: checking whether to enable dmalloc" >&5
 # Check whether --enable-dmalloc or --disable-dmalloc was given.
 if test "${enable_dmalloc+set}" = set; then
   enableval="$enable_dmalloc"
@@ -20080,7 +20131,7 @@ echo "$ac_t""$ext_output" 1>&6
 
 if test "$PHP_DMALLOC" = "yes"; then
   echo $ac_n "checking for dmalloc_error in -ldmalloc""... $ac_c" 1>&6
-echo "configure:20084: checking for dmalloc_error in -ldmalloc" >&5
+echo "configure:20135: checking for dmalloc_error in -ldmalloc" >&5
 ac_lib_var=`echo dmalloc'_'dmalloc_error | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -20088,7 +20139,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-ldmalloc  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 20092 "configure"
+#line 20143 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -20099,7 +20150,7 @@ int main() {
 dmalloc_error()
 ; return 0; }
 EOF
-if { (eval echo configure:20103: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:20154: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -20144,7 +20195,7 @@ fi
 php_enable_ipv6=yes
 
 echo $ac_n "checking whether to enable IPv6 support""... $ac_c" 1>&6
-echo "configure:20148: checking whether to enable IPv6 support" >&5
+echo "configure:20199: checking whether to enable IPv6 support" >&5
 # Check whether --enable-ipv6 or --disable-ipv6 was given.
 if test "${enable_ipv6+set}" = set; then
   enableval="$enable_ipv6"
@@ -20171,7 +20222,7 @@ EOF
 fi
 
 echo $ac_n "checking how big to make fd sets""... $ac_c" 1>&6
-echo "configure:20175: checking how big to make fd sets" >&5
+echo "configure:20226: checking how big to make fd sets" >&5
 
 php_enable_fd_setsize=no
 
@@ -20239,7 +20290,7 @@ fi
 
 
 echo $ac_n "checking size of long""... $ac_c" 1>&6
-echo "configure:20243: checking size of long" >&5
+echo "configure:20294: checking size of long" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -20247,18 +20298,19 @@ else
   ac_cv_sizeof_long=8
 else
   cat > conftest.$ac_ext <<EOF
-#line 20251 "configure"
+#line 20302 "configure"
 #include "confdefs.h"
 #include <stdio.h>
-int main()
+#include <sys/types.h>
+main()
 {
   FILE *f=fopen("conftestval", "w");
-  if (!f) return(1);
+  if (!f) exit(1);
   fprintf(f, "%d\n", sizeof(long));
-  return(0);
+  exit(0);
 }
 EOF
-if { (eval echo configure:20262: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:20314: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_long=`cat conftestval`
 else
@@ -20278,7 +20330,7 @@ EOF
 
 
 echo $ac_n "checking size of int""... $ac_c" 1>&6
-echo "configure:20282: checking size of int" >&5
+echo "configure:20334: checking size of int" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -20286,18 +20338,19 @@ else
   ac_cv_sizeof_int=4
 else
   cat > conftest.$ac_ext <<EOF
-#line 20290 "configure"
+#line 20342 "configure"
 #include "confdefs.h"
 #include <stdio.h>
-int main()
+#include <sys/types.h>
+main()
 {
   FILE *f=fopen("conftestval", "w");
-  if (!f) return(1);
+  if (!f) exit(1);
   fprintf(f, "%d\n", sizeof(int));
-  return(0);
+  exit(0);
 }
 EOF
-if { (eval echo configure:20301: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:20354: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_int=`cat conftestval`
 else
@@ -20318,13 +20371,13 @@ EOF
 
 
 echo $ac_n "checking for int32_t""... $ac_c" 1>&6
-echo "configure:20322: checking for int32_t" >&5
+echo "configure:20375: checking for int32_t" >&5
 if eval "test \"`echo '$''{'ac_cv_int_type_int32_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
 cat > conftest.$ac_ext <<EOF
-#line 20328 "configure"
+#line 20381 "configure"
 #include "confdefs.h"
 
 #if HAVE_SYS_TYPES_H
@@ -20343,7 +20396,7 @@ if (sizeof (int32_t))
 
 ; return 0; }
 EOF
-if { (eval echo configure:20347: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:20400: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_int_type_int32_t=yes
 else
@@ -20366,13 +20419,13 @@ fi
 
 
 echo $ac_n "checking for uint32_t""... $ac_c" 1>&6
-echo "configure:20370: checking for uint32_t" >&5
+echo "configure:20423: checking for uint32_t" >&5
 if eval "test \"`echo '$''{'ac_cv_int_type_uint32_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
 cat > conftest.$ac_ext <<EOF
-#line 20376 "configure"
+#line 20429 "configure"
 #include "confdefs.h"
 
 #if HAVE_SYS_TYPES_H
@@ -20391,7 +20444,7 @@ if (sizeof (uint32_t))
 
 ; return 0; }
 EOF
-if { (eval echo configure:20395: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:20448: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_int_type_uint32_t=yes
 else
@@ -20423,17 +20476,17 @@ stdlib.h
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:20427: checking for $ac_hdr" >&5
+echo "configure:20480: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 20432 "configure"
+#line 20485 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:20437: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:20490: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -20463,12 +20516,12 @@ done
 for ac_func in strtoll atoll strftime
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:20467: checking for $ac_func" >&5
+echo "configure:20520: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 20472 "configure"
+#line 20525 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -20491,7 +20544,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:20495: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:20548: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -20953,7 +21006,7 @@ case $PHP_REGEX in
 esac
 
 echo $ac_n "checking which regex library to use""... $ac_c" 1>&6
-echo "configure:20957: checking which regex library to use" >&5
+echo "configure:21010: checking which regex library to use" >&5
 echo "$ac_t""$REGEX_TYPE" 1>&6
 
 if test "$REGEX_TYPE" = "php"; then
@@ -21330,13 +21383,13 @@ elif test "$REGEX_TYPE" = "system"; then
 EOF
 
     echo $ac_n "checking whether field re_magic exists in struct regex_t""... $ac_c" 1>&6
-echo "configure:21334: checking whether field re_magic exists in struct regex_t" >&5
+echo "configure:21387: checking whether field re_magic exists in struct regex_t" >&5
 if eval "test \"`echo '$''{'ac_cv_regex_t_re_magic'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
   cat > conftest.$ac_ext <<EOF
-#line 21340 "configure"
+#line 21393 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <regex.h>
@@ -21344,7 +21397,7 @@ int main() {
 regex_t rt; rt.re_magic;
 ; return 0; }
 EOF
-if { (eval echo configure:21348: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:21401: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_regex_t_re_magic=yes
 else
@@ -21370,7 +21423,7 @@ fi
 php_enable_libxml=yes
 
 echo $ac_n "checking whether to enable LIBXML support""... $ac_c" 1>&6
-echo "configure:21374: checking whether to enable LIBXML support" >&5
+echo "configure:21427: checking whether to enable LIBXML support" >&5
 # Check whether --enable-libxml or --disable-libxml was given.
 if test "${enable_libxml+set}" = set; then
   enableval="$enable_libxml"
@@ -21415,7 +21468,7 @@ if test -z "$PHP_LIBXML_DIR"; then
 php_with_libxml_dir=no
 
 echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
-echo "configure:21419: checking libxml2 install dir" >&5
+echo "configure:21472: checking libxml2 install dir" >&5
 # Check whether --with-libxml-dir or --without-libxml-dir was given.
 if test "${with_libxml_dir+set}" = set; then
   withval="$with_libxml_dir"
@@ -21441,7 +21494,7 @@ if test "$PHP_LIBXML" != "no"; then
 
   
 echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
-echo "configure:21445: checking for xml2-config path" >&5
+echo "configure:21498: checking for xml2-config path" >&5
 if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -21599,7 +21652,7 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
 
 
             echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
-echo "configure:21603: checking whether libxml build works" >&5
+echo "configure:21656: checking whether libxml build works" >&5
 if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -21615,7 +21668,7 @@ else
   
 else
   cat > conftest.$ac_ext <<EOF
-#line 21619 "configure"
+#line 21672 "configure"
 #include "confdefs.h"
 
     
@@ -21626,7 +21679,7 @@ else
     }
   
 EOF
-if { (eval echo configure:21630: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:21683: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     LIBS=$old_LIBS
@@ -21991,7 +22044,7 @@ fi
 php_with_openssl=no
 
 echo $ac_n "checking for OpenSSL support""... $ac_c" 1>&6
-echo "configure:21995: checking for OpenSSL support" >&5
+echo "configure:22048: checking for OpenSSL support" >&5
 # Check whether --with-openssl or --without-openssl was given.
 if test "${with_openssl+set}" = set; then
   withval="$with_openssl"
@@ -22035,7 +22088,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_with_kerberos=no
 
 echo $ac_n "checking for Kerberos support""... $ac_c" 1>&6
-echo "configure:22039: checking for Kerberos support" >&5
+echo "configure:22092: checking for Kerberos support" >&5
 # Check whether --with-kerberos or --without-kerberos was given.
 if test "${with_kerberos+set}" = set; then
   withval="$with_kerberos"
@@ -22361,7 +22414,7 @@ EOF
     # Extract the first word of "krb5-config", so it can be a program name with args.
 set dummy krb5-config; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:22365: checking for $ac_word" >&5
+echo "configure:22418: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_KRB5_CONFIG'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -22721,7 +22774,7 @@ fi
   fi
 
   echo $ac_n "checking for DSA_get_default_method in -lssl""... $ac_c" 1>&6
-echo "configure:22725: checking for DSA_get_default_method in -lssl" >&5
+echo "configure:22778: checking for DSA_get_default_method in -lssl" >&5
 ac_lib_var=`echo ssl'_'DSA_get_default_method | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -22729,7 +22782,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lssl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 22733 "configure"
+#line 22786 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -22740,7 +22793,7 @@ int main() {
 DSA_get_default_method()
 ; return 0; }
 EOF
-if { (eval echo configure:22744: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:22797: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -22782,7 +22835,7 @@ fi
     # Extract the first word of "pkg-config", so it can be a program name with args.
 set dummy pkg-config; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:22786: checking for $ac_word" >&5
+echo "configure:22839: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -22987,9 +23040,9 @@ fi
     old_CPPFLAGS=$CPPFLAGS
     CPPFLAGS=-I$OPENSSL_INCDIR
     echo $ac_n "checking for OpenSSL version""... $ac_c" 1>&6
-echo "configure:22991: checking for OpenSSL version" >&5
+echo "configure:23044: checking for OpenSSL version" >&5
     cat > conftest.$ac_ext <<EOF
-#line 22993 "configure"
+#line 23046 "configure"
 #include "confdefs.h"
 
 #include <openssl/opensslv.h>
@@ -23144,7 +23197,7 @@ rm -f conftest*
   done
 
   echo $ac_n "checking for CRYPTO_free in -lcrypto""... $ac_c" 1>&6
-echo "configure:23148: checking for CRYPTO_free in -lcrypto" >&5
+echo "configure:23201: checking for CRYPTO_free in -lcrypto" >&5
 ac_lib_var=`echo crypto'_'CRYPTO_free | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -23152,7 +23205,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lcrypto  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 23156 "configure"
+#line 23209 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -23163,7 +23216,7 @@ int main() {
 CRYPTO_free()
 ; return 0; }
 EOF
-if { (eval echo configure:23167: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:23220: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -23320,7 +23373,7 @@ fi
   done
 
   echo $ac_n "checking for SSL_CTX_set_ssl_version in -lssl""... $ac_c" 1>&6
-echo "configure:23324: checking for SSL_CTX_set_ssl_version in -lssl" >&5
+echo "configure:23377: checking for SSL_CTX_set_ssl_version in -lssl" >&5
 ac_lib_var=`echo ssl'_'SSL_CTX_set_ssl_version | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -23328,7 +23381,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lssl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 23332 "configure"
+#line 23385 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -23339,7 +23392,7 @@ int main() {
 SSL_CTX_set_ssl_version()
 ; return 0; }
 EOF
-if { (eval echo configure:23343: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:23396: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -23481,7 +23534,7 @@ ext_output=$PHP_PCRE_REGEX
 
   if test "$PHP_PCRE_REGEX" != "yes" && test "$PHP_PCRE_REGEX" != "no"; then
     echo $ac_n "checking for PCRE headers location""... $ac_c" 1>&6
-echo "configure:23485: checking for PCRE headers location" >&5
+echo "configure:23538: checking for PCRE headers location" >&5
     for i in $PHP_PCRE_REGEX $PHP_PCRE_REGEX/include $PHP_PCRE_REGEX/include/pcre $PHP_PCRE_REGEX/local/include; do
       test -f $i/pcre.h && PCRE_INCDIR=$i
     done
@@ -23492,7 +23545,7 @@ echo "configure:23485: checking for PCRE
     echo "$ac_t""$PCRE_INCDIR" 1>&6
 
     echo $ac_n "checking for PCRE library location""... $ac_c" 1>&6
-echo "configure:23496: checking for PCRE library location" >&5
+echo "configure:23549: checking for PCRE library location" >&5
     for j in $PHP_PCRE_REGEX $PHP_PCRE_REGEX/$PHP_LIBDIR; do
       test -f $j/libpcre.a || test -f $j/libpcre.$SHLIB_SUFFIX_NAME && PCRE_LIBDIR=$j
     done
@@ -23914,7 +23967,7 @@ EOF
 
   else
     echo $ac_n "checking for PCRE library to use""... $ac_c" 1>&6
-echo "configure:23918: checking for PCRE library to use" >&5
+echo "configure:23971: checking for PCRE library to use" >&5
     echo "$ac_t""bundled" 1>&6
     pcrelib_sources="pcrelib/pcre_chartables.c pcrelib/pcre_ucd.c \
     				 pcrelib/pcre_compile.c pcrelib/pcre_config.c pcrelib/pcre_exec.c \
@@ -24251,7 +24304,7 @@ EOF
 php_with_sqlite3=yes
 
 echo $ac_n "checking whether to enable the SQLite3 extension""... $ac_c" 1>&6
-echo "configure:24255: checking whether to enable the SQLite3 extension" >&5
+echo "configure:24308: checking whether to enable the SQLite3 extension" >&5
 # Check whether --with-sqlite3 or --without-sqlite3 was given.
 if test "${with_sqlite3+set}" = set; then
   withval="$with_sqlite3"
@@ -24306,7 +24359,7 @@ if test $PHP_SQLITE3 != "no"; then
 
   if test $PHP_SQLITE3 != "yes"; then
     echo $ac_n "checking for sqlite3 files in default path""... $ac_c" 1>&6
-echo "configure:24310: checking for sqlite3 files in default path" >&5
+echo "configure:24363: checking for sqlite3 files in default path" >&5
     for i in $PHP_SQLITE3 /usr/local /usr; do
       if test -r $i/include/sqlite3.h; then
         SQLITE3_DIR=$i
@@ -24321,7 +24374,7 @@ echo "configure:24310: checking for sqli
     fi
 
     echo $ac_n "checking for SQLite 3.3.9+""... $ac_c" 1>&6
-echo "configure:24325: checking for SQLite 3.3.9+" >&5
+echo "configure:24378: checking for SQLite 3.3.9+" >&5
     
   save_old_LDFLAGS=$LDFLAGS
   ac_stuff="
@@ -24420,7 +24473,7 @@ echo "configure:24325: checking for SQLi
   done
 
   echo $ac_n "checking for sqlite3_prepare_v2 in -lsqlite3""... $ac_c" 1>&6
-echo "configure:24424: checking for sqlite3_prepare_v2 in -lsqlite3" >&5
+echo "configure:24477: checking for sqlite3_prepare_v2 in -lsqlite3" >&5
 ac_lib_var=`echo sqlite3'_'sqlite3_prepare_v2 | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -24428,7 +24481,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lsqlite3  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 24432 "configure"
+#line 24485 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -24439,7 +24492,7 @@ int main() {
 sqlite3_prepare_v2()
 ; return 0; }
 EOF
-if { (eval echo configure:24443: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:24496: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -24699,7 +24752,7 @@ fi
   done
 
   echo $ac_n "checking for sqlite3_key in -lsqlite3""... $ac_c" 1>&6
-echo "configure:24703: checking for sqlite3_key in -lsqlite3" >&5
+echo "configure:24756: checking for sqlite3_key in -lsqlite3" >&5
 ac_lib_var=`echo sqlite3'_'sqlite3_key | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -24707,7 +24760,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lsqlite3  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 24711 "configure"
+#line 24764 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -24718,7 +24771,7 @@ int main() {
 sqlite3_key()
 ; return 0; }
 EOF
-if { (eval echo configure:24722: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:24775: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -24850,7 +24903,7 @@ fi
   done
 
   echo $ac_n "checking for sqlite3_load_extension in -lsqlite3""... $ac_c" 1>&6
-echo "configure:24854: checking for sqlite3_load_extension in -lsqlite3" >&5
+echo "configure:24907: checking for sqlite3_load_extension in -lsqlite3" >&5
 ac_lib_var=`echo sqlite3'_'sqlite3_load_extension | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -24858,7 +24911,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lsqlite3  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 24862 "configure"
+#line 24915 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -24869,7 +24922,7 @@ int main() {
 sqlite3_load_extension()
 ; return 0; }
 EOF
-if { (eval echo configure:24873: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:24926: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -24906,7 +24959,7 @@ fi
 
   else
     echo $ac_n "checking bundled sqlite3 library""... $ac_c" 1>&6
-echo "configure:24910: checking bundled sqlite3 library" >&5
+echo "configure:24963: checking bundled sqlite3 library" >&5
     echo "$ac_t""yes" 1>&6
 
     sqlite3_extra_sources="libsqlite/sqlite3.c"
@@ -25262,7 +25315,7 @@ fi
 php_with_zlib=no
 
 echo $ac_n "checking for ZLIB support""... $ac_c" 1>&6
-echo "configure:25266: checking for ZLIB support" >&5
+echo "configure:25319: checking for ZLIB support" >&5
 # Check whether --with-zlib or --without-zlib was given.
 if test "${with_zlib+set}" = set; then
   withval="$with_zlib"
@@ -25306,7 +25359,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_with_zlib_dir=no
 
 echo $ac_n "checking if the location of ZLIB install directory is defined""... $ac_c" 1>&6
-echo "configure:25310: checking if the location of ZLIB install directory is defined" >&5
+echo "configure:25363: checking if the location of ZLIB install directory is defined" >&5
 # Check whether --with-zlib-dir or --without-zlib-dir was given.
 if test "${with_zlib_dir+set}" = set; then
   withval="$with_zlib_dir"
@@ -25749,7 +25802,7 @@ EOF
   done
 
   echo $ac_n "checking for gzgets in -lz""... $ac_c" 1>&6
-echo "configure:25753: checking for gzgets in -lz" >&5
+echo "configure:25806: checking for gzgets in -lz" >&5
 ac_lib_var=`echo z'_'gzgets | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -25757,7 +25810,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lz  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 25761 "configure"
+#line 25814 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -25768,7 +25821,7 @@ int main() {
 gzgets()
 ; return 0; }
 EOF
-if { (eval echo configure:25772: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:25825: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -25905,18 +25958,18 @@ fi
 
 
 
-php_enable_bcmath=no
+php_enable_apc=no
 
-echo $ac_n "checking whether to enable bc style precision math functions""... $ac_c" 1>&6
-echo "configure:25912: checking whether to enable bc style precision math functions" >&5
-# Check whether --enable-bcmath or --disable-bcmath was given.
-if test "${enable_bcmath+set}" = set; then
-  enableval="$enable_bcmath"
-  PHP_BCMATH=$enableval
+echo $ac_n "checking whether to enable APC support""... $ac_c" 1>&6
+echo "configure:25965: checking whether to enable APC support" >&5
+# Check whether --enable-apc or --disable-apc was given.
+if test "${enable_apc+set}" = set; then
+  enableval="$enable_apc"
+  PHP_APC=$enableval
 else
   
-  PHP_BCMATH=no
-  test "$PHP_ENABLE_ALL" && PHP_BCMATH=$PHP_ENABLE_ALL
+  PHP_APC=no
+  test "$PHP_ENABLE_ALL" && PHP_APC=$PHP_ENABLE_ALL
 
 fi
 
@@ -25924,12 +25977,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_BCMATH in
+case $PHP_APC in
 shared,*)
-  PHP_BCMATH=`echo "$PHP_BCMATH"|$SED 's/^shared,//'`
+  PHP_APC=`echo "$PHP_APC"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_BCMATH=yes
+  PHP_APC=yes
   ;;
 no)
   ext_output=no
@@ -25948,396 +26001,481 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
-if test "$PHP_BCMATH" != "no"; then
+# Check whether --enable-apc-debug or --disable-apc-debug was given.
+if test "${enable_apc_debug+set}" = set; then
+  enableval="$enable_apc_debug"
   
-  ext_builddir=ext/bcmath
-  ext_srcdir=$abs_srcdir/ext/bcmath
-
-  ac_extra=`echo "-I@ext_srcdir@/libbcmath/src"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
+  PHP_APC_DEBUG=yes
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_BCMATH_SHARED=no
-    
-  
-  case ext/bcmath in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
+else
   
+  PHP_APC_DEBUG=no
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+fi
 
 
-  old_IFS=$IFS
-  for ac_src in bcmath.c \
-libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
-libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
-libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
-libbcmath/src/rmzero.c libbcmath/src/str2num.c; do
+echo $ac_n "checking whether we should enable cache request file info""... $ac_c" 1>&6
+echo "configure:26019: checking whether we should enable cache request file info" >&5
+# Check whether --enable-apc-filehits or --disable-apc-filehits was given.
+if test "${enable_apc_filehits+set}" = set; then
+  enableval="$enable_apc_filehits"
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+  PHP_APC_FILEHITS=$enableval
+	echo "$ac_t""$enableval" 1>&6
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+else
+  
+  PHP_APC_FILEHITS=no
+	echo "$ac_t""no" 1>&6
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+fi
 
 
-    EXT_STATIC="$EXT_STATIC bcmath"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC bcmath"
-    fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_BCMATH_SHARED=yes
-      
-  case ext/bcmath in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+echo $ac_n "checking whether we should use mmap""... $ac_c" 1>&6
+echo "configure:26036: checking whether we should use mmap" >&5
+# Check whether --enable-apc-mmap or --disable-apc-mmap was given.
+if test "${enable_apc_mmap+set}" = set; then
+  enableval="$enable_apc_mmap"
   
+  PHP_APC_MMAP=$enableval
+  echo "$ac_t""$enableval" 1>&6
+
+else
   
+  PHP_APC_MMAP=yes
+  echo "$ac_t""yes" 1>&6
 
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
+fi
 
 
-  old_IFS=$IFS
-  for ac_src in bcmath.c \
-libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
-libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
-libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
-libbcmath/src/rmzero.c libbcmath/src/str2num.c; do
+echo $ac_n "checking whether we should use semaphore locking instead of fcntl""... $ac_c" 1>&6
+echo "configure:26053: checking whether we should use semaphore locking instead of fcntl" >&5
+# Check whether --enable-apc-sem or --disable-apc-sem was given.
+if test "${enable_apc_sem+set}" = set; then
+  enableval="$enable_apc_sem"
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_bcmath="$shared_objects_bcmath $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+  PHP_APC_SEM=$enableval
+  echo "$ac_t""$enableval" 1>&6
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+else
+  
+  PHP_APC_SEM=no
+  echo "$ac_t""no" 1>&6
 
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
+fi
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpbcmath.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) $(PHPBCMATH_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpbcmath.so '$ext_builddir'/phpbcmath.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPBCMATH, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) $(PHPBCMATH_SHARED_LIBADD)'
-      ;;
-  esac
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpbcmath.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpbcmath.$suffix"
-  fi
+echo $ac_n "checking whether we should use pthread mutex locking""... $ac_c" 1>&6
+echo "configure:26070: checking whether we should use pthread mutex locking" >&5
+# Check whether --enable-apc-pthreadmutex or --disable-apc-pthreadmutex was given.
+if test "${enable_apc_pthreadmutex+set}" = set; then
+  enableval="$enable_apc_pthreadmutex"
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bcmath"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpbcmath.$suffix: $ext_builddir/phpbcmath.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpbcmath.$suffix \$(phplibdir)
+  PHP_APC_PTHREADMUTEX=$enableval
+  echo "$ac_t""$enableval" 1>&6
 
-$ext_builddir/phpbcmath.$suffix: \$(shared_objects_bcmath) \$(PHPBCMATH_SHARED_DEPENDENCIES)
-	$link_cmd
-
-EOF
+else
+  
+  PHP_APC_PTHREADMUTEX=yes
+  echo "$ac_t""yes" 1>&6
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
+fi
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/bcmath.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) $(BCMATH_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/bcmath.so '$ext_builddir'/bcmath.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(BCMATH, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) $(BCMATH_SHARED_LIBADD)'
-      ;;
-  esac
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/bcmath.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/bcmath.$suffix"
-  fi
+if test "$PHP_APC_PTHREADMUTEX" != "no"; then
+	orig_LIBS="$LIBS"
+	LIBS="$LIBS -lpthread"
+	if test "$cross_compiling" = yes; then
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bcmath"
+				
+  
+  case pthread in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lpthread $LIBS" 
+   ;;
+  esac
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/bcmath.$suffix: $ext_builddir/bcmath.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/bcmath.$suffix \$(phplibdir)
 
-$ext_builddir/bcmath.$suffix: \$(shared_objects_bcmath) \$(BCMATH_SHARED_DEPENDENCIES)
-	$link_cmd
+			
+	
+else
+  cat > conftest.$ac_ext <<EOF
+#line 26105 "configure"
+#include "confdefs.h"
 
+				#include <sys/types.h>
+				#include <pthread.h>
+                                main() {
+				pthread_mutex_t mutex;
+				pthread_mutexattr_t attr;	
+
+				if(pthread_mutexattr_init(&attr)) { 
+					puts("Unable to initialize pthread attributes (pthread_mutexattr_init).");
+					return -1; 
+				}
+				if(pthread_mutexattr_setpshared(&attr, PTHREAD_PROCESS_SHARED)) { 
+					puts("Unable to set PTHREAD_PROCESS_SHARED (pthread_mutexattr_setpshared), your system may not support shared mutex's.");
+					return -1; 
+				}	
+				if(pthread_mutex_init(&mutex, &attr)) { 
+					puts("Unable to initialize the mutex (pthread_mutex_init).");
+					return -1; 
+				}
+				if(pthread_mutexattr_destroy(&attr)) { 
+					puts("Unable to destroy mutex attributes (pthread_mutexattr_destroy).");
+					return -1; 
+				}
+				if(pthread_mutex_destroy(&mutex)) { 
+					puts("Unable to destroy mutex (pthread_mutex_destroy).");
+					return -1; 
+				}
+
+				puts("pthread mutex's are supported!");
+				return 0;
+                                }
+			
 EOF
+if { (eval echo configure:26140: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+   				
+  
+  case pthread in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lpthread $LIBS" 
+   ;;
+  esac
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_BCMATH 1
-EOF
 
-    fi
-  fi
+			
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+   				echo "configure: warning: It doesn't appear that pthread mutex's are supported on your system" 1>&2
+  			PHP_APC_PTHREADMUTEX=no
+			
+fi
+rm -fr conftest*
+fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_BCMATH_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
-  
-  case ext/bcmath in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+	LIBS="$orig_LIBS"
+fi
+
+echo $ac_n "checking whether we should use spin locks""... $ac_c" 1>&6
+echo "configure:26168: checking whether we should use spin locks" >&5
+# Check whether --enable-apc-spinlocks or --disable-apc-spinlocks was given.
+if test "${enable_apc_spinlocks+set}" = set; then
+  enableval="$enable_apc_spinlocks"
   
+  PHP_APC_SPINLOCKS=$enableval
+  echo "$ac_t""$enableval" 1>&6
+
+else
   
+  PHP_APC_SPINLOCKS=no
+  echo "$ac_t""no" 1>&6
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+fi
 
 
-  old_IFS=$IFS
-  for ac_src in bcmath.c \
-libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
-libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
-libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
-libbcmath/src/rmzero.c libbcmath/src/str2num.c; do
+echo $ac_n "checking whether we should enable memory protection""... $ac_c" 1>&6
+echo "configure:26185: checking whether we should enable memory protection" >&5
+# Check whether --enable-apc-memprotect or --disable-apc-memprotect was given.
+if test "${enable_apc_memprotect+set}" = set; then
+  enableval="$enable_apc_memprotect"
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+  PHP_APC_MEMPROTECT=$enableval
+  echo "$ac_t""$enableval" 1>&6
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+else
+  
+  PHP_APC_MEMPROTECT=no
+  echo "$ac_t""no" 1>&6
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+fi
 
 
-        EXT_STATIC="$EXT_STATIC bcmath"
-        ;;
-      *)
-        
-  
-  case ext/bcmath in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
+if test "$PHP_APC" != "no"; then
+  test "$PHP_APC_MMAP" != "no" && cat >> confdefs.h <<\EOF
+#define APC_MMAP 1
+EOF
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+  test "$PHP_APC_FILEHITS" != "no" && cat >> confdefs.h <<\EOF
+#define APC_FILEHITS 1
+EOF
 
 
-  old_IFS=$IFS
-  for ac_src in bcmath.c \
-libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
-libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
-libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
-libbcmath/src/rmzero.c libbcmath/src/str2num.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+	if test "$PHP_APC_DEBUG" != "no"; then
+		cat >> confdefs.h <<\EOF
+#define __DEBUG_APC__ 1
+EOF
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+	fi
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+	if test "$PHP_APC_SEM" != "no"; then
+		cat >> confdefs.h <<\EOF
+#define APC_SEM_LOCKS 1
 EOF
-  done
 
+	elif test "$PHP_APC_SPINLOCKS" != "no"; then
+		cat >> confdefs.h <<\EOF
+#define APC_SPIN_LOCKS 1
+EOF
+ 
+	elif test "$PHP_APC_PTHREADMUTEX" != "no"; then 
+		cat >> confdefs.h <<\EOF
+#define APC_PTHREADMUTEX_LOCKS 1
+EOF
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC bcmath"
-  fi
-  
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
+	else 
+		cat >> confdefs.h <<\EOF
+#define APC_FCNTL_LOCKS 1
+EOF
 
+	fi
+  
+	if test "$PHP_APC_MEMPROTECT" != "no"; then
+		cat >> confdefs.h <<\EOF
+#define APC_MEMPROTECT 1
+EOF
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=bcmath
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+	fi
 
-  fi
+  echo $ac_n "checking for zend_set_lookup_function_hook""... $ac_c" 1>&6
+echo "configure:26248: checking for zend_set_lookup_function_hook" >&5
+if eval "test \"`echo '$''{'php_cv_zend_set_lookup_function_hook'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+    orig_cflags=$CFLAGS
+    CFLAGS="$INCLUDES $EXTRA_INCLUDES"
+    cat > conftest.$ac_ext <<EOF
+#line 26256 "configure"
+#include "confdefs.h"
 
+#include "main/php.h"
+#include "Zend/zend_API.h"
+    
+int main() {
+#ifndef zend_set_lookup_function_hook
+	(void) zend_set_lookup_function_hook;
+#endif
+; return 0; }
+EOF
+if { (eval echo configure:26268: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
   
+      php_cv_zend_set_lookup_function_hook=yes
+    
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
   
-    BUILD_DIR="$BUILD_DIR $ext_builddir/libbcmath/src"
+      php_cv_zend_set_lookup_function_hook=no
+    
+fi
+rm -f conftest*
+    CFLAGS=$orig_cflags
   
+fi
 
-  cat >> confdefs.h <<\EOF
-#define HAVE_BCMATH 1
+echo "$ac_t""$php_cv_zend_set_lookup_function_hook" 1>&6
+  if test "$php_cv_zend_set_lookup_function_hook" = "yes"; then
+    cat >> confdefs.h <<\EOF
+#define APC_HAVE_LOOKUP_HOOKS 1
 EOF
 
-fi
+  else
+    cat >> confdefs.h <<\EOF
+#define APC_HAVE_LOOKUP_HOOKS 0
+EOF
 
+  fi
+
+  for ac_func in sigaction
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:26302: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 26307 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
 
+int main() {
 
-php_with_bz2=no
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
 
-echo $ac_n "checking for BZip2 support""... $ac_c" 1>&6
-echo "configure:26277: checking for BZip2 support" >&5
-# Check whether --with-bz2 or --without-bz2 was given.
-if test "${with_bz2+set}" = set; then
-  withval="$with_bz2"
-  PHP_BZ2=$withval
+; return 0; }
+EOF
+if { (eval echo configure:26330: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
 else
-  
-  PHP_BZ2=no
-  test "$PHP_ENABLE_ALL" && PHP_BZ2=$PHP_ENABLE_ALL
-
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=no"
+fi
+rm -f conftest*
 fi
 
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
 
+  echo $ac_n "checking for union semun""... $ac_c" 1>&6
+echo "configure:26355: checking for union semun" >&5
+if eval "test \"`echo '$''{'php_cv_semun'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+    cat > conftest.$ac_ext <<EOF
+#line 26361 "configure"
+#include "confdefs.h"
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_BZ2 in
-shared,*)
-  PHP_BZ2=`echo "$PHP_BZ2"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_BZ2=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
+#include <sys/types.h>
+#include <sys/ipc.h>
+#include <sys/sem.h>
+    
+int main() {
+union semun x; x.val=1
+; return 0; }
+EOF
+if { (eval echo configure:26372: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
+  
+      php_cv_semun=yes
+    
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  
+      php_cv_semun=no
+    
+fi
+rm -f conftest*
+  
+fi
 
+echo "$ac_t""$php_cv_semun" 1>&6
+  if test "$php_cv_semun" = "yes"; then
+    cat >> confdefs.h <<\EOF
+#define HAVE_SEMUN 1
+EOF
 
+  else
+    cat >> confdefs.h <<\EOF
+#define HAVE_SEMUN 0
+EOF
 
-echo "$ac_t""$ext_output" 1>&6
+  fi
 
+  echo $ac_n "checking whether we should enable valgrind support""... $ac_c" 1>&6
+echo "configure:26403: checking whether we should enable valgrind support" >&5
+  # Check whether --enable-valgrind-checks or --disable-valgrind-checks was given.
+if test "${enable_valgrind_checks+set}" = set; then
+  enableval="$enable_valgrind_checks"
+  
+    PHP_APC_VALGRIND=$enableval
+    echo "$ac_t""$enableval" 1>&6
+  
+else
+  
+    PHP_APC_VALGRIND=yes
+    echo "$ac_t""yes" 1>&6
+    ac_safe=`echo "valgrind/memcheck.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for valgrind/memcheck.h""... $ac_c" 1>&6
+echo "configure:26417: checking for valgrind/memcheck.h" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 26422 "configure"
+#include "confdefs.h"
+#include <valgrind/memcheck.h>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:26427: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_VALGRIND_MEMCHECK_H 1
+EOF
 
+else
+  echo "$ac_t""no" 1>&6
+fi
 
+  
+fi
 
-if test "$PHP_BZ2" != "no"; then
-  if test -r $PHP_BZ2/include/bzlib.h; then
-    BZIP_DIR=$PHP_BZ2
-  else
-    echo $ac_n "checking for BZip2 in default path""... $ac_c" 1>&6
-echo "configure:26322: checking for BZip2 in default path" >&5
-    for i in /usr/local /usr; do
-      if test -r $i/include/bzlib.h; then
-        BZIP_DIR=$i
-        echo "$ac_t""found in $i" 1>&6
-        break
-      fi
-    done
-  fi
 
-  if test -z "$BZIP_DIR"; then
-    echo "$ac_t""not found" 1>&6
-    { echo "configure: error: Please reinstall the BZip2 distribution" 1>&2; exit 1; }
-  fi
+  apc_sources="apc.c php_apc.c \
+               apc_cache.c \
+               apc_compile.c \
+               apc_debug.c \
+               apc_fcntl.c \
+               apc_main.c \
+               apc_mmap.c \
+               apc_sem.c \
+               apc_shm.c \
+               apc_pthreadmutex.c \
+               apc_spin.c \
+               pgsql_s_lock.c \
+               apc_sma.c \
+               apc_stack.c \
+               apc_zend.c \
+               apc_rfc1867.c \
+               apc_signal.c \
+               apc_pool.c \
+               apc_iterator.c \
+               apc_bin.c \
+               apc_string.c "
 
   
   save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-    -L$BZIP_DIR/$PHP_LIBDIR
-  "
+  ac_stuff=""
   
   save_ext_shared=$ext_shared
   ext_shared=yes
@@ -26430,27 +26568,27 @@ echo "configure:26322: checking for BZip
     esac
   done
 
-  echo $ac_n "checking for BZ2_bzerror in -lbz2""... $ac_c" 1>&6
-echo "configure:26435: checking for BZ2_bzerror in -lbz2" >&5
-ac_lib_var=`echo bz2'_'BZ2_bzerror | sed 'y%./+-%__p_%'`
+  echo $ac_n "checking for shm_open in -lrt""... $ac_c" 1>&6
+echo "configure:26573: checking for shm_open in -lrt" >&5
+ac_lib_var=`echo rt'_'shm_open | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lbz2  $LIBS"
+LIBS="-lrt  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 26443 "configure"
+#line 26581 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char BZ2_bzerror();
+char shm_open();
 
 int main() {
-BZ2_bzerror()
+shm_open()
 ; return 0; }
 EOF
-if { (eval echo configure:26454: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:26592: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -26469,167 +26607,53 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
     
-    
-  if test "$BZIP_DIR/include" != "/usr/include"; then
-    
-  if test -z "$BZIP_DIR/include" || echo "$BZIP_DIR/include" | grep '^/' >/dev/null ; then
-    ai_p=$BZIP_DIR/include
-  else
-    
-    ep_dir="`echo $BZIP_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$BZIP_DIR/include\"`"
-  fi
-
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
-
-    
-
-  if test "$ext_shared" = "yes"; then
-    BZ2_SHARED_LIBADD="-lbz2 $BZ2_SHARED_LIBADD"
-    if test -n "$BZIP_DIR/$PHP_LIBDIR"; then
-      
-  if test "$BZIP_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$BZIP_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$BZIP_DIR/$PHP_LIBDIR" || echo "$BZIP_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$BZIP_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $BZIP_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$BZIP_DIR/$PHP_LIBDIR\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        BZ2_SHARED_LIBADD="-L$ai_p $BZ2_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && BZ2_SHARED_LIBADD="$ld_runpath_switch$ai_p $BZ2_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  fi
-
-
-      fi
-    
-  fi
-
-    fi
-  else
-    
-
-  if test -n "$BZIP_DIR/$PHP_LIBDIR"; then
-    
-  if test "$BZIP_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$BZIP_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$BZIP_DIR/$PHP_LIBDIR" || echo "$BZIP_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$BZIP_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $BZIP_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$BZIP_DIR/$PHP_LIBDIR\"`"
-  fi
-
-    
+  case rt in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        APC_SHARED_LIBADD="-lrt $APC_SHARED_LIBADD" 
+    else
       
   
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-    
-  fi
-
-  fi
-  
-  
-  case bz2 in
+  case rt in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lbz2 $LIBS" 
+      LIBS="-lrt $LIBS" 
    ;;
   esac
 
 
+    fi
+   ;;
+  esac
 
 
-  fi
-
-
-    cat >> confdefs.h <<\EOF
-#define HAVE_BZ2 1
-EOF
-
-  
   
 else
   echo "$ac_t""no" 1>&6
 
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
-    unset ac_cv_lib_bz2_BZ2_bzerror
+    unset ac_cv_lib_rt_shm_open
     
-    { echo "configure: error: bz2 module requires libbz2 >= 1.0.0" 1>&2; exit 1; }
-  
   
 fi
 
-
   
-  ext_builddir=ext/bz2
-  ext_srcdir=$abs_srcdir/ext/bz2
+  ext_builddir=ext/apc
+  ext_srcdir=$abs_srcdir/ext/apc
 
-  ac_extra=
+  ac_extra=`echo "\\$(APC_CFLAGS)"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_BZ2_SHARED=no
+    PHP_APC_SHARED=no
     
   
-  case ext/bz2 in
+  case ext/apc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/apc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/apc/"; ac_bdir="ext/apc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -26644,7 +26668,7 @@ fi
 
 
   old_IFS=$IFS
-  for ac_src in bz2.c bz2_filter.c; do
+  for ac_src in $apc_sources; do
   
       IFS=.
       set $ac_src
@@ -26667,18 +26691,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC bz2"
+    EXT_STATIC="$EXT_STATIC apc"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC bz2"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC apc"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_BZ2_SHARED=yes
+      PHP_APC_SHARED=yes
       
-  case ext/bz2 in
+  case ext/apc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/apc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/apc/"; ac_bdir="ext/apc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -26693,14 +26717,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in bz2.c bz2_filter.c; do
+  for ac_src in $apc_sources; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_bz2="$shared_objects_bz2 $ac_bdir$ac_obj.lo"
+      shared_objects_apc="$shared_objects_apc $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -26723,31 +26747,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpbz2.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) $(PHPBZ2_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpbz2.so '$ext_builddir'/phpbz2.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpapc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_apc) $(PHPAPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpapc.so '$ext_builddir'/phpapc.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPBZ2, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_apc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPAPC, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) $(PHPBZ2_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_apc) $(PHPAPC_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpbz2.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpapc.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpbz2.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpapc.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bz2"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_apc"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpbz2.$suffix: $ext_builddir/phpbz2.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpbz2.$suffix \$(phplibdir)
+\$(phplibdir)/phpapc.$suffix: $ext_builddir/phpapc.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpapc.$suffix \$(phplibdir)
 
-$ext_builddir/phpbz2.$suffix: \$(shared_objects_bz2) \$(PHPBZ2_SHARED_DEPENDENCIES)
+$ext_builddir/phpapc.$suffix: \$(shared_objects_apc) \$(PHPAPC_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -26760,31 +26784,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/bz2.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) $(BZ2_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/bz2.so '$ext_builddir'/bz2.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/apc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_apc) $(APC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/apc.so '$ext_builddir'/apc.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(BZ2, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_apc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(APC, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) $(BZ2_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_apc) $(APC_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/bz2.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/apc.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/bz2.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/apc.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bz2"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_apc"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/bz2.$suffix: $ext_builddir/bz2.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/bz2.$suffix \$(phplibdir)
+\$(phplibdir)/apc.$suffix: $ext_builddir/apc.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/apc.$suffix \$(phplibdir)
 
-$ext_builddir/bz2.$suffix: \$(shared_objects_bz2) \$(BZ2_SHARED_DEPENDENCIES)
+$ext_builddir/apc.$suffix: \$(shared_objects_apc) \$(APC_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -26792,22 +26816,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_BZ2 1
+#define COMPILE_DL_APC 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_BZ2_SHARED=no
+    PHP_APC_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/bz2 in
+  case ext/apc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/apc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/apc/"; ac_bdir="ext/apc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -26822,7 +26846,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in bz2.c bz2_filter.c; do
+  for ac_src in $apc_sources; do
   
       IFS=.
       set $ac_src
@@ -26845,15 +26869,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC bz2"
+        EXT_STATIC="$EXT_STATIC apc"
         ;;
       *)
         
   
-  case ext/bz2 in
+  case ext/apc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/apc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/apc/"; ac_bdir="ext/apc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -26868,7 +26892,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in bz2.c bz2_filter.c; do
+  for ac_src in $apc_sources; do
   
       IFS=.
       set $ac_src
@@ -26893,7 +26917,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC bz2"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC apc"
   fi
   
   
@@ -26902,31 +26926,39 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=bz2
+    PHP_PECL_EXTENSION=apc
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST BZ2_SHARED_LIBADD"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST APC_SHARED_LIBADD"
+
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST APC_CFLAGS"
+
+  cat >> confdefs.h <<\EOF
+#define HAVE_APC 1
+EOF
 
 fi
 
 
 
-php_enable_calendar=no
 
-echo $ac_n "checking whether to enable calendar conversion support""... $ac_c" 1>&6
-echo "configure:26922: checking whether to enable calendar conversion support" >&5
-# Check whether --enable-calendar or --disable-calendar was given.
-if test "${enable_calendar+set}" = set; then
-  enableval="$enable_calendar"
-  PHP_CALENDAR=$enableval
+php_enable_bcmath=no
+
+echo $ac_n "checking whether to enable bc style precision math functions""... $ac_c" 1>&6
+echo "configure:26954: checking whether to enable bc style precision math functions" >&5
+# Check whether --enable-bcmath or --disable-bcmath was given.
+if test "${enable_bcmath+set}" = set; then
+  enableval="$enable_bcmath"
+  PHP_BCMATH=$enableval
 else
   
-  PHP_CALENDAR=no
-  test "$PHP_ENABLE_ALL" && PHP_CALENDAR=$PHP_ENABLE_ALL
+  PHP_BCMATH=no
+  test "$PHP_ENABLE_ALL" && PHP_BCMATH=$PHP_ENABLE_ALL
 
 fi
 
@@ -26934,12 +26966,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_CALENDAR in
+case $PHP_BCMATH in
 shared,*)
-  PHP_CALENDAR=`echo "$PHP_CALENDAR"|$SED 's/^shared,//'`
+  PHP_BCMATH=`echo "$PHP_BCMATH"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_CALENDAR=yes
+  PHP_BCMATH=yes
   ;;
 no)
   ext_output=no
@@ -26958,25 +26990,21 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
-if test "$PHP_CALENDAR" = "yes"; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_CALENDAR 1
-EOF
-
+if test "$PHP_BCMATH" != "no"; then
   
-  ext_builddir=ext/calendar
-  ext_srcdir=$abs_srcdir/ext/calendar
+  ext_builddir=ext/bcmath
+  ext_srcdir=$abs_srcdir/ext/bcmath
 
-  ac_extra=
+  ac_extra=`echo "-I@ext_srcdir@/libbcmath/src"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_CALENDAR_SHARED=no
+    PHP_BCMATH_SHARED=no
     
   
-  case ext/calendar in
+  case ext/bcmath in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -26991,7 +27019,11 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do
+  for ac_src in bcmath.c \
+libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
+libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
+libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
+libbcmath/src/rmzero.c libbcmath/src/str2num.c; do
   
       IFS=.
       set $ac_src
@@ -27014,18 +27046,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC calendar"
+    EXT_STATIC="$EXT_STATIC bcmath"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC calendar"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC bcmath"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_CALENDAR_SHARED=yes
+      PHP_BCMATH_SHARED=yes
       
-  case ext/calendar in
+  case ext/bcmath in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -27040,14 +27072,18 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do
+  for ac_src in bcmath.c \
+libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
+libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
+libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
+libbcmath/src/rmzero.c libbcmath/src/str2num.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_calendar="$shared_objects_calendar $ac_bdir$ac_obj.lo"
+      shared_objects_bcmath="$shared_objects_bcmath $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -27070,31 +27106,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpcalendar.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) $(PHPCALENDAR_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpcalendar.so '$ext_builddir'/phpcalendar.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpbcmath.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) $(PHPBCMATH_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpbcmath.so '$ext_builddir'/phpbcmath.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPCALENDAR, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPBCMATH, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) $(PHPCALENDAR_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) $(PHPBCMATH_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpcalendar.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpbcmath.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpcalendar.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpbcmath.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_calendar"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bcmath"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpcalendar.$suffix: $ext_builddir/phpcalendar.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpcalendar.$suffix \$(phplibdir)
+\$(phplibdir)/phpbcmath.$suffix: $ext_builddir/phpbcmath.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpbcmath.$suffix \$(phplibdir)
 
-$ext_builddir/phpcalendar.$suffix: \$(shared_objects_calendar) \$(PHPCALENDAR_SHARED_DEPENDENCIES)
+$ext_builddir/phpbcmath.$suffix: \$(shared_objects_bcmath) \$(PHPBCMATH_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -27107,31 +27143,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/calendar.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) $(CALENDAR_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/calendar.so '$ext_builddir'/calendar.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/bcmath.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) $(BCMATH_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/bcmath.so '$ext_builddir'/bcmath.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(CALENDAR, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(BCMATH, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) $(CALENDAR_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) $(BCMATH_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/calendar.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/bcmath.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/calendar.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/bcmath.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_calendar"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bcmath"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/calendar.$suffix: $ext_builddir/calendar.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/calendar.$suffix \$(phplibdir)
+\$(phplibdir)/bcmath.$suffix: $ext_builddir/bcmath.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/bcmath.$suffix \$(phplibdir)
 
-$ext_builddir/calendar.$suffix: \$(shared_objects_calendar) \$(CALENDAR_SHARED_DEPENDENCIES)
+$ext_builddir/bcmath.$suffix: \$(shared_objects_bcmath) \$(BCMATH_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -27139,22 +27175,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_CALENDAR 1
+#define COMPILE_DL_BCMATH 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_CALENDAR_SHARED=no
+    PHP_BCMATH_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/calendar in
+  case ext/bcmath in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -27169,7 +27205,11 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do
+  for ac_src in bcmath.c \
+libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
+libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
+libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
+libbcmath/src/rmzero.c libbcmath/src/str2num.c; do
   
       IFS=.
       set $ac_src
@@ -27192,15 +27232,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC calendar"
+        EXT_STATIC="$EXT_STATIC bcmath"
         ;;
       *)
         
   
-  case ext/calendar in
+  case ext/bcmath in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -27215,7 +27255,11 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do
+  for ac_src in bcmath.c \
+libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
+libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
+libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
+libbcmath/src/rmzero.c libbcmath/src/str2num.c; do
   
       IFS=.
       set $ac_src
@@ -27240,7 +27284,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC calendar"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC bcmath"
   fi
   
   
@@ -27249,28 +27293,37 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=calendar
+    PHP_PECL_EXTENSION=bcmath
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir/libbcmath/src"
+  
+
+  cat >> confdefs.h <<\EOF
+#define HAVE_BCMATH 1
+EOF
+
 fi
 
 
 
-php_enable_ctype=yes
+php_with_bz2=no
 
-echo $ac_n "checking whether to enable ctype functions""... $ac_c" 1>&6
-echo "configure:27266: checking whether to enable ctype functions" >&5
-# Check whether --enable-ctype or --disable-ctype was given.
-if test "${enable_ctype+set}" = set; then
-  enableval="$enable_ctype"
-  PHP_CTYPE=$enableval
+echo $ac_n "checking for BZip2 support""... $ac_c" 1>&6
+echo "configure:27319: checking for BZip2 support" >&5
+# Check whether --with-bz2 or --without-bz2 was given.
+if test "${with_bz2+set}" = set; then
+  withval="$with_bz2"
+  PHP_BZ2=$withval
 else
   
-  PHP_CTYPE=yes
-  test "$PHP_ENABLE_ALL" && PHP_CTYPE=$PHP_ENABLE_ALL
+  PHP_BZ2=no
+  test "$PHP_ENABLE_ALL" && PHP_BZ2=$PHP_ENABLE_ALL
 
 fi
 
@@ -27278,12 +27331,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_CTYPE in
+case $PHP_BZ2 in
 shared,*)
-  PHP_CTYPE=`echo "$PHP_CTYPE"|$SED 's/^shared,//'`
+  PHP_BZ2=`echo "$PHP_BZ2"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_CTYPE=yes
+  PHP_BZ2=yes
   ;;
 no)
   ext_output=no
@@ -27302,31 +27355,329 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
-if test "$PHP_CTYPE" != "no"; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_CTYPE 1
-EOF
-
-  
-  ext_builddir=ext/ctype
-  ext_srcdir=$abs_srcdir/ext/ctype
+if test "$PHP_BZ2" != "no"; then
+  if test -r $PHP_BZ2/include/bzlib.h; then
+    BZIP_DIR=$PHP_BZ2
+  else
+    echo $ac_n "checking for BZip2 in default path""... $ac_c" 1>&6
+echo "configure:27364: checking for BZip2 in default path" >&5
+    for i in /usr/local /usr; do
+      if test -r $i/include/bzlib.h; then
+        BZIP_DIR=$i
+        echo "$ac_t""found in $i" 1>&6
+        break
+      fi
+    done
+  fi
 
-  ac_extra=
+  if test -z "$BZIP_DIR"; then
+    echo "$ac_t""not found" 1>&6
+    { echo "configure: error: Please reinstall the BZip2 distribution" 1>&2; exit 1; }
+  fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_CTYPE_SHARED=no
-    
   
-  case ext/ctype in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    -L$BZIP_DIR/$PHP_LIBDIR
+  "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
   
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for BZ2_bzerror in -lbz2""... $ac_c" 1>&6
+echo "configure:27477: checking for BZ2_bzerror in -lbz2" >&5
+ac_lib_var=`echo bz2'_'BZ2_bzerror | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lbz2  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 27485 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char BZ2_bzerror();
+
+int main() {
+BZ2_bzerror()
+; return 0; }
+EOF
+if { (eval echo configure:27496: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+    
+  if test "$BZIP_DIR/include" != "/usr/include"; then
+    
+  if test -z "$BZIP_DIR/include" || echo "$BZIP_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$BZIP_DIR/include
+  else
+    
+    ep_dir="`echo $BZIP_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$BZIP_DIR/include\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+    
+
+  if test "$ext_shared" = "yes"; then
+    BZ2_SHARED_LIBADD="-lbz2 $BZ2_SHARED_LIBADD"
+    if test -n "$BZIP_DIR/$PHP_LIBDIR"; then
+      
+  if test "$BZIP_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$BZIP_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$BZIP_DIR/$PHP_LIBDIR" || echo "$BZIP_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$BZIP_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $BZIP_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$BZIP_DIR/$PHP_LIBDIR\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        BZ2_SHARED_LIBADD="-L$ai_p $BZ2_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && BZ2_SHARED_LIBADD="$ld_runpath_switch$ai_p $BZ2_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    fi
+  else
+    
+
+  if test -n "$BZIP_DIR/$PHP_LIBDIR"; then
+    
+  if test "$BZIP_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$BZIP_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$BZIP_DIR/$PHP_LIBDIR" || echo "$BZIP_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$BZIP_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $BZIP_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$BZIP_DIR/$PHP_LIBDIR\"`"
+  fi
+
+    
+      
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+    
+  fi
+
+  fi
+  
+  
+  case bz2 in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lbz2 $LIBS" 
+   ;;
+  esac
+
+
+
+
+  fi
+
+
+    cat >> confdefs.h <<\EOF
+#define HAVE_BZ2 1
+EOF
+
+  
+  
+else
+  echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_bz2_BZ2_bzerror
+    
+    { echo "configure: error: bz2 module requires libbz2 >= 1.0.0" 1>&2; exit 1; }
+  
+  
+fi
+
+
+  
+  ext_builddir=ext/bz2
+  ext_srcdir=$abs_srcdir/ext/bz2
+
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_BZ2_SHARED=no
+    
+  
+  case ext/bz2 in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
   b_c_meta=$php_c_meta
   b_cxx_meta=$php_cxx_meta
   b_c_post=$php_c_post
@@ -27335,7 +27686,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in ctype.c; do
+  for ac_src in bz2.c bz2_filter.c; do
   
       IFS=.
       set $ac_src
@@ -27358,18 +27709,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC ctype"
+    EXT_STATIC="$EXT_STATIC bz2"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC ctype"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC bz2"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_CTYPE_SHARED=yes
+      PHP_BZ2_SHARED=yes
       
-  case ext/ctype in
+  case ext/bz2 in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -27384,14 +27735,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in ctype.c; do
+  for ac_src in bz2.c bz2_filter.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_ctype="$shared_objects_ctype $ac_bdir$ac_obj.lo"
+      shared_objects_bz2="$shared_objects_bz2 $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -27414,31 +27765,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpctype.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) $(PHPCTYPE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpctype.so '$ext_builddir'/phpctype.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpbz2.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) $(PHPBZ2_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpbz2.so '$ext_builddir'/phpbz2.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPCTYPE, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPBZ2, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) $(PHPCTYPE_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) $(PHPBZ2_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpctype.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpbz2.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpctype.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpbz2.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ctype"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bz2"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpctype.$suffix: $ext_builddir/phpctype.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpctype.$suffix \$(phplibdir)
+\$(phplibdir)/phpbz2.$suffix: $ext_builddir/phpbz2.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpbz2.$suffix \$(phplibdir)
 
-$ext_builddir/phpctype.$suffix: \$(shared_objects_ctype) \$(PHPCTYPE_SHARED_DEPENDENCIES)
+$ext_builddir/phpbz2.$suffix: \$(shared_objects_bz2) \$(PHPBZ2_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -27451,31 +27802,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/ctype.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) $(CTYPE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/ctype.so '$ext_builddir'/ctype.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/bz2.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) $(BZ2_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/bz2.so '$ext_builddir'/bz2.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(CTYPE, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(BZ2, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) $(CTYPE_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) $(BZ2_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/ctype.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/bz2.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/ctype.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/bz2.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ctype"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bz2"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/ctype.$suffix: $ext_builddir/ctype.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/ctype.$suffix \$(phplibdir)
+\$(phplibdir)/bz2.$suffix: $ext_builddir/bz2.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/bz2.$suffix \$(phplibdir)
 
-$ext_builddir/ctype.$suffix: \$(shared_objects_ctype) \$(CTYPE_SHARED_DEPENDENCIES)
+$ext_builddir/bz2.$suffix: \$(shared_objects_bz2) \$(BZ2_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -27483,22 +27834,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_CTYPE 1
+#define COMPILE_DL_BZ2 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_CTYPE_SHARED=no
+    PHP_BZ2_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/ctype in
+  case ext/bz2 in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -27513,7 +27864,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in ctype.c; do
+  for ac_src in bz2.c bz2_filter.c; do
   
       IFS=.
       set $ac_src
@@ -27536,15 +27887,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC ctype"
+        EXT_STATIC="$EXT_STATIC bz2"
         ;;
       *)
         
   
-  case ext/ctype in
+  case ext/bz2 in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -27559,7 +27910,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in ctype.c; do
+  for ac_src in bz2.c bz2_filter.c; do
   
       IFS=.
       set $ac_src
@@ -27584,7 +27935,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC ctype"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC bz2"
   fi
   
   
@@ -27593,28 +27944,31 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=ctype
+    PHP_PECL_EXTENSION=bz2
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST BZ2_SHARED_LIBADD"
+
 fi
 
 
 
-php_with_curl=no
+php_enable_calendar=no
 
-echo $ac_n "checking for cURL support""... $ac_c" 1>&6
-echo "configure:27610: checking for cURL support" >&5
-# Check whether --with-curl or --without-curl was given.
-if test "${with_curl+set}" = set; then
-  withval="$with_curl"
-  PHP_CURL=$withval
+echo $ac_n "checking whether to enable calendar conversion support""... $ac_c" 1>&6
+echo "configure:27964: checking whether to enable calendar conversion support" >&5
+# Check whether --enable-calendar or --disable-calendar was given.
+if test "${enable_calendar+set}" = set; then
+  enableval="$enable_calendar"
+  PHP_CALENDAR=$enableval
 else
   
-  PHP_CURL=no
-  test "$PHP_ENABLE_ALL" && PHP_CURL=$PHP_ENABLE_ALL
+  PHP_CALENDAR=no
+  test "$PHP_ENABLE_ALL" && PHP_CALENDAR=$PHP_ENABLE_ALL
 
 fi
 
@@ -27622,12 +27976,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_CURL in
+case $PHP_CALENDAR in
 shared,*)
-  PHP_CURL=`echo "$PHP_CURL"|$SED 's/^shared,//'`
+  PHP_CALENDAR=`echo "$PHP_CALENDAR"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_CURL=yes
+  PHP_CALENDAR=yes
   ;;
 no)
   ext_output=no
@@ -27646,572 +28000,796 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
+if test "$PHP_CALENDAR" = "yes"; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_CALENDAR 1
+EOF
+
+  
+  ext_builddir=ext/calendar
+  ext_srcdir=$abs_srcdir/ext/calendar
 
-php_with_curlwrappers=no
+  ac_extra=
 
-echo $ac_n "checking if we should use cURL for url streams""... $ac_c" 1>&6
-echo "configure:27654: checking if we should use cURL for url streams" >&5
-# Check whether --with-curlwrappers or --without-curlwrappers was given.
-if test "${with_curlwrappers+set}" = set; then
-  withval="$with_curlwrappers"
-  PHP_CURLWRAPPERS=$withval
-else
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_CALENDAR_SHARED=no
+    
+  
+  case ext/calendar in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  PHP_CURLWRAPPERS=no
   
 
-fi
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
 
-ext_output=$PHP_CURLWRAPPERS
-echo "$ac_t""$ext_output" 1>&6
+  old_IFS=$IFS
+  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
 
-if test "$PHP_CURL" != "no"; then
-  if test -r $PHP_CURL/include/curl/easy.h; then
-    CURL_DIR=$PHP_CURL
+    EXT_STATIC="$EXT_STATIC calendar"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC calendar"
+    fi
   else
-    echo $ac_n "checking for cURL in default path""... $ac_c" 1>&6
-echo "configure:27678: checking for cURL in default path" >&5
-    for i in /usr/local /usr; do
-      if test -r $i/include/curl/easy.h; then
-        CURL_DIR=$i
-        echo "$ac_t""found in $i" 1>&6
-        break
-      fi
-    done
-  fi
-
-  if test -z "$CURL_DIR"; then
-    echo "$ac_t""not found" 1>&6
-    { echo "configure: error: Please reinstall the libcurl distribution -
-    easy.h should be in <curl-dir>/include/curl/" 1>&2; exit 1; }
-  fi
-
-  CURL_CONFIG="curl-config"
-  echo $ac_n "checking for cURL 7.10.5 or greater""... $ac_c" 1>&6
-echo "configure:27696: checking for cURL 7.10.5 or greater" >&5
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_CALENDAR_SHARED=yes
+      
+  case ext/calendar in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-  if ${CURL_DIR}/bin/curl-config --libs > /dev/null 2>&1; then
-    CURL_CONFIG=${CURL_DIR}/bin/curl-config
-  else
-    if ${CURL_DIR}/curl-config --libs > /dev/null 2>&1; then
-      CURL_CONFIG=${CURL_DIR}/curl-config
-    fi
-  fi
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
 
-  curl_version_full=`$CURL_CONFIG --version`
-  curl_version=`echo ${curl_version_full} | sed -e 's/libcurl //' | $AWK 'BEGIN { FS = "."; } { printf "%d", ($1 * 1000 + $2) * 1000 + $3;}'`
-  if test "$curl_version" -ge 7010005; then
-    echo "$ac_t""$curl_version_full" 1>&6
-    CURL_LIBS=`$CURL_CONFIG --libs`
-  else
-    { echo "configure: error: cURL version 7.10.5 or later is required to compile php with cURL support" 1>&2; exit 1; }
-  fi
 
+  old_IFS=$IFS
+  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do
   
-  if test "$CURL_DIR/include" != "/usr/include"; then
-    
-  if test -z "$CURL_DIR/include" || echo "$CURL_DIR/include" | grep '^/' >/dev/null ; then
-    ai_p=$CURL_DIR/include
-  else
-    
-    ep_dir="`echo $CURL_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$CURL_DIR/include\"`"
-  fi
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_calendar="$shared_objects_calendar $ac_bdir$ac_obj.lo"
 
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-  fi
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
-  
-  for ac_i in $CURL_LIBS; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        CURL_SHARED_LIBADD="$CURL_SHARED_LIBADD -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        CURL_SHARED_LIBADD="$CURL_SHARED_LIBADD -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpcalendar.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) $(PHPCALENDAR_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpcalendar.so '$ext_builddir'/phpcalendar.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPCALENDAR, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) $(PHPCALENDAR_SHARED_LIBADD)'
+      ;;
   esac
 
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpcalendar.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpcalendar.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_calendar"
 
-    fi
-   ;;
-  esac
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpcalendar.$suffix: $ext_builddir/phpcalendar.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpcalendar.$suffix \$(phplibdir)
 
+$ext_builddir/phpcalendar.$suffix: \$(shared_objects_calendar) \$(PHPCALENDAR_SHARED_DEPENDENCIES)
+	$link_cmd
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/calendar.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) $(CALENDAR_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/calendar.so '$ext_builddir'/calendar.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(CALENDAR, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) $(CALENDAR_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/calendar.$suffix"
   else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/calendar.$suffix"
   fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_calendar"
 
-    
-      if test "$ext_shared" = "yes"; then
-        CURL_SHARED_LIBADD="-L$ai_p $CURL_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && CURL_SHARED_LIBADD="$ld_runpath_switch$ai_p $CURL_SHARED_LIBADD"
-      else
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/calendar.$suffix: $ext_builddir/calendar.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/calendar.$suffix \$(phplibdir)
+
+$ext_builddir/calendar.$suffix: \$(shared_objects_calendar) \$(CALENDAR_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_CALENDAR 1
+EOF
+
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_CALENDAR_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
         
   
+  case ext/calendar in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  fi
 
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-      fi
-    
-  fi
-
-    ;;
-    esac
-  done
 
+  old_IFS=$IFS
+  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do
   
-
-  if test "$ext_shared" = "yes"; then
-    CURL_SHARED_LIBADD="-lcurl $CURL_SHARED_LIBADD"
-    if test -n "$CURL_DIR/$PHP_LIBDIR"; then
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-  if test "$CURL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$CURL_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$CURL_DIR/$PHP_LIBDIR" || echo "$CURL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$CURL_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $CURL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$CURL_DIR/$PHP_LIBDIR\"`"
-  fi
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-    
-      if test "$ext_shared" = "yes"; then
-        CURL_SHARED_LIBADD="-L$ai_p $CURL_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && CURL_SHARED_LIBADD="$ld_runpath_switch$ai_p $CURL_SHARED_LIBADD"
-      else
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        EXT_STATIC="$EXT_STATIC calendar"
+        ;;
+      *)
         
   
+  case ext/calendar in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do
   
-  fi
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-      fi
-    
-  fi
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
-    fi
-  else
-    
 
-  if test -n "$CURL_DIR/$PHP_LIBDIR"; then
-    
-  if test "$CURL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$CURL_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$CURL_DIR/$PHP_LIBDIR" || echo "$CURL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$CURL_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $CURL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$CURL_DIR/$PHP_LIBDIR\"`"
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC calendar"
   fi
-
-    
-      
-  
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
   
-  fi
 
 
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=calendar
     
-  fi
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
-  
-  
-  case curl in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lcurl $LIBS" 
-   ;;
-  esac
-
 
+fi
 
 
-  fi
 
+php_enable_ctype=yes
 
+echo $ac_n "checking whether to enable ctype functions""... $ac_c" 1>&6
+echo "configure:28308: checking whether to enable ctype functions" >&5
+# Check whether --enable-ctype or --disable-ctype was given.
+if test "${enable_ctype+set}" = set; then
+  enableval="$enable_ctype"
+  PHP_CTYPE=$enableval
+else
   
-  echo $ac_n "checking for SSL support in libcurl""... $ac_c" 1>&6
-echo "configure:27934: checking for SSL support in libcurl" >&5
-  CURL_SSL=`$CURL_CONFIG --feature | $EGREP SSL`
-  if test "$CURL_SSL" = "SSL"; then
-    echo "$ac_t""yes" 1>&6
-    cat >> confdefs.h <<\EOF
-#define HAVE_CURL_SSL 1
-EOF
+  PHP_CTYPE=yes
+  test "$PHP_ENABLE_ALL" && PHP_CTYPE=$PHP_ENABLE_ALL
 
-   
-    save_CFLAGS="$CFLAGS"
-    CFLAGS="`$CURL_CONFIG --cflags`"
-   
-    echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
-echo "configure:27947: checking how to run the C preprocessor" >&5
-# On Suns, sometimes $CPP names a directory.
-if test -n "$CPP" && test -d "$CPP"; then
-  CPP=
-fi
-if test -z "$CPP"; then
-if eval "test \"`echo '$''{'ac_cv_prog_CPP'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-    # This must be in double quotes, not single quotes, because CPP may get
-  # substituted into the Makefile and "${CC-cc}" will confuse make.
-  CPP="${CC-cc} -E"
-  # On the NeXT, cc -E runs the code through the compiler's parser,
-  # not just through cpp.
-  cat > conftest.$ac_ext <<EOF
-#line 27962 "configure"
-#include "confdefs.h"
-#include <assert.h>
-Syntax Error
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:27968: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  :
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  CPP="${CC-cc} -E -traditional-cpp"
-  cat > conftest.$ac_ext <<EOF
-#line 27979 "configure"
-#include "confdefs.h"
-#include <assert.h>
-Syntax Error
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:27985: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  :
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  CPP="${CC-cc} -nologo -E"
-  cat > conftest.$ac_ext <<EOF
-#line 27996 "configure"
-#include "confdefs.h"
-#include <assert.h>
-Syntax Error
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:28002: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  :
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  CPP=/lib/cpp
-fi
-rm -f conftest*
-fi
-rm -f conftest*
-fi
-rm -f conftest*
-  ac_cv_prog_CPP="$CPP"
-fi
-  CPP="$ac_cv_prog_CPP"
-else
-  ac_cv_prog_CPP="$CPP"
 fi
-echo "$ac_t""$CPP" 1>&6
 
-    echo $ac_n "checking for openssl support in libcurl""... $ac_c" 1>&6
-echo "configure:28027: checking for openssl support in libcurl" >&5
-    if test "$cross_compiling" = yes; then
-  
-      echo "$ac_t""no" 1>&6
-    
-else
-  cat > conftest.$ac_ext <<EOF
-#line 28034 "configure"
-#include "confdefs.h"
 
-#include <curl/curl.h>
 
-int main(int argc, char *argv[])
-{
-  curl_version_info_data *data = curl_version_info(CURLVERSION_NOW);
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_CTYPE in
+shared,*)
+  PHP_CTYPE=`echo "$PHP_CTYPE"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_CTYPE=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
-  if (data && data->ssl_version && *data->ssl_version) {
-    const char *ptr = data->ssl_version;
 
-    while(*ptr == ' ') ++ptr;
-    return strncasecmp(ptr, "OpenSSL", sizeof("OpenSSL")-1);
-  }
-  return 1;
-}
-    
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_CTYPE" != "no"; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_CTYPE 1
 EOF
-if { (eval echo configure:28053: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
+
   
-      echo "$ac_t""yes" 1>&6
-      for ac_hdr in openssl/crypto.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:28061: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 28066 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:28071: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-        cat >> confdefs.h <<\EOF
-#define HAVE_CURL_OPENSSL 1
-EOF
+  ext_builddir=ext/ctype
+  ext_srcdir=$abs_srcdir/ext/ctype
 
-      
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
+  ac_extra=
 
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_CTYPE_SHARED=no
     
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  
-      echo "$ac_t""no" 1>&6
-    
-fi
-rm -fr conftest*
-fi
+  
+  case ext/ctype in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-   
-    echo $ac_n "checking for gnutls support in libcurl""... $ac_c" 1>&6
-echo "configure:28116: checking for gnutls support in libcurl" >&5
-    if test "$cross_compiling" = yes; then
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in ctype.c; do
   
-      echo "$ac_t""no" 1>&6
-    
-else
-  cat > conftest.$ac_ext <<EOF
-#line 28123 "configure"
-#include "confdefs.h"
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-#include <curl/curl.h>
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-int main(int argc, char *argv[])
-{
-  curl_version_info_data *data = curl_version_info(CURLVERSION_NOW);
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+    EXT_STATIC="$EXT_STATIC ctype"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC ctype"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_CTYPE_SHARED=yes
+      
+  case ext/ctype in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
   
-  if (data && data->ssl_version && *data->ssl_version) {
-    const char *ptr = data->ssl_version;
 
-    while(*ptr == ' ') ++ptr;
-    return strncasecmp(ptr, "GnuTLS", sizeof("GnuTLS")-1);
-  }
-  return 1;
-}
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in ctype.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_ctype="$shared_objects_ctype $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:28142: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpctype.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) $(PHPCTYPE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpctype.so '$ext_builddir'/phpctype.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPCTYPE, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) $(PHPCTYPE_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpctype.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpctype.$suffix"
+  fi
   
-      echo "$ac_t""yes" 1>&6
-      ac_safe=`echo "gcrypt.h" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for gcrypt.h""... $ac_c" 1>&6
-echo "configure:28148: checking for gcrypt.h" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 28153 "configure"
-#include "confdefs.h"
-#include <gcrypt.h>
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ctype"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpctype.$suffix: $ext_builddir/phpctype.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpctype.$suffix \$(phplibdir)
+
+$ext_builddir/phpctype.$suffix: \$(shared_objects_ctype) \$(PHPCTYPE_SHARED_DEPENDENCIES)
+	$link_cmd
+
 EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:28158: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/ctype.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) $(CTYPE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/ctype.so '$ext_builddir'/ctype.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(CTYPE, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) $(CTYPE_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/ctype.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/ctype.$suffix"
+  fi
   
-        cat >> confdefs.h <<\EOF
-#define HAVE_CURL_GNUTLS 1
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ctype"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/ctype.$suffix: $ext_builddir/ctype.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/ctype.$suffix \$(phplibdir)
+
+$ext_builddir/ctype.$suffix: \$(shared_objects_ctype) \$(CTYPE_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_CTYPE 1
 EOF
 
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_CTYPE_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/ctype in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in ctype.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-else
-  echo "$ac_t""no" 1>&6
-fi
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        EXT_STATIC="$EXT_STATIC ctype"
+        ;;
+      *)
+        
+  
+  case ext/ctype in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in ctype.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC ctype"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
 
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=ctype
     
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
+fi
+
+
+
+php_with_curl=no
+
+echo $ac_n "checking for cURL support""... $ac_c" 1>&6
+echo "configure:28652: checking for cURL support" >&5
+# Check whether --with-curl or --without-curl was given.
+if test "${with_curl+set}" = set; then
+  withval="$with_curl"
+  PHP_CURL=$withval
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
   
-      echo "$ac_t""no" 1>&6
-    
+  PHP_CURL=no
+  test "$PHP_ENABLE_ALL" && PHP_CURL=$PHP_ENABLE_ALL
+
 fi
-rm -fr conftest*
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_CURL in
+shared,*)
+  PHP_CURL=`echo "$PHP_CURL"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_CURL=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+
+php_with_curlwrappers=no
+
+echo $ac_n "checking if we should use cURL for url streams""... $ac_c" 1>&6
+echo "configure:28696: checking if we should use cURL for url streams" >&5
+# Check whether --with-curlwrappers or --without-curlwrappers was given.
+if test "${with_curlwrappers+set}" = set; then
+  withval="$with_curlwrappers"
+  PHP_CURLWRAPPERS=$withval
+else
+  
+  PHP_CURLWRAPPERS=no
+  
+
 fi
 
-   
-    CFLAGS="$save_CFLAGS"
+
+ext_output=$PHP_CURLWRAPPERS
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_CURL" != "no"; then
+  if test -r $PHP_CURL/include/curl/easy.h; then
+    CURL_DIR=$PHP_CURL
   else
-    echo "$ac_t""no" 1>&6
+    echo $ac_n "checking for cURL in default path""... $ac_c" 1>&6
+echo "configure:28720: checking for cURL in default path" >&5
+    for i in /usr/local /usr; do
+      if test -r $i/include/curl/easy.h; then
+        CURL_DIR=$i
+        echo "$ac_t""found in $i" 1>&6
+        break
+      fi
+    done
+  fi
+
+  if test -z "$CURL_DIR"; then
+    echo "$ac_t""not found" 1>&6
+    { echo "configure: error: Please reinstall the libcurl distribution -
+    easy.h should be in <curl-dir>/include/curl/" 1>&2; exit 1; }
+  fi
+
+  CURL_CONFIG="curl-config"
+  echo $ac_n "checking for cURL 7.10.5 or greater""... $ac_c" 1>&6
+echo "configure:28738: checking for cURL 7.10.5 or greater" >&5
+
+  if ${CURL_DIR}/bin/curl-config --libs > /dev/null 2>&1; then
+    CURL_CONFIG=${CURL_DIR}/bin/curl-config
+  else
+    if ${CURL_DIR}/curl-config --libs > /dev/null 2>&1; then
+      CURL_CONFIG=${CURL_DIR}/curl-config
+    fi
+  fi
+
+  curl_version_full=`$CURL_CONFIG --version`
+  curl_version=`echo ${curl_version_full} | sed -e 's/libcurl //' | $AWK 'BEGIN { FS = "."; } { printf "%d", ($1 * 1000 + $2) * 1000 + $3;}'`
+  if test "$curl_version" -ge 7010005; then
+    echo "$ac_t""$curl_version_full" 1>&6
+    CURL_LIBS=`$CURL_CONFIG --libs`
+  else
+    { echo "configure: error: cURL version 7.10.5 or later is required to compile php with cURL support" 1>&2; exit 1; }
   fi
 
   
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-    $CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
-  "
+  if test "$CURL_DIR/include" != "/usr/include"; then
+    
+  if test -z "$CURL_DIR/include" || echo "$CURL_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$CURL_DIR/include
+  else
+    
+    ep_dir="`echo $CURL_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$CURL_DIR/include\"`"
+  fi
+
+    
   
-  save_ext_shared=$ext_shared
-  ext_shared=yes
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  for ac_i in $ac_stuff; do
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+  
+  for ac_i in $CURL_LIBS; do
     case $ac_i in
     -pthread)
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
+        CURL_SHARED_LIBADD="$CURL_SHARED_LIBADD -pthread"
       else
         
   
@@ -28233,7 +28811,7 @@ fi
   c|c_r|pthread*) ;;
   *) 
     if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
+        CURL_SHARED_LIBADD="$CURL_SHARED_LIBADD -l$ac_ii" 
     else
       
   
@@ -28268,8 +28846,8 @@ fi
 
     
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+        CURL_SHARED_LIBADD="-L$ai_p $CURL_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && CURL_SHARED_LIBADD="$ld_runpath_switch$ai_p $CURL_SHARED_LIBADD"
       else
         
   
@@ -28295,39 +28873,503 @@ fi
     esac
   done
 
-  echo $ac_n "checking for curl_easy_perform in -lcurl""... $ac_c" 1>&6
-echo "configure:28300: checking for curl_easy_perform in -lcurl" >&5
-ac_lib_var=`echo curl'_'curl_easy_perform | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lcurl  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 28308 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char curl_easy_perform();
-
-int main() {
-curl_easy_perform()
-; return 0; }
-EOF
-if { (eval echo configure:28319: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  
 
-fi
+  if test "$ext_shared" = "yes"; then
+    CURL_SHARED_LIBADD="-lcurl $CURL_SHARED_LIBADD"
+    if test -n "$CURL_DIR/$PHP_LIBDIR"; then
+      
+  if test "$CURL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$CURL_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$CURL_DIR/$PHP_LIBDIR" || echo "$CURL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$CURL_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $CURL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$CURL_DIR/$PHP_LIBDIR\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        CURL_SHARED_LIBADD="-L$ai_p $CURL_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && CURL_SHARED_LIBADD="$ld_runpath_switch$ai_p $CURL_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    fi
+  else
+    
+
+  if test -n "$CURL_DIR/$PHP_LIBDIR"; then
+    
+  if test "$CURL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$CURL_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$CURL_DIR/$PHP_LIBDIR" || echo "$CURL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$CURL_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $CURL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$CURL_DIR/$PHP_LIBDIR\"`"
+  fi
+
+    
+      
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+    
+  fi
+
+  fi
+  
+  
+  case curl in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lcurl $LIBS" 
+   ;;
+  esac
+
+
+
+
+  fi
+
+
+  
+  echo $ac_n "checking for SSL support in libcurl""... $ac_c" 1>&6
+echo "configure:28976: checking for SSL support in libcurl" >&5
+  CURL_SSL=`$CURL_CONFIG --feature | $EGREP SSL`
+  if test "$CURL_SSL" = "SSL"; then
+    echo "$ac_t""yes" 1>&6
+    cat >> confdefs.h <<\EOF
+#define HAVE_CURL_SSL 1
+EOF
+
+   
+    save_CFLAGS="$CFLAGS"
+    CFLAGS="`$CURL_CONFIG --cflags`"
+   
+    echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
+echo "configure:28989: checking how to run the C preprocessor" >&5
+# On Suns, sometimes $CPP names a directory.
+if test -n "$CPP" && test -d "$CPP"; then
+  CPP=
+fi
+if test -z "$CPP"; then
+if eval "test \"`echo '$''{'ac_cv_prog_CPP'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+    # This must be in double quotes, not single quotes, because CPP may get
+  # substituted into the Makefile and "${CC-cc}" will confuse make.
+  CPP="${CC-cc} -E"
+  # On the NeXT, cc -E runs the code through the compiler's parser,
+  # not just through cpp.
+  cat > conftest.$ac_ext <<EOF
+#line 29004 "configure"
+#include "confdefs.h"
+#include <assert.h>
+Syntax Error
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:29010: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  :
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  CPP="${CC-cc} -E -traditional-cpp"
+  cat > conftest.$ac_ext <<EOF
+#line 29021 "configure"
+#include "confdefs.h"
+#include <assert.h>
+Syntax Error
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:29027: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  :
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  CPP="${CC-cc} -nologo -E"
+  cat > conftest.$ac_ext <<EOF
+#line 29038 "configure"
+#include "confdefs.h"
+#include <assert.h>
+Syntax Error
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:29044: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  :
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  CPP=/lib/cpp
+fi
+rm -f conftest*
+fi
+rm -f conftest*
+fi
+rm -f conftest*
+  ac_cv_prog_CPP="$CPP"
+fi
+  CPP="$ac_cv_prog_CPP"
+else
+  ac_cv_prog_CPP="$CPP"
+fi
+echo "$ac_t""$CPP" 1>&6
+
+    echo $ac_n "checking for openssl support in libcurl""... $ac_c" 1>&6
+echo "configure:29069: checking for openssl support in libcurl" >&5
+    if test "$cross_compiling" = yes; then
+  
+      echo "$ac_t""no" 1>&6
+    
+else
+  cat > conftest.$ac_ext <<EOF
+#line 29076 "configure"
+#include "confdefs.h"
+
+#include <curl/curl.h>
+
+int main(int argc, char *argv[])
+{
+  curl_version_info_data *data = curl_version_info(CURLVERSION_NOW);
+
+  if (data && data->ssl_version && *data->ssl_version) {
+    const char *ptr = data->ssl_version;
+
+    while(*ptr == ' ') ++ptr;
+    return strncasecmp(ptr, "OpenSSL", sizeof("OpenSSL")-1);
+  }
+  return 1;
+}
+    
+EOF
+if { (eval echo configure:29095: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+      echo "$ac_t""yes" 1>&6
+      for ac_hdr in openssl/crypto.h
+do
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:29103: checking for $ac_hdr" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 29108 "configure"
+#include "confdefs.h"
+#include <$ac_hdr>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:29113: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_hdr 1
+EOF
+ 
+        cat >> confdefs.h <<\EOF
+#define HAVE_CURL_OPENSSL 1
+EOF
+
+      
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
+    
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  
+      echo "$ac_t""no" 1>&6
+    
+fi
+rm -fr conftest*
+fi
+
+   
+    echo $ac_n "checking for gnutls support in libcurl""... $ac_c" 1>&6
+echo "configure:29158: checking for gnutls support in libcurl" >&5
+    if test "$cross_compiling" = yes; then
+  
+      echo "$ac_t""no" 1>&6
+    
+else
+  cat > conftest.$ac_ext <<EOF
+#line 29165 "configure"
+#include "confdefs.h"
+
+#include <curl/curl.h>
+
+int main(int argc, char *argv[])
+{
+  curl_version_info_data *data = curl_version_info(CURLVERSION_NOW);
+  
+  if (data && data->ssl_version && *data->ssl_version) {
+    const char *ptr = data->ssl_version;
+
+    while(*ptr == ' ') ++ptr;
+    return strncasecmp(ptr, "GnuTLS", sizeof("GnuTLS")-1);
+  }
+  return 1;
+}
+
+EOF
+if { (eval echo configure:29184: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+      echo "$ac_t""yes" 1>&6
+      ac_safe=`echo "gcrypt.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for gcrypt.h""... $ac_c" 1>&6
+echo "configure:29190: checking for gcrypt.h" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 29195 "configure"
+#include "confdefs.h"
+#include <gcrypt.h>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:29200: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+        cat >> confdefs.h <<\EOF
+#define HAVE_CURL_GNUTLS 1
+EOF
+
+      
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+    
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  
+      echo "$ac_t""no" 1>&6
+    
+fi
+rm -fr conftest*
+fi
+
+   
+    CFLAGS="$save_CFLAGS"
+  else
+    echo "$ac_t""no" 1>&6
+  fi
+
+  
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    $CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
+  "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for curl_easy_perform in -lcurl""... $ac_c" 1>&6
+echo "configure:29342: checking for curl_easy_perform in -lcurl" >&5
+ac_lib_var=`echo curl'_'curl_easy_perform | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lcurl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 29350 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char curl_easy_perform();
+
+int main() {
+curl_easy_perform()
+; return 0; }
+EOF
+if { (eval echo configure:29361: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   
@@ -28451,7 +29493,7 @@ fi
   done
 
   echo $ac_n "checking for curl_version_info in -lcurl""... $ac_c" 1>&6
-echo "configure:28455: checking for curl_version_info in -lcurl" >&5
+echo "configure:29497: checking for curl_version_info in -lcurl" >&5
 ac_lib_var=`echo curl'_'curl_version_info | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -28459,7 +29501,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lcurl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 28463 "configure"
+#line 29505 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -28470,7 +29512,7 @@ int main() {
 curl_version_info()
 ; return 0; }
 EOF
-if { (eval echo configure:28474: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:29516: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -28604,7 +29646,7 @@ fi
   done
 
   echo $ac_n "checking for curl_easy_strerror in -lcurl""... $ac_c" 1>&6
-echo "configure:28608: checking for curl_easy_strerror in -lcurl" >&5
+echo "configure:29650: checking for curl_easy_strerror in -lcurl" >&5
 ac_lib_var=`echo curl'_'curl_easy_strerror | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -28612,7 +29654,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lcurl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 28616 "configure"
+#line 29658 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -28623,7 +29665,7 @@ int main() {
 curl_easy_strerror()
 ; return 0; }
 EOF
-if { (eval echo configure:28627: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:29669: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -28757,7 +29799,7 @@ fi
   done
 
   echo $ac_n "checking for curl_multi_strerror in -lcurl""... $ac_c" 1>&6
-echo "configure:28761: checking for curl_multi_strerror in -lcurl" >&5
+echo "configure:29803: checking for curl_multi_strerror in -lcurl" >&5
 ac_lib_var=`echo curl'_'curl_multi_strerror | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -28765,7 +29807,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lcurl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 28769 "configure"
+#line 29811 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -28776,7 +29818,7 @@ int main() {
 curl_multi_strerror()
 ; return 0; }
 EOF
-if { (eval echo configure:28780: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:29822: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -29462,7 +30504,7 @@ if test "$PHP_QDBM" != "no"; then
   done
 
   echo $ac_n "checking for dpopen in -l$LIB""... $ac_c" 1>&6
-echo "configure:29466: checking for dpopen in -l$LIB" >&5
+echo "configure:30508: checking for dpopen in -l$LIB" >&5
 ac_lib_var=`echo $LIB'_'dpopen | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -29470,7 +30512,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$LIB  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 29474 "configure"
+#line 30516 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -29481,7 +30523,7 @@ int main() {
 dpopen()
 ; return 0; }
 EOF
-if { (eval echo configure:29485: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:30527: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -29650,7 +30692,7 @@ fi
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:29654: checking for $THIS_FULL_NAME support" >&5
+echo "configure:30696: checking for $THIS_FULL_NAME support" >&5
   if test -n ""; then
     { echo "configure: error: " 1>&2; exit 1; }
   fi
@@ -29678,7 +30720,7 @@ if test "$PHP_GDBM" != "no"; then
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:29682: checking for $THIS_FULL_NAME support" >&5
+echo "configure:30724: checking for $THIS_FULL_NAME support" >&5
   if test -n "You cannot combine --with-gdbm with --with-qdbm"; then
     { echo "configure: error: You cannot combine --with-gdbm with --with-qdbm" 1>&2; exit 1; }
   fi
@@ -29797,7 +30839,7 @@ echo "configure:29682: checking for $THI
   done
 
   echo $ac_n "checking for gdbm_open in -lgdbm""... $ac_c" 1>&6
-echo "configure:29801: checking for gdbm_open in -lgdbm" >&5
+echo "configure:30843: checking for gdbm_open in -lgdbm" >&5
 ac_lib_var=`echo gdbm'_'gdbm_open | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -29805,7 +30847,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgdbm  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 29809 "configure"
+#line 30851 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -29816,7 +30858,7 @@ int main() {
 gdbm_open()
 ; return 0; }
 EOF
-if { (eval echo configure:29820: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:30862: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -29981,7 +31023,7 @@ fi
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:29985: checking for $THIS_FULL_NAME support" >&5
+echo "configure:31027: checking for $THIS_FULL_NAME support" >&5
   if test -n ""; then
     { echo "configure: error: " 1>&2; exit 1; }
   fi
@@ -30110,7 +31152,7 @@ if test "$PHP_NDBM" != "no"; then
   done
 
   echo $ac_n "checking for dbm_open in -l$LIB""... $ac_c" 1>&6
-echo "configure:30114: checking for dbm_open in -l$LIB" >&5
+echo "configure:31156: checking for dbm_open in -l$LIB" >&5
 ac_lib_var=`echo $LIB'_'dbm_open | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -30118,7 +31160,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$LIB  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 30122 "configure"
+#line 31164 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -30129,7 +31171,7 @@ int main() {
 dbm_open()
 ; return 0; }
 EOF
-if { (eval echo configure:30133: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:31175: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -30298,7 +31340,7 @@ fi
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:30302: checking for $THIS_FULL_NAME support" >&5
+echo "configure:31344: checking for $THIS_FULL_NAME support" >&5
   if test -n ""; then
     { echo "configure: error: " 1>&2; exit 1; }
   fi
@@ -30382,7 +31424,7 @@ if test "$PHP_DB4" != "no"; then
   LIBS="-l$LIB $LIBS"
   
         cat > conftest.$ac_ext <<EOF
-#line 30386 "configure"
+#line 31428 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -30393,11 +31435,11 @@ int main() {
         
 ; return 0; }
 EOF
-if { (eval echo configure:30397: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:31439: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   
           cat > conftest.$ac_ext <<EOF
-#line 30401 "configure"
+#line 31443 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -30434,14 +31476,14 @@ rm -f conftest*
   done
   if test -z "$THIS_LIBS"; then
     echo $ac_n "checking for DB4 major version""... $ac_c" 1>&6
-echo "configure:30438: checking for DB4 major version" >&5
+echo "configure:31480: checking for DB4 major version" >&5
     { echo "configure: error: Header contains different version" 1>&2; exit 1; }
   fi
   if test "4" = "4"; then
     echo $ac_n "checking for DB4 minor version and patch level""... $ac_c" 1>&6
-echo "configure:30443: checking for DB4 minor version and patch level" >&5
+echo "configure:31485: checking for DB4 minor version and patch level" >&5
     cat > conftest.$ac_ext <<EOF
-#line 30445 "configure"
+#line 31487 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -30467,9 +31509,9 @@ rm -f conftest*
   fi
   if test "$ext_shared" = "yes"; then
     echo $ac_n "checking if dba can be used as shared extension""... $ac_c" 1>&6
-echo "configure:30471: checking if dba can be used as shared extension" >&5
+echo "configure:31513: checking if dba can be used as shared extension" >&5
     cat > conftest.$ac_ext <<EOF
-#line 30473 "configure"
+#line 31515 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -30626,7 +31668,7 @@ fi
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:30630: checking for $THIS_FULL_NAME support" >&5
+echo "configure:31672: checking for $THIS_FULL_NAME support" >&5
   if test -n ""; then
     { echo "configure: error: " 1>&2; exit 1; }
   fi
@@ -30654,7 +31696,7 @@ if test "$PHP_DB3" != "no"; then
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:30658: checking for $THIS_FULL_NAME support" >&5
+echo "configure:31700: checking for $THIS_FULL_NAME support" >&5
   if test -n "You cannot combine --with-db3 with --with-db4"; then
     { echo "configure: error: You cannot combine --with-db3 with --with-db4" 1>&2; exit 1; }
   fi
@@ -30705,7 +31747,7 @@ echo "configure:30658: checking for $THI
   LIBS="-l$LIB $LIBS"
   
         cat > conftest.$ac_ext <<EOF
-#line 30709 "configure"
+#line 31751 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -30716,11 +31758,11 @@ int main() {
         
 ; return 0; }
 EOF
-if { (eval echo configure:30720: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:31762: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   
           cat > conftest.$ac_ext <<EOF
-#line 30724 "configure"
+#line 31766 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -30757,14 +31799,14 @@ rm -f conftest*
   done
   if test -z "$THIS_LIBS"; then
     echo $ac_n "checking for DB3 major version""... $ac_c" 1>&6
-echo "configure:30761: checking for DB3 major version" >&5
+echo "configure:31803: checking for DB3 major version" >&5
     { echo "configure: error: Header contains different version" 1>&2; exit 1; }
   fi
   if test "3" = "4"; then
     echo $ac_n "checking for DB4 minor version and patch level""... $ac_c" 1>&6
-echo "configure:30766: checking for DB4 minor version and patch level" >&5
+echo "configure:31808: checking for DB4 minor version and patch level" >&5
     cat > conftest.$ac_ext <<EOF
-#line 30768 "configure"
+#line 31810 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -30790,9 +31832,9 @@ rm -f conftest*
   fi
   if test "$ext_shared" = "yes"; then
     echo $ac_n "checking if dba can be used as shared extension""... $ac_c" 1>&6
-echo "configure:30794: checking if dba can be used as shared extension" >&5
+echo "configure:31836: checking if dba can be used as shared extension" >&5
     cat > conftest.$ac_ext <<EOF
-#line 30796 "configure"
+#line 31838 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -30949,7 +31991,7 @@ fi
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:30953: checking for $THIS_FULL_NAME support" >&5
+echo "configure:31995: checking for $THIS_FULL_NAME support" >&5
   if test -n ""; then
     { echo "configure: error: " 1>&2; exit 1; }
   fi
@@ -30977,7 +32019,7 @@ if test "$PHP_DB2" != "no"; then
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:30981: checking for $THIS_FULL_NAME support" >&5
+echo "configure:32023: checking for $THIS_FULL_NAME support" >&5
   if test -n "You cannot combine --with-db2 with --with-db3 or --with-db4"; then
     { echo "configure: error: You cannot combine --with-db2 with --with-db3 or --with-db4" 1>&2; exit 1; }
   fi
@@ -31028,7 +32070,7 @@ echo "configure:30981: checking for $THI
   LIBS="-l$LIB $LIBS"
   
         cat > conftest.$ac_ext <<EOF
-#line 31032 "configure"
+#line 32074 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -31039,11 +32081,11 @@ int main() {
         
 ; return 0; }
 EOF
-if { (eval echo configure:31043: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:32085: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   
           cat > conftest.$ac_ext <<EOF
-#line 31047 "configure"
+#line 32089 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -31080,14 +32122,14 @@ rm -f conftest*
   done
   if test -z "$THIS_LIBS"; then
     echo $ac_n "checking for DB2 major version""... $ac_c" 1>&6
-echo "configure:31084: checking for DB2 major version" >&5
+echo "configure:32126: checking for DB2 major version" >&5
     { echo "configure: error: Header contains different version" 1>&2; exit 1; }
   fi
   if test "2" = "4"; then
     echo $ac_n "checking for DB4 minor version and patch level""... $ac_c" 1>&6
-echo "configure:31089: checking for DB4 minor version and patch level" >&5
+echo "configure:32131: checking for DB4 minor version and patch level" >&5
     cat > conftest.$ac_ext <<EOF
-#line 31091 "configure"
+#line 32133 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -31113,9 +32155,9 @@ rm -f conftest*
   fi
   if test "$ext_shared" = "yes"; then
     echo $ac_n "checking if dba can be used as shared extension""... $ac_c" 1>&6
-echo "configure:31117: checking if dba can be used as shared extension" >&5
+echo "configure:32159: checking if dba can be used as shared extension" >&5
     cat > conftest.$ac_ext <<EOF
-#line 31119 "configure"
+#line 32161 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -31272,7 +32314,7 @@ fi
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:31276: checking for $THIS_FULL_NAME support" >&5
+echo "configure:32318: checking for $THIS_FULL_NAME support" >&5
   if test -n ""; then
     { echo "configure: error: " 1>&2; exit 1; }
   fi
@@ -31292,7 +32334,7 @@ if test "$PHP_DB1" != "no"; then
   unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT
 
   echo $ac_n "checking for DB1 in library""... $ac_c" 1>&6
-echo "configure:31296: checking for DB1 in library" >&5
+echo "configure:32338: checking for DB1 in library" >&5
   if test "$HAVE_DB4" = "1"; then
     THIS_VERSION=4
     THIS_LIBS=$DB4_LIBS
@@ -31340,7 +32382,7 @@ EOF
   fi
   echo "$ac_t""$THIS_LIBS" 1>&6
   echo $ac_n "checking for DB1 in header""... $ac_c" 1>&6
-echo "configure:31344: checking for DB1 in header" >&5
+echo "configure:32386: checking for DB1 in header" >&5
   echo "$ac_t""$THIS_INCLUDE" 1>&6
   if test -n "$THIS_INCLUDE"; then
     
@@ -31350,7 +32392,7 @@ echo "configure:31344: checking for DB1
   LIBS="-l$THIS_LIBS $LIBS"
   
       cat > conftest.$ac_ext <<EOF
-#line 31354 "configure"
+#line 32396 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -31361,7 +32403,7 @@ int main() {
       
 ; return 0; }
 EOF
-if { (eval echo configure:31365: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:32407: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   
         cat >> confdefs.h <<EOF
@@ -31511,7 +32553,7 @@ fi
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:31515: checking for $THIS_FULL_NAME support" >&5
+echo "configure:32557: checking for $THIS_FULL_NAME support" >&5
   if test -n ""; then
     { echo "configure: error: " 1>&2; exit 1; }
   fi
@@ -31539,7 +32581,7 @@ if test "$PHP_DBM" != "no"; then
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:31543: checking for $THIS_FULL_NAME support" >&5
+echo "configure:32585: checking for $THIS_FULL_NAME support" >&5
   if test -n "You cannot combine --with-dbm with --with-qdbm"; then
     { echo "configure: error: You cannot combine --with-dbm with --with-qdbm" 1>&2; exit 1; }
   fi
@@ -31663,7 +32705,7 @@ echo "configure:31543: checking for $THI
   done
 
   echo $ac_n "checking for dbminit in -l$LIB""... $ac_c" 1>&6
-echo "configure:31667: checking for dbminit in -l$LIB" >&5
+echo "configure:32709: checking for dbminit in -l$LIB" >&5
 ac_lib_var=`echo $LIB'_'dbminit | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -31671,7 +32713,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$LIB  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 31675 "configure"
+#line 32717 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -31682,7 +32724,7 @@ int main() {
 dbminit()
 ; return 0; }
 EOF
-if { (eval echo configure:31686: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:32728: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -31702,7 +32744,7 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
     ext_shared=$save_ext_shared
     
         echo $ac_n "checking for DBM using GDBM""... $ac_c" 1>&6
-echo "configure:31706: checking for DBM using GDBM" >&5
+echo "configure:32748: checking for DBM using GDBM" >&5
         cat >> confdefs.h <<EOF
 #define DBM_INCLUDE_FILE "$THIS_INCLUDE"
 EOF
@@ -31866,7 +32908,7 @@ fi
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:31870: checking for $THIS_FULL_NAME support" >&5
+echo "configure:32912: checking for $THIS_FULL_NAME support" >&5
   if test -n ""; then
     { echo "configure: error: " 1>&2; exit 1; }
   fi
@@ -32078,7 +33120,7 @@ elif test "$PHP_CDB" != "no"; then
   done
 
   echo $ac_n "checking for cdb_read in -l$LIB""... $ac_c" 1>&6
-echo "configure:32082: checking for cdb_read in -l$LIB" >&5
+echo "configure:33124: checking for cdb_read in -l$LIB" >&5
 ac_lib_var=`echo $LIB'_'cdb_read | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -32086,7 +33128,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$LIB  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 32090 "configure"
+#line 33132 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -32097,7 +33139,7 @@ int main() {
 cdb_read()
 ; return 0; }
 EOF
-if { (eval echo configure:32101: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:33143: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -32266,7 +33308,7 @@ fi
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:32270: checking for $THIS_FULL_NAME support" >&5
+echo "configure:33312: checking for $THIS_FULL_NAME support" >&5
   if test -n ""; then
     { echo "configure: error: " 1>&2; exit 1; }
   fi
@@ -32297,7 +33339,7 @@ fi
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:32301: checking for $THIS_FULL_NAME support" >&5
+echo "configure:33343: checking for $THIS_FULL_NAME support" >&5
   if test -n ""; then
     { echo "configure: error: " 1>&2; exit 1; }
   fi
@@ -32328,7 +33370,7 @@ fi
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:32332: checking for $THIS_FULL_NAME support" >&5
+echo "configure:33374: checking for $THIS_FULL_NAME support" >&5
   if test -n ""; then
     { echo "configure: error: " 1>&2; exit 1; }
   fi
@@ -32343,7 +33385,7 @@ echo "configure:32332: checking for $THI
 
 
 echo $ac_n "checking whether to enable DBA interface""... $ac_c" 1>&6
-echo "configure:32347: checking whether to enable DBA interface" >&5
+echo "configure:33389: checking whether to enable DBA interface" >&5
 if test "$HAVE_DBA" = "1"; then
   if test "$ext_shared" = "yes"; then
     echo "$ac_t""yes, shared" 1>&6
@@ -32670,18 +33712,18 @@ fi
 
 
 
-php_enable_dom=yes
+php_enable_dio=no
 
-echo $ac_n "checking whether to enable DOM support""... $ac_c" 1>&6
-echo "configure:32677: checking whether to enable DOM support" >&5
-# Check whether --enable-dom or --disable-dom was given.
-if test "${enable_dom+set}" = set; then
-  enableval="$enable_dom"
-  PHP_DOM=$enableval
+echo $ac_n "checking whether to enable direct I/O support""... $ac_c" 1>&6
+echo "configure:33719: checking whether to enable direct I/O support" >&5
+# Check whether --enable-dio or --disable-dio was given.
+if test "${enable_dio+set}" = set; then
+  enableval="$enable_dio"
+  PHP_DIO=$enableval
 else
   
-  PHP_DOM=yes
-  test "$PHP_ENABLE_ALL" && PHP_DOM=$PHP_ENABLE_ALL
+  PHP_DIO=no
+  test "$PHP_ENABLE_ALL" && PHP_DIO=$PHP_ENABLE_ALL
 
 fi
 
@@ -32689,12 +33731,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_DOM in
+case $PHP_DIO in
 shared,*)
-  PHP_DOM=`echo "$PHP_DOM"|$SED 's/^shared,//'`
+  PHP_DIO=`echo "$PHP_DIO"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_DOM=yes
+  PHP_DIO=yes
   ;;
 no)
   ext_output=no
@@ -32713,27 +33755,367 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
-if test -z "$PHP_LIBXML_DIR"; then
+if test "$PHP_DIO" != "no"; then
   
-php_with_libxml_dir=no
+  ext_builddir=ext/dio
+  ext_srcdir=$abs_srcdir/ext/dio
 
-echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
-echo "configure:32722: checking libxml2 install dir" >&5
-# Check whether --with-libxml-dir or --without-libxml-dir was given.
-if test "${with_libxml_dir+set}" = set; then
-  withval="$with_libxml_dir"
-  PHP_LIBXML_DIR=$withval
-else
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_DIO_SHARED=no
+    
+  
+  case ext/dio in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/dio"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/dio/"; ac_bdir="ext/dio/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  PHP_LIBXML_DIR=no
   
 
-fi
-
-
-ext_output=$PHP_LIBXML_DIR
-echo "$ac_t""$ext_output" 1>&6
-
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in dio.c dio_common.c dio_posix.c dio_stream_wrappers.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+    EXT_STATIC="$EXT_STATIC dio"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC dio"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_DIO_SHARED=yes
+      
+  case ext/dio in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/dio"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/dio/"; ac_bdir="ext/dio/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in dio.c dio_common.c dio_posix.c dio_stream_wrappers.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_dio="$shared_objects_dio $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpdio.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dio) $(PHPDIO_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpdio.so '$ext_builddir'/phpdio.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dio) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPDIO, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dio) $(PHPDIO_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpdio.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpdio.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_dio"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpdio.$suffix: $ext_builddir/phpdio.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpdio.$suffix \$(phplibdir)
+
+$ext_builddir/phpdio.$suffix: \$(shared_objects_dio) \$(PHPDIO_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/dio.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dio) $(DIO_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/dio.so '$ext_builddir'/dio.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dio) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(DIO, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dio) $(DIO_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/dio.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/dio.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_dio"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/dio.$suffix: $ext_builddir/dio.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/dio.$suffix \$(phplibdir)
+
+$ext_builddir/dio.$suffix: \$(shared_objects_dio) \$(DIO_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_DIO 1
+EOF
+
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_DIO_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/dio in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/dio"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/dio/"; ac_bdir="ext/dio/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in dio.c dio_common.c dio_posix.c dio_stream_wrappers.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        EXT_STATIC="$EXT_STATIC dio"
+        ;;
+      *)
+        
+  
+  case ext/dio in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/dio"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/dio/"; ac_bdir="ext/dio/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in dio.c dio_common.c dio_posix.c dio_stream_wrappers.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC dio"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=dio
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
+fi
+
+
+
+php_enable_dom=yes
+
+echo $ac_n "checking whether to enable DOM support""... $ac_c" 1>&6
+echo "configure:34059: checking whether to enable DOM support" >&5
+# Check whether --enable-dom or --disable-dom was given.
+if test "${enable_dom+set}" = set; then
+  enableval="$enable_dom"
+  PHP_DOM=$enableval
+else
+  
+  PHP_DOM=yes
+  test "$PHP_ENABLE_ALL" && PHP_DOM=$PHP_ENABLE_ALL
+
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_DOM in
+shared,*)
+  PHP_DOM=`echo "$PHP_DOM"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_DOM=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test -z "$PHP_LIBXML_DIR"; then
+  
+php_with_libxml_dir=no
+
+echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
+echo "configure:34104: checking libxml2 install dir" >&5
+# Check whether --with-libxml-dir or --without-libxml-dir was given.
+if test "${with_libxml_dir+set}" = set; then
+  withval="$with_libxml_dir"
+  PHP_LIBXML_DIR=$withval
+else
+  
+  PHP_LIBXML_DIR=no
+  
+
+fi
+
+
+ext_output=$PHP_LIBXML_DIR
+echo "$ac_t""$ext_output" 1>&6
+
 
 
 fi
@@ -32746,7 +34128,7 @@ if test "$PHP_DOM" != "no"; then
 
   
 echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
-echo "configure:32750: checking for xml2-config path" >&5
+echo "configure:34132: checking for xml2-config path" >&5
 if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -32904,7 +34286,7 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
 
 
             echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
-echo "configure:32908: checking whether libxml build works" >&5
+echo "configure:34290: checking whether libxml build works" >&5
 if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -32920,7 +34302,7 @@ else
   
 else
   cat > conftest.$ac_ext <<EOF
-#line 32924 "configure"
+#line 34306 "configure"
 #include "confdefs.h"
 
     
@@ -32931,7 +34313,7 @@ else
     }
   
 EOF
-if { (eval echo configure:32935: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:34317: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     LIBS=$old_LIBS
@@ -33354,7 +34736,7 @@ fi
 php_with_enchant=no
 
 echo $ac_n "checking for ENCHANT support""... $ac_c" 1>&6
-echo "configure:33358: checking for ENCHANT support" >&5
+echo "configure:34740: checking for ENCHANT support" >&5
 # Check whether --with-enchant or --without-enchant was given.
 if test "${with_enchant+set}" = set; then
   withval="$with_enchant"
@@ -33939,7 +35321,7 @@ EOF
   done
 
   echo $ac_n "checking for enchant_broker_set_param in -lenchant""... $ac_c" 1>&6
-echo "configure:33943: checking for enchant_broker_set_param in -lenchant" >&5
+echo "configure:35325: checking for enchant_broker_set_param in -lenchant" >&5
 ac_lib_var=`echo enchant'_'enchant_broker_set_param | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -33947,7 +35329,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lenchant  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 33951 "configure"
+#line 35333 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -33958,7 +35340,7 @@ int main() {
 enchant_broker_set_param()
 ; return 0; }
 EOF
-if { (eval echo configure:33962: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:35344: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -34005,7 +35387,7 @@ fi
 php_enable_exif=no
 
 echo $ac_n "checking whether to enable EXIF (metadata from images) support""... $ac_c" 1>&6
-echo "configure:34009: checking whether to enable EXIF (metadata from images) support" >&5
+echo "configure:35391: checking whether to enable EXIF (metadata from images) support" >&5
 # Check whether --enable-exif or --disable-exif was given.
 if test "${enable_exif+set}" = set; then
   enableval="$enable_exif"
@@ -34349,7 +35731,7 @@ fi
 php_enable_fileinfo=yes
 
 echo $ac_n "checking for fileinfo support""... $ac_c" 1>&6
-echo "configure:34353: checking for fileinfo support" >&5
+echo "configure:35735: checking for fileinfo support" >&5
 # Check whether --enable-fileinfo or --disable-fileinfo was given.
 if test "${enable_fileinfo+set}" = set; then
   enableval="$enable_fileinfo"
@@ -34699,12 +36081,12 @@ EOF
   for ac_func in utimes strndup
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:34703: checking for $ac_func" >&5
+echo "configure:36085: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 34708 "configure"
+#line 36090 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -34727,7 +36109,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:34731: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:36113: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -34765,7 +36147,7 @@ fi
 php_enable_filter=yes
 
 echo $ac_n "checking whether to enable input filter support""... $ac_c" 1>&6
-echo "configure:34769: checking whether to enable input filter support" >&5
+echo "configure:36151: checking whether to enable input filter support" >&5
 # Check whether --enable-filter or --disable-filter was given.
 if test "${enable_filter+set}" = set; then
   enableval="$enable_filter"
@@ -34809,7 +36191,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_with_pcre_dir=no
 
 echo $ac_n "checking pcre install prefix""... $ac_c" 1>&6
-echo "configure:34813: checking pcre install prefix" >&5
+echo "configure:36195: checking pcre install prefix" >&5
 # Check whether --with-pcre-dir or --without-pcre-dir was given.
 if test "${with_pcre_dir+set}" = set; then
   withval="$with_pcre_dir"
@@ -34836,7 +36218,7 @@ if test "$PHP_FILTER" != "no"; then
         old_CPPFLAGS=$CPPFLAGS
     CPPFLAGS=$INCLUDES
     cat > conftest.$ac_ext <<EOF
-#line 34840 "configure"
+#line 36222 "configure"
 #include "confdefs.h"
 
 #include <main/php_config.h>
@@ -34855,7 +36237,7 @@ else
   rm -rf conftest*
   
       cat > conftest.$ac_ext <<EOF
-#line 34859 "configure"
+#line 36241 "configure"
 #include "confdefs.h"
 
 #include <main/php_config.h>
@@ -35225,7 +36607,7 @@ fi
 php_enable_ftp=no
 
 echo $ac_n "checking whether to enable FTP support""... $ac_c" 1>&6
-echo "configure:35229: checking whether to enable FTP support" >&5
+echo "configure:36611: checking whether to enable FTP support" >&5
 # Check whether --enable-ftp or --disable-ftp was given.
 if test "${enable_ftp+set}" = set; then
   enableval="$enable_ftp"
@@ -35269,7 +36651,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_with_openssl_dir=no
 
 echo $ac_n "checking OpenSSL dir for FTP""... $ac_c" 1>&6
-echo "configure:35273: checking OpenSSL dir for FTP" >&5
+echo "configure:36655: checking OpenSSL dir for FTP" >&5
 # Check whether --with-openssl-dir or --without-openssl-dir was given.
 if test "${with_openssl_dir+set}" = set; then
   withval="$with_openssl_dir"
@@ -35607,7 +36989,7 @@ EOF
     # Extract the first word of "pkg-config", so it can be a program name with args.
 set dummy pkg-config; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:35611: checking for $ac_word" >&5
+echo "configure:36993: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -35812,9 +37194,9 @@ fi
     old_CPPFLAGS=$CPPFLAGS
     CPPFLAGS=-I$OPENSSL_INCDIR
     echo $ac_n "checking for OpenSSL version""... $ac_c" 1>&6
-echo "configure:35816: checking for OpenSSL version" >&5
+echo "configure:37198: checking for OpenSSL version" >&5
     cat > conftest.$ac_ext <<EOF
-#line 35818 "configure"
+#line 37200 "configure"
 #include "confdefs.h"
 
 #include <openssl/opensslv.h>
@@ -35969,7 +37351,7 @@ rm -f conftest*
   done
 
   echo $ac_n "checking for CRYPTO_free in -lcrypto""... $ac_c" 1>&6
-echo "configure:35973: checking for CRYPTO_free in -lcrypto" >&5
+echo "configure:37355: checking for CRYPTO_free in -lcrypto" >&5
 ac_lib_var=`echo crypto'_'CRYPTO_free | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -35977,7 +37359,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lcrypto  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 35981 "configure"
+#line 37363 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -35988,7 +37370,7 @@ int main() {
 CRYPTO_free()
 ; return 0; }
 EOF
-if { (eval echo configure:35992: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:37374: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -36145,7 +37527,7 @@ fi
   done
 
   echo $ac_n "checking for SSL_CTX_set_ssl_version in -lssl""... $ac_c" 1>&6
-echo "configure:36149: checking for SSL_CTX_set_ssl_version in -lssl" >&5
+echo "configure:37531: checking for SSL_CTX_set_ssl_version in -lssl" >&5
 ac_lib_var=`echo ssl'_'SSL_CTX_set_ssl_version | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -36153,7 +37535,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lssl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 36157 "configure"
+#line 37539 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -36164,7 +37546,7 @@ int main() {
 SSL_CTX_set_ssl_version()
 ; return 0; }
 EOF
-if { (eval echo configure:36168: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:37550: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -36283,7 +37665,7 @@ fi
 php_with_gd=no
 
 echo $ac_n "checking for GD support""... $ac_c" 1>&6
-echo "configure:36287: checking for GD support" >&5
+echo "configure:37669: checking for GD support" >&5
 # Check whether --with-gd or --without-gd was given.
 if test "${with_gd+set}" = set; then
   withval="$with_gd"
@@ -36328,7 +37710,7 @@ if test -z "$PHP_JPEG_DIR"; then
 php_with_jpeg_dir=no
 
 echo $ac_n "checking for the location of libjpeg""... $ac_c" 1>&6
-echo "configure:36332: checking for the location of libjpeg" >&5
+echo "configure:37714: checking for the location of libjpeg" >&5
 # Check whether --with-jpeg-dir or --without-jpeg-dir was given.
 if test "${with_jpeg_dir+set}" = set; then
   withval="$with_jpeg_dir"
@@ -36353,7 +37735,7 @@ if test -z "$PHP_PNG_DIR"; then
 php_with_png_dir=no
 
 echo $ac_n "checking for the location of libpng""... $ac_c" 1>&6
-echo "configure:36357: checking for the location of libpng" >&5
+echo "configure:37739: checking for the location of libpng" >&5
 # Check whether --with-png-dir or --without-png-dir was given.
 if test "${with_png_dir+set}" = set; then
   withval="$with_png_dir"
@@ -36378,7 +37760,7 @@ if test -z "$PHP_ZLIB_DIR"; then
 php_with_zlib_dir=no
 
 echo $ac_n "checking for the location of libz""... $ac_c" 1>&6
-echo "configure:36382: checking for the location of libz" >&5
+echo "configure:37764: checking for the location of libz" >&5
 # Check whether --with-zlib-dir or --without-zlib-dir was given.
 if test "${with_zlib_dir+set}" = set; then
   withval="$with_zlib_dir"
@@ -36402,7 +37784,7 @@ fi
 php_with_xpm_dir=no
 
 echo $ac_n "checking for the location of libXpm""... $ac_c" 1>&6
-echo "configure:36406: checking for the location of libXpm" >&5
+echo "configure:37788: checking for the location of libXpm" >&5
 # Check whether --with-xpm-dir or --without-xpm-dir was given.
 if test "${with_xpm_dir+set}" = set; then
   withval="$with_xpm_dir"
@@ -36425,7 +37807,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_with_freetype_dir=no
 
 echo $ac_n "checking for FreeType 2""... $ac_c" 1>&6
-echo "configure:36429: checking for FreeType 2" >&5
+echo "configure:37811: checking for FreeType 2" >&5
 # Check whether --with-freetype-dir or --without-freetype-dir was given.
 if test "${with_freetype_dir+set}" = set; then
   withval="$with_freetype_dir"
@@ -36448,7 +37830,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_with_t1lib=no
 
 echo $ac_n "checking for T1lib support""... $ac_c" 1>&6
-echo "configure:36452: checking for T1lib support" >&5
+echo "configure:37834: checking for T1lib support" >&5
 # Check whether --with-t1lib or --without-t1lib was given.
 if test "${with_t1lib+set}" = set; then
   withval="$with_t1lib"
@@ -36471,7 +37853,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_enable_gd_native_ttf=no
 
 echo $ac_n "checking whether to enable truetype string function in GD""... $ac_c" 1>&6
-echo "configure:36475: checking whether to enable truetype string function in GD" >&5
+echo "configure:37857: checking whether to enable truetype string function in GD" >&5
 # Check whether --enable-gd-native-ttf or --disable-gd-native-ttf was given.
 if test "${enable_gd_native_ttf+set}" = set; then
   enableval="$enable_gd_native_ttf"
@@ -36494,7 +37876,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_enable_gd_jis_conv=no
 
 echo $ac_n "checking whether to enable JIS-mapped Japanese font support in GD""... $ac_c" 1>&6
-echo "configure:36498: checking whether to enable JIS-mapped Japanese font support in GD" >&5
+echo "configure:37880: checking whether to enable JIS-mapped Japanese font support in GD" >&5
 # Check whether --enable-gd-jis-conv or --disable-gd-jis-conv was given.
 if test "${enable_gd_jis_conv+set}" = set; then
   enableval="$enable_gd_jis_conv"
@@ -36546,12 +37928,12 @@ if test "$PHP_GD" = "yes"; then
   for ac_func in fabsf floorf
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:36550: checking for $ac_func" >&5
+echo "configure:37932: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 36555 "configure"
+#line 37937 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -36574,7 +37956,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:36578: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:37960: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -36746,7 +38128,7 @@ EOF
   done
 
   echo $ac_n "checking for jpeg_read_header in -ljpeg""... $ac_c" 1>&6
-echo "configure:36750: checking for jpeg_read_header in -ljpeg" >&5
+echo "configure:38132: checking for jpeg_read_header in -ljpeg" >&5
 ac_lib_var=`echo jpeg'_'jpeg_read_header | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -36754,7 +38136,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-ljpeg  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 36758 "configure"
+#line 38140 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -36765,7 +38147,7 @@ int main() {
 jpeg_read_header()
 ; return 0; }
 EOF
-if { (eval echo configure:36769: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:38151: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -37047,7 +38429,7 @@ fi
   done
 
   echo $ac_n "checking for png_write_image in -lpng""... $ac_c" 1>&6
-echo "configure:37051: checking for png_write_image in -lpng" >&5
+echo "configure:38433: checking for png_write_image in -lpng" >&5
 ac_lib_var=`echo png'_'png_write_image | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -37055,7 +38437,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lpng  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 37059 "configure"
+#line 38441 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -37066,7 +38448,7 @@ int main() {
 png_write_image()
 ; return 0; }
 EOF
-if { (eval echo configure:37070: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:38452: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -37446,7 +38828,7 @@ fi
   done
 
   echo $ac_n "checking for XpmFreeXpmImage in -lXpm""... $ac_c" 1>&6
-echo "configure:37450: checking for XpmFreeXpmImage in -lXpm" >&5
+echo "configure:38832: checking for XpmFreeXpmImage in -lXpm" >&5
 ac_lib_var=`echo Xpm'_'XpmFreeXpmImage | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -37454,7 +38836,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lXpm  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 37458 "configure"
+#line 38840 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -37465,7 +38847,7 @@ int main() {
 XpmFreeXpmImage()
 ; return 0; }
 EOF
-if { (eval echo configure:37469: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:38851: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -37840,7 +39222,7 @@ fi
   done
 
   echo $ac_n "checking for FT_New_Face in -lfreetype""... $ac_c" 1>&6
-echo "configure:37844: checking for FT_New_Face in -lfreetype" >&5
+echo "configure:39226: checking for FT_New_Face in -lfreetype" >&5
 ac_lib_var=`echo freetype'_'FT_New_Face | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -37848,7 +39230,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lfreetype  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 37852 "configure"
+#line 39234 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -37859,7 +39241,7 @@ int main() {
 FT_New_Face()
 ; return 0; }
 EOF
-if { (eval echo configure:37863: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:39245: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -38176,7 +39558,7 @@ fi
   done
 
   echo $ac_n "checking for T1_StrError in -lt1""... $ac_c" 1>&6
-echo "configure:38180: checking for T1_StrError in -lt1" >&5
+echo "configure:39562: checking for T1_StrError in -lt1" >&5
 ac_lib_var=`echo t1'_'T1_StrError | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -38184,7 +39566,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lt1  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 38188 "configure"
+#line 39570 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -38195,7 +39577,7 @@ int main() {
 T1_StrError()
 ; return 0; }
 EOF
-if { (eval echo configure:38199: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:39581: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -38638,7 +40020,7 @@ EOF
   done
 
   echo $ac_n "checking for jpeg_read_header in -ljpeg""... $ac_c" 1>&6
-echo "configure:38642: checking for jpeg_read_header in -ljpeg" >&5
+echo "configure:40024: checking for jpeg_read_header in -ljpeg" >&5
 ac_lib_var=`echo jpeg'_'jpeg_read_header | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -38646,7 +40028,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-ljpeg  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 38650 "configure"
+#line 40032 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -38657,7 +40039,7 @@ int main() {
 jpeg_read_header()
 ; return 0; }
 EOF
-if { (eval echo configure:38661: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:40043: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -38939,7 +40321,7 @@ fi
   done
 
   echo $ac_n "checking for png_write_image in -lpng""... $ac_c" 1>&6
-echo "configure:38943: checking for png_write_image in -lpng" >&5
+echo "configure:40325: checking for png_write_image in -lpng" >&5
 ac_lib_var=`echo png'_'png_write_image | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -38947,7 +40329,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lpng  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 38951 "configure"
+#line 40333 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -38958,7 +40340,7 @@ int main() {
 png_write_image()
 ; return 0; }
 EOF
-if { (eval echo configure:38962: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:40344: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -39338,7 +40720,7 @@ fi
   done
 
   echo $ac_n "checking for XpmFreeXpmImage in -lXpm""... $ac_c" 1>&6
-echo "configure:39342: checking for XpmFreeXpmImage in -lXpm" >&5
+echo "configure:40724: checking for XpmFreeXpmImage in -lXpm" >&5
 ac_lib_var=`echo Xpm'_'XpmFreeXpmImage | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -39346,7 +40728,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lXpm  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 39350 "configure"
+#line 40732 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -39357,7 +40739,7 @@ int main() {
 XpmFreeXpmImage()
 ; return 0; }
 EOF
-if { (eval echo configure:39361: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:40743: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -39732,7 +41114,7 @@ fi
   done
 
   echo $ac_n "checking for FT_New_Face in -lfreetype""... $ac_c" 1>&6
-echo "configure:39736: checking for FT_New_Face in -lfreetype" >&5
+echo "configure:41118: checking for FT_New_Face in -lfreetype" >&5
 ac_lib_var=`echo freetype'_'FT_New_Face | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -39740,7 +41122,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lfreetype  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 39744 "configure"
+#line 41126 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -39751,7 +41133,7 @@ int main() {
 FT_New_Face()
 ; return 0; }
 EOF
-if { (eval echo configure:39755: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:41137: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -40068,7 +41450,7 @@ fi
   done
 
   echo $ac_n "checking for T1_StrError in -lt1""... $ac_c" 1>&6
-echo "configure:40072: checking for T1_StrError in -lt1" >&5
+echo "configure:41454: checking for T1_StrError in -lt1" >&5
 ac_lib_var=`echo t1'_'T1_StrError | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -40076,7 +41458,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lt1  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 40080 "configure"
+#line 41462 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -40087,7 +41469,7 @@ int main() {
 T1_StrError()
 ; return 0; }
 EOF
-if { (eval echo configure:40091: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:41473: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -40462,7 +41844,7 @@ EOF
   done
 
   echo $ac_n "checking for gdImageString16 in -lgd""... $ac_c" 1>&6
-echo "configure:40466: checking for gdImageString16 in -lgd" >&5
+echo "configure:41848: checking for gdImageString16 in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageString16 | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -40470,7 +41852,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 40474 "configure"
+#line 41856 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -40481,7 +41863,7 @@ int main() {
 gdImageString16()
 ; return 0; }
 EOF
-if { (eval echo configure:40485: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:41867: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -40610,7 +41992,7 @@ fi
   done
 
   echo $ac_n "checking for gdImagePaletteCopy in -lgd""... $ac_c" 1>&6
-echo "configure:40614: checking for gdImagePaletteCopy in -lgd" >&5
+echo "configure:41996: checking for gdImagePaletteCopy in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImagePaletteCopy | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -40618,7 +42000,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 40622 "configure"
+#line 42004 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -40629,7 +42011,7 @@ int main() {
 gdImagePaletteCopy()
 ; return 0; }
 EOF
-if { (eval echo configure:40633: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:42015: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -40758,7 +42140,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageCreateFromPng in -lgd""... $ac_c" 1>&6
-echo "configure:40762: checking for gdImageCreateFromPng in -lgd" >&5
+echo "configure:42144: checking for gdImageCreateFromPng in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageCreateFromPng | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -40766,7 +42148,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 40770 "configure"
+#line 42152 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -40777,7 +42159,7 @@ int main() {
 gdImageCreateFromPng()
 ; return 0; }
 EOF
-if { (eval echo configure:40781: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:42163: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -40906,7 +42288,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageCreateFromGif in -lgd""... $ac_c" 1>&6
-echo "configure:40910: checking for gdImageCreateFromGif in -lgd" >&5
+echo "configure:42292: checking for gdImageCreateFromGif in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageCreateFromGif | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -40914,7 +42296,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 40918 "configure"
+#line 42300 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -40925,7 +42307,7 @@ int main() {
 gdImageCreateFromGif()
 ; return 0; }
 EOF
-if { (eval echo configure:40929: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:42311: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -41054,7 +42436,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageGif in -lgd""... $ac_c" 1>&6
-echo "configure:41058: checking for gdImageGif in -lgd" >&5
+echo "configure:42440: checking for gdImageGif in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageGif | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -41062,7 +42444,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 41066 "configure"
+#line 42448 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -41073,7 +42455,7 @@ int main() {
 gdImageGif()
 ; return 0; }
 EOF
-if { (eval echo configure:41077: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:42459: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -41202,7 +42584,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageWBMP in -lgd""... $ac_c" 1>&6
-echo "configure:41206: checking for gdImageWBMP in -lgd" >&5
+echo "configure:42588: checking for gdImageWBMP in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageWBMP | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -41210,7 +42592,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 41214 "configure"
+#line 42596 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -41221,7 +42603,7 @@ int main() {
 gdImageWBMP()
 ; return 0; }
 EOF
-if { (eval echo configure:41225: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:42607: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -41350,7 +42732,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageCreateFromJpeg in -lgd""... $ac_c" 1>&6
-echo "configure:41354: checking for gdImageCreateFromJpeg in -lgd" >&5
+echo "configure:42736: checking for gdImageCreateFromJpeg in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageCreateFromJpeg | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -41358,7 +42740,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 41362 "configure"
+#line 42744 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -41369,7 +42751,7 @@ int main() {
 gdImageCreateFromJpeg()
 ; return 0; }
 EOF
-if { (eval echo configure:41373: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:42755: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -41498,7 +42880,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageCreateFromXpm in -lgd""... $ac_c" 1>&6
-echo "configure:41502: checking for gdImageCreateFromXpm in -lgd" >&5
+echo "configure:42884: checking for gdImageCreateFromXpm in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageCreateFromXpm | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -41506,7 +42888,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 41510 "configure"
+#line 42892 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -41517,7 +42899,7 @@ int main() {
 gdImageCreateFromXpm()
 ; return 0; }
 EOF
-if { (eval echo configure:41521: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:42903: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -41646,7 +43028,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageCreateFromGd2 in -lgd""... $ac_c" 1>&6
-echo "configure:41650: checking for gdImageCreateFromGd2 in -lgd" >&5
+echo "configure:43032: checking for gdImageCreateFromGd2 in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageCreateFromGd2 | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -41654,7 +43036,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 41658 "configure"
+#line 43040 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -41665,7 +43047,7 @@ int main() {
 gdImageCreateFromGd2()
 ; return 0; }
 EOF
-if { (eval echo configure:41669: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:43051: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -41794,7 +43176,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageCreateTrueColor in -lgd""... $ac_c" 1>&6
-echo "configure:41798: checking for gdImageCreateTrueColor in -lgd" >&5
+echo "configure:43180: checking for gdImageCreateTrueColor in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageCreateTrueColor | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -41802,7 +43184,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 41806 "configure"
+#line 43188 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -41813,7 +43195,7 @@ int main() {
 gdImageCreateTrueColor()
 ; return 0; }
 EOF
-if { (eval echo configure:41817: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:43199: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -41942,7 +43324,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageSetTile in -lgd""... $ac_c" 1>&6
-echo "configure:41946: checking for gdImageSetTile in -lgd" >&5
+echo "configure:43328: checking for gdImageSetTile in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageSetTile | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -41950,7 +43332,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 41954 "configure"
+#line 43336 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -41961,7 +43343,7 @@ int main() {
 gdImageSetTile()
 ; return 0; }
 EOF
-if { (eval echo configure:41965: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:43347: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -42090,7 +43472,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageEllipse in -lgd""... $ac_c" 1>&6
-echo "configure:42094: checking for gdImageEllipse in -lgd" >&5
+echo "configure:43476: checking for gdImageEllipse in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageEllipse | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -42098,7 +43480,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 42102 "configure"
+#line 43484 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -42109,7 +43491,7 @@ int main() {
 gdImageEllipse()
 ; return 0; }
 EOF
-if { (eval echo configure:42113: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:43495: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -42238,7 +43620,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageSetBrush in -lgd""... $ac_c" 1>&6
-echo "configure:42242: checking for gdImageSetBrush in -lgd" >&5
+echo "configure:43624: checking for gdImageSetBrush in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageSetBrush | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -42246,7 +43628,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 42250 "configure"
+#line 43632 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -42257,7 +43639,7 @@ int main() {
 gdImageSetBrush()
 ; return 0; }
 EOF
-if { (eval echo configure:42261: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:43643: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -42386,7 +43768,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageStringTTF in -lgd""... $ac_c" 1>&6
-echo "configure:42390: checking for gdImageStringTTF in -lgd" >&5
+echo "configure:43772: checking for gdImageStringTTF in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageStringTTF | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -42394,7 +43776,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 42398 "configure"
+#line 43780 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -42405,7 +43787,7 @@ int main() {
 gdImageStringTTF()
 ; return 0; }
 EOF
-if { (eval echo configure:42409: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:43791: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -42534,7 +43916,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageStringFT in -lgd""... $ac_c" 1>&6
-echo "configure:42538: checking for gdImageStringFT in -lgd" >&5
+echo "configure:43920: checking for gdImageStringFT in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageStringFT | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -42542,7 +43924,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 42546 "configure"
+#line 43928 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -42553,7 +43935,7 @@ int main() {
 gdImageStringFT()
 ; return 0; }
 EOF
-if { (eval echo configure:42557: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:43939: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -42682,7 +44064,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageStringFTEx in -lgd""... $ac_c" 1>&6
-echo "configure:42686: checking for gdImageStringFTEx in -lgd" >&5
+echo "configure:44068: checking for gdImageStringFTEx in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageStringFTEx | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -42690,7 +44072,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 42694 "configure"
+#line 44076 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -42701,7 +44083,7 @@ int main() {
 gdImageStringFTEx()
 ; return 0; }
 EOF
-if { (eval echo configure:42705: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:44087: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -42830,7 +44212,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageColorClosestHWB in -lgd""... $ac_c" 1>&6
-echo "configure:42834: checking for gdImageColorClosestHWB in -lgd" >&5
+echo "configure:44216: checking for gdImageColorClosestHWB in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageColorClosestHWB | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -42838,7 +44220,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 42842 "configure"
+#line 44224 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -42849,7 +44231,7 @@ int main() {
 gdImageColorClosestHWB()
 ; return 0; }
 EOF
-if { (eval echo configure:42853: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:44235: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -42978,7 +44360,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageColorResolve in -lgd""... $ac_c" 1>&6
-echo "configure:42982: checking for gdImageColorResolve in -lgd" >&5
+echo "configure:44364: checking for gdImageColorResolve in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageColorResolve | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -42986,7 +44368,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 42990 "configure"
+#line 44372 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -42997,7 +44379,7 @@ int main() {
 gdImageColorResolve()
 ; return 0; }
 EOF
-if { (eval echo configure:43001: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:44383: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -43126,7 +44508,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageGifCtx in -lgd""... $ac_c" 1>&6
-echo "configure:43130: checking for gdImageGifCtx in -lgd" >&5
+echo "configure:44512: checking for gdImageGifCtx in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageGifCtx | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -43134,7 +44516,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 43138 "configure"
+#line 44520 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -43145,7 +44527,7 @@ int main() {
 gdImageGifCtx()
 ; return 0; }
 EOF
-if { (eval echo configure:43149: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:44531: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -43274,7 +44656,7 @@ fi
   done
 
   echo $ac_n "checking for gdCacheCreate in -lgd""... $ac_c" 1>&6
-echo "configure:43278: checking for gdCacheCreate in -lgd" >&5
+echo "configure:44660: checking for gdCacheCreate in -lgd" >&5
 ac_lib_var=`echo gd'_'gdCacheCreate | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -43282,7 +44664,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 43286 "configure"
+#line 44668 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -43293,7 +44675,7 @@ int main() {
 gdCacheCreate()
 ; return 0; }
 EOF
-if { (eval echo configure:43297: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:44679: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -43422,7 +44804,7 @@ fi
   done
 
   echo $ac_n "checking for gdFontCacheShutdown in -lgd""... $ac_c" 1>&6
-echo "configure:43426: checking for gdFontCacheShutdown in -lgd" >&5
+echo "configure:44808: checking for gdFontCacheShutdown in -lgd" >&5
 ac_lib_var=`echo gd'_'gdFontCacheShutdown | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -43430,7 +44812,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 43434 "configure"
+#line 44816 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -43441,7 +44823,7 @@ int main() {
 gdFontCacheShutdown()
 ; return 0; }
 EOF
-if { (eval echo configure:43445: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:44827: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -43570,7 +44952,7 @@ fi
   done
 
   echo $ac_n "checking for gdFreeFontCache in -lgd""... $ac_c" 1>&6
-echo "configure:43574: checking for gdFreeFontCache in -lgd" >&5
+echo "configure:44956: checking for gdFreeFontCache in -lgd" >&5
 ac_lib_var=`echo gd'_'gdFreeFontCache | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -43578,7 +44960,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 43582 "configure"
+#line 44964 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -43589,7 +44971,7 @@ int main() {
 gdFreeFontCache()
 ; return 0; }
 EOF
-if { (eval echo configure:43593: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:44975: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -43718,7 +45100,7 @@ fi
   done
 
   echo $ac_n "checking for gdFontCacheMutexSetup in -lgd""... $ac_c" 1>&6
-echo "configure:43722: checking for gdFontCacheMutexSetup in -lgd" >&5
+echo "configure:45104: checking for gdFontCacheMutexSetup in -lgd" >&5
 ac_lib_var=`echo gd'_'gdFontCacheMutexSetup | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -43726,7 +45108,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 43730 "configure"
+#line 45112 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -43737,7 +45119,7 @@ int main() {
 gdFontCacheMutexSetup()
 ; return 0; }
 EOF
-if { (eval echo configure:43741: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:45123: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -43866,7 +45248,7 @@ fi
   done
 
   echo $ac_n "checking for gdNewDynamicCtxEx in -lgd""... $ac_c" 1>&6
-echo "configure:43870: checking for gdNewDynamicCtxEx in -lgd" >&5
+echo "configure:45252: checking for gdNewDynamicCtxEx in -lgd" >&5
 ac_lib_var=`echo gd'_'gdNewDynamicCtxEx | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -43874,7 +45256,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 43878 "configure"
+#line 45260 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -43885,7 +45267,7 @@ int main() {
 gdNewDynamicCtxEx()
 ; return 0; }
 EOF
-if { (eval echo configure:43889: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:45271: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -43940,7 +45322,7 @@ fi
         old_CPPFLAGS=$CPPFLAGS
   CPPFLAGS=-I$GD_INCLUDE
   cat > conftest.$ac_ext <<EOF
-#line 43944 "configure"
+#line 45326 "configure"
 #include "confdefs.h"
 
 #include <gd.h>
@@ -43954,7 +45336,7 @@ ctx->gd_free = 1;
   
 ; return 0; }
 EOF
-if { (eval echo configure:43958: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:45340: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     cat >> confdefs.h <<\EOF
@@ -44285,7 +45667,7 @@ EOF
   
 else
   cat > conftest.$ac_ext <<EOF
-#line 44289 "configure"
+#line 45671 "configure"
 #include "confdefs.h"
 
     char foobar () {}
@@ -44296,7 +45678,7 @@ else
     }
   
 EOF
-if { (eval echo configure:44300: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:45682: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     LIBS=$old_LIBS
@@ -44447,7 +45829,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageCreate in -lgd""... $ac_c" 1>&6
-echo "configure:44451: checking for gdImageCreate in -lgd" >&5
+echo "configure:45833: checking for gdImageCreate in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageCreate | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -44455,7 +45837,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 44459 "configure"
+#line 45841 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -44466,7 +45848,7 @@ int main() {
 gdImageCreate()
 ; return 0; }
 EOF
-if { (eval echo configure:44470: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:45852: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -44531,7 +45913,7 @@ fi
 php_with_gettext=no
 
 echo $ac_n "checking for GNU gettext support""... $ac_c" 1>&6
-echo "configure:44535: checking for GNU gettext support" >&5
+echo "configure:45917: checking for GNU gettext support" >&5
 # Check whether --with-gettext or --without-gettext was given.
 if test "${with_gettext+set}" = set; then
   withval="$with_gettext"
@@ -44586,7 +45968,7 @@ if test "$PHP_GETTEXT" != "no"; then
   O_LDFLAGS=$LDFLAGS
   LDFLAGS="$LDFLAGS -L$GETTEXT_LIBDIR"
   echo $ac_n "checking for bindtextdomain in -lintl""... $ac_c" 1>&6
-echo "configure:44590: checking for bindtextdomain in -lintl" >&5
+echo "configure:45972: checking for bindtextdomain in -lintl" >&5
 ac_lib_var=`echo intl'_'bindtextdomain | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -44594,7 +45976,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lintl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 44598 "configure"
+#line 45980 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -44605,7 +45987,7 @@ int main() {
 bindtextdomain()
 ; return 0; }
 EOF
-if { (eval echo configure:44609: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:45991: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -44627,7 +46009,7 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for bindtextdomain in -lc""... $ac_c" 1>&6
-echo "configure:44631: checking for bindtextdomain in -lc" >&5
+echo "configure:46013: checking for bindtextdomain in -lc" >&5
 ac_lib_var=`echo c'_'bindtextdomain | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -44635,7 +46017,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lc  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 44639 "configure"
+#line 46021 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -44646,7 +46028,7 @@ int main() {
 bindtextdomain()
 ; return 0; }
 EOF
-if { (eval echo configure:44650: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:46032: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -45110,7 +46492,7 @@ EOF
 
 
   echo $ac_n "checking for ngettext in -l$GETTEXT_CHECK_IN_LIB""... $ac_c" 1>&6
-echo "configure:45114: checking for ngettext in -l$GETTEXT_CHECK_IN_LIB" >&5
+echo "configure:46496: checking for ngettext in -l$GETTEXT_CHECK_IN_LIB" >&5
 ac_lib_var=`echo $GETTEXT_CHECK_IN_LIB'_'ngettext | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -45118,7 +46500,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$GETTEXT_CHECK_IN_LIB  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 45122 "configure"
+#line 46504 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -45129,7 +46511,7 @@ int main() {
 ngettext()
 ; return 0; }
 EOF
-if { (eval echo configure:45133: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:46515: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -45153,7 +46535,7 @@ else
 fi
 
   echo $ac_n "checking for dngettext in -l$GETTEXT_CHECK_IN_LIB""... $ac_c" 1>&6
-echo "configure:45157: checking for dngettext in -l$GETTEXT_CHECK_IN_LIB" >&5
+echo "configure:46539: checking for dngettext in -l$GETTEXT_CHECK_IN_LIB" >&5
 ac_lib_var=`echo $GETTEXT_CHECK_IN_LIB'_'dngettext | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -45161,7 +46543,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$GETTEXT_CHECK_IN_LIB  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 45165 "configure"
+#line 46547 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -45172,7 +46554,7 @@ int main() {
 dngettext()
 ; return 0; }
 EOF
-if { (eval echo configure:45176: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:46558: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -45196,7 +46578,7 @@ else
 fi
 
   echo $ac_n "checking for dcngettext in -l$GETTEXT_CHECK_IN_LIB""... $ac_c" 1>&6
-echo "configure:45200: checking for dcngettext in -l$GETTEXT_CHECK_IN_LIB" >&5
+echo "configure:46582: checking for dcngettext in -l$GETTEXT_CHECK_IN_LIB" >&5
 ac_lib_var=`echo $GETTEXT_CHECK_IN_LIB'_'dcngettext | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -45204,7 +46586,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$GETTEXT_CHECK_IN_LIB  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 45208 "configure"
+#line 46590 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -45215,7 +46597,7 @@ int main() {
 dcngettext()
 ; return 0; }
 EOF
-if { (eval echo configure:45219: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:46601: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -45239,7 +46621,7 @@ else
 fi
 
   echo $ac_n "checking for bind_textdomain_codeset in -l$GETTEXT_CHECK_IN_LIB""... $ac_c" 1>&6
-echo "configure:45243: checking for bind_textdomain_codeset in -l$GETTEXT_CHECK_IN_LIB" >&5
+echo "configure:46625: checking for bind_textdomain_codeset in -l$GETTEXT_CHECK_IN_LIB" >&5
 ac_lib_var=`echo $GETTEXT_CHECK_IN_LIB'_'bind_textdomain_codeset | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -45247,7 +46629,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$GETTEXT_CHECK_IN_LIB  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 45251 "configure"
+#line 46633 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -45258,7 +46640,7 @@ int main() {
 bind_textdomain_codeset()
 ; return 0; }
 EOF
-if { (eval echo configure:45262: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:46644: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -45289,7 +46671,7 @@ fi
 php_with_gmp=no
 
 echo $ac_n "checking for GNU MP support""... $ac_c" 1>&6
-echo "configure:45293: checking for GNU MP support" >&5
+echo "configure:46675: checking for GNU MP support" >&5
 # Check whether --with-gmp or --without-gmp was given.
 if test "${with_gmp+set}" = set; then
   withval="$with_gmp"
@@ -45437,7 +46819,7 @@ if test "$PHP_GMP" != "no"; then
   done
 
   echo $ac_n "checking for __gmp_randinit_lc_2exp_size in -lgmp""... $ac_c" 1>&6
-echo "configure:45441: checking for __gmp_randinit_lc_2exp_size in -lgmp" >&5
+echo "configure:46823: checking for __gmp_randinit_lc_2exp_size in -lgmp" >&5
 ac_lib_var=`echo gmp'_'__gmp_randinit_lc_2exp_size | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -45445,7 +46827,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgmp  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 45449 "configure"
+#line 46831 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -45456,7 +46838,7 @@ int main() {
 __gmp_randinit_lc_2exp_size()
 ; return 0; }
 EOF
-if { (eval echo configure:45460: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:46842: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -45581,7 +46963,7 @@ else
   done
 
   echo $ac_n "checking for gmp_randinit_lc_2exp_size in -lgmp""... $ac_c" 1>&6
-echo "configure:45585: checking for gmp_randinit_lc_2exp_size in -lgmp" >&5
+echo "configure:46967: checking for gmp_randinit_lc_2exp_size in -lgmp" >&5
 ac_lib_var=`echo gmp'_'gmp_randinit_lc_2exp_size | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -45589,7 +46971,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgmp  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 45593 "configure"
+#line 46975 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -45600,7 +46982,7 @@ int main() {
 gmp_randinit_lc_2exp_size()
 ; return 0; }
 EOF
-if { (eval echo configure:45604: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:46986: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -46072,7 +47454,7 @@ fi
 php_with_mhash=no
 
 echo $ac_n "checking for mhash support""... $ac_c" 1>&6
-echo "configure:46076: checking for mhash support" >&5
+echo "configure:47458: checking for mhash support" >&5
 # Check whether --with-mhash or --without-mhash was given.
 if test "${with_mhash+set}" = set; then
   withval="$with_mhash"
@@ -46116,7 +47498,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_enable_hash=yes
 
 echo $ac_n "checking whether to enable hash support""... $ac_c" 1>&6
-echo "configure:46120: checking whether to enable hash support" >&5
+echo "configure:47502: checking whether to enable hash support" >&5
 # Check whether --enable-hash or --disable-hash was given.
 if test "${enable_hash+set}" = set; then
   enableval="$enable_hash"
@@ -46174,7 +47556,7 @@ EOF
 
 
   echo $ac_n "checking whether byte ordering is bigendian""... $ac_c" 1>&6
-echo "configure:46178: checking whether byte ordering is bigendian" >&5
+echo "configure:47560: checking whether byte ordering is bigendian" >&5
 if eval "test \"`echo '$''{'ac_cv_c_bigendian_php'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -46184,7 +47566,7 @@ else
   ac_cv_c_bigendian_php=unknown
 else
   cat > conftest.$ac_ext <<EOF
-#line 46188 "configure"
+#line 47570 "configure"
 #include "confdefs.h"
 
 int main(void)
@@ -46200,7 +47582,7 @@ int main(void)
 }
   
 EOF
-if { (eval echo configure:46204: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:47586: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_c_bigendian_php=yes
 else
@@ -46225,7 +47607,7 @@ EOF
 
 
   echo $ac_n "checking size of short""... $ac_c" 1>&6
-echo "configure:46229: checking size of short" >&5
+echo "configure:47611: checking size of short" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_short'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -46233,18 +47615,19 @@ else
   ac_cv_sizeof_short=2
 else
   cat > conftest.$ac_ext <<EOF
-#line 46237 "configure"
+#line 47619 "configure"
 #include "confdefs.h"
 #include <stdio.h>
-int main()
+#include <sys/types.h>
+main()
 {
   FILE *f=fopen("conftestval", "w");
-  if (!f) return(1);
+  if (!f) exit(1);
   fprintf(f, "%d\n", sizeof(short));
-  return(0);
+  exit(0);
 }
 EOF
-if { (eval echo configure:46248: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:47631: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_short=`cat conftestval`
 else
@@ -46264,7 +47647,7 @@ EOF
 
 
   echo $ac_n "checking size of int""... $ac_c" 1>&6
-echo "configure:46268: checking size of int" >&5
+echo "configure:47651: checking size of int" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -46272,18 +47655,19 @@ else
   ac_cv_sizeof_int=4
 else
   cat > conftest.$ac_ext <<EOF
-#line 46276 "configure"
+#line 47659 "configure"
 #include "confdefs.h"
 #include <stdio.h>
-int main()
+#include <sys/types.h>
+main()
 {
   FILE *f=fopen("conftestval", "w");
-  if (!f) return(1);
+  if (!f) exit(1);
   fprintf(f, "%d\n", sizeof(int));
-  return(0);
+  exit(0);
 }
 EOF
-if { (eval echo configure:46287: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:47671: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_int=`cat conftestval`
 else
@@ -46303,7 +47687,7 @@ EOF
 
 
   echo $ac_n "checking size of long""... $ac_c" 1>&6
-echo "configure:46307: checking size of long" >&5
+echo "configure:47691: checking size of long" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -46311,18 +47695,19 @@ else
   ac_cv_sizeof_long=4
 else
   cat > conftest.$ac_ext <<EOF
-#line 46315 "configure"
+#line 47699 "configure"
 #include "confdefs.h"
 #include <stdio.h>
-int main()
+#include <sys/types.h>
+main()
 {
   FILE *f=fopen("conftestval", "w");
-  if (!f) return(1);
+  if (!f) exit(1);
   fprintf(f, "%d\n", sizeof(long));
-  return(0);
+  exit(0);
 }
 EOF
-if { (eval echo configure:46326: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:47711: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_long=`cat conftestval`
 else
@@ -46342,7 +47727,7 @@ EOF
 
 
   echo $ac_n "checking size of long long""... $ac_c" 1>&6
-echo "configure:46346: checking size of long long" >&5
+echo "configure:47731: checking size of long long" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_long_long'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -46350,18 +47735,19 @@ else
   ac_cv_sizeof_long_long=8
 else
   cat > conftest.$ac_ext <<EOF
-#line 46354 "configure"
+#line 47739 "configure"
 #include "confdefs.h"
 #include <stdio.h>
-int main()
+#include <sys/types.h>
+main()
 {
   FILE *f=fopen("conftestval", "w");
-  if (!f) return(1);
+  if (!f) exit(1);
   fprintf(f, "%d\n", sizeof(long long));
-  return(0);
+  exit(0);
 }
 EOF
-if { (eval echo configure:46365: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:47751: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_long_long=`cat conftestval`
 else
@@ -46707,10 +48093,13 @@ fi
 
 
 
+
+
+
 php_with_iconv=yes
 
 echo $ac_n "checking for iconv support""... $ac_c" 1>&6
-echo "configure:46714: checking for iconv support" >&5
+echo "configure:48103: checking for iconv support" >&5
 # Check whether --with-iconv or --without-iconv was given.
 if test "${with_iconv+set}" = set; then
   withval="$with_iconv"
@@ -46771,12 +48160,12 @@ if test "$PHP_ICONV" != "no"; then
 
         if test "$PHP_ICONV" = "yes"; then
     echo $ac_n "checking for iconv""... $ac_c" 1>&6
-echo "configure:46775: checking for iconv" >&5
+echo "configure:48164: checking for iconv" >&5
 if eval "test \"`echo '$''{'ac_cv_func_iconv'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 46780 "configure"
+#line 48169 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char iconv(); below.  */
@@ -46799,7 +48188,7 @@ iconv();
 
 ; return 0; }
 EOF
-if { (eval echo configure:46803: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:48192: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_iconv=yes"
 else
@@ -46820,12 +48209,12 @@ else
   echo "$ac_t""no" 1>&6
 
       echo $ac_n "checking for libiconv""... $ac_c" 1>&6
-echo "configure:46824: checking for libiconv" >&5
+echo "configure:48213: checking for libiconv" >&5
 if eval "test \"`echo '$''{'ac_cv_func_libiconv'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 46829 "configure"
+#line 48218 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char libiconv(); below.  */
@@ -46848,7 +48237,7 @@ libiconv();
 
 ; return 0; }
 EOF
-if { (eval echo configure:46852: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:48241: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_libiconv=yes"
 else
@@ -47004,7 +48393,7 @@ EOF
   done
 
   echo $ac_n "checking for libiconv in -l$iconv_lib_name""... $ac_c" 1>&6
-echo "configure:47008: checking for libiconv in -l$iconv_lib_name" >&5
+echo "configure:48397: checking for libiconv in -l$iconv_lib_name" >&5
 ac_lib_var=`echo $iconv_lib_name'_'libiconv | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -47012,7 +48401,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$iconv_lib_name  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 47016 "configure"
+#line 48405 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -47023,7 +48412,7 @@ int main() {
 libiconv()
 ; return 0; }
 EOF
-if { (eval echo configure:47027: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:48416: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -47164,7 +48553,7 @@ else
   done
 
   echo $ac_n "checking for iconv in -l$iconv_lib_name""... $ac_c" 1>&6
-echo "configure:47168: checking for iconv in -l$iconv_lib_name" >&5
+echo "configure:48557: checking for iconv in -l$iconv_lib_name" >&5
 ac_lib_var=`echo $iconv_lib_name'_'iconv | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -47172,7 +48561,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$iconv_lib_name  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 47176 "configure"
+#line 48565 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -47183,7 +48572,7 @@ int main() {
 iconv()
 ; return 0; }
 EOF
-if { (eval echo configure:47187: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:48576: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -47394,16 +48783,16 @@ else
     fi 
 
     echo $ac_n "checking if iconv is glibc's""... $ac_c" 1>&6
-echo "configure:47398: checking if iconv is glibc's" >&5
+echo "configure:48787: checking if iconv is glibc's" >&5
     cat > conftest.$ac_ext <<EOF
-#line 47400 "configure"
+#line 48789 "configure"
 #include "confdefs.h"
 #include <gnu/libc-version.h>
 int main() {
 gnu_get_libc_version();
 ; return 0; }
 EOF
-if { (eval echo configure:47407: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:48796: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   
       echo "$ac_t""yes" 1>&6
@@ -47421,7 +48810,7 @@ rm -f conftest*
 
     if test -z "$iconv_impl_name"; then
       echo $ac_n "checking if using GNU libiconv""... $ac_c" 1>&6
-echo "configure:47425: checking if using GNU libiconv" >&5
+echo "configure:48814: checking if using GNU libiconv" >&5
       php_iconv_old_ld="$LDFLAGS"
       LDFLAGS="-liconv $LDFLAGS"
       if test "$cross_compiling" = yes; then
@@ -47431,7 +48820,7 @@ echo "configure:47425: checking if using
       
 else
   cat > conftest.$ac_ext <<EOF
-#line 47435 "configure"
+#line 48824 "configure"
 #include "confdefs.h"
 
 #include <$PHP_ICONV_H_PATH>
@@ -47441,7 +48830,7 @@ int main() {
 }
       
 EOF
-if { (eval echo configure:47445: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:48834: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
         echo "$ac_t""yes" 1>&6
@@ -47463,16 +48852,16 @@ fi
 
     if test -z "$iconv_impl_name"; then
       echo $ac_n "checking if iconv is Konstantin Chuguev's""... $ac_c" 1>&6
-echo "configure:47467: checking if iconv is Konstantin Chuguev's" >&5
+echo "configure:48856: checking if iconv is Konstantin Chuguev's" >&5
       cat > conftest.$ac_ext <<EOF
-#line 47469 "configure"
+#line 48858 "configure"
 #include "confdefs.h"
 #include <iconv.h>
 int main() {
 iconv_ccs_init(NULL, NULL);
 ; return 0; }
 EOF
-if { (eval echo configure:47476: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:48865: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   
         echo "$ac_t""yes" 1>&6
@@ -47491,18 +48880,18 @@ rm -f conftest*
 
     if test -z "$iconv_impl_name"; then
       echo $ac_n "checking if using IBM iconv""... $ac_c" 1>&6
-echo "configure:47495: checking if using IBM iconv" >&5
+echo "configure:48884: checking if using IBM iconv" >&5
       php_iconv_old_ld="$LDFLAGS"
       LDFLAGS="-liconv $LDFLAGS"
       cat > conftest.$ac_ext <<EOF
-#line 47499 "configure"
+#line 48888 "configure"
 #include "confdefs.h"
 #include <iconv.h>
 int main() {
 cstoccsid("");
 ; return 0; }
 EOF
-if { (eval echo configure:47506: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:48895: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   
         echo "$ac_t""yes" 1>&6
@@ -47688,7 +49077,7 @@ EOF
     esac
 
     echo $ac_n "checking if iconv supports errno""... $ac_c" 1>&6
-echo "configure:47692: checking if iconv supports errno" >&5
+echo "configure:49081: checking if iconv supports errno" >&5
     if test "$cross_compiling" = yes; then
   
       echo "$ac_t""no" 1>&6
@@ -47702,7 +49091,7 @@ EOF
     
 else
   cat > conftest.$ac_ext <<EOF
-#line 47706 "configure"
+#line 49095 "configure"
 #include "confdefs.h"
 
 #include <$PHP_ICONV_H_PATH>
@@ -47723,7 +49112,7 @@ int main() {
 }
     
 EOF
-if { (eval echo configure:47727: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:49116: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
       echo "$ac_t""yes" 1>&6
@@ -47755,9 +49144,9 @@ fi
 
 
     echo $ac_n "checking if your cpp allows macro usage in include lines""... $ac_c" 1>&6
-echo "configure:47759: checking if your cpp allows macro usage in include lines" >&5
+echo "configure:49148: checking if your cpp allows macro usage in include lines" >&5
     cat > conftest.$ac_ext <<EOF
-#line 47761 "configure"
+#line 49150 "configure"
 #include "confdefs.h"
 
 #define FOO <$PHP_ICONV_H_PATH>
@@ -47767,7 +49156,7 @@ int main() {
 
 ; return 0; }
 EOF
-if { (eval echo configure:47771: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:49160: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
       echo "$ac_t""yes" 1>&6
@@ -48123,7 +49512,7 @@ fi
 php_with_imap=no
 
 echo $ac_n "checking for IMAP support""... $ac_c" 1>&6
-echo "configure:48127: checking for IMAP support" >&5
+echo "configure:49516: checking for IMAP support" >&5
 # Check whether --with-imap or --without-imap was given.
 if test "${with_imap+set}" = set; then
   withval="$with_imap"
@@ -48167,7 +49556,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_with_kerberos=no
 
 echo $ac_n "checking for IMAP Kerberos support""... $ac_c" 1>&6
-echo "configure:48171: checking for IMAP Kerberos support" >&5
+echo "configure:49560: checking for IMAP Kerberos support" >&5
 # Check whether --with-kerberos or --without-kerberos was given.
 if test "${with_kerberos+set}" = set; then
   withval="$with_kerberos"
@@ -48190,7 +49579,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_with_imap_ssl=no
 
 echo $ac_n "checking for IMAP SSL support""... $ac_c" 1>&6
-echo "configure:48194: checking for IMAP SSL support" >&5
+echo "configure:49583: checking for IMAP SSL support" >&5
 # Check whether --with-imap-ssl or --without-imap-ssl was given.
 if test "${with_imap_ssl+set}" = set; then
   withval="$with_imap_ssl"
@@ -48594,7 +49983,7 @@ EOF
     done
 
         cat > conftest.$ac_ext <<EOF
-#line 48598 "configure"
+#line 49987 "configure"
 #include "confdefs.h"
 #include <$IMAP_INC_DIR/mail.h>
 EOF
@@ -48614,12 +50003,12 @@ rm -f conftest*
         old_CFLAGS=$CFLAGS
     CFLAGS="-I$IMAP_INC_DIR"
     echo $ac_n "checking for utf8_mime2text signature""... $ac_c" 1>&6
-echo "configure:48618: checking for utf8_mime2text signature" >&5
+echo "configure:50007: checking for utf8_mime2text signature" >&5
 if eval "test \"`echo '$''{'ac_cv_utf8_mime2text'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 48623 "configure"
+#line 50012 "configure"
 #include "confdefs.h"
 
 #include <stdio.h>
@@ -48632,7 +50021,7 @@ int main() {
       
 ; return 0; }
 EOF
-if { (eval echo configure:48636: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:50025: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
         ac_cv_utf8_mime2text=old
@@ -48661,12 +50050,12 @@ EOF
     old_CFLAGS=$CFLAGS
     CFLAGS="-I$IMAP_INC_DIR"
     echo $ac_n "checking for U8T_DECOMPOSE""... $ac_c" 1>&6
-echo "configure:48665: checking for U8T_DECOMPOSE" >&5
+echo "configure:50054: checking for U8T_DECOMPOSE" >&5
 if eval "test \"`echo '$''{'ac_cv_u8t_canonical'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 48670 "configure"
+#line 50059 "configure"
 #include "confdefs.h"
 
 #include <c-client.h>
@@ -48677,7 +50066,7 @@ int main() {
       
 ; return 0; }
 EOF
-if { (eval echo configure:48681: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:50070: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
          ac_cv_u8t_decompose=yes
@@ -48707,7 +50096,7 @@ echo "$ac_t""$ac_cv_u8t_canonical" 1>&6
         old_CPPFLAGS=$CPPFLAGS
     CPPFLAGS=-I$IMAP_INC_DIR
     cat > conftest.$ac_ext <<EOF
-#line 48711 "configure"
+#line 50100 "configure"
 #include "confdefs.h"
 
 #include "imap4r1.h"
@@ -48826,7 +50215,7 @@ rm -f conftest*
   done
 
   echo $ac_n "checking for pam_start in -lpam""... $ac_c" 1>&6
-echo "configure:48830: checking for pam_start in -lpam" >&5
+echo "configure:50219: checking for pam_start in -lpam" >&5
 ac_lib_var=`echo pam'_'pam_start | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -48834,7 +50223,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lpam  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 48838 "configure"
+#line 50227 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -48845,7 +50234,7 @@ int main() {
 pam_start()
 ; return 0; }
 EOF
-if { (eval echo configure:48849: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:50238: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -49000,7 +50389,7 @@ fi
   done
 
   echo $ac_n "checking for crypt in -lcrypt""... $ac_c" 1>&6
-echo "configure:49004: checking for crypt in -lcrypt" >&5
+echo "configure:50393: checking for crypt in -lcrypt" >&5
 ac_lib_var=`echo crypt'_'crypt | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -49008,7 +50397,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lcrypt  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 49012 "configure"
+#line 50401 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -49019,7 +50408,7 @@ int main() {
 crypt()
 ; return 0; }
 EOF
-if { (eval echo configure:49023: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:50412: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -49223,7 +50612,7 @@ fi
     # Extract the first word of "krb5-config", so it can be a program name with args.
 set dummy krb5-config; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:49227: checking for $ac_word" >&5
+echo "configure:50616: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_KRB5_CONFIG'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -49592,7 +50981,7 @@ else
 
   else
     cat > conftest.$ac_ext <<EOF
-#line 49596 "configure"
+#line 50985 "configure"
 #include "confdefs.h"
 #include <$IMAP_INC_DIR/linkage.h>
 EOF
@@ -49633,7 +51022,7 @@ rm -f conftest*
     # Extract the first word of "pkg-config", so it can be a program name with args.
 set dummy pkg-config; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:49637: checking for $ac_word" >&5
+echo "configure:51026: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -49838,9 +51227,9 @@ fi
     old_CPPFLAGS=$CPPFLAGS
     CPPFLAGS=-I$OPENSSL_INCDIR
     echo $ac_n "checking for OpenSSL version""... $ac_c" 1>&6
-echo "configure:49842: checking for OpenSSL version" >&5
+echo "configure:51231: checking for OpenSSL version" >&5
     cat > conftest.$ac_ext <<EOF
-#line 49844 "configure"
+#line 51233 "configure"
 #include "confdefs.h"
 
 #include <openssl/opensslv.h>
@@ -49995,7 +51384,7 @@ rm -f conftest*
   done
 
   echo $ac_n "checking for CRYPTO_free in -lcrypto""... $ac_c" 1>&6
-echo "configure:49999: checking for CRYPTO_free in -lcrypto" >&5
+echo "configure:51388: checking for CRYPTO_free in -lcrypto" >&5
 ac_lib_var=`echo crypto'_'CRYPTO_free | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -50003,7 +51392,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lcrypto  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 50007 "configure"
+#line 51396 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -50014,7 +51403,7 @@ int main() {
 CRYPTO_free()
 ; return 0; }
 EOF
-if { (eval echo configure:50018: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:51407: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -50171,7 +51560,7 @@ fi
   done
 
   echo $ac_n "checking for SSL_CTX_set_ssl_version in -lssl""... $ac_c" 1>&6
-echo "configure:50175: checking for SSL_CTX_set_ssl_version in -lssl" >&5
+echo "configure:51564: checking for SSL_CTX_set_ssl_version in -lssl" >&5
 ac_lib_var=`echo ssl'_'SSL_CTX_set_ssl_version | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -50179,7 +51568,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lssl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 50183 "configure"
+#line 51572 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -50190,7 +51579,7 @@ int main() {
 SSL_CTX_set_ssl_version()
 ; return 0; }
 EOF
-if { (eval echo configure:50194: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:51583: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -50309,7 +51698,7 @@ else
 
   elif test -f "$IMAP_INC_DIR/linkage.c"; then
     cat > conftest.$ac_ext <<EOF
-#line 50313 "configure"
+#line 51702 "configure"
 #include "confdefs.h"
 #include <$IMAP_INC_DIR/linkage.c>
 EOF
@@ -50340,7 +51729,7 @@ rm -f conftest*
   
 else
   cat > conftest.$ac_ext <<EOF
-#line 50344 "configure"
+#line 51733 "configure"
 #include "confdefs.h"
 
     
@@ -50373,7 +51762,7 @@ else
     }
   
 EOF
-if { (eval echo configure:50377: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:51766: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     LIBS=$old_LIBS
@@ -50409,7 +51798,7 @@ fi
   
 else
   cat > conftest.$ac_ext <<EOF
-#line 50413 "configure"
+#line 51802 "configure"
 #include "confdefs.h"
 
     
@@ -50442,7 +51831,7 @@ else
     }
   
 EOF
-if { (eval echo configure:50446: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:51835: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     LIBS=$old_LIBS
@@ -50469,7 +51858,7 @@ fi
 
 
     echo $ac_n "checking whether rfc822_output_address_list function present""... $ac_c" 1>&6
-echo "configure:50473: checking whether rfc822_output_address_list function present" >&5
+echo "configure:51862: checking whether rfc822_output_address_list function present" >&5
     
   old_LIBS=$LIBS
   LIBS="
@@ -50481,7 +51870,7 @@ echo "configure:50473: checking whether
   
 else
   cat > conftest.$ac_ext <<EOF
-#line 50485 "configure"
+#line 51874 "configure"
 #include "confdefs.h"
 
     
@@ -50517,7 +51906,7 @@ else
     }
   
 EOF
-if { (eval echo configure:50521: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:51910: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     LIBS=$old_LIBS
@@ -50546,7 +51935,7 @@ fi
 
 
     echo $ac_n "checking whether build with IMAP works""... $ac_c" 1>&6
-echo "configure:50550: checking whether build with IMAP works" >&5
+echo "configure:51939: checking whether build with IMAP works" >&5
     
   
   old_LIBS=$LIBS
@@ -50557,7 +51946,7 @@ echo "configure:50550: checking whether
   
 else
   cat > conftest.$ac_ext <<EOF
-#line 50561 "configure"
+#line 51950 "configure"
 #include "confdefs.h"
 
     
@@ -50590,7 +51979,7 @@ else
     }
   
 EOF
-if { (eval echo configure:50594: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:51983: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     LIBS=$old_LIBS
@@ -50622,7 +52011,7 @@ fi
 php_with_interbase=no
 
 echo $ac_n "checking for InterBase support""... $ac_c" 1>&6
-echo "configure:50626: checking for InterBase support" >&5
+echo "configure:52015: checking for InterBase support" >&5
 # Check whether --with-interbase or --without-interbase was given.
 if test "${with_interbase+set}" = set; then
   withval="$with_interbase"
@@ -50769,7 +52158,7 @@ if test "$PHP_INTERBASE" != "no"; then
   done
 
   echo $ac_n "checking for isc_detach_database in -lfbclient""... $ac_c" 1>&6
-echo "configure:50773: checking for isc_detach_database in -lfbclient" >&5
+echo "configure:52162: checking for isc_detach_database in -lfbclient" >&5
 ac_lib_var=`echo fbclient'_'isc_detach_database | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -50777,7 +52166,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lfbclient  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 50781 "configure"
+#line 52170 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -50788,7 +52177,7 @@ int main() {
 isc_detach_database()
 ; return 0; }
 EOF
-if { (eval echo configure:50792: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:52181: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -50915,7 +52304,7 @@ else
   done
 
   echo $ac_n "checking for isc_detach_database in -lgds""... $ac_c" 1>&6
-echo "configure:50919: checking for isc_detach_database in -lgds" >&5
+echo "configure:52308: checking for isc_detach_database in -lgds" >&5
 ac_lib_var=`echo gds'_'isc_detach_database | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -50923,7 +52312,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgds  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 50927 "configure"
+#line 52316 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -50934,7 +52323,7 @@ int main() {
 isc_detach_database()
 ; return 0; }
 EOF
-if { (eval echo configure:50938: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:52327: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -51061,7 +52450,7 @@ else
   done
 
   echo $ac_n "checking for isc_detach_database in -lib_util""... $ac_c" 1>&6
-echo "configure:51065: checking for isc_detach_database in -lib_util" >&5
+echo "configure:52454: checking for isc_detach_database in -lib_util" >&5
 ac_lib_var=`echo ib_util'_'isc_detach_database | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -51069,7 +52458,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lib_util  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 51073 "configure"
+#line 52462 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -51080,7 +52469,7 @@ int main() {
 isc_detach_database()
 ; return 0; }
 EOF
-if { (eval echo configure:51084: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:52473: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -51557,7 +52946,7 @@ fi
 php_enable_intl=no
 
 echo $ac_n "checking whether to enable internationalization support""... $ac_c" 1>&6
-echo "configure:51561: checking whether to enable internationalization support" >&5
+echo "configure:52950: checking whether to enable internationalization support" >&5
 # Check whether --enable-intl or --disable-intl was given.
 if test "${enable_intl+set}" = set; then
   enableval="$enable_intl"
@@ -51629,7 +53018,7 @@ ext_output=$PHP_ICU_DIR
         # Extract the first word of "icu-config", so it can be a program name with args.
 set dummy icu-config; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:51633: checking for $ac_word" >&5
+echo "configure:53022: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_ICU_CONFIG'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -51667,7 +53056,7 @@ fi
   fi
 
   echo $ac_n "checking for location of ICU headers and libraries""... $ac_c" 1>&6
-echo "configure:51671: checking for location of ICU headers and libraries" >&5
+echo "configure:53060: checking for location of ICU headers and libraries" >&5
 
     icu_install_prefix=`$ICU_CONFIG --prefix 2> /dev/null`
   if test "$?" != "0" || test -z "$icu_install_prefix"; then
@@ -51677,7 +53066,7 @@ echo "configure:51671: checking for loca
     echo "$ac_t""$icu_install_prefix" 1>&6
 
         echo $ac_n "checking for ICU 3.4 or greater""... $ac_c" 1>&6
-echo "configure:51681: checking for ICU 3.4 or greater" >&5
+echo "configure:53070: checking for ICU 3.4 or greater" >&5
     icu_version_full=`$ICU_CONFIG --version`
     ac_IFS=$IFS
     IFS="."
@@ -51834,7 +53223,7 @@ do
 # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:51838: checking for $ac_word" >&5
+echo "configure:53227: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CXX'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -51866,7 +53255,7 @@ test -n "$CXX" || CXX="gcc"
 
 
 echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works""... $ac_c" 1>&6
-echo "configure:51870: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works" >&5
+echo "configure:53259: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works" >&5
 
 ac_ext=C
 # CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
@@ -51877,12 +53266,12 @@ cross_compiling=$ac_cv_prog_cxx_cross
 
 cat > conftest.$ac_ext << EOF
 
-#line 51881 "configure"
+#line 53270 "configure"
 #include "confdefs.h"
 
 int main(){return(0);}
 EOF
-if { (eval echo configure:51886: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:53275: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   ac_cv_prog_cxx_works=yes
   # If we can't run a trivial program, we are probably using a cross compiler.
   if (./conftest; exit) 2>/dev/null; then
@@ -51908,12 +53297,12 @@ if test $ac_cv_prog_cxx_works = no; then
   { echo "configure: error: installation or configuration problem: C++ compiler cannot create executables." 1>&2; exit 1; }
 fi
 echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
-echo "configure:51912: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler" >&5
+echo "configure:53301: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler" >&5
 echo "$ac_t""$ac_cv_prog_cxx_cross" 1>&6
 cross_compiling=$ac_cv_prog_cxx_cross
 
 echo $ac_n "checking whether we are using GNU C++""... $ac_c" 1>&6
-echo "configure:51917: checking whether we are using GNU C++" >&5
+echo "configure:53306: checking whether we are using GNU C++" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_gxx'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -51922,7 +53311,7 @@ else
   yes;
 #endif
 EOF
-if { ac_try='${CXX-g++} -E conftest.C'; { (eval echo configure:51926: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
+if { ac_try='${CXX-g++} -E conftest.C'; { (eval echo configure:53315: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
   ac_cv_prog_gxx=yes
 else
   ac_cv_prog_gxx=no
@@ -51941,7 +53330,7 @@ ac_test_CXXFLAGS="${CXXFLAGS+set}"
 ac_save_CXXFLAGS="$CXXFLAGS"
 CXXFLAGS=
 echo $ac_n "checking whether ${CXX-g++} accepts -g""... $ac_c" 1>&6
-echo "configure:51945: checking whether ${CXX-g++} accepts -g" >&5
+echo "configure:53334: checking whether ${CXX-g++} accepts -g" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_cxx_g'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -51972,59 +53361,8 @@ else
   fi
 fi
 
-for ac_declaration in \
-   ''\
-   '#include <stdlib.h>' \
-   'extern "C" void std::exit (int) throw (); using std::exit;' \
-   'extern "C" void std::exit (int); using std::exit;' \
-   'extern "C" void exit (int) throw ();' \
-   'extern "C" void exit (int);' \
-   'void exit (int);'
-do
-  cat > conftest.$ac_ext <<EOF
-#line 51986 "configure"
-#include "confdefs.h"
-#include <stdlib.h>
-$ac_declaration
-int main() {
-exit (42);
-; return 0; }
-EOF
-if { (eval echo configure:51994: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  :
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  continue
-fi
-rm -f conftest*
-  cat > conftest.$ac_ext <<EOF
-#line 52004 "configure"
-#include "confdefs.h"
-$ac_declaration
-int main() {
-exit (42);
-; return 0; }
-EOF
-if { (eval echo configure:52011: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  break
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-fi
-rm -f conftest*
-done
-if test -n "$ac_declaration"; then
-  echo '#ifdef __cplusplus' >>confdefs.h
-  echo $ac_declaration      >>confdefs.h
-  echo '#endif'             >>confdefs.h
-fi
-
-
     echo $ac_n "checking how to run the C++ preprocessor""... $ac_c" 1>&6
-echo "configure:52028: checking how to run the C++ preprocessor" >&5
+echo "configure:53366: checking how to run the C++ preprocessor" >&5
 if test -z "$CXXCPP"; then
 if eval "test \"`echo '$''{'ac_cv_prog_CXXCPP'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -52037,12 +53375,12 @@ ac_link='${CXX-g++} -o conftest${ac_exee
 cross_compiling=$ac_cv_prog_cxx_cross
   CXXCPP="${CXX-g++} -E"
   cat > conftest.$ac_ext <<EOF
-#line 52041 "configure"
+#line 53379 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:52046: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:53384: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -52600,7 +53938,7 @@ fi
 php_enable_json=yes
 
 echo $ac_n "checking whether to enable JavaScript Object Serialization support""... $ac_c" 1>&6
-echo "configure:52604: checking whether to enable JavaScript Object Serialization support" >&5
+echo "configure:53942: checking whether to enable JavaScript Object Serialization support" >&5
 # Check whether --enable-json or --disable-json was given.
 if test "${enable_json+set}" = set; then
   enableval="$enable_json"
@@ -52646,12 +53984,12 @@ if test "$PHP_JSON" != "no"; then
 EOF
 
   echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
-echo "configure:52650: checking for ANSI C header files" >&5
+echo "configure:53988: checking for ANSI C header files" >&5
 if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 52655 "configure"
+#line 53993 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 #include <stdarg.h>
@@ -52659,7 +53997,7 @@ else
 #include <float.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:52663: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:54001: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -52676,7 +54014,7 @@ rm -f conftest*
 if test $ac_cv_header_stdc = yes; then
   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
 cat > conftest.$ac_ext <<EOF
-#line 52680 "configure"
+#line 54018 "configure"
 #include "confdefs.h"
 #include <string.h>
 EOF
@@ -52694,7 +54032,7 @@ fi
 if test $ac_cv_header_stdc = yes; then
   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
 cat > conftest.$ac_ext <<EOF
-#line 52698 "configure"
+#line 54036 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 EOF
@@ -52715,7 +54053,7 @@ if test "$cross_compiling" = yes; then
   :
 else
   cat > conftest.$ac_ext <<EOF
-#line 52719 "configure"
+#line 54057 "configure"
 #include "confdefs.h"
 #include <ctype.h>
 #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
@@ -52726,7 +54064,7 @@ if (XOR (islower (i), ISLOWER (i)) || to
 exit (0); }
 
 EOF
-if { (eval echo configure:52730: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:54068: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   :
 else
@@ -53076,7 +54414,7 @@ fi
 php_with_ldap=no
 
 echo $ac_n "checking for LDAP support""... $ac_c" 1>&6
-echo "configure:53080: checking for LDAP support" >&5
+echo "configure:54418: checking for LDAP support" >&5
 # Check whether --with-ldap or --without-ldap was given.
 if test "${with_ldap+set}" = set; then
   withval="$with_ldap"
@@ -53120,7 +54458,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_with_ldap_sasl=no
 
 echo $ac_n "checking for LDAP Cyrus SASL support""... $ac_c" 1>&6
-echo "configure:53124: checking for LDAP Cyrus SASL support" >&5
+echo "configure:54462: checking for LDAP Cyrus SASL support" >&5
 # Check whether --with-ldap-sasl or --without-ldap-sasl was given.
 if test "${with_ldap_sasl+set}" = set; then
   withval="$with_ldap_sasl"
@@ -55462,19 +56800,19 @@ EOF
   LIBS="$LIBS $LDAP_SHARED_LIBADD"
 
     echo $ac_n "checking for 3 arg ldap_set_rebind_proc""... $ac_c" 1>&6
-echo "configure:55466: checking for 3 arg ldap_set_rebind_proc" >&5
+echo "configure:56804: checking for 3 arg ldap_set_rebind_proc" >&5
 if eval "test \"`echo '$''{'ac_cv_3arg_setrebindproc'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 55471 "configure"
+#line 56809 "configure"
 #include "confdefs.h"
 #include <ldap.h>
 int main() {
 ldap_set_rebind_proc(0,0,0)
 ; return 0; }
 EOF
-if { (eval echo configure:55478: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:56816: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_3arg_setrebindproc=yes
 else
@@ -55497,12 +56835,12 @@ EOF
       for ac_func in ldap_parse_result ldap_parse_reference ldap_start_tls_s
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:55501: checking for $ac_func" >&5
+echo "configure:56839: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 55506 "configure"
+#line 56844 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -55525,7 +56863,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:55529: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:56867: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -55687,7 +57025,7 @@ EOF
   done
 
   echo $ac_n "checking for sasl_version in -lldap""... $ac_c" 1>&6
-echo "configure:55691: checking for sasl_version in -lldap" >&5
+echo "configure:57029: checking for sasl_version in -lldap" >&5
 ac_lib_var=`echo ldap'_'sasl_version | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -55695,7 +57033,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lldap  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 55699 "configure"
+#line 57037 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -55706,7 +57044,7 @@ int main() {
 sasl_version()
 ; return 0; }
 EOF
-if { (eval echo configure:55710: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:57048: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -55875,12 +57213,12 @@ fi
   fi
 
         echo $ac_n "checking for ldap_bind_s""... $ac_c" 1>&6
-echo "configure:55879: checking for ldap_bind_s" >&5
+echo "configure:57217: checking for ldap_bind_s" >&5
 if eval "test \"`echo '$''{'ac_cv_func_ldap_bind_s'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 55884 "configure"
+#line 57222 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char ldap_bind_s(); below.  */
@@ -55903,7 +57241,7 @@ ldap_bind_s();
 
 ; return 0; }
 EOF
-if { (eval echo configure:55907: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:57245: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_ldap_bind_s=yes"
 else
@@ -55932,39 +57270,18 @@ fi
 
 
 
+php_with_libevent=no
 
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-php_enable_mbstring=no
-
-echo $ac_n "checking whether to enable multibyte string support""... $ac_c" 1>&6
-echo "configure:55960: checking whether to enable multibyte string support" >&5
-# Check whether --enable-mbstring or --disable-mbstring was given.
-if test "${enable_mbstring+set}" = set; then
-  enableval="$enable_mbstring"
-  PHP_MBSTRING=$enableval
+echo $ac_n "checking for libevent support""... $ac_c" 1>&6
+echo "configure:57277: checking for libevent support" >&5
+# Check whether --with-libevent or --without-libevent was given.
+if test "${with_libevent+set}" = set; then
+  withval="$with_libevent"
+  PHP_LIBEVENT=$withval
 else
   
-  PHP_MBSTRING=no
-  test "$PHP_ENABLE_ALL" && PHP_MBSTRING=$PHP_ENABLE_ALL
+  PHP_LIBEVENT=no
+  test "$PHP_ENABLE_ALL" && PHP_LIBEVENT=$PHP_ENABLE_ALL
 
 fi
 
@@ -55972,12 +57289,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_MBSTRING in
+case $PHP_LIBEVENT in
 shared,*)
-  PHP_MBSTRING=`echo "$PHP_MBSTRING"|$SED 's/^shared,//'`
+  PHP_LIBEVENT=`echo "$PHP_LIBEVENT"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_MBSTRING=yes
+  PHP_LIBEVENT=yes
   ;;
 no)
   ext_output=no
@@ -55996,2004 +57313,1529 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
+if test "$PHP_LIBEVENT" != "no"; then
+  SEARCH_PATH="/usr /usr/local"
+  SEARCH_FOR="/include/event.h"
+
+  if test "$PHP_LIBEVENT" = "yes"; then
+    echo $ac_n "checking for libevent headers in default path""... $ac_c" 1>&6
+echo "configure:57323: checking for libevent headers in default path" >&5
+    for i in $SEARCH_PATH ; do
+      if test -r $i/$SEARCH_FOR; then
+        LIBEVENT_DIR=$i
+        echo "$ac_t""found in $i" 1>&6
+      fi
+    done
+  else
+    echo $ac_n "checking for libevent headers in $PHP_LIBEVENT""... $ac_c" 1>&6
+echo "configure:57332: checking for libevent headers in $PHP_LIBEVENT" >&5
+    if test -r $PHP_LIBEVENT/$SEARCH_FOR; then
+      LIBEVENT_DIR=$PHP_LIBEVENT
+      echo "$ac_t""found" 1>&6
+    fi
+  fi
 
-php_enable_mbregex=yes
+  if test -z "$LIBEVENT_DIR"; then
+    echo "$ac_t""not found" 1>&6
+    { echo "configure: error: Cannot find libevent headers" 1>&2; exit 1; }
+  fi
 
-echo $ac_n "checking whether to enable multibyte regex support""... $ac_c" 1>&6
-echo "configure:56004: checking whether to enable multibyte regex support" >&5
-# Check whether --enable-mbregex or --disable-mbregex was given.
-if test "${enable_mbregex+set}" = set; then
-  enableval="$enable_mbregex"
-  PHP_MBREGEX=$enableval
-else
-  
-  PHP_MBREGEX=yes
   
+  if test "$LIBEVENT_DIR/include" != "/usr/include"; then
+    
+  if test -z "$LIBEVENT_DIR/include" || echo "$LIBEVENT_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$LIBEVENT_DIR/include
+  else
+    
+    ep_dir="`echo $LIBEVENT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$LIBEVENT_DIR/include\"`"
+  fi
 
-fi
-
-
-ext_output=$PHP_MBREGEX
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-
-php_enable_mbregex_backtrack=yes
-
-echo $ac_n "checking whether to check multibyte regex backtrack""... $ac_c" 1>&6
-echo "configure:56027: checking whether to check multibyte regex backtrack" >&5
-# Check whether --enable-mbregex_backtrack or --disable-mbregex_backtrack was given.
-if test "${enable_mbregex_backtrack+set}" = set; then
-  enableval="$enable_mbregex_backtrack"
-  PHP_MBREGEX_BACKTRACK=$enableval
-else
+    
   
-  PHP_MBREGEX_BACKTRACK=yes
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-fi
-
-
-ext_output=$PHP_MBREGEX_BACKTRACK
-echo "$ac_t""$ext_output" 1>&6
-
-
+  fi
 
 
+  LIBNAME=event
+  LIBSYMBOL=event_base_new
 
-php_with_libmbfl=no
+  if test "x$PHP_LIBDIR" = "x"; then
+    PHP_LIBDIR=lib
+  fi
 
-echo $ac_n "checking for external libmbfl""... $ac_c" 1>&6
-echo "configure:56050: checking for external libmbfl" >&5
-# Check whether --with-libmbfl or --without-libmbfl was given.
-if test "${with_libmbfl+set}" = set; then
-  withval="$with_libmbfl"
-  PHP_LIBMBFL=$withval
-else
   
-  PHP_LIBMBFL=no
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    -L$LIBEVENT_DIR/$PHP_LIBDIR 
+  "
   
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-fi
-
-
-ext_output=$PHP_LIBMBFL
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-
-php_with_onig=no
-
-echo $ac_n "checking for external oniguruma""... $ac_c" 1>&6
-echo "configure:56073: checking for external oniguruma" >&5
-# Check whether --with-onig or --without-onig was given.
-if test "${with_onig+set}" = set; then
-  withval="$with_onig"
-  PHP_ONIG=$withval
-else
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
-  PHP_ONIG=no
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
   
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-fi
 
+    fi
+   ;;
+  esac
 
-ext_output=$PHP_ONIG
-echo "$ac_t""$ext_output" 1>&6
 
-
-
-
-if test "$PHP_MBSTRING" != "no"; then  
-  cat >> confdefs.h <<\EOF
-#define HAVE_MBSTRING 1
-EOF
-
-
-  
-  PHP_MBSTRING_BASE_SOURCES="$PHP_MBSTRING_BASE_SOURCES mbstring.c php_unicode.c mb_gpc.c"
-
-
-  if test "$PHP_MBREGEX" != "no"; then
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
     
-  if test "$PHP_MBREGEX" = "yes"; then
-    if test "$PHP_ONIG" = "yes" || test "$PHP_ONIG" = "no"; then
-                        if test "$PHP_MBREGEX_BACKTRACK" != "no"; then
-        cat >> confdefs.h <<\EOF
-#define USE_COMBINATION_EXPLOSION_CHECK 1
-EOF
-
-      fi
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
 
-      echo $ac_n "checking for variable length prototypes and stdarg.h""... $ac_c" 1>&6
-echo "configure:56114: checking for variable length prototypes and stdarg.h" >&5
-if eval "test \"`echo '$''{'php_cv_mbstring_stdarg'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
-        if test "$cross_compiling" = yes; then
   
-                    case $host_alias in
-          *netware*)
-          php_cv_mbstring_stdarg=yes
-          ;;
-          *)
-          php_cv_mbstring_stdarg=no
-          ;;
-          esac
-        
-else
-  cat > conftest.$ac_ext <<EOF
-#line 56132 "configure"
-#include "confdefs.h"
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-#include <stdarg.h>
-int foo(int x, ...) {
-	va_list va;
-	va_start(va, x);
-	va_arg(va, int);
-	va_arg(va, char *);
-	va_arg(va, double);
-	return 0;
-}
-int main() { return foo(10, "", 3.14); }
-        
-EOF
-if { (eval echo configure:56147: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  php_cv_mbstring_stdarg=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  php_cv_mbstring_stdarg=no
-fi
-rm -fr conftest*
-fi
 
-      
-fi
+      fi
+    
+  fi
 
-echo "$ac_t""$php_cv_mbstring_stdarg" 1>&6
+    ;;
+    esac
+  done
 
-      for ac_hdr in stdlib.h string.h strings.h unistd.h sys/time.h sys/times.h stdarg.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:56168: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "checking for $LIBSYMBOL in -l$LIBNAME""... $ac_c" 1>&6
+echo "configure:57481: checking for $LIBSYMBOL in -l$LIBNAME" >&5
+ac_lib_var=`echo $LIBNAME'_'$LIBSYMBOL | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 56173 "configure"
+  ac_save_LIBS="$LIBS"
+LIBS="-l$LIBNAME  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 57489 "configure"
 #include "confdefs.h"
-#include <$ac_hdr>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $LIBSYMBOL();
+
+int main() {
+$LIBSYMBOL()
+; return 0; }
 EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:56178: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
+if { (eval echo configure:57500: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
-  echo "$ac_err" >&5
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
 rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
+LIBS="$ac_save_LIBS"
 
-      echo $ac_n "checking size of int""... $ac_c" 1>&6
-echo "configure:56205: checking size of int" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  ac_cv_sizeof_int=4
-else
-  cat > conftest.$ac_ext <<EOF
-#line 56213 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-int main()
-{
-  FILE *f=fopen("conftestval", "w");
-  if (!f) return(1);
-  fprintf(f, "%d\n", sizeof(int));
-  return(0);
-}
-EOF
-if { (eval echo configure:56224: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_sizeof_int=`cat conftestval`
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_sizeof_int=0
-fi
-rm -fr conftest*
 fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+    
 
-fi
-echo "$ac_t""$ac_cv_sizeof_int" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_INT $ac_cv_sizeof_int
-EOF
+  if test "$ext_shared" = "yes"; then
+    LIBEVENT_SHARED_LIBADD="-l$LIBNAME $LIBEVENT_SHARED_LIBADD"
+    if test -n "$LIBEVENT_DIR/$PHP_LIBDIR"; then
+      
+  if test "$LIBEVENT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LIBEVENT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$LIBEVENT_DIR/$PHP_LIBDIR" || echo "$LIBEVENT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$LIBEVENT_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $LIBEVENT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$LIBEVENT_DIR/$PHP_LIBDIR\"`"
+  fi
 
+    
+      if test "$ext_shared" = "yes"; then
+        LIBEVENT_SHARED_LIBADD="-L$ai_p $LIBEVENT_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && LIBEVENT_SHARED_LIBADD="$ld_runpath_switch$ai_p $LIBEVENT_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-      echo $ac_n "checking size of short""... $ac_c" 1>&6
-echo "configure:56244: checking size of short" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_short'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  ac_cv_sizeof_short=2
-else
-  cat > conftest.$ac_ext <<EOF
-#line 56252 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-int main()
-{
-  FILE *f=fopen("conftestval", "w");
-  if (!f) return(1);
-  fprintf(f, "%d\n", sizeof(short));
-  return(0);
-}
-EOF
-if { (eval echo configure:56263: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_sizeof_short=`cat conftestval`
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_sizeof_short=0
-fi
-rm -fr conftest*
-fi
 
-fi
-echo "$ac_t""$ac_cv_sizeof_short" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_SHORT $ac_cv_sizeof_short
-EOF
+      fi
+    
+  fi
 
+    fi
+  else
+    
 
-      echo $ac_n "checking size of long""... $ac_c" 1>&6
-echo "configure:56283: checking size of long" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  ac_cv_sizeof_long=4
-else
-  cat > conftest.$ac_ext <<EOF
-#line 56291 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-int main()
-{
-  FILE *f=fopen("conftestval", "w");
-  if (!f) return(1);
-  fprintf(f, "%d\n", sizeof(long));
-  return(0);
-}
-EOF
-if { (eval echo configure:56302: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_sizeof_long=`cat conftestval`
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_sizeof_long=0
-fi
-rm -fr conftest*
-fi
+  if test -n "$LIBEVENT_DIR/$PHP_LIBDIR"; then
+    
+  if test "$LIBEVENT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LIBEVENT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$LIBEVENT_DIR/$PHP_LIBDIR" || echo "$LIBEVENT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$LIBEVENT_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $LIBEVENT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$LIBEVENT_DIR/$PHP_LIBDIR\"`"
+  fi
 
-fi
-echo "$ac_t""$ac_cv_sizeof_long" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_LONG $ac_cv_sizeof_long
-EOF
+    
+      
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
 
-      echo $ac_n "checking for working const""... $ac_c" 1>&6
-echo "configure:56322: checking for working const" >&5
-if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 56327 "configure"
-#include "confdefs.h"
+    
+  fi
 
-int main() {
+  fi
+  
+  
+  case $LIBNAME in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-l$LIBNAME $LIBS" 
+   ;;
+  esac
 
-/* Ultrix mips cc rejects this.  */
-typedef int charset[2]; const charset x;
-/* SunOS 4.1.1 cc rejects this.  */
-char const *const *ccp;
-char **p;
-/* NEC SVR4.0.2 mips cc rejects this.  */
-struct point {int x, y;};
-static struct point const zero = {0,0};
-/* AIX XL C 1.02.0.0 rejects this.
-   It does not let you subtract one const X* pointer from another in an arm
-   of an if-expression whose if-part is not a constant expression */
-const char *g = "string";
-ccp = &g + (g ? g-g : 0);
-/* HPUX 7.0 cc rejects these. */
-++ccp;
-p = (char**) ccp;
-ccp = (char const *const *) p;
-{ /* SCO 3.2v4 cc rejects this.  */
-  char *t;
-  char const *s = 0 ? (char *) 0 : (char const *) 0;
 
-  *t++ = 0;
-}
-{ /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
-  int x[] = {25, 17};
-  const int *foo = &x[0];
-  ++foo;
-}
-{ /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
-  typedef const int *iptr;
-  iptr p = 0;
-  ++p;
-}
-{ /* AIX XL C 1.02.0.0 rejects this saying
-     "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
-  struct s { int j; const int *ap[3]; };
-  struct s *b; b->j = 5;
-}
-{ /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
-  const int foo = 10;
-}
 
-; return 0; }
-EOF
-if { (eval echo configure:56376: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  ac_cv_c_const=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_c_const=no
-fi
-rm -f conftest*
-fi
 
-echo "$ac_t""$ac_cv_c_const" 1>&6
-if test $ac_cv_c_const = no; then
-  cat >> confdefs.h <<\EOF
-#define const 
-EOF
+  fi
 
-fi
 
-      echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
-echo "configure:56397: checking whether time.h and sys/time.h may both be included" >&5
-if eval "test \"`echo '$''{'ac_cv_header_time'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 56402 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <sys/time.h>
-#include <time.h>
-int main() {
-struct tm *tp;
-; return 0; }
-EOF
-if { (eval echo configure:56411: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  ac_cv_header_time=yes
+  
+  
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_header_time=no
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$ac_cv_header_time" 1>&6
-if test $ac_cv_header_time = yes; then
-  cat >> confdefs.h <<\EOF
-#define TIME_WITH_SYS_TIME 1
-EOF
+  echo "$ac_t""no" 1>&6
 
-fi
- 
-      # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
-# for constant arguments.  Useless!
-echo $ac_n "checking for working alloca.h""... $ac_c" 1>&6
-echo "configure:56434: checking for working alloca.h" >&5
-if eval "test \"`echo '$''{'ac_cv_header_alloca_h'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 56439 "configure"
-#include "confdefs.h"
-#include <alloca.h>
-int main() {
-char *p = alloca(2 * sizeof(int));
-; return 0; }
-EOF
-if { (eval echo configure:56446: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  ac_cv_header_alloca_h=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_header_alloca_h=no
-fi
-rm -f conftest*
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_$LIBNAME_$LIBSYMBOL
+    
+    { echo "configure: error: wrong libevent version {1.4.+ is required} or lib not found" 1>&2; exit 1; }
+  
+  
 fi
 
-echo "$ac_t""$ac_cv_header_alloca_h" 1>&6
-if test $ac_cv_header_alloca_h = yes; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_ALLOCA_H 1
-EOF
 
-fi
+  
+  am_i_shared=$PHP_LIBEVENT_SHARED
+  is_it_shared=$PHP_SOCKETS_SHARED
+  is_it_enabled=$PHP_SOCKETS
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension libevent to build statically, but it
+depends on extension sockets, which you've configured to build shared.
+You either need to build libevent shared or build sockets statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension libevent, which depends on extension sockets,
+but you've either not enabled sockets, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST LIBEVENT_SHARED_LIBADD"
 
-echo $ac_n "checking for alloca""... $ac_c" 1>&6
-echo "configure:56467: checking for alloca" >&5
-if eval "test \"`echo '$''{'ac_cv_func_alloca_works'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 56472 "configure"
-#include "confdefs.h"
+  
+  ext_builddir=ext/libevent
+  ext_srcdir=$abs_srcdir/ext/libevent
 
-#ifdef __GNUC__
-# define alloca __builtin_alloca
-#else
-# ifdef _MSC_VER
-#  include <malloc.h>
-#  define alloca _alloca
-# else
-#  if HAVE_ALLOCA_H
-#   include <alloca.h>
-#  else
-#   ifdef _AIX
- #pragma alloca
-#   else
-#    ifndef alloca /* predefined by HP cc +Olibcalls */
-char *alloca ();
-#    endif
-#   endif
-#  endif
-# endif
-#endif
+  ac_extra=
 
-int main() {
-char *p = (char *) alloca(1);
-; return 0; }
-EOF
-if { (eval echo configure:56500: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  ac_cv_func_alloca_works=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_func_alloca_works=no
-fi
-rm -f conftest*
-fi
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_LIBEVENT_SHARED=no
+    
+  
+  case ext/libevent in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/libevent"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/libevent/"; ac_bdir="ext/libevent/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-echo "$ac_t""$ac_cv_func_alloca_works" 1>&6
-if test $ac_cv_func_alloca_works = yes; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_ALLOCA 1
-EOF
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-fi
-
-if test $ac_cv_func_alloca_works = no; then
-  # The SVR3 libPW and SVR4 libucb both contain incompatible functions
-  # that cause trouble.  Some versions do not even contain alloca or
-  # contain a buggy version.  If you still want to use their alloca,
-  # use ar to extract alloca.o from them instead of compiling alloca.c.
-  ALLOCA=alloca.${ac_objext}
-  cat >> confdefs.h <<\EOF
-#define C_ALLOCA 1
-EOF
 
+  old_IFS=$IFS
+  for ac_src in libevent.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-echo $ac_n "checking whether alloca needs Cray hooks""... $ac_c" 1>&6
-echo "configure:56532: checking whether alloca needs Cray hooks" >&5
-if eval "test \"`echo '$''{'ac_cv_os_cray'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 56537 "configure"
-#include "confdefs.h"
-#if defined(CRAY) && ! defined(CRAY2)
-webecray
-#else
-wenotbecray
-#endif
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "webecray" >/dev/null 2>&1; then
-  rm -rf conftest*
-  ac_cv_os_cray=yes
-else
-  rm -rf conftest*
-  ac_cv_os_cray=no
-fi
-rm -f conftest*
+  done
 
-fi
 
-echo "$ac_t""$ac_cv_os_cray" 1>&6
-if test $ac_cv_os_cray = yes; then
-for ac_func in _getb67 GETB67 getb67; do
-  echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:56562: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 56567 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
+    EXT_STATIC="$EXT_STATIC libevent"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC libevent"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_LIBEVENT_SHARED=yes
+      
+  case ext/libevent in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/libevent"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/libevent/"; ac_bdir="ext/libevent/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-int main() {
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
 
-; return 0; }
-EOF
-if { (eval echo configure:56590: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
+  old_IFS=$IFS
+  for ac_src in libevent.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_libevent="$shared_objects_libevent $ac_bdir$ac_obj.lo"
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<EOF
-#define CRAY_STACKSEG_END $ac_func
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
 
-  break
-else
-  echo "$ac_t""no" 1>&6
-fi
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
 
-done
-fi
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phplibevent.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_libevent) $(PHPLIBEVENT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phplibevent.so '$ext_builddir'/phplibevent.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_libevent) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPLIBEVENT, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_libevent) $(PHPLIBEVENT_SHARED_LIBADD)'
+      ;;
+  esac
 
-echo $ac_n "checking stack direction for C alloca""... $ac_c" 1>&6
-echo "configure:56617: checking stack direction for C alloca" >&5
-if eval "test \"`echo '$''{'ac_cv_c_stack_direction'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  ac_cv_c_stack_direction=0
-else
-  cat > conftest.$ac_ext <<EOF
-#line 56625 "configure"
-#include "confdefs.h"
-find_stack_direction ()
-{
-  static char *addr = 0;
-  auto char dummy;
-  if (addr == 0)
-    {
-      addr = &dummy;
-      return find_stack_direction ();
-    }
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phplibevent.$suffix"
   else
-    return (&dummy > addr) ? 1 : -1;
-}
-main ()
-{
-  exit (find_stack_direction() < 0);
-}
-EOF
-if { (eval echo configure:56644: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_c_stack_direction=1
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_c_stack_direction=-1
-fi
-rm -fr conftest*
-fi
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phplibevent.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_libevent"
 
-fi
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phplibevent.$suffix: $ext_builddir/phplibevent.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phplibevent.$suffix \$(phplibdir)
+
+$ext_builddir/phplibevent.$suffix: \$(shared_objects_libevent) \$(PHPLIBEVENT_SHARED_DEPENDENCIES)
+	$link_cmd
 
-echo "$ac_t""$ac_cv_c_stack_direction" 1>&6
-cat >> confdefs.h <<EOF
-#define STACK_DIRECTION $ac_cv_c_stack_direction
 EOF
 
-fi
+          ;;
+        *)
+          
+  install_modules="install-modules"
 
-      echo $ac_n "checking for 8-bit clean memcmp""... $ac_c" 1>&6
-echo "configure:56666: checking for 8-bit clean memcmp" >&5
-if eval "test \"`echo '$''{'ac_cv_func_memcmp_clean'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  ac_cv_func_memcmp_clean=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 56674 "configure"
-#include "confdefs.h"
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/libevent.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_libevent) $(LIBEVENT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/libevent.so '$ext_builddir'/libevent.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_libevent) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(LIBEVENT, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_libevent) $(LIBEVENT_SHARED_LIBADD)'
+      ;;
+  esac
 
-main()
-{
-  char c0 = 0x40, c1 = 0x80, c2 = 0x81;
-  exit(memcmp(&c0, &c2, 1) < 0 && memcmp(&c1, &c2, 1) < 0 ? 0 : 1);
-}
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/libevent.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/libevent.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_libevent"
 
-EOF
-if { (eval echo configure:56684: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_func_memcmp_clean=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_func_memcmp_clean=no
-fi
-rm -fr conftest*
-fi
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/libevent.$suffix: $ext_builddir/libevent.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/libevent.$suffix \$(phplibdir)
 
-fi
+$ext_builddir/libevent.$suffix: \$(shared_objects_libevent) \$(LIBEVENT_SHARED_DEPENDENCIES)
+	$link_cmd
 
-echo "$ac_t""$ac_cv_func_memcmp_clean" 1>&6
-test $ac_cv_func_memcmp_clean = no && LIBOBJS="$LIBOBJS memcmp.${ac_objext}"
+EOF
 
-      ac_safe=`echo "stdarg.h" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for stdarg.h""... $ac_c" 1>&6
-echo "configure:56703: checking for stdarg.h" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 56708 "configure"
-#include "confdefs.h"
-#include <stdarg.h>
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_LIBEVENT 1
 EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:56713: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_LIBEVENT_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
   
-        cat >> confdefs.h <<\EOF
-#define HAVE_STDARG_PROTOTYPES 1
-EOF
+  case ext/libevent in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/libevent"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/libevent/"; ac_bdir="ext/libevent/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
+
+  old_IFS=$IFS
+  for ac_src in libevent.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-else
-  echo "$ac_t""no" 1>&6
-fi
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-      cat >> confdefs.h <<\EOF
-#define PHP_ONIG_BUNDLED 1
-EOF
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-      cat >> confdefs.h <<\EOF
-#define HAVE_ONIG 1
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
- 
-      
-  PHP_MBSTRING_CFLAGS="$PHP_MBSTRING_CFLAGS -DNOT_RUBY"
+  done
 
-      
-  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS oniguruma"
 
-      
-  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS oniguruma/enc"
+        EXT_STATIC="$EXT_STATIC libevent"
+        ;;
+      *)
+        
+  
+  case ext/libevent in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/libevent"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/libevent/"; ac_bdir="ext/libevent/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-      
-  PHP_MBSTRING_EXTRA_INCLUDES="$PHP_MBSTRING_EXTRA_INCLUDES oniguruma"
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-      
-  PHP_MBSTRING_EXTRA_CONFIG_HEADERS="$PHP_MBSTRING_EXTRA_CONFIG_HEADERS oniguruma/config.h"
 
+  old_IFS=$IFS
+  for ac_src in libevent.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-  PHP_MBSTRING_SOURCES="$PHP_MBSTRING_SOURCES 
-        oniguruma/regcomp.c
-        oniguruma/regerror.c
-        oniguruma/regexec.c
-        oniguruma/reggnu.c
-        oniguruma/regparse.c
-        oniguruma/regenc.c
-        oniguruma/regext.c
-        oniguruma/regsyntax.c
-        oniguruma/regtrav.c
-        oniguruma/regversion.c
-        oniguruma/st.c
-        oniguruma/enc/unicode.c
-        oniguruma/enc/ascii.c
-        oniguruma/enc/utf8.c
-        oniguruma/enc/euc_jp.c
-        oniguruma/enc/euc_tw.c
-        oniguruma/enc/euc_kr.c
-        oniguruma/enc/sjis.c
-        oniguruma/enc/iso8859_1.c
-        oniguruma/enc/iso8859_2.c
-        oniguruma/enc/iso8859_3.c
-        oniguruma/enc/iso8859_4.c
-        oniguruma/enc/iso8859_5.c
-        oniguruma/enc/iso8859_6.c
-        oniguruma/enc/iso8859_7.c
-        oniguruma/enc/iso8859_8.c
-        oniguruma/enc/iso8859_9.c
-        oniguruma/enc/iso8859_10.c
-        oniguruma/enc/iso8859_11.c
-        oniguruma/enc/iso8859_13.c
-        oniguruma/enc/iso8859_14.c
-        oniguruma/enc/iso8859_15.c
-        oniguruma/enc/iso8859_16.c
-        oniguruma/enc/koi8.c
-        oniguruma/enc/koi8_r.c
-        oniguruma/enc/big5.c
-        oniguruma/enc/utf16_be.c
-        oniguruma/enc/utf16_le.c
-        oniguruma/enc/utf32_be.c
-        oniguruma/enc/utf32_le.c
-      "
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
-      
-  PHP_MBSTRING_INSTALL_HEADERS="$PHP_MBSTRING_INSTALL_HEADERS oniguruma/oniguruma.h"
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-    else
-                        if test ! -f "$PHP_ONIG/include/oniguruma.h"; then
-        { echo "configure: error: oniguruma.h not found in $PHP_ONIG/include" 1>&2; exit 1; }
-      fi
-      
-  if test "$PHP_ONIG/include" != "/usr/include"; then
-    
-  if test -z "$PHP_ONIG/include" || echo "$PHP_ONIG/include" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_ONIG/include
-  else
-    
-    ep_dir="`echo $PHP_ONIG/include|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_ONIG/include\"`"
-  fi
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
-    
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC libevent"
+  fi
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=libevent
     
-  fi
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
+fi
 
-      
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-        -L$PHP_ONIG/$PHP_LIBDIR
-      "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
 
 
-    fi
-   ;;
-  esac
 
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
 
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
 
 
-      fi
-    
-  fi
 
-    ;;
-    esac
-  done
 
-  echo $ac_n "checking for onig_init in -lonig""... $ac_c" 1>&6
-echo "configure:56943: checking for onig_init in -lonig" >&5
-ac_lib_var=`echo onig'_'onig_init | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lonig  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 56951 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char onig_init();
 
-int main() {
-onig_init()
-; return 0; }
-EOF
-if { (eval echo configure:56962: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-        
 
-  if test "$ext_shared" = "yes"; then
-    MBSTRING_SHARED_LIBADD="-lonig $MBSTRING_SHARED_LIBADD"
-    if test -n "$PHP_ONIG/$PHP_LIBDIR"; then
-      
-  if test "$PHP_ONIG/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ONIG/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$PHP_ONIG/$PHP_LIBDIR" || echo "$PHP_ONIG/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_ONIG/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $PHP_ONIG/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_ONIG/$PHP_LIBDIR\"`"
-  fi
 
-    
-      if test "$ext_shared" = "yes"; then
-        MBSTRING_SHARED_LIBADD="-L$ai_p $MBSTRING_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && MBSTRING_SHARED_LIBADD="$ld_runpath_switch$ai_p $MBSTRING_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
 
 
-      fi
-    
-  fi
 
-    fi
-  else
-    
 
-  if test -n "$PHP_ONIG/$PHP_LIBDIR"; then
-    
-  if test "$PHP_ONIG/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ONIG/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$PHP_ONIG/$PHP_LIBDIR" || echo "$PHP_ONIG/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_ONIG/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $PHP_ONIG/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_ONIG/$PHP_LIBDIR\"`"
-  fi
 
-    
-      
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
 
 
-    
-  fi
 
-  fi
-  
+
+php_enable_mbstring=no
+
+echo $ac_n "checking whether to enable multibyte string support""... $ac_c" 1>&6
+echo "configure:57973: checking whether to enable multibyte string support" >&5
+# Check whether --enable-mbstring or --disable-mbstring was given.
+if test "${enable_mbstring+set}" = set; then
+  enableval="$enable_mbstring"
+  PHP_MBSTRING=$enableval
+else
   
-  case onig in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lonig $LIBS" 
-   ;;
-  esac
+  PHP_MBSTRING=no
+  test "$PHP_ENABLE_ALL" && PHP_MBSTRING=$PHP_ENABLE_ALL
 
+fi
 
 
 
-  fi
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_MBSTRING in
+shared,*)
+  PHP_MBSTRING=`echo "$PHP_MBSTRING"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_MBSTRING=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
 
-        cat >> confdefs.h <<\EOF
-#define HAVE_ONIG 1
-EOF
- 
-      
-  
-else
-  echo "$ac_t""no" 1>&6
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_onig_onig_init
-    
-        { echo "configure: error: Problem with oniguruma. Please check config.log for more information." 1>&2; exit 1; }
-      
-  
-fi
+echo "$ac_t""$ext_output" 1>&6
 
 
-      save_old_LDFLAGS=$LDFLAGS
-      
-  for ac_i in $MBSTRING_SHARED_LIBADD; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
+
+
+php_enable_mbregex=yes
+
+echo $ac_n "checking whether to enable multibyte regex support""... $ac_c" 1>&6
+echo "configure:58017: checking whether to enable multibyte regex support" >&5
+# Check whether --enable-mbregex or --disable-mbregex was given.
+if test "${enable_mbregex+set}" = set; then
+  enableval="$enable_mbregex"
+  PHP_MBREGEX=$enableval
+else
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
+  PHP_MBREGEX=yes
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
 
+fi
 
-    fi
-   ;;
-  esac
 
+ext_output=$PHP_MBREGEX
+echo "$ac_t""$ext_output" 1>&6
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
 
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+
+
+
+php_enable_mbregex_backtrack=yes
+
+echo $ac_n "checking whether to check multibyte regex backtrack""... $ac_c" 1>&6
+echo "configure:58040: checking whether to check multibyte regex backtrack" >&5
+# Check whether --enable-mbregex_backtrack or --disable-mbregex_backtrack was given.
+if test "${enable_mbregex_backtrack+set}" = set; then
+  enableval="$enable_mbregex_backtrack"
+  PHP_MBREGEX_BACKTRACK=$enableval
+else
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  PHP_MBREGEX_BACKTRACK=yes
   
-  fi
 
+fi
 
-      fi
-    
-  fi
 
-    ;;
-    esac
-  done
+ext_output=$PHP_MBREGEX_BACKTRACK
+echo "$ac_t""$ext_output" 1>&6
 
-      echo $ac_n "checking if oniguruma has an invalid entry for KOI8 encoding""... $ac_c" 1>&6
-echo "configure:57188: checking if oniguruma has an invalid entry for KOI8 encoding" >&5
-      cat > conftest.$ac_ext <<EOF
-#line 57190 "configure"
-#include "confdefs.h"
 
-#include <oniguruma.h>
-      
-int main() {
 
-return (int)(ONIG_ENCODING_KOI8 + 1);
-      
-; return 0; }
-EOF
-if { (eval echo configure:57201: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  
-        echo "$ac_t""no" 1>&6
-      
+
+
+php_with_libmbfl=no
+
+echo $ac_n "checking for external libmbfl""... $ac_c" 1>&6
+echo "configure:58063: checking for external libmbfl" >&5
+# Check whether --with-libmbfl or --without-libmbfl was given.
+if test "${with_libmbfl+set}" = set; then
+  withval="$with_libmbfl"
+  PHP_LIBMBFL=$withval
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
   
-        echo "$ac_t""yes" 1>&6
-        cat >> confdefs.h <<\EOF
-#define PHP_ONIG_BAD_KOI8_ENTRY 1
-EOF
+  PHP_LIBMBFL=no
+  
 
-      
 fi
-rm -f conftest*
-      LDFLAGS=$save_old_LDFLAGS
-    fi
-
-    
-  PHP_MBSTRING_CFLAGS="$PHP_MBSTRING_CFLAGS -DONIG_ESCAPE_UCHAR_COLLISION=1"
 
-    
-  PHP_MBSTRING_CFLAGS="$PHP_MBSTRING_CFLAGS -DUChar=OnigUChar"
 
+ext_output=$PHP_LIBMBFL
+echo "$ac_t""$ext_output" 1>&6
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_MBREGEX 1
-EOF
 
 
-    
-  PHP_MBSTRING_BASE_SOURCES="$PHP_MBSTRING_BASE_SOURCES php_mbregex.c"
 
-    
-  PHP_MBSTRING_INSTALL_HEADERS="$PHP_MBSTRING_INSTALL_HEADERS php_mbregex.h php_onig_compat.h"
 
-  fi
+php_with_onig=no
 
-  fi
+echo $ac_n "checking for external oniguruma""... $ac_c" 1>&6
+echo "configure:58086: checking for external oniguruma" >&5
+# Check whether --with-onig or --without-onig was given.
+if test "${with_onig+set}" = set; then
+  withval="$with_onig"
+  PHP_ONIG=$withval
+else
+  
+  PHP_ONIG=no
   
-    
-    if test "$PHP_LIBMBFL" = "yes" || test "$PHP_LIBMBFL" = "no"; then
-                
-  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS libmbfl"
 
-    
-  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS libmbfl/mbfl"
+fi
 
-    
-  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS libmbfl/filters"
 
-    
-  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS libmbfl/nls"
+ext_output=$PHP_ONIG
+echo "$ac_t""$ext_output" 1>&6
 
-    
-  PHP_MBSTRING_EXTRA_INCLUDES="$PHP_MBSTRING_EXTRA_INCLUDES libmbfl"
 
-    
-  PHP_MBSTRING_EXTRA_INCLUDES="$PHP_MBSTRING_EXTRA_INCLUDES libmbfl/mbfl"
 
-    
-  PHP_MBSTRING_EXTRA_CONFIG_HEADERS="$PHP_MBSTRING_EXTRA_CONFIG_HEADERS libmbfl/config.h"
 
+if test "$PHP_MBSTRING" != "no"; then  
+  cat >> confdefs.h <<\EOF
+#define HAVE_MBSTRING 1
+EOF
 
-    
-  PHP_MBSTRING_SOURCES="$PHP_MBSTRING_SOURCES 
-     libmbfl/filters/html_entities.c
-     libmbfl/filters/mbfilter_7bit.c
-     libmbfl/filters/mbfilter_ascii.c
-     libmbfl/filters/mbfilter_base64.c
-     libmbfl/filters/mbfilter_big5.c
-     libmbfl/filters/mbfilter_byte2.c
-     libmbfl/filters/mbfilter_byte4.c
-     libmbfl/filters/mbfilter_cp1251.c
-     libmbfl/filters/mbfilter_cp1252.c
-     libmbfl/filters/mbfilter_cp1254.c
-     libmbfl/filters/mbfilter_cp5022x.c
-     libmbfl/filters/mbfilter_cp51932.c
-     libmbfl/filters/mbfilter_cp850.c
-     libmbfl/filters/mbfilter_cp866.c
-     libmbfl/filters/mbfilter_cp932.c
-     libmbfl/filters/mbfilter_cp936.c
-     libmbfl/filters/mbfilter_euc_cn.c
-     libmbfl/filters/mbfilter_euc_jp.c
-     libmbfl/filters/mbfilter_euc_jp_win.c
-     libmbfl/filters/mbfilter_euc_kr.c
-     libmbfl/filters/mbfilter_euc_tw.c
-     libmbfl/filters/mbfilter_htmlent.c
-     libmbfl/filters/mbfilter_hz.c
-     libmbfl/filters/mbfilter_iso2022_jp_ms.c
-     libmbfl/filters/mbfilter_iso2022_kr.c
-     libmbfl/filters/mbfilter_iso8859_1.c
-     libmbfl/filters/mbfilter_iso8859_10.c
-     libmbfl/filters/mbfilter_iso8859_13.c
-     libmbfl/filters/mbfilter_iso8859_14.c
-     libmbfl/filters/mbfilter_iso8859_15.c
-     libmbfl/filters/mbfilter_iso8859_16.c
-     libmbfl/filters/mbfilter_iso8859_2.c
-     libmbfl/filters/mbfilter_iso8859_3.c
-     libmbfl/filters/mbfilter_iso8859_4.c
-     libmbfl/filters/mbfilter_iso8859_5.c
-     libmbfl/filters/mbfilter_iso8859_6.c
-     libmbfl/filters/mbfilter_iso8859_7.c
-     libmbfl/filters/mbfilter_iso8859_8.c
-     libmbfl/filters/mbfilter_iso8859_9.c
-     libmbfl/filters/mbfilter_jis.c
-     libmbfl/filters/mbfilter_koi8r.c
-     libmbfl/filters/mbfilter_armscii8.c
-     libmbfl/filters/mbfilter_qprint.c
-     libmbfl/filters/mbfilter_sjis.c
-     libmbfl/filters/mbfilter_sjis_open.c
-     libmbfl/filters/mbfilter_tl_jisx0201_jisx0208.c
-     libmbfl/filters/mbfilter_ucs2.c
-     libmbfl/filters/mbfilter_ucs4.c
-     libmbfl/filters/mbfilter_uhc.c
-     libmbfl/filters/mbfilter_utf16.c
-     libmbfl/filters/mbfilter_utf32.c
-     libmbfl/filters/mbfilter_utf7.c
-     libmbfl/filters/mbfilter_utf7imap.c
-     libmbfl/filters/mbfilter_utf8.c
-     libmbfl/filters/mbfilter_uuencode.c
-     libmbfl/filters/mbfilter_koi8u.c
-     libmbfl/mbfl/mbfilter.c
-     libmbfl/mbfl/mbfilter_8bit.c
-     libmbfl/mbfl/mbfilter_pass.c
-     libmbfl/mbfl/mbfilter_wchar.c
-     libmbfl/mbfl/mbfl_convert.c
-     libmbfl/mbfl/mbfl_encoding.c
-     libmbfl/mbfl/mbfl_filter_output.c
-     libmbfl/mbfl/mbfl_ident.c
-     libmbfl/mbfl/mbfl_language.c
-     libmbfl/mbfl/mbfl_memory_device.c
-     libmbfl/mbfl/mbfl_string.c
-     libmbfl/mbfl/mbfl_allocators.c
-     libmbfl/nls/nls_de.c
-     libmbfl/nls/nls_en.c
-     libmbfl/nls/nls_ja.c
-     libmbfl/nls/nls_kr.c
-     libmbfl/nls/nls_neutral.c
-     libmbfl/nls/nls_ru.c
-     libmbfl/nls/nls_uni.c
-     libmbfl/nls/nls_zh.c
-     libmbfl/nls/nls_hy.c
-     libmbfl/nls/nls_tr.c
-     libmbfl/nls/nls_ua.c
-    "
 
-    
-  PHP_MBSTRING_CFLAGS="$PHP_MBSTRING_CFLAGS -DHAVE_CONFIG_H"
+  
+  PHP_MBSTRING_BASE_SOURCES="$PHP_MBSTRING_BASE_SOURCES mbstring.c php_unicode.c mb_gpc.c"
 
+
+  if test "$PHP_MBREGEX" != "no"; then
     
-  PHP_MBSTRING_INSTALL_HEADERS="$PHP_MBSTRING_INSTALL_HEADERS libmbfl/config.h libmbfl/mbfl/eaw_table.h libmbfl/mbfl/mbfilter.h libmbfl/mbfl/mbfilter_8bit.h libmbfl/mbfl/mbfilter_pass.h libmbfl/mbfl/mbfilter_wchar.h libmbfl/mbfl/mbfl_allocators.h libmbfl/mbfl/mbfl_consts.h libmbfl/mbfl/mbfl_convert.h libmbfl/mbfl/mbfl_defs.h libmbfl/mbfl/mbfl_encoding.h libmbfl/mbfl/mbfl_filter_output.h libmbfl/mbfl/mbfl_ident.h libmbfl/mbfl/mbfl_language.h libmbfl/mbfl/mbfl_memory_device.h libmbfl/mbfl/mbfl_string.h"
+  if test "$PHP_MBREGEX" = "yes"; then
+    if test "$PHP_ONIG" = "yes" || test "$PHP_ONIG" = "no"; then
+                        if test "$PHP_MBREGEX_BACKTRACK" != "no"; then
+        cat >> confdefs.h <<\EOF
+#define USE_COMBINATION_EXPLOSION_CHECK 1
+EOF
 
-  else
-                for inc in include include/mbfl-1.0 include/mbfl; do
-      if test -f "$PHP_LIBMBFL/$inc/mbfilter.h"; then
-        PHP_LIBMBFL_INCLUDE="$inc"
-        break
       fi
-    done
-
-    if test -z "$PHP_LIBMBFL_INCLUDE"; then
-      { echo "configure: error: mbfilter.h not found. Please reinstall libmbfl library." 1>&2; exit 1; }
-    else 
-      
-  if test "$PHP_LIBMBFL_INCLUDE" != "/usr/include"; then
-    
-  if test -z "$PHP_LIBMBFL_INCLUDE" || echo "$PHP_LIBMBFL_INCLUDE" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_LIBMBFL_INCLUDE
-  else
-    
-    ep_dir="`echo $PHP_LIBMBFL_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_LIBMBFL_INCLUDE\"`"
-  fi
 
-    
+      echo $ac_n "checking for variable length prototypes and stdarg.h""... $ac_c" 1>&6
+echo "configure:58127: checking for variable length prototypes and stdarg.h" >&5
+if eval "test \"`echo '$''{'php_cv_mbstring_stdarg'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+        if test "$cross_compiling" = yes; then
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
-
-    fi
-
-    
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-      -L$PHP_LIBMBFL/$PHP_LIBDIR
-    "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
+                    case $host_alias in
+          *netware*)
+          php_cv_mbstring_stdarg=yes
+          ;;
+          *)
+          php_cv_mbstring_stdarg=no
+          ;;
+          esac
         
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
+else
+  cat > conftest.$ac_ext <<EOF
+#line 58145 "configure"
+#include "confdefs.h"
 
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
+#include <stdarg.h>
+int foo(int x, ...) {
+	va_list va;
+	va_start(va, x);
+	va_arg(va, int);
+	va_arg(va, char *);
+	va_arg(va, double);
+	return 0;
+}
+int main() { return foo(10, "", 3.14); }
         
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
+EOF
+if { (eval echo configure:58160: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  php_cv_mbstring_stdarg=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  php_cv_mbstring_stdarg=no
+fi
+rm -fr conftest*
+fi
 
-      fi
-    
-  fi
+      
+fi
 
-    ;;
-    esac
-  done
+echo "$ac_t""$php_cv_mbstring_stdarg" 1>&6
 
-  echo $ac_n "checking for mbfl_buffer_converter_new in -lmbfl""... $ac_c" 1>&6
-echo "configure:57499: checking for mbfl_buffer_converter_new in -lmbfl" >&5
-ac_lib_var=`echo mbfl'_'mbfl_buffer_converter_new | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+      for ac_hdr in stdlib.h string.h strings.h unistd.h sys/time.h sys/times.h stdarg.h
+do
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:58181: checking for $ac_hdr" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  ac_save_LIBS="$LIBS"
-LIBS="-lmbfl  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 57507 "configure"
+  cat > conftest.$ac_ext <<EOF
+#line 58186 "configure"
 #include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char mbfl_buffer_converter_new();
-
-int main() {
-mbfl_buffer_converter_new()
-; return 0; }
+#include <$ac_hdr>
 EOF
-if { (eval echo configure:57518: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:58191: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+  eval "ac_cv_header_$ac_safe=yes"
 else
+  echo "$ac_err" >&5
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
+  eval "ac_cv_header_$ac_safe=no"
 fi
 rm -f conftest*
-LIBS="$ac_save_LIBS"
-
 fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-      
-
-  if test "$ext_shared" = "yes"; then
-    MBSTRING_SHARED_LIBADD="-lmbfl $MBSTRING_SHARED_LIBADD"
-    if test -n "$PHP_LIBMBFL/$PHP_LIBDIR"; then
-      
-  if test "$PHP_LIBMBFL/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_LIBMBFL/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$PHP_LIBMBFL/$PHP_LIBDIR" || echo "$PHP_LIBMBFL/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_LIBMBFL/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $PHP_LIBMBFL/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_LIBMBFL/$PHP_LIBDIR\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        MBSTRING_SHARED_LIBADD="-L$ai_p $MBSTRING_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && MBSTRING_SHARED_LIBADD="$ld_runpath_switch$ai_p $MBSTRING_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_hdr 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
 
+      echo $ac_n "checking size of int""... $ac_c" 1>&6
+echo "configure:58218: checking size of int" >&5
+if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_sizeof_int=4
+else
+  cat > conftest.$ac_ext <<EOF
+#line 58226 "configure"
+#include "confdefs.h"
+#include <stdio.h>
+#include <sys/types.h>
+main()
+{
+  FILE *f=fopen("conftestval", "w");
+  if (!f) exit(1);
+  fprintf(f, "%d\n", sizeof(int));
+  exit(0);
+}
+EOF
+if { (eval echo configure:58238: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_sizeof_int=`cat conftestval`
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_sizeof_int=0
+fi
+rm -fr conftest*
+fi
 
-      fi
-    
-  fi
+fi
+echo "$ac_t""$ac_cv_sizeof_int" 1>&6
+cat >> confdefs.h <<EOF
+#define SIZEOF_INT $ac_cv_sizeof_int
+EOF
 
-    fi
-  else
-    
 
-  if test -n "$PHP_LIBMBFL/$PHP_LIBDIR"; then
-    
-  if test "$PHP_LIBMBFL/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_LIBMBFL/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$PHP_LIBMBFL/$PHP_LIBDIR" || echo "$PHP_LIBMBFL/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_LIBMBFL/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $PHP_LIBMBFL/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_LIBMBFL/$PHP_LIBDIR\"`"
-  fi
+      echo $ac_n "checking size of short""... $ac_c" 1>&6
+echo "configure:58258: checking size of short" >&5
+if eval "test \"`echo '$''{'ac_cv_sizeof_short'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_sizeof_short=2
+else
+  cat > conftest.$ac_ext <<EOF
+#line 58266 "configure"
+#include "confdefs.h"
+#include <stdio.h>
+#include <sys/types.h>
+main()
+{
+  FILE *f=fopen("conftestval", "w");
+  if (!f) exit(1);
+  fprintf(f, "%d\n", sizeof(short));
+  exit(0);
+}
+EOF
+if { (eval echo configure:58278: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_sizeof_short=`cat conftestval`
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_sizeof_short=0
+fi
+rm -fr conftest*
+fi
 
-    
-      
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
+fi
+echo "$ac_t""$ac_cv_sizeof_short" 1>&6
+cat >> confdefs.h <<EOF
+#define SIZEOF_SHORT $ac_cv_sizeof_short
+EOF
 
 
-    
-  fi
+      echo $ac_n "checking size of long""... $ac_c" 1>&6
+echo "configure:58298: checking size of long" >&5
+if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_sizeof_long=4
+else
+  cat > conftest.$ac_ext <<EOF
+#line 58306 "configure"
+#include "confdefs.h"
+#include <stdio.h>
+#include <sys/types.h>
+main()
+{
+  FILE *f=fopen("conftestval", "w");
+  if (!f) exit(1);
+  fprintf(f, "%d\n", sizeof(long));
+  exit(0);
+}
+EOF
+if { (eval echo configure:58318: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_sizeof_long=`cat conftestval`
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_sizeof_long=0
+fi
+rm -fr conftest*
+fi
 
-  fi
-  
-  
-  case mbfl in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lmbfl $LIBS" 
-   ;;
-  esac
+fi
+echo "$ac_t""$ac_cv_sizeof_long" 1>&6
+cat >> confdefs.h <<EOF
+#define SIZEOF_LONG $ac_cv_sizeof_long
+EOF
 
 
+      echo $ac_n "checking for working const""... $ac_c" 1>&6
+echo "configure:58338: checking for working const" >&5
+if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 58343 "configure"
+#include "confdefs.h"
 
+int main() {
 
-  fi
+/* Ultrix mips cc rejects this.  */
+typedef int charset[2]; const charset x;
+/* SunOS 4.1.1 cc rejects this.  */
+char const *const *ccp;
+char **p;
+/* NEC SVR4.0.2 mips cc rejects this.  */
+struct point {int x, y;};
+static struct point const zero = {0,0};
+/* AIX XL C 1.02.0.0 rejects this.
+   It does not let you subtract one const X* pointer from another in an arm
+   of an if-expression whose if-part is not a constant expression */
+const char *g = "string";
+ccp = &g + (g ? g-g : 0);
+/* HPUX 7.0 cc rejects these. */
+++ccp;
+p = (char**) ccp;
+ccp = (char const *const *) p;
+{ /* SCO 3.2v4 cc rejects this.  */
+  char *t;
+  char const *s = 0 ? (char *) 0 : (char const *) 0;
 
+  *t++ = 0;
+}
+{ /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
+  int x[] = {25, 17};
+  const int *foo = &x[0];
+  ++foo;
+}
+{ /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
+  typedef const int *iptr;
+  iptr p = 0;
+  ++p;
+}
+{ /* AIX XL C 1.02.0.0 rejects this saying
+     "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
+  struct s { int j; const int *ap[3]; };
+  struct s *b; b->j = 5;
+}
+{ /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
+  const int foo = 10;
+}
 
-    
-  
+; return 0; }
+EOF
+if { (eval echo configure:58392: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
+  ac_cv_c_const=yes
 else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_mbfl_mbfl_buffer_converter_new
-    
-      { echo "configure: error: Problem with libmbfl. Please check config.log for more information." 1>&2; exit 1; }
-    
-  
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  ac_cv_c_const=no
+fi
+rm -f conftest*
 fi
 
-  fi
+echo "$ac_t""$ac_cv_c_const" 1>&6
+if test $ac_cv_c_const = no; then
+  cat >> confdefs.h <<\EOF
+#define const 
+EOF
 
-  
-  
-  ext_builddir=ext/mbstring
-  ext_srcdir=$abs_srcdir/ext/mbstring
+fi
 
-  ac_extra=`echo "$PHP_MBSTRING_CFLAGS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
+      echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
+echo "configure:58413: checking whether time.h and sys/time.h may both be included" >&5
+if eval "test \"`echo '$''{'ac_cv_header_time'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 58418 "configure"
+#include "confdefs.h"
+#include <sys/types.h>
+#include <sys/time.h>
+#include <time.h>
+int main() {
+struct tm *tp;
+; return 0; }
+EOF
+if { (eval echo configure:58427: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
+  ac_cv_header_time=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  ac_cv_header_time=no
+fi
+rm -f conftest*
+fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_MBSTRING_SHARED=no
-    
-  
-  case ext/mbstring in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
+echo "$ac_t""$ac_cv_header_time" 1>&6
+if test $ac_cv_header_time = yes; then
+  cat >> confdefs.h <<\EOF
+#define TIME_WITH_SYS_TIME 1
+EOF
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+fi
+ 
+      # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
+# for constant arguments.  Useless!
+echo $ac_n "checking for working alloca.h""... $ac_c" 1>&6
+echo "configure:58450: checking for working alloca.h" >&5
+if eval "test \"`echo '$''{'ac_cv_header_alloca_h'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 58455 "configure"
+#include "confdefs.h"
+#include <alloca.h>
+int main() {
+char *p = alloca(2 * sizeof(int));
+; return 0; }
+EOF
+if { (eval echo configure:58462: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  ac_cv_header_alloca_h=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  ac_cv_header_alloca_h=no
+fi
+rm -f conftest*
+fi
 
+echo "$ac_t""$ac_cv_header_alloca_h" 1>&6
+if test $ac_cv_header_alloca_h = yes; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_ALLOCA_H 1
+EOF
 
-  old_IFS=$IFS
-  for ac_src in $PHP_MBSTRING_SOURCES; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+fi
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+echo $ac_n "checking for alloca""... $ac_c" 1>&6
+echo "configure:58483: checking for alloca" >&5
+if eval "test \"`echo '$''{'ac_cv_func_alloca_works'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 58488 "configure"
+#include "confdefs.h"
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+#ifdef __GNUC__
+# define alloca __builtin_alloca
+#else
+# ifdef _MSC_VER
+#  include <malloc.h>
+#  define alloca _alloca
+# else
+#  if HAVE_ALLOCA_H
+#   include <alloca.h>
+#  else
+#   ifdef _AIX
+ #pragma alloca
+#   else
+#    ifndef alloca /* predefined by HP cc +Olibcalls */
+char *alloca ();
+#    endif
+#   endif
+#  endif
+# endif
+#endif
 
+int main() {
+char *p = (char *) alloca(1);
+; return 0; }
+EOF
+if { (eval echo configure:58516: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  ac_cv_func_alloca_works=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  ac_cv_func_alloca_works=no
+fi
+rm -f conftest*
+fi
 
-    EXT_STATIC="$EXT_STATIC mbstring"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC mbstring"
-    fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_MBSTRING_SHARED=yes
-      
-  case ext/mbstring in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
+echo "$ac_t""$ac_cv_func_alloca_works" 1>&6
+if test $ac_cv_func_alloca_works = yes; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_ALLOCA 1
+EOF
 
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
+fi
 
+if test $ac_cv_func_alloca_works = no; then
+  # The SVR3 libPW and SVR4 libucb both contain incompatible functions
+  # that cause trouble.  Some versions do not even contain alloca or
+  # contain a buggy version.  If you still want to use their alloca,
+  # use ar to extract alloca.o from them instead of compiling alloca.c.
+  ALLOCA=alloca.${ac_objext}
+  cat >> confdefs.h <<\EOF
+#define C_ALLOCA 1
+EOF
 
-  old_IFS=$IFS
-  for ac_src in $PHP_MBSTRING_SOURCES; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_mbstring="$shared_objects_mbstring $ac_bdir$ac_obj.lo"
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+echo $ac_n "checking whether alloca needs Cray hooks""... $ac_c" 1>&6
+echo "configure:58548: checking whether alloca needs Cray hooks" >&5
+if eval "test \"`echo '$''{'ac_cv_os_cray'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 58553 "configure"
+#include "confdefs.h"
+#if defined(CRAY) && ! defined(CRAY2)
+webecray
+#else
+wenotbecray
+#endif
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
 EOF
-  done
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "webecray" >/dev/null 2>&1; then
+  rm -rf conftest*
+  ac_cv_os_cray=yes
+else
+  rm -rf conftest*
+  ac_cv_os_cray=no
+fi
+rm -f conftest*
 
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
+fi
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpmbstring.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mbstring) $(PHPMBSTRING_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpmbstring.so '$ext_builddir'/phpmbstring.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mbstring) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPMBSTRING, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mbstring) $(PHPMBSTRING_SHARED_LIBADD)'
-      ;;
-  esac
+echo "$ac_t""$ac_cv_os_cray" 1>&6
+if test $ac_cv_os_cray = yes; then
+for ac_func in _getb67 GETB67 getb67; do
+  echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:58578: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 58583 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpmbstring.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpmbstring.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mbstring"
+int main() {
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpmbstring.$suffix: $ext_builddir/phpmbstring.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpmbstring.$suffix \$(phplibdir)
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
 
-$ext_builddir/phpmbstring.$suffix: \$(shared_objects_mbstring) \$(PHPMBSTRING_SHARED_DEPENDENCIES)
-	$link_cmd
+; return 0; }
+EOF
+if { (eval echo configure:58606: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=no"
+fi
+rm -f conftest*
+fi
 
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<EOF
+#define CRAY_STACKSEG_END $ac_func
 EOF
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
+  break
+else
+  echo "$ac_t""no" 1>&6
+fi
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/mbstring.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mbstring) $(MBSTRING_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/mbstring.so '$ext_builddir'/mbstring.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mbstring) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(MBSTRING, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mbstring) $(MBSTRING_SHARED_LIBADD)'
-      ;;
-  esac
+done
+fi
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/mbstring.$suffix"
+echo $ac_n "checking stack direction for C alloca""... $ac_c" 1>&6
+echo "configure:58633: checking stack direction for C alloca" >&5
+if eval "test \"`echo '$''{'ac_cv_c_stack_direction'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_c_stack_direction=0
+else
+  cat > conftest.$ac_ext <<EOF
+#line 58641 "configure"
+#include "confdefs.h"
+find_stack_direction ()
+{
+  static char *addr = 0;
+  auto char dummy;
+  if (addr == 0)
+    {
+      addr = &dummy;
+      return find_stack_direction ();
+    }
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/mbstring.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mbstring"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/mbstring.$suffix: $ext_builddir/mbstring.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/mbstring.$suffix \$(phplibdir)
-
-$ext_builddir/mbstring.$suffix: \$(shared_objects_mbstring) \$(MBSTRING_SHARED_DEPENDENCIES)
-	$link_cmd
-
+    return (&dummy > addr) ? 1 : -1;
+}
+main ()
+{
+  exit (find_stack_direction() < 0);
+}
 EOF
+if { (eval echo configure:58660: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_c_stack_direction=1
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_c_stack_direction=-1
+fi
+rm -fr conftest*
+fi
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_MBSTRING 1
+fi
+
+echo "$ac_t""$ac_cv_c_stack_direction" 1>&6
+cat >> confdefs.h <<EOF
+#define STACK_DIRECTION $ac_cv_c_stack_direction
 EOF
 
-    fi
-  fi
+fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_MBSTRING_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
-  
-  case ext/mbstring in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
+      echo $ac_n "checking for 8-bit clean memcmp""... $ac_c" 1>&6
+echo "configure:58682: checking for 8-bit clean memcmp" >&5
+if eval "test \"`echo '$''{'ac_cv_func_memcmp_clean'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_func_memcmp_clean=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 58690 "configure"
+#include "confdefs.h"
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+main()
+{
+  char c0 = 0x40, c1 = 0x80, c2 = 0x81;
+  exit(memcmp(&c0, &c2, 1) < 0 && memcmp(&c1, &c2, 1) < 0 ? 0 : 1);
+}
 
+EOF
+if { (eval echo configure:58700: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_func_memcmp_clean=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_func_memcmp_clean=no
+fi
+rm -fr conftest*
+fi
 
-  old_IFS=$IFS
-  for ac_src in $PHP_MBSTRING_SOURCES; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+fi
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+echo "$ac_t""$ac_cv_func_memcmp_clean" 1>&6
+test $ac_cv_func_memcmp_clean = no && LIBOBJS="$LIBOBJS memcmp.${ac_objext}"
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+      ac_safe=`echo "stdarg.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for stdarg.h""... $ac_c" 1>&6
+echo "configure:58719: checking for stdarg.h" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 58724 "configure"
+#include "confdefs.h"
+#include <stdarg.h>
 EOF
-  done
-
-
-        EXT_STATIC="$EXT_STATIC mbstring"
-        ;;
-      *)
-        
-  
-  case ext/mbstring in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:58729: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
   
+        cat >> confdefs.h <<\EOF
+#define HAVE_STDARG_PROTOTYPES 1
+EOF
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in $PHP_MBSTRING_SOURCES; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
       
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+else
+  echo "$ac_t""no" 1>&6
+fi
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+      cat >> confdefs.h <<\EOF
+#define PHP_ONIG_BUNDLED 1
 EOF
-  done
 
+      cat >> confdefs.h <<\EOF
+#define HAVE_ONIG 1
+EOF
+ 
+      
+  PHP_MBSTRING_CFLAGS="$PHP_MBSTRING_CFLAGS -DNOT_RUBY"
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC mbstring"
-  fi
-  
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
+      
+  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS oniguruma"
 
+      
+  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS oniguruma/enc"
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=mbstring
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+      
+  PHP_MBSTRING_EXTRA_INCLUDES="$PHP_MBSTRING_EXTRA_INCLUDES oniguruma"
 
-  fi
+      
+  PHP_MBSTRING_EXTRA_CONFIG_HEADERS="$PHP_MBSTRING_EXTRA_CONFIG_HEADERS oniguruma/config.h"
 
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST MBSTRING_SHARED_LIBADD"
+      
+  PHP_MBSTRING_SOURCES="$PHP_MBSTRING_SOURCES 
+        oniguruma/regcomp.c
+        oniguruma/regerror.c
+        oniguruma/regexec.c
+        oniguruma/reggnu.c
+        oniguruma/regparse.c
+        oniguruma/regenc.c
+        oniguruma/regext.c
+        oniguruma/regsyntax.c
+        oniguruma/regtrav.c
+        oniguruma/regversion.c
+        oniguruma/st.c
+        oniguruma/enc/unicode.c
+        oniguruma/enc/ascii.c
+        oniguruma/enc/utf8.c
+        oniguruma/enc/euc_jp.c
+        oniguruma/enc/euc_tw.c
+        oniguruma/enc/euc_kr.c
+        oniguruma/enc/sjis.c
+        oniguruma/enc/iso8859_1.c
+        oniguruma/enc/iso8859_2.c
+        oniguruma/enc/iso8859_3.c
+        oniguruma/enc/iso8859_4.c
+        oniguruma/enc/iso8859_5.c
+        oniguruma/enc/iso8859_6.c
+        oniguruma/enc/iso8859_7.c
+        oniguruma/enc/iso8859_8.c
+        oniguruma/enc/iso8859_9.c
+        oniguruma/enc/iso8859_10.c
+        oniguruma/enc/iso8859_11.c
+        oniguruma/enc/iso8859_13.c
+        oniguruma/enc/iso8859_14.c
+        oniguruma/enc/iso8859_15.c
+        oniguruma/enc/iso8859_16.c
+        oniguruma/enc/koi8.c
+        oniguruma/enc/koi8_r.c
+        oniguruma/enc/big5.c
+        oniguruma/enc/utf16_be.c
+        oniguruma/enc/utf16_le.c
+        oniguruma/enc/utf32_be.c
+        oniguruma/enc/utf32_le.c
+      "
 
+      
+  PHP_MBSTRING_INSTALL_HEADERS="$PHP_MBSTRING_INSTALL_HEADERS oniguruma/oniguruma.h"
 
-  for dir in $PHP_MBSTRING_EXTRA_BUILD_DIRS; do
+    else
+                        if test ! -f "$PHP_ONIG/include/oniguruma.h"; then
+        { echo "configure: error: oniguruma.h not found in $PHP_ONIG/include" 1>&2; exit 1; }
+      fi
+      
+  if test "$PHP_ONIG/include" != "/usr/include"; then
     
-  
-    $php_shtool mkdir -p $ext_builddir/$dir
-  
-
-  done
-  
-  for dir in $PHP_MBSTRING_EXTRA_INCLUDES; do
-    
-  if test "$ext_srcdir/$dir" != "/usr/include"; then
-    
-  if test -z "$ext_srcdir/$dir" || echo "$ext_srcdir/$dir" | grep '^/' >/dev/null ; then
-    ai_p=$ext_srcdir/$dir
-  else
-    
-    ep_dir="`echo $ext_srcdir/$dir|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ext_srcdir/$dir\"`"
-  fi
-
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
-
-    
-  if test "$ext_builddir/$dir" != "/usr/include"; then
-    
-  if test -z "$ext_builddir/$dir" || echo "$ext_builddir/$dir" | grep '^/' >/dev/null ; then
-    ai_p=$ext_builddir/$dir
+  if test -z "$PHP_ONIG/include" || echo "$PHP_ONIG/include" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_ONIG/include
   else
     
-    ep_dir="`echo $ext_builddir/$dir|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $PHP_ONIG/include|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ext_builddir/$dir\"`"
+    ai_p="$ep_realdir/`basename \"$PHP_ONIG/include\"`"
   fi
 
     
@@ -58014,229 +58856,12 @@ EOF
 
   fi
 
-  done
-
-  if test "$ext_shared" = "no"; then
-    
-  
-  case ext/mbstring in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in $PHP_MBSTRING_BASE_SOURCES; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-    out="php_config.h"
-  else
-    
-  case ext/mbstring in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
-
-
-  old_IFS=$IFS
-  for ac_src in $PHP_MBSTRING_BASE_SOURCES; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_mbstring="$shared_objects_mbstring $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-    if test -f "$ext_builddir/config.h.in"; then
-      out="$abs_builddir/config.h"
-    else
-      out="php_config.h"
-    fi
-  fi
-  
-  for cfg in $PHP_MBSTRING_EXTRA_CONFIG_HEADERS; do
-    cat > $ext_builddir/$cfg <<EOF
-#include "$out"
-EOF
-  done
-  
-  PHP_MBSTRING_INSTALL_HEADERS="$PHP_MBSTRING_INSTALL_HEADERS mbstring.h"
 
-  
-  
-    header_path=ext/mbstring
-    for header_file in $PHP_MBSTRING_INSTALL_HEADERS; do
-      hp_hf="$header_path/$header_file"
-      
-  
-  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INSTALLHEADERS$unique=set"
-    
-        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
       
-  fi
-
-    done 
-  
-
-
-fi
-
-# vim600: sts=2 sw=2 et
-
-
-  
-
-
-
-php_with_mcrypt=no
-
-echo $ac_n "checking for mcrypt support""... $ac_c" 1>&6
-echo "configure:58155: checking for mcrypt support" >&5
-# Check whether --with-mcrypt or --without-mcrypt was given.
-if test "${with_mcrypt+set}" = set; then
-  withval="$with_mcrypt"
-  PHP_MCRYPT=$withval
-else
-  
-  PHP_MCRYPT=no
-  test "$PHP_ENABLE_ALL" && PHP_MCRYPT=$PHP_ENABLE_ALL
-
-fi
-
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_MCRYPT in
-shared,*)
-  PHP_MCRYPT=`echo "$PHP_MCRYPT"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_MCRYPT=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test "$PHP_MCRYPT" != "no"; then
-  for i in $PHP_MCRYPT /usr/local /usr; do
-    test -f $i/include/mcrypt.h && MCRYPT_DIR=$i && break
-  done
-
-  if test -z "$MCRYPT_DIR"; then
-    { echo "configure: error: mcrypt.h not found. Please reinstall libmcrypt." 1>&2; exit 1; }
-  fi
-
-  
-  old_CPPFLAGS=$CPPFLAGS
-  CPPFLAGS=-I$MCRYPT_DIR/include
-  echo $ac_n "checking for libmcrypt version""... $ac_c" 1>&6
-echo "configure:58208: checking for libmcrypt version" >&5
-  cat > conftest.$ac_ext <<EOF
-#line 58210 "configure"
-#include "confdefs.h"
-
-#include <mcrypt.h>
-#if MCRYPT_API_VERSION >= 20021217
-  yes
-#endif
-  
-EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "yes" >/dev/null 2>&1; then
-  rm -rf conftest*
-  
-    echo "$ac_t"">= 2.5.6" 1>&6
-  
-else
-  rm -rf conftest*
-  
-    { echo "configure: error: libmcrypt version 2.5.6 or greater required." 1>&2; exit 1; }
-  
-fi
-rm -f conftest*
-
-  CPPFLAGS=$old_CPPFLAGS
-
-
-  
   save_old_LDFLAGS=$LDFLAGS
   ac_stuff="
-    -L$MCRYPT_DIR/$PHP_LIBDIR -lltdl
-  "
+        -L$PHP_ONIG/$PHP_LIBDIR
+      "
   
   save_ext_shared=$ext_shared
   ext_shared=yes
@@ -58329,27 +58954,27 @@ rm -f conftest*
     esac
   done
 
-  echo $ac_n "checking for mcrypt_module_open in -lmcrypt""... $ac_c" 1>&6
-echo "configure:58334: checking for mcrypt_module_open in -lmcrypt" >&5
-ac_lib_var=`echo mcrypt'_'mcrypt_module_open | sed 'y%./+-%__p_%'`
+  echo $ac_n "checking for onig_init in -lonig""... $ac_c" 1>&6
+echo "configure:58959: checking for onig_init in -lonig" >&5
+ac_lib_var=`echo onig'_'onig_init | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lmcrypt  $LIBS"
+LIBS="-lonig  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 58342 "configure"
+#line 58967 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char mcrypt_module_open();
+char onig_init();
 
 int main() {
-mcrypt_module_open()
+onig_init()
 ; return 0; }
 EOF
-if { (eval echo configure:58353: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:58978: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -58368,52 +58993,125 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
     
+        
+
+  if test "$ext_shared" = "yes"; then
+    MBSTRING_SHARED_LIBADD="-lonig $MBSTRING_SHARED_LIBADD"
+    if test -n "$PHP_ONIG/$PHP_LIBDIR"; then
+      
+  if test "$PHP_ONIG/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ONIG/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PHP_ONIG/$PHP_LIBDIR" || echo "$PHP_ONIG/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_ONIG/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $PHP_ONIG/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PHP_ONIG/$PHP_LIBDIR\"`"
+  fi
+
     
+      if test "$ext_shared" = "yes"; then
+        MBSTRING_SHARED_LIBADD="-L$ai_p $MBSTRING_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && MBSTRING_SHARED_LIBADD="$ld_runpath_switch$ai_p $MBSTRING_SHARED_LIBADD"
+      else
+        
   
-  case ltdl in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        MCRYPT_SHARED_LIBADD="-lltdl $MCRYPT_SHARED_LIBADD" 
-    else
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    fi
+  else
+    
+
+  if test -n "$PHP_ONIG/$PHP_LIBDIR"; then
+    
+  if test "$PHP_ONIG/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ONIG/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PHP_ONIG/$PHP_LIBDIR" || echo "$PHP_ONIG/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_ONIG/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $PHP_ONIG/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PHP_ONIG/$PHP_LIBDIR\"`"
+  fi
+
+    
       
   
-  case ltdl in
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+    
+  fi
+
+  fi
+  
+  
+  case onig in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lltdl $LIBS" 
+      LIBS="-lonig $LIBS" 
    ;;
   esac
 
 
-    fi
-   ;;
-  esac
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBMCRYPT 1
-EOF
+  fi
 
-  
+
+        cat >> confdefs.h <<\EOF
+#define HAVE_ONIG 1
+EOF
+ 
+      
   
 else
   echo "$ac_t""no" 1>&6
 
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
-    unset ac_cv_lib_mcrypt_mcrypt_module_open
-    
+    unset ac_cv_lib_onig_onig_init
     
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-      -L$MCRYPT_DIR/$PHP_LIBDIR
-    "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
+        { echo "configure: error: Problem with oniguruma. Please check config.log for more information." 1>&2; exit 1; }
+      
   
-  for ac_i in $ac_stuff; do
+fi
+
+
+      save_old_LDFLAGS=$LDFLAGS
+      
+  for ac_i in $MBSTRING_SHARED_LIBADD; do
     case $ac_i in
     -pthread)
       if test "$ext_shared" = "yes"; then
@@ -58501,131 +59199,294 @@ else
     esac
   done
 
-  echo $ac_n "checking for mcrypt_module_open in -lmcrypt""... $ac_c" 1>&6
-echo "configure:58506: checking for mcrypt_module_open in -lmcrypt" >&5
-ac_lib_var=`echo mcrypt'_'mcrypt_module_open | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lmcrypt  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 58514 "configure"
+      echo $ac_n "checking if oniguruma has an invalid entry for KOI8 encoding""... $ac_c" 1>&6
+echo "configure:59204: checking if oniguruma has an invalid entry for KOI8 encoding" >&5
+      cat > conftest.$ac_ext <<EOF
+#line 59206 "configure"
 #include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char mcrypt_module_open();
 
+#include <oniguruma.h>
+      
 int main() {
-mcrypt_module_open()
+
+return (int)(ONIG_ENCODING_KOI8 + 1);
+      
 ; return 0; }
 EOF
-if { (eval echo configure:58525: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:59217: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+  
+        echo "$ac_t""no" 1>&6
+      
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
   
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-      cat >> confdefs.h <<\EOF
-#define HAVE_LIBMCRYPT 1
+        echo "$ac_t""yes" 1>&6
+        cat >> confdefs.h <<\EOF
+#define PHP_ONIG_BAD_KOI8_ENTRY 1
 EOF
 
-    
-  
-else
-  echo "$ac_t""no" 1>&6
+      
+fi
+rm -f conftest*
+      LDFLAGS=$save_old_LDFLAGS
+    fi
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_mcrypt_mcrypt_module_open
     
-      { echo "configure: error: Sorry, I was not able to diagnose which libmcrypt version you have installed." 1>&2; exit 1; }
+  PHP_MBSTRING_CFLAGS="$PHP_MBSTRING_CFLAGS -DONIG_ESCAPE_UCHAR_COLLISION=1"
+
     
-  
-fi
+  PHP_MBSTRING_CFLAGS="$PHP_MBSTRING_CFLAGS -DUChar=OnigUChar"
 
-  
-  
-fi
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_MBREGEX 1
+EOF
 
-  
 
-  if test "$ext_shared" = "yes"; then
-    MCRYPT_SHARED_LIBADD="-lmcrypt $MCRYPT_SHARED_LIBADD"
-    if test -n "$MCRYPT_DIR/$PHP_LIBDIR"; then
-      
-  if test "$MCRYPT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$MCRYPT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$MCRYPT_DIR/$PHP_LIBDIR" || echo "$MCRYPT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$MCRYPT_DIR/$PHP_LIBDIR
-  else
     
-    ep_dir="`echo $MCRYPT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+  PHP_MBSTRING_BASE_SOURCES="$PHP_MBSTRING_BASE_SOURCES php_mbregex.c"
+
     
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$MCRYPT_DIR/$PHP_LIBDIR\"`"
+  PHP_MBSTRING_INSTALL_HEADERS="$PHP_MBSTRING_INSTALL_HEADERS php_mbregex.h php_onig_compat.h"
+
   fi
 
-    
-      if test "$ext_shared" = "yes"; then
-        MCRYPT_SHARED_LIBADD="-L$ai_p $MCRYPT_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && MCRYPT_SHARED_LIBADD="$ld_runpath_switch$ai_p $MCRYPT_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  fi
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
     
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
+    if test "$PHP_LIBMBFL" = "yes" || test "$PHP_LIBMBFL" = "no"; then
+                
+  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS libmbfl"
 
+    
+  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS libmbfl/mbfl"
 
-      fi
     
-  fi
+  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS libmbfl/filters"
 
-    fi
-  else
     
+  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS libmbfl/nls"
 
-  if test -n "$MCRYPT_DIR/$PHP_LIBDIR"; then
     
-  if test "$MCRYPT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$MCRYPT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  PHP_MBSTRING_EXTRA_INCLUDES="$PHP_MBSTRING_EXTRA_INCLUDES libmbfl"
+
     
-  if test -z "$MCRYPT_DIR/$PHP_LIBDIR" || echo "$MCRYPT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$MCRYPT_DIR/$PHP_LIBDIR
+  PHP_MBSTRING_EXTRA_INCLUDES="$PHP_MBSTRING_EXTRA_INCLUDES libmbfl/mbfl"
+
+    
+  PHP_MBSTRING_EXTRA_CONFIG_HEADERS="$PHP_MBSTRING_EXTRA_CONFIG_HEADERS libmbfl/config.h"
+
+
+    
+  PHP_MBSTRING_SOURCES="$PHP_MBSTRING_SOURCES 
+     libmbfl/filters/html_entities.c
+     libmbfl/filters/mbfilter_7bit.c
+     libmbfl/filters/mbfilter_ascii.c
+     libmbfl/filters/mbfilter_base64.c
+     libmbfl/filters/mbfilter_big5.c
+     libmbfl/filters/mbfilter_byte2.c
+     libmbfl/filters/mbfilter_byte4.c
+     libmbfl/filters/mbfilter_cp1251.c
+     libmbfl/filters/mbfilter_cp1252.c
+     libmbfl/filters/mbfilter_cp1254.c
+     libmbfl/filters/mbfilter_cp5022x.c
+     libmbfl/filters/mbfilter_cp51932.c
+     libmbfl/filters/mbfilter_cp850.c
+     libmbfl/filters/mbfilter_cp866.c
+     libmbfl/filters/mbfilter_cp932.c
+     libmbfl/filters/mbfilter_cp936.c
+     libmbfl/filters/mbfilter_euc_cn.c
+     libmbfl/filters/mbfilter_euc_jp.c
+     libmbfl/filters/mbfilter_euc_jp_win.c
+     libmbfl/filters/mbfilter_euc_kr.c
+     libmbfl/filters/mbfilter_euc_tw.c
+     libmbfl/filters/mbfilter_htmlent.c
+     libmbfl/filters/mbfilter_hz.c
+     libmbfl/filters/mbfilter_iso2022_jp_ms.c
+     libmbfl/filters/mbfilter_iso2022_kr.c
+     libmbfl/filters/mbfilter_iso8859_1.c
+     libmbfl/filters/mbfilter_iso8859_10.c
+     libmbfl/filters/mbfilter_iso8859_13.c
+     libmbfl/filters/mbfilter_iso8859_14.c
+     libmbfl/filters/mbfilter_iso8859_15.c
+     libmbfl/filters/mbfilter_iso8859_16.c
+     libmbfl/filters/mbfilter_iso8859_2.c
+     libmbfl/filters/mbfilter_iso8859_3.c
+     libmbfl/filters/mbfilter_iso8859_4.c
+     libmbfl/filters/mbfilter_iso8859_5.c
+     libmbfl/filters/mbfilter_iso8859_6.c
+     libmbfl/filters/mbfilter_iso8859_7.c
+     libmbfl/filters/mbfilter_iso8859_8.c
+     libmbfl/filters/mbfilter_iso8859_9.c
+     libmbfl/filters/mbfilter_jis.c
+     libmbfl/filters/mbfilter_koi8r.c
+     libmbfl/filters/mbfilter_armscii8.c
+     libmbfl/filters/mbfilter_qprint.c
+     libmbfl/filters/mbfilter_sjis.c
+     libmbfl/filters/mbfilter_sjis_open.c
+     libmbfl/filters/mbfilter_tl_jisx0201_jisx0208.c
+     libmbfl/filters/mbfilter_ucs2.c
+     libmbfl/filters/mbfilter_ucs4.c
+     libmbfl/filters/mbfilter_uhc.c
+     libmbfl/filters/mbfilter_utf16.c
+     libmbfl/filters/mbfilter_utf32.c
+     libmbfl/filters/mbfilter_utf7.c
+     libmbfl/filters/mbfilter_utf7imap.c
+     libmbfl/filters/mbfilter_utf8.c
+     libmbfl/filters/mbfilter_uuencode.c
+     libmbfl/filters/mbfilter_koi8u.c
+     libmbfl/mbfl/mbfilter.c
+     libmbfl/mbfl/mbfilter_8bit.c
+     libmbfl/mbfl/mbfilter_pass.c
+     libmbfl/mbfl/mbfilter_wchar.c
+     libmbfl/mbfl/mbfl_convert.c
+     libmbfl/mbfl/mbfl_encoding.c
+     libmbfl/mbfl/mbfl_filter_output.c
+     libmbfl/mbfl/mbfl_ident.c
+     libmbfl/mbfl/mbfl_language.c
+     libmbfl/mbfl/mbfl_memory_device.c
+     libmbfl/mbfl/mbfl_string.c
+     libmbfl/mbfl/mbfl_allocators.c
+     libmbfl/nls/nls_de.c
+     libmbfl/nls/nls_en.c
+     libmbfl/nls/nls_ja.c
+     libmbfl/nls/nls_kr.c
+     libmbfl/nls/nls_neutral.c
+     libmbfl/nls/nls_ru.c
+     libmbfl/nls/nls_uni.c
+     libmbfl/nls/nls_zh.c
+     libmbfl/nls/nls_hy.c
+     libmbfl/nls/nls_tr.c
+     libmbfl/nls/nls_ua.c
+    "
+
+    
+  PHP_MBSTRING_CFLAGS="$PHP_MBSTRING_CFLAGS -DHAVE_CONFIG_H"
+
+    
+  PHP_MBSTRING_INSTALL_HEADERS="$PHP_MBSTRING_INSTALL_HEADERS libmbfl/config.h libmbfl/mbfl/eaw_table.h libmbfl/mbfl/mbfilter.h libmbfl/mbfl/mbfilter_8bit.h libmbfl/mbfl/mbfilter_pass.h libmbfl/mbfl/mbfilter_wchar.h libmbfl/mbfl/mbfl_allocators.h libmbfl/mbfl/mbfl_consts.h libmbfl/mbfl/mbfl_convert.h libmbfl/mbfl/mbfl_defs.h libmbfl/mbfl/mbfl_encoding.h libmbfl/mbfl/mbfl_filter_output.h libmbfl/mbfl/mbfl_ident.h libmbfl/mbfl/mbfl_language.h libmbfl/mbfl/mbfl_memory_device.h libmbfl/mbfl/mbfl_string.h"
+
   else
+                for inc in include include/mbfl-1.0 include/mbfl; do
+      if test -f "$PHP_LIBMBFL/$inc/mbfilter.h"; then
+        PHP_LIBMBFL_INCLUDE="$inc"
+        break
+      fi
+    done
+
+    if test -z "$PHP_LIBMBFL_INCLUDE"; then
+      { echo "configure: error: mbfilter.h not found. Please reinstall libmbfl library." 1>&2; exit 1; }
+    else 
+      
+  if test "$PHP_LIBMBFL_INCLUDE" != "/usr/include"; then
     
-    ep_dir="`echo $MCRYPT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+  if test -z "$PHP_LIBMBFL_INCLUDE" || echo "$PHP_LIBMBFL_INCLUDE" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_LIBMBFL_INCLUDE
+  else
+    
+    ep_dir="`echo $PHP_LIBMBFL_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$MCRYPT_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$PHP_LIBMBFL_INCLUDE\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
   fi
 
+    fi
+
     
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+      -L$PHP_LIBMBFL/$PHP_LIBDIR
+    "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
       
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
@@ -58641,74 +59502,181 @@ fi
   fi
 
 
+      fi
     
   fi
 
-  fi
-  
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for mbfl_buffer_converter_new in -lmbfl""... $ac_c" 1>&6
+echo "configure:59515: checking for mbfl_buffer_converter_new in -lmbfl" >&5
+ac_lib_var=`echo mbfl'_'mbfl_buffer_converter_new | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lmbfl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 59523 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char mbfl_buffer_converter_new();
+
+int main() {
+mbfl_buffer_converter_new()
+; return 0; }
+EOF
+if { (eval echo configure:59534: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
   
-  case mcrypt in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lmcrypt $LIBS" 
-   ;;
-  esac
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+      
 
+  if test "$ext_shared" = "yes"; then
+    MBSTRING_SHARED_LIBADD="-lmbfl $MBSTRING_SHARED_LIBADD"
+    if test -n "$PHP_LIBMBFL/$PHP_LIBDIR"; then
+      
+  if test "$PHP_LIBMBFL/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_LIBMBFL/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PHP_LIBMBFL/$PHP_LIBDIR" || echo "$PHP_LIBMBFL/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_LIBMBFL/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $PHP_LIBMBFL/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PHP_LIBMBFL/$PHP_LIBDIR\"`"
+  fi
 
+    
+      if test "$ext_shared" = "yes"; then
+        MBSTRING_SHARED_LIBADD="-L$ai_p $MBSTRING_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && MBSTRING_SHARED_LIBADD="$ld_runpath_switch$ai_p $MBSTRING_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
 
+      fi
+    
   fi
 
+    fi
+  else
+    
 
-  
-  if test "$MCRYPT_DIR/include" != "/usr/include"; then
+  if test -n "$PHP_LIBMBFL/$PHP_LIBDIR"; then
     
-  if test -z "$MCRYPT_DIR/include" || echo "$MCRYPT_DIR/include" | grep '^/' >/dev/null ; then
-    ai_p=$MCRYPT_DIR/include
+  if test "$PHP_LIBMBFL/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_LIBMBFL/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PHP_LIBMBFL/$PHP_LIBDIR" || echo "$PHP_LIBMBFL/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_LIBMBFL/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $MCRYPT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $PHP_LIBMBFL/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$MCRYPT_DIR/include\"`"
+    ai_p="$ep_realdir/`basename \"$PHP_LIBMBFL/$PHP_LIBDIR\"`"
   fi
 
     
+      
+  
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
+    eval "LIBPATH$unique=set"
     
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
     
   fi
 
   fi
+  
+  
+  case mbfl in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lmbfl $LIBS" 
+   ;;
+  esac
+
+
+
+
+  fi
 
 
+    
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST MCRYPT_SHARED_LIBADD"
+else
+  echo "$ac_t""no" 1>&6
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_mbfl_mbfl_buffer_converter_new
+    
+      { echo "configure: error: Problem with libmbfl. Please check config.log for more information." 1>&2; exit 1; }
+    
   
-  ext_builddir=ext/mcrypt
-  ext_srcdir=$abs_srcdir/ext/mcrypt
+fi
 
-  ac_extra=
+  fi
+
+  
+  
+  ext_builddir=ext/mbstring
+  ext_srcdir=$abs_srcdir/ext/mbstring
+
+  ac_extra=`echo "$PHP_MBSTRING_CFLAGS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_MCRYPT_SHARED=no
+    PHP_MBSTRING_SHARED=no
     
   
-  case ext/mcrypt in
+  case ext/mbstring in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/mcrypt"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/mcrypt/"; ac_bdir="ext/mcrypt/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -58723,7 +59691,7 @@ fi
 
 
   old_IFS=$IFS
-  for ac_src in mcrypt.c mcrypt_filter.c; do
+  for ac_src in $PHP_MBSTRING_SOURCES; do
   
       IFS=.
       set $ac_src
@@ -58746,18 +59714,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC mcrypt"
+    EXT_STATIC="$EXT_STATIC mbstring"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC mcrypt"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC mbstring"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_MCRYPT_SHARED=yes
+      PHP_MBSTRING_SHARED=yes
       
-  case ext/mcrypt in
+  case ext/mbstring in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/mcrypt"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/mcrypt/"; ac_bdir="ext/mcrypt/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -58772,14 +59740,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in mcrypt.c mcrypt_filter.c; do
+  for ac_src in $PHP_MBSTRING_SOURCES; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_mcrypt="$shared_objects_mcrypt $ac_bdir$ac_obj.lo"
+      shared_objects_mbstring="$shared_objects_mbstring $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -58802,31 +59770,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpmcrypt.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mcrypt) $(PHPMCRYPT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpmcrypt.so '$ext_builddir'/phpmcrypt.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpmbstring.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mbstring) $(PHPMBSTRING_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpmbstring.so '$ext_builddir'/phpmbstring.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mcrypt) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPMCRYPT, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mbstring) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPMBSTRING, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mcrypt) $(PHPMCRYPT_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mbstring) $(PHPMBSTRING_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpmcrypt.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpmbstring.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpmcrypt.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpmbstring.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mcrypt"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mbstring"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpmcrypt.$suffix: $ext_builddir/phpmcrypt.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpmcrypt.$suffix \$(phplibdir)
+\$(phplibdir)/phpmbstring.$suffix: $ext_builddir/phpmbstring.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpmbstring.$suffix \$(phplibdir)
 
-$ext_builddir/phpmcrypt.$suffix: \$(shared_objects_mcrypt) \$(PHPMCRYPT_SHARED_DEPENDENCIES)
+$ext_builddir/phpmbstring.$suffix: \$(shared_objects_mbstring) \$(PHPMBSTRING_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -58839,31 +59807,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/mcrypt.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mcrypt) $(MCRYPT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/mcrypt.so '$ext_builddir'/mcrypt.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/mbstring.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mbstring) $(MBSTRING_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/mbstring.so '$ext_builddir'/mbstring.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mcrypt) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(MCRYPT, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mbstring) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(MBSTRING, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mcrypt) $(MCRYPT_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mbstring) $(MBSTRING_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/mcrypt.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/mbstring.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/mcrypt.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/mbstring.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mcrypt"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mbstring"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/mcrypt.$suffix: $ext_builddir/mcrypt.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/mcrypt.$suffix \$(phplibdir)
+\$(phplibdir)/mbstring.$suffix: $ext_builddir/mbstring.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/mbstring.$suffix \$(phplibdir)
 
-$ext_builddir/mcrypt.$suffix: \$(shared_objects_mcrypt) \$(MCRYPT_SHARED_DEPENDENCIES)
+$ext_builddir/mbstring.$suffix: \$(shared_objects_mbstring) \$(MBSTRING_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -58871,22 +59839,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_MCRYPT 1
+#define COMPILE_DL_MBSTRING 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_MCRYPT_SHARED=no
+    PHP_MBSTRING_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/mcrypt in
+  case ext/mbstring in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/mcrypt"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/mcrypt/"; ac_bdir="ext/mcrypt/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -58901,7 +59869,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in mcrypt.c mcrypt_filter.c; do
+  for ac_src in $PHP_MBSTRING_SOURCES; do
   
       IFS=.
       set $ac_src
@@ -58924,15 +59892,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC mcrypt"
+        EXT_STATIC="$EXT_STATIC mbstring"
         ;;
       *)
         
   
-  case ext/mcrypt in
+  case ext/mbstring in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/mcrypt"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/mcrypt/"; ac_bdir="ext/mcrypt/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -58947,7 +59915,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in mcrypt.c mcrypt_filter.c; do
+  for ac_src in $PHP_MBSTRING_SOURCES; do
   
       IFS=.
       set $ac_src
@@ -58972,7 +59940,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC mcrypt"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC mbstring"
   fi
   
   
@@ -58981,107 +59949,68 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=mcrypt
+    PHP_PECL_EXTENSION=mbstring
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
-fi
-
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST MBSTRING_SHARED_LIBADD"
 
 
-php_with_mssql=no
+  for dir in $PHP_MBSTRING_EXTRA_BUILD_DIRS; do
+    
+  
+    $php_shtool mkdir -p $ext_builddir/$dir
+  
 
-echo $ac_n "checking for MSSQL support via FreeTDS""... $ac_c" 1>&6
-echo "configure:58998: checking for MSSQL support via FreeTDS" >&5
-# Check whether --with-mssql or --without-mssql was given.
-if test "${with_mssql+set}" = set; then
-  withval="$with_mssql"
-  PHP_MSSQL=$withval
-else
+  done
   
-  PHP_MSSQL=no
-  test "$PHP_ENABLE_ALL" && PHP_MSSQL=$PHP_ENABLE_ALL
+  for dir in $PHP_MBSTRING_EXTRA_INCLUDES; do
+    
+  if test "$ext_srcdir/$dir" != "/usr/include"; then
+    
+  if test -z "$ext_srcdir/$dir" || echo "$ext_srcdir/$dir" | grep '^/' >/dev/null ; then
+    ai_p=$ext_srcdir/$dir
+  else
+    
+    ep_dir="`echo $ext_srcdir/$dir|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ext_srcdir/$dir\"`"
+  fi
 
-fi
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
+  fi
 
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_MSSQL in
-shared,*)
-  PHP_MSSQL=`echo "$PHP_MSSQL"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_MSSQL=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test "$PHP_MSSQL" != "no"; then
-
-  if test "$PHP_MSSQL" = "yes"; then
-    for i in /usr/local /usr; do
-      if test -f $i/include/sybdb.h; then
-        FREETDS_INSTALLATION_DIR=$i
-        FREETDS_INCLUDE_DIR=$i/include
-        break
-      elif test -f $i/include/freetds/sybdb.h; then
-        FREETDS_INSTALLATION_DIR=$i
-        FREETDS_INCLUDE_DIR=$i/include/freetds
-        break
-      fi
-    done
-
-    if test -z "$FREETDS_INSTALLATION_DIR"; then
-      { echo "configure: error: Cannot find FreeTDS in known installation directories" 1>&2; exit 1; }
-    fi
-
-  elif test "$PHP_MSSQL" != "no"; then
-
-    if test -f $PHP_MSSQL/include/sybdb.h; then
-      FREETDS_INSTALLATION_DIR=$PHP_MSSQL
-      FREETDS_INCLUDE_DIR=$PHP_MSSQL/include
-    elif test -f $PHP_MSSQL/include/freetds/sybdb.h; then
-      FREETDS_INSTALLATION_DIR=$PHP_MSSQL
-      FREETDS_INCLUDE_DIR=$PHP_MSSQL/include/freetds
-    else
-      { echo "configure: error: Directory $PHP_MSSQL is not a FreeTDS installation directory" 1>&2; exit 1; }
-    fi
-  fi  
-
-  if test ! -r "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR/libsybdb.a" && test ! -r "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR/libsybdb.so"; then
-     { echo "configure: error: Could not find $FREETDS_INSTALLATION_DIR/$PHP_LIBDIR/libsybdb.a|so" 1>&2; exit 1; }
-  fi
-
-  
-  if test "$FREETDS_INCLUDE_DIR" != "/usr/include"; then
-    
-  if test -z "$FREETDS_INCLUDE_DIR" || echo "$FREETDS_INCLUDE_DIR" | grep '^/' >/dev/null ; then
-    ai_p=$FREETDS_INCLUDE_DIR
-  else
-    
-    ep_dir="`echo $FREETDS_INCLUDE_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$FREETDS_INCLUDE_DIR\"`"
-  fi
+    
+  if test "$ext_builddir/$dir" != "/usr/include"; then
+    
+  if test -z "$ext_builddir/$dir" || echo "$ext_builddir/$dir" | grep '^/' >/dev/null ; then
+    ai_p=$ext_builddir/$dir
+  else
+    
+    ep_dir="`echo $ext_builddir/$dir|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ext_builddir/$dir\"`"
+  fi
 
     
   
@@ -59101,118 +60030,15 @@ if test "$PHP_MSSQL" != "no"; then
 
   fi
 
-  
-
-  if test "$ext_shared" = "yes"; then
-    MSSQL_SHARED_LIBADD="-lsybdb $MSSQL_SHARED_LIBADD"
-    if test -n "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR"; then
-      
-  if test "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" || echo "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $FREETDS_INSTALLATION_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        MSSQL_SHARED_LIBADD="-L$ai_p $MSSQL_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && MSSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $MSSQL_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-      fi
-    
-  fi
-
-    fi
-  else
-    
-
-  if test -n "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR"; then
-    
-  if test "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" || echo "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $FREETDS_INSTALLATION_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR\"`"
-  fi
-
-    
-      
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-    
-  fi
-
-  fi
-  
-  
-  case sybdb in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybdb $LIBS" 
-   ;;
-  esac
-
-
-
-
-  fi
-
-
-
-  
-  ext_builddir=ext/mssql
-  ext_srcdir=$abs_srcdir/ext/mssql
-
-  ac_extra=
+  done
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_MSSQL_SHARED=no
+  if test "$ext_shared" = "no"; then
     
   
-  case ext/mssql in
+  case ext/mbstring in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/mssql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/mssql/"; ac_bdir="ext/mssql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -59227,7 +60053,7 @@ if test "$PHP_MSSQL" != "no"; then
 
 
   old_IFS=$IFS
-  for ac_src in php_mssql.c; do
+  for ac_src in $PHP_MBSTRING_BASE_SOURCES; do
   
       IFS=.
       set $ac_src
@@ -59237,10 +60063,10 @@ if test "$PHP_MSSQL" != "no"; then
       PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
       case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
       esac
 
     cat >>Makefile.objects<<EOF
@@ -59250,18 +60076,13 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC mssql"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC mssql"
-    fi
+    out="php_config.h"
   else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_MSSQL_SHARED=yes
-      
-  case ext/mssql in
+    
+  case ext/mbstring in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/mssql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/mssql/"; ac_bdir="ext/mssql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -59276,20 +60097,20 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_mssql.c; do
+  for ac_src in $PHP_MBSTRING_BASE_SOURCES; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_mssql="$shared_objects_mssql $ac_bdir$ac_obj.lo"
+      shared_objects_mbstring="$shared_objects_mbstring $ac_bdir$ac_obj.lo"
 
       case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
       esac
 
     cat >>Makefile.objects<<EOF
@@ -59298,511 +60119,139 @@ $ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
 EOF
   done
 
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpmssql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mssql) $(PHPMSSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpmssql.so '$ext_builddir'/phpmssql.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mssql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPMSSQL, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mssql) $(PHPMSSQL_SHARED_LIBADD)'
-      ;;
-  esac
-
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpmssql.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpmssql.$suffix"
+    if test -f "$ext_builddir/config.h.in"; then
+      out="$abs_builddir/config.h"
+    else
+      out="php_config.h"
+    fi
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mssql"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpmssql.$suffix: $ext_builddir/phpmssql.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpmssql.$suffix \$(phplibdir)
-
-$ext_builddir/phpmssql.$suffix: \$(shared_objects_mssql) \$(PHPMSSQL_SHARED_DEPENDENCIES)
-	$link_cmd
-
+  for cfg in $PHP_MBSTRING_EXTRA_CONFIG_HEADERS; do
+    cat > $ext_builddir/$cfg <<EOF
+#include "$out"
 EOF
+  done
+  
+  PHP_MBSTRING_INSTALL_HEADERS="$PHP_MBSTRING_INSTALL_HEADERS mbstring.h"
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/mssql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mssql) $(MSSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/mssql.so '$ext_builddir'/mssql.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mssql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(MSSQL, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mssql) $(MSSQL_SHARED_LIBADD)'
-      ;;
-  esac
-
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/mssql.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/mssql.$suffix"
-  fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mssql"
+  
+    header_path=ext/mbstring
+    for header_file in $PHP_MBSTRING_INSTALL_HEADERS; do
+      hp_hf="$header_path/$header_file"
+      
+  
+  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INSTALLHEADERS$unique=set"
+    
+        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
+      
+  fi
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/mssql.$suffix: $ext_builddir/mssql.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/mssql.$suffix \$(phplibdir)
+    done 
+  
 
-$ext_builddir/mssql.$suffix: \$(shared_objects_mssql) \$(MSSQL_SHARED_DEPENDENCIES)
-	$link_cmd
 
-EOF
+fi
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_MSSQL 1
-EOF
+# vim600: sts=2 sw=2 et
 
-    fi
-  fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_MSSQL_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
-  
-  case ext/mssql in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/mssql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/mssql/"; ac_bdir="ext/mssql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
   
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
 
 
-  old_IFS=$IFS
-  for ac_src in php_mssql.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+php_with_mcrypt=no
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+echo $ac_n "checking for mcrypt support""... $ac_c" 1>&6
+echo "configure:60171: checking for mcrypt support" >&5
+# Check whether --with-mcrypt or --without-mcrypt was given.
+if test "${with_mcrypt+set}" = set; then
+  withval="$with_mcrypt"
+  PHP_MCRYPT=$withval
+else
+  
+  PHP_MCRYPT=no
+  test "$PHP_ENABLE_ALL" && PHP_MCRYPT=$PHP_ENABLE_ALL
 
+fi
 
-        EXT_STATIC="$EXT_STATIC mssql"
-        ;;
-      *)
-        
-  
-  case ext/mssql in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/mssql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/mssql/"; ac_bdir="ext/mssql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
 
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_MCRYPT in
+shared,*)
+  PHP_MCRYPT=`echo "$PHP_MCRYPT"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_MCRYPT=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
-  old_IFS=$IFS
-  for ac_src in php_mssql.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+echo "$ac_t""$ext_output" 1>&6
 
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC mssql"
-  fi
-  
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
 
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=mssql
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+if test "$PHP_MCRYPT" != "no"; then
+  for i in $PHP_MCRYPT /usr/local /usr; do
+    test -f $i/include/mcrypt.h && MCRYPT_DIR=$i && break
+  done
 
+  if test -z "$MCRYPT_DIR"; then
+    { echo "configure: error: mcrypt.h not found. Please reinstall libmcrypt." 1>&2; exit 1; }
   fi
 
-  echo $ac_n "checking for dnet_addr in -ldnet_stub""... $ac_c" 1>&6
-echo "configure:59496: checking for dnet_addr in -ldnet_stub" >&5
-ac_lib_var=`echo dnet_stub'_'dnet_addr | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-ldnet_stub  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 59504 "configure"
+  
+  old_CPPFLAGS=$CPPFLAGS
+  CPPFLAGS=-I$MCRYPT_DIR/include
+  echo $ac_n "checking for libmcrypt version""... $ac_c" 1>&6
+echo "configure:60224: checking for libmcrypt version" >&5
+  cat > conftest.$ac_ext <<EOF
+#line 60226 "configure"
 #include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char dnet_addr();
 
-int main() {
-dnet_addr()
-; return 0; }
+#include <mcrypt.h>
+#if MCRYPT_API_VERSION >= 20021217
+  yes
+#endif
+  
 EOF
-if { (eval echo configure:59515: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "yes" >/dev/null 2>&1; then
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+  
+    echo "$ac_t"">= 2.5.6" 1>&6
+  
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
+  
+    { echo "configure: error: libmcrypt version 2.5.6 or greater required." 1>&2; exit 1; }
+  
 fi
 rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-   
+  CPPFLAGS=$old_CPPFLAGS
 
-  if test "$ext_shared" = "yes"; then
-    MSSQL_SHARED_LIBADD="-ldnet_stub $MSSQL_SHARED_LIBADD"
-    if test -n ""; then
-      
-  if test "" != "/usr/$PHP_LIBDIR" && test "" != "/usr/lib"; then
-    
-  if test -z "" || echo "" | grep '^/' >/dev/null ; then
-    ai_p=
-  else
-    
-    ep_dir="`echo |$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        MSSQL_SHARED_LIBADD="-L$ai_p $MSSQL_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && MSSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $MSSQL_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-      fi
-    
-  fi
-
-    fi
-  else
-    
-
-  if test -n ""; then
-    
-  if test "" != "/usr/$PHP_LIBDIR" && test "" != "/usr/lib"; then
-    
-  if test -z "" || echo "" | grep '^/' >/dev/null ; then
-    ai_p=
-  else
-    
-    ep_dir="`echo |$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"\"`"
-  fi
-
-    
-      
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-    
-  fi
-
-  fi
-  
-  
-  case dnet_stub in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-ldnet_stub $LIBS" 
-   ;;
-  esac
-
-
-
-
-  fi
-
-
-        cat >> confdefs.h <<\EOF
-#define HAVE_LIBDNET_STUB 1
-EOF
-
-     
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-  cat >> confdefs.h <<\EOF
-#define HAVE_MSSQL 1
-EOF
-
-  cat >> confdefs.h <<\EOF
-#define HAVE_FREETDS 1
-EOF
-
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST MSSQL_SHARED_LIBADD"
-
-fi
-
-
-
-
-
-
-
-
-php_with_mysql=no
-
-echo $ac_n "checking for MySQL support""... $ac_c" 1>&6
-echo "configure:59659: checking for MySQL support" >&5
-# Check whether --with-mysql or --without-mysql was given.
-if test "${with_mysql+set}" = set; then
-  withval="$with_mysql"
-  PHP_MYSQL=$withval
-else
-  
-  PHP_MYSQL=no
-  test "$PHP_ENABLE_ALL" && PHP_MYSQL=$PHP_ENABLE_ALL
-
-fi
-
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_MYSQL in
-shared,*)
-  PHP_MYSQL=`echo "$PHP_MYSQL"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_MYSQL=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-
-php_with_mysql_sock=no
-
-echo $ac_n "checking for specified location of the MySQL UNIX socket""... $ac_c" 1>&6
-echo "configure:59703: checking for specified location of the MySQL UNIX socket" >&5
-# Check whether --with-mysql-sock or --without-mysql-sock was given.
-if test "${with_mysql_sock+set}" = set; then
-  withval="$with_mysql_sock"
-  PHP_MYSQL_SOCK=$withval
-else
-  
-  PHP_MYSQL_SOCK=no
-  
-
-fi
-
-
-ext_output=$PHP_MYSQL_SOCK
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test -z "$PHP_ZLIB_DIR"; then
-  
-php_with_zlib_dir=no
-
-echo $ac_n "checking for the location of libz""... $ac_c" 1>&6
-echo "configure:59727: checking for the location of libz" >&5
-# Check whether --with-zlib-dir or --without-zlib-dir was given.
-if test "${with_zlib_dir+set}" = set; then
-  withval="$with_zlib_dir"
-  PHP_ZLIB_DIR=$withval
-else
-  
-  PHP_ZLIB_DIR=no
-  
-
-fi
-
-
-ext_output=$PHP_ZLIB_DIR
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-fi
-
-if test "$PHP_MYSQL" = "mysqlnd"; then
-    PHP_MYSQLND_ENABLED=yes
-
-elif test "$PHP_MYSQL" != "no"; then
-  MYSQL_DIR=
-  MYSQL_INC_DIR=
-
-  for i in $PHP_MYSQL /usr/local /usr; do
-    if test -r $i/include/mysql/mysql.h; then
-      MYSQL_DIR=$i
-      MYSQL_INC_DIR=$i/include/mysql
-      break
-    elif test -r $i/include/mysql.h; then
-      MYSQL_DIR=$i
-      MYSQL_INC_DIR=$i/include
-      break
-    fi
-  done
-
-  if test -z "$MYSQL_DIR"; then
-    { echo "configure: error: Cannot find MySQL header files under $PHP_MYSQL.
-Note that the MySQL client library is not bundled anymore!" 1>&2; exit 1; }
-  fi
-
-  if test "$enable_maintainer_zts" = "yes"; then
-    MYSQL_LIBNAME=mysqlclient_r
-  else
-    MYSQL_LIBNAME=mysqlclient
-  fi
-  case $host_alias in
-    *netware*)
-      MYSQL_LIBNAME=mysql
-      ;;
-  esac
-
-    if test -z "$PHP_LIBDIR"; then
-    PHP_LIBDIR=lib
-  fi
-
-  for i in $PHP_LIBDIR $PHP_LIBDIR/mysql; do
-    
-  str="$MYSQL_DIR/$i/lib$MYSQL_LIBNAME.*"
-  for j in `echo $str`; do
-    if test -r $j; then
-      MYSQL_LIB_DIR=$MYSQL_DIR/$i
-      break 2
-    fi
-  done
-
-  done
-
-  if test -z "$MYSQL_LIB_DIR"; then
-    { echo "configure: error: Cannot find lib$MYSQL_LIBNAME under $MYSQL_DIR.
-Note that the MySQL client library is not bundled anymore!" 1>&2; exit 1; }
-  fi
 
   
   save_old_LDFLAGS=$LDFLAGS
   ac_stuff="
-    -L$MYSQL_LIB_DIR 
+    -L$MCRYPT_DIR/$PHP_LIBDIR -lltdl
   "
   
   save_ext_shared=$ext_shared
@@ -59896,27 +60345,27 @@ Note that the MySQL client library is no
     esac
   done
 
-  echo $ac_n "checking for mysql_close in -l$MYSQL_LIBNAME""... $ac_c" 1>&6
-echo "configure:59901: checking for mysql_close in -l$MYSQL_LIBNAME" >&5
-ac_lib_var=`echo $MYSQL_LIBNAME'_'mysql_close | sed 'y%./+-%__p_%'`
+  echo $ac_n "checking for mcrypt_module_open in -lmcrypt""... $ac_c" 1>&6
+echo "configure:60350: checking for mcrypt_module_open in -lmcrypt" >&5
+ac_lib_var=`echo mcrypt'_'mcrypt_module_open | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-l$MYSQL_LIBNAME  $LIBS"
+LIBS="-lmcrypt  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 59909 "configure"
+#line 60358 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char mysql_close();
+char mcrypt_module_open();
 
 int main() {
-mysql_close()
+mcrypt_module_open()
 ; return 0; }
 EOF
-if { (eval echo configure:59920: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:60369: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -59934,118 +60383,48 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
   
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
-     
-  
-else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_$MYSQL_LIBNAME_mysql_close
-    
-    if test "$PHP_ZLIB_DIR" != "no"; then
-      
-
-  if test "$ext_shared" = "yes"; then
-    MYSQL_SHARED_LIBADD="-lz $MYSQL_SHARED_LIBADD"
-    if test -n "$PHP_ZLIB_DIR"; then
-      
-  if test "$PHP_ZLIB_DIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR" != "/usr/lib"; then
-    
-  if test -z "$PHP_ZLIB_DIR" || echo "$PHP_ZLIB_DIR" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_ZLIB_DIR
-  else
-    
-    ep_dir="`echo $PHP_ZLIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR\"`"
-  fi
-
     
-      if test "$ext_shared" = "yes"; then
-        MYSQL_SHARED_LIBADD="-L$ai_p $MYSQL_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && MYSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $MYSQL_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
     
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  fi
-
-
-      fi
-    
-  fi
-
-    fi
-  else
-    
-
-  if test -n "$PHP_ZLIB_DIR"; then
-    
-  if test "$PHP_ZLIB_DIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR" != "/usr/lib"; then
-    
-  if test -z "$PHP_ZLIB_DIR" || echo "$PHP_ZLIB_DIR" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_ZLIB_DIR
-  else
-    
-    ep_dir="`echo $PHP_ZLIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR\"`"
-  fi
-
-    
+  case ltdl in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        MCRYPT_SHARED_LIBADD="-lltdl $MCRYPT_SHARED_LIBADD" 
+    else
       
   
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-    
-  fi
-
-  fi
-  
-  
-  case z in
+  case ltdl in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lz $LIBS" 
+      LIBS="-lltdl $LIBS" 
    ;;
   esac
 
 
+    fi
+   ;;
+  esac
 
 
-  fi
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBMCRYPT 1
+EOF
 
+  
+  
+else
+  echo "$ac_t""no" 1>&6
 
-      
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_mcrypt_mcrypt_module_open
+    
+    
   save_old_LDFLAGS=$LDFLAGS
   ac_stuff="
-        -L$PHP_ZLIB_DIR/$PHP_LIBDIR -L$MYSQL_LIB_DIR 
-      "
+      -L$MCRYPT_DIR/$PHP_LIBDIR
+    "
   
   save_ext_shared=$ext_shared
   ext_shared=yes
@@ -60138,27 +60517,27 @@ else
     esac
   done
 
-  echo $ac_n "checking for mysql_error in -l$MYSQL_LIBNAME""... $ac_c" 1>&6
-echo "configure:60143: checking for mysql_error in -l$MYSQL_LIBNAME" >&5
-ac_lib_var=`echo $MYSQL_LIBNAME'_'mysql_error | sed 'y%./+-%__p_%'`
+  echo $ac_n "checking for mcrypt_module_open in -lmcrypt""... $ac_c" 1>&6
+echo "configure:60522: checking for mcrypt_module_open in -lmcrypt" >&5
+ac_lib_var=`echo mcrypt'_'mcrypt_module_open | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-l$MYSQL_LIBNAME  $LIBS"
+LIBS="-lmcrypt  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 60151 "configure"
+#line 60530 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char mysql_error();
+char mcrypt_module_open();
 
 int main() {
-mysql_error()
+mcrypt_module_open()
 ; return 0; }
 EOF
-if { (eval echo configure:60162: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:60541: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -60177,116 +60556,51 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
     
+      cat >> confdefs.h <<\EOF
+#define HAVE_LIBMCRYPT 1
+EOF
+
+    
   
 else
   echo "$ac_t""no" 1>&6
 
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
-    unset ac_cv_lib_$MYSQL_LIBNAME_mysql_error
+    unset ac_cv_lib_mcrypt_mcrypt_module_open
+    
+      { echo "configure: error: Sorry, I was not able to diagnose which libmcrypt version you have installed." 1>&2; exit 1; }
     
-        { echo "configure: error: mysql configure failed. Please check config.log for more information." 1>&2; exit 1; }
-      
   
 fi
-  
-      MYSQL_LIBS="-L$PHP_ZLIB_DIR/$PHP_LIBDIR -lz"
-    else
-      
-  
-  case z in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        MYSQL_SHARED_LIBADD="-lz $MYSQL_SHARED_LIBADD" 
-    else
-      
-  
-  case z in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lz $LIBS" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-      
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-        -L$MYSQL_LIB_DIR
-      "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
+fi
 
-    fi
-   ;;
-  esac
 
+  
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
+  if test "$ext_shared" = "yes"; then
+    MCRYPT_SHARED_LIBADD="-lmcrypt $MCRYPT_SHARED_LIBADD"
+    if test -n "$MCRYPT_DIR/$PHP_LIBDIR"; then
       
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+  if test "$MCRYPT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$MCRYPT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+  if test -z "$MCRYPT_DIR/$PHP_LIBDIR" || echo "$MCRYPT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$MCRYPT_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $MCRYPT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    ai_p="$ep_realdir/`basename \"$MCRYPT_DIR/$PHP_LIBDIR\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+        MCRYPT_SHARED_LIBADD="-L$ai_p $MCRYPT_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && MCRYPT_SHARED_LIBADD="$ld_runpath_switch$ai_p $MCRYPT_SHARED_LIBADD"
       else
         
   
@@ -60308,128 +60622,22 @@ fi
     
   fi
 
-    ;;
-    esac
-  done
+    fi
+  else
+    
 
-  echo $ac_n "checking for mysql_errno in -l$MYSQL_LIBNAME""... $ac_c" 1>&6
-echo "configure:60317: checking for mysql_errno in -l$MYSQL_LIBNAME" >&5
-ac_lib_var=`echo $MYSQL_LIBNAME'_'mysql_errno | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-l$MYSQL_LIBNAME  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 60325 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char mysql_errno();
-
-int main() {
-mysql_errno()
-; return 0; }
-EOF
-if { (eval echo configure:60336: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-  
-else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_$MYSQL_LIBNAME_mysql_errno
-    
-        { echo "configure: error: Try adding --with-zlib-dir=<DIR>. Please check config.log for more information." 1>&2; exit 1; }
-      
-  
-fi
-   
-      MYSQL_LIBS="-lz"
-    fi
-  
-  
-fi
-
-
-  
-
-  if test "$ext_shared" = "yes"; then
-    MYSQL_SHARED_LIBADD="-l$MYSQL_LIBNAME $MYSQL_SHARED_LIBADD"
-    if test -n "$MYSQL_LIB_DIR"; then
-      
-  if test "$MYSQL_LIB_DIR" != "/usr/$PHP_LIBDIR" && test "$MYSQL_LIB_DIR" != "/usr/lib"; then
-    
-  if test -z "$MYSQL_LIB_DIR" || echo "$MYSQL_LIB_DIR" | grep '^/' >/dev/null ; then
-    ai_p=$MYSQL_LIB_DIR
-  else
-    
-    ep_dir="`echo $MYSQL_LIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$MYSQL_LIB_DIR\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        MYSQL_SHARED_LIBADD="-L$ai_p $MYSQL_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && MYSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $MYSQL_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-      fi
-    
-  fi
-
-    fi
-  else
-    
-
-  if test -n "$MYSQL_LIB_DIR"; then
+  if test -n "$MCRYPT_DIR/$PHP_LIBDIR"; then
     
-  if test "$MYSQL_LIB_DIR" != "/usr/$PHP_LIBDIR" && test "$MYSQL_LIB_DIR" != "/usr/lib"; then
+  if test "$MCRYPT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$MCRYPT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$MYSQL_LIB_DIR" || echo "$MYSQL_LIB_DIR" | grep '^/' >/dev/null ; then
-    ai_p=$MYSQL_LIB_DIR
+  if test -z "$MCRYPT_DIR/$PHP_LIBDIR" || echo "$MCRYPT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$MCRYPT_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $MYSQL_LIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $MCRYPT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$MYSQL_LIB_DIR\"`"
+    ai_p="$ep_realdir/`basename \"$MCRYPT_DIR/$PHP_LIBDIR\"`"
   fi
 
     
@@ -60455,10 +60663,10 @@ fi
   fi
   
   
-  case $MYSQL_LIBNAME in
+  case mcrypt in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-l$MYSQL_LIBNAME $LIBS" 
+      LIBS="-lmcrypt $LIBS" 
    ;;
   esac
 
@@ -60469,16 +60677,16 @@ fi
 
 
   
-  if test "$MYSQL_INC_DIR" != "/usr/include"; then
+  if test "$MCRYPT_DIR/include" != "/usr/include"; then
     
-  if test -z "$MYSQL_INC_DIR" || echo "$MYSQL_INC_DIR" | grep '^/' >/dev/null ; then
-    ai_p=$MYSQL_INC_DIR
+  if test -z "$MCRYPT_DIR/include" || echo "$MCRYPT_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$MCRYPT_DIR/include
   else
     
-    ep_dir="`echo $MYSQL_INC_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $MCRYPT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$MYSQL_INC_DIR\"`"
+    ai_p="$ep_realdir/`basename \"$MCRYPT_DIR/include\"`"
   fi
 
     
@@ -60500,91 +60708,23 @@ fi
   fi
 
 
-  MYSQL_MODULE_TYPE=external
-  MYSQL_LIBS="-L$MYSQL_LIB_DIR -l$MYSQL_LIBNAME $MYSQL_LIBS"
-  MYSQL_INCLUDE=-I$MYSQL_INC_DIR
- 
-  
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQL_MODULE_TYPE"
-
-  
-
-  
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQL_LIBS"
-
-  
-
-  
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQL_INCLUDE"
-
   
-
-fi
-
-if test "$PHP_MYSQL" != "no"; then
-  echo $ac_n "checking for MySQL UNIX socket location""... $ac_c" 1>&6
-echo "configure:60530: checking for MySQL UNIX socket location" >&5
-  if test "$PHP_MYSQL_SOCK" != "no" && test "$PHP_MYSQL_SOCK" != "yes"; then
-    MYSQL_SOCK=$PHP_MYSQL_SOCK
-    cat >> confdefs.h <<EOF
-#define PHP_MYSQL_UNIX_SOCK_ADDR "$MYSQL_SOCK"
-EOF
-
-    echo "$ac_t""$MYSQL_SOCK" 1>&6
-  elif test "$PHP_MYSQL" = "yes" || test "$PHP_MYSQL_SOCK" = "yes"; then
-    
-  for i in  \
-    /var/run/mysqld/mysqld.sock \
-    /var/tmp/mysql.sock \
-    /var/run/mysql/mysql.sock \
-    /var/lib/mysql/mysql.sock \
-    /var/mysql/mysql.sock \
-    /usr/local/mysql/var/mysql.sock \
-    /Private/tmp/mysql.sock \
-    /private/tmp/mysql.sock \
-    /tmp/mysql.sock \
-  ; do
-    if test -r $i; then
-      MYSQL_SOCK=$i
-      break 2
-    fi
-  done
-
-  if test -n "$MYSQL_SOCK"; then
-    cat >> confdefs.h <<EOF
-#define PHP_MYSQL_UNIX_SOCK_ADDR "$MYSQL_SOCK"
-EOF
-
-    echo "$ac_t""$MYSQL_SOCK" 1>&6
-  else
-    echo "$ac_t""no" 1>&6
-  fi
-
-  else
-    echo "$ac_t""no" 1>&6
-  fi
-
-  cat >> confdefs.h <<\EOF
-#define HAVE_MYSQL 1
-EOF
+  PHP_VAR_SUBST="$PHP_VAR_SUBST MCRYPT_SHARED_LIBADD"
 
   
-  ext_builddir=ext/mysql
-  ext_srcdir=$abs_srcdir/ext/mysql
+  ext_builddir=ext/mcrypt
+  ext_srcdir=$abs_srcdir/ext/mcrypt
 
   ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_MYSQL_SHARED=no
+    PHP_MCRYPT_SHARED=no
     
   
-  case ext/mysql in
+  case ext/mcrypt in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/mysql/"; ac_bdir="ext/mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/mcrypt"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/mcrypt/"; ac_bdir="ext/mcrypt/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -60599,7 +60739,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_mysql.c; do
+  for ac_src in mcrypt.c mcrypt_filter.c; do
   
       IFS=.
       set $ac_src
@@ -60622,18 +60762,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC mysql"
+    EXT_STATIC="$EXT_STATIC mcrypt"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC mysql"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC mcrypt"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_MYSQL_SHARED=yes
+      PHP_MCRYPT_SHARED=yes
       
-  case ext/mysql in
+  case ext/mcrypt in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/mysql/"; ac_bdir="ext/mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/mcrypt"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/mcrypt/"; ac_bdir="ext/mcrypt/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -60648,14 +60788,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_mysql.c; do
+  for ac_src in mcrypt.c mcrypt_filter.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_mysql="$shared_objects_mysql $ac_bdir$ac_obj.lo"
+      shared_objects_mcrypt="$shared_objects_mcrypt $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -60678,31 +60818,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpmysql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysql) $(PHPMYSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpmysql.so '$ext_builddir'/phpmysql.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpmcrypt.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mcrypt) $(PHPMCRYPT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpmcrypt.so '$ext_builddir'/phpmcrypt.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPMYSQL, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mcrypt) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPMCRYPT, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysql) $(PHPMYSQL_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mcrypt) $(PHPMCRYPT_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpmysql.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpmcrypt.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpmysql.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpmcrypt.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mysql"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mcrypt"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpmysql.$suffix: $ext_builddir/phpmysql.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpmysql.$suffix \$(phplibdir)
+\$(phplibdir)/phpmcrypt.$suffix: $ext_builddir/phpmcrypt.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpmcrypt.$suffix \$(phplibdir)
 
-$ext_builddir/phpmysql.$suffix: \$(shared_objects_mysql) \$(PHPMYSQL_SHARED_DEPENDENCIES)
+$ext_builddir/phpmcrypt.$suffix: \$(shared_objects_mcrypt) \$(PHPMCRYPT_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -60715,31 +60855,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/mysql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysql) $(MYSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/mysql.so '$ext_builddir'/mysql.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/mcrypt.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mcrypt) $(MCRYPT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/mcrypt.so '$ext_builddir'/mcrypt.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(MYSQL, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mcrypt) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(MCRYPT, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysql) $(MYSQL_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mcrypt) $(MCRYPT_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/mysql.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/mcrypt.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/mysql.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/mcrypt.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mysql"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mcrypt"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/mysql.$suffix: $ext_builddir/mysql.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/mysql.$suffix \$(phplibdir)
+\$(phplibdir)/mcrypt.$suffix: $ext_builddir/mcrypt.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/mcrypt.$suffix \$(phplibdir)
 
-$ext_builddir/mysql.$suffix: \$(shared_objects_mysql) \$(MYSQL_SHARED_DEPENDENCIES)
+$ext_builddir/mcrypt.$suffix: \$(shared_objects_mcrypt) \$(MCRYPT_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -60747,22 +60887,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_MYSQL 1
+#define COMPILE_DL_MCRYPT 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_MYSQL_SHARED=no
+    PHP_MCRYPT_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/mysql in
+  case ext/mcrypt in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/mysql/"; ac_bdir="ext/mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/mcrypt"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/mcrypt/"; ac_bdir="ext/mcrypt/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -60777,7 +60917,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_mysql.c; do
+  for ac_src in mcrypt.c mcrypt_filter.c; do
   
       IFS=.
       set $ac_src
@@ -60800,15 +60940,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC mysql"
+        EXT_STATIC="$EXT_STATIC mcrypt"
         ;;
       *)
         
   
-  case ext/mysql in
+  case ext/mcrypt in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/mysql/"; ac_bdir="ext/mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/mcrypt"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/mcrypt/"; ac_bdir="ext/mcrypt/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -60823,7 +60963,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_mysql.c; do
+  for ac_src in mcrypt.c mcrypt_filter.c; do
   
       IFS=.
       set $ac_src
@@ -60848,7 +60988,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC mysql"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC mcrypt"
   fi
   
   
@@ -60857,57 +60997,28 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=mysql
+    PHP_PECL_EXTENSION=mcrypt
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQL_SHARED_LIBADD"
-
-
-  if test "$PHP_MYSQL" = "mysqlnd"; then
-    
-  am_i_shared=$PHP_MYSQL_SHARED
-  is_it_shared=$PHP_MYSQLND_SHARED
-  is_it_enabled=$PHP_MYSQLND
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension mysql to build statically, but it
-depends on extension mysqlnd, which you've configured to build shared.
-You either need to build mysql shared or build mysqlnd statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension mysql, which depends on extension mysqlnd,
-but you've either not enabled mysqlnd, or have disabled it.
-" 1>&2; exit 1; }
-  fi
-  
-    cat >> confdefs.h <<\EOF
-#define MYSQL_USE_MYSQLND 1
-EOF
-
-  fi
 fi
 
 
 
-php_with_mysqli=no
+php_with_mssql=no
 
-echo $ac_n "checking for MySQLi support""... $ac_c" 1>&6
-echo "configure:60903: checking for MySQLi support" >&5
-# Check whether --with-mysqli or --without-mysqli was given.
-if test "${with_mysqli+set}" = set; then
-  withval="$with_mysqli"
-  PHP_MYSQLI=$withval
+echo $ac_n "checking for MSSQL support via FreeTDS""... $ac_c" 1>&6
+echo "configure:61014: checking for MSSQL support via FreeTDS" >&5
+# Check whether --with-mssql or --without-mssql was given.
+if test "${with_mssql+set}" = set; then
+  withval="$with_mssql"
+  PHP_MSSQL=$withval
 else
   
-  PHP_MYSQLI=no
-  test "$PHP_ENABLE_ALL" && PHP_MYSQLI=$PHP_ENABLE_ALL
+  PHP_MSSQL=no
+  test "$PHP_ENABLE_ALL" && PHP_MSSQL=$PHP_ENABLE_ALL
 
 fi
 
@@ -60915,12 +61026,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_MYSQLI in
+case $PHP_MSSQL in
 shared,*)
-  PHP_MYSQLI=`echo "$PHP_MYSQLI"|$SED 's/^shared,//'`
+  PHP_MSSQL=`echo "$PHP_MSSQL"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_MYSQLI=yes
+  PHP_MSSQL=yes
   ;;
 no)
   ext_output=no
@@ -60939,135 +61050,95 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
+if test "$PHP_MSSQL" != "no"; then
 
-php_enable_embedded_mysqli=no
-
-echo $ac_n "checking whether to enable embedded MySQLi support""... $ac_c" 1>&6
-echo "configure:60947: checking whether to enable embedded MySQLi support" >&5
-# Check whether --enable-embedded_mysqli or --disable-embedded_mysqli was given.
-if test "${enable_embedded_mysqli+set}" = set; then
-  enableval="$enable_embedded_mysqli"
-  PHP_EMBEDDED_MYSQLI=$enableval
-else
-  
-  PHP_EMBEDDED_MYSQLI=no
-  
-
-fi
-
-
-ext_output=$PHP_EMBEDDED_MYSQLI
-echo "$ac_t""$ext_output" 1>&6
-
-
+  if test "$PHP_MSSQL" = "yes"; then
+    for i in /usr/local /usr; do
+      if test -f $i/include/sybdb.h; then
+        FREETDS_INSTALLATION_DIR=$i
+        FREETDS_INCLUDE_DIR=$i/include
+        break
+      elif test -f $i/include/freetds/sybdb.h; then
+        FREETDS_INSTALLATION_DIR=$i
+        FREETDS_INCLUDE_DIR=$i/include/freetds
+        break
+      fi
+    done
 
+    if test -z "$FREETDS_INSTALLATION_DIR"; then
+      { echo "configure: error: Cannot find FreeTDS in known installation directories" 1>&2; exit 1; }
+    fi
 
-if test "$PHP_MYSQLI" = "mysqlnd"; then
-    PHP_MYSQLND_ENABLED=yes
+  elif test "$PHP_MSSQL" != "no"; then
 
-elif test "$PHP_MYSQLI" != "no"; then
+    if test -f $PHP_MSSQL/include/sybdb.h; then
+      FREETDS_INSTALLATION_DIR=$PHP_MSSQL
+      FREETDS_INCLUDE_DIR=$PHP_MSSQL/include
+    elif test -f $PHP_MSSQL/include/freetds/sybdb.h; then
+      FREETDS_INSTALLATION_DIR=$PHP_MSSQL
+      FREETDS_INCLUDE_DIR=$PHP_MSSQL/include/freetds
+    else
+      { echo "configure: error: Directory $PHP_MSSQL is not a FreeTDS installation directory" 1>&2; exit 1; }
+    fi
+  fi  
 
-  if test "$PHP_MYSQLI" = "yes"; then
-    MYSQL_CONFIG=`$php_shtool path mysql_config`
-  else
-    MYSQL_CONFIG=$PHP_MYSQLI
+  if test ! -r "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR/libsybdb.a" && test ! -r "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR/libsybdb.so"; then
+     { echo "configure: error: Could not find $FREETDS_INSTALLATION_DIR/$PHP_LIBDIR/libsybdb.a|so" 1>&2; exit 1; }
   fi
 
-  MYSQL_LIB_NAME='mysqlclient'
-  if test "$PHP_EMBEDDED_MYSQLI" = "yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_EMBEDDED_MYSQLI 1
-EOF
-
-    MYSQL_LIB_CFG='--libmysqld-libs'
-        mysqli_extra_sources="mysqli_embedded.c"
-  elif test "$enable_maintainer_zts" = "yes"; then
-    MYSQL_LIB_CFG='--libs_r'
-    MYSQL_LIB_NAME='mysqlclient_r'
-  else
-    MYSQL_LIB_CFG='--libs'
-  fi
   
-  if test -x "$MYSQL_CONFIG" && $MYSQL_CONFIG $MYSQL_LIB_CFG > /dev/null 2>&1; then
-    MYSQLI_INCLINE=`$MYSQL_CONFIG --cflags | $SED -e "s/'//g"`
-    MYSQLI_LIBLINE=`$MYSQL_CONFIG $MYSQL_LIB_CFG | $SED -e "s/'//g"`
+  if test "$FREETDS_INCLUDE_DIR" != "/usr/include"; then
+    
+  if test -z "$FREETDS_INCLUDE_DIR" || echo "$FREETDS_INCLUDE_DIR" | grep '^/' >/dev/null ; then
+    ai_p=$FREETDS_INCLUDE_DIR
   else
-    echo "$ac_t""mysql_config not found" 1>&6
-    { echo "configure: error: Please reinstall the mysql distribution" 1>&2; exit 1; }
+    
+    ep_dir="`echo $FREETDS_INCLUDE_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$FREETDS_INCLUDE_DIR\"`"
   fi
 
-        
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-    $MYSQLI_LIBLINE
-  "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
+    
   
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
       fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
+    
+  fi
 
-    fi
-   ;;
-  esac
+  fi
 
+  
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
+  if test "$ext_shared" = "yes"; then
+    MSSQL_SHARED_LIBADD="-lsybdb $MSSQL_SHARED_LIBADD"
+    if test -n "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR"; then
       
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+  if test "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+  if test -z "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" || echo "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $FREETDS_INSTALLATION_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    ai_p="$ep_realdir/`basename \"$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+        MSSQL_SHARED_LIBADD="-L$ai_p $MSSQL_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && MSSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $MSSQL_SHARED_LIBADD"
       else
         
   
@@ -61089,254 +61160,26 @@ EOF
     
   fi
 
-    ;;
-    esac
-  done
-
-  echo $ac_n "checking for mysql_set_server_option in -l$MYSQL_LIB_NAME""... $ac_c" 1>&6
-echo "configure:61098: checking for mysql_set_server_option in -l$MYSQL_LIB_NAME" >&5
-ac_lib_var=`echo $MYSQL_LIB_NAME'_'mysql_set_server_option | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-l$MYSQL_LIB_NAME  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 61106 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char mysql_set_server_option();
-
-int main() {
-mysql_set_server_option()
-; return 0; }
-EOF
-if { (eval echo configure:61117: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-    
-  for ac_i in $MYSQLI_INCLINE; do
-    case $ac_i in
-    -I*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/include"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
-
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
-
-    ;;
-    esac
-  done
+    fi
+  else
+    
 
+  if test -n "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR"; then
     
-  for ac_i in $MYSQLI_LIBLINE; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        MYSQLI_SHARED_LIBADD="$MYSQLI_SHARED_LIBADD -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        MYSQLI_SHARED_LIBADD="$MYSQLI_SHARED_LIBADD -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+  if test "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+  if test -z "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" || echo "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $FREETDS_INSTALLATION_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        MYSQLI_SHARED_LIBADD="-L$ai_p $MYSQLI_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && MYSQLI_SHARED_LIBADD="$ld_runpath_switch$ai_p $MYSQLI_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-      fi
-    
+    ai_p="$ep_realdir/`basename \"$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR\"`"
   fi
 
-    ;;
-    esac
-  done
-
-    cat >> confdefs.h <<\EOF
-#define HAVE_MYSQLILIB 1
-EOF
-
     
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="$MYSQLI_LIBLINE"
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
       
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
   
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
@@ -61352,253 +61195,40 @@ EOF
   fi
 
 
-      fi
     
   fi
 
-    ;;
-    esac
-  done
-
-  echo $ac_n "checking for mysql_set_character_set in -l$MYSQL_LIB_NAME""... $ac_c" 1>&6
-echo "configure:61365: checking for mysql_set_character_set in -l$MYSQL_LIB_NAME" >&5
-ac_lib_var=`echo $MYSQL_LIB_NAME'_'mysql_set_character_set | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-l$MYSQL_LIB_NAME  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 61373 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char mysql_set_character_set();
-
-int main() {
-mysql_set_character_set()
-; return 0; }
-EOF
-if { (eval echo configure:61384: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-     
-  
-else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_$MYSQL_LIB_NAME_mysql_set_character_set
-    
-      { echo "configure: error: MySQLI doesn't support versions < 4.1.13 (for MySQL 4.1.x) and < 5.0.7 for (MySQL 5.0.x) anymore. Please update your libraries." 1>&2; exit 1; }
-    
-  
-fi
-
-  
-  
-else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_$MYSQL_LIB_NAME_mysql_set_server_option
-    
-    { echo "configure: error: wrong mysql library version or lib not found. Check config.log for more information." 1>&2; exit 1; }
-  
-  
-fi
-
-        
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-    $MYSQLI_LIBLINE
-  "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
   fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
   
-  case $ac_ii in
+  case sybdb in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
+      LIBS="-lsybdb $LIBS" 
    ;;
   esac
 
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
 
 
-      fi
-    
   fi
 
-    ;;
-    esac
-  done
-
-  echo $ac_n "checking for mysql_stmt_next_result in -l$MYSQL_LIB_NAME""... $ac_c" 1>&6
-echo "configure:61528: checking for mysql_stmt_next_result in -l$MYSQL_LIB_NAME" >&5
-ac_lib_var=`echo $MYSQL_LIB_NAME'_'mysql_stmt_next_result | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-l$MYSQL_LIB_NAME  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 61536 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char mysql_stmt_next_result();
-
-int main() {
-mysql_stmt_next_result()
-; return 0; }
-EOF
-if { (eval echo configure:61547: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-    cat >> confdefs.h <<\EOF
-#define HAVE_STMT_NEXT_RESULT 1
-EOF
-
-  
-  
-else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_$MYSQL_LIB_NAME_mysql_stmt_next_result
-    
-  
-  
-fi
 
-fi
 
-if test "$PHP_MYSQLI" != "no"; then
-  mysqli_sources="mysqli.c mysqli_api.c mysqli_prop.c mysqli_nonapi.c \
-                  mysqli_fe.c mysqli_report.c mysqli_driver.c mysqli_warning.c \
-                  mysqli_exception.c $mysqli_extra_sources"
   
-  ext_builddir=ext/mysqli
-  ext_srcdir=$abs_srcdir/ext/mysqli
+  ext_builddir=ext/mssql
+  ext_srcdir=$abs_srcdir/ext/mssql
 
   ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_MYSQLI_SHARED=no
+    PHP_MSSQL_SHARED=no
     
   
-  case ext/mysqli in
+  case ext/mssql in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/mysqli"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/mysqli/"; ac_bdir="ext/mysqli/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/mssql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/mssql/"; ac_bdir="ext/mssql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -61613,7 +61243,7 @@ if test "$PHP_MYSQLI" != "no"; then
 
 
   old_IFS=$IFS
-  for ac_src in $mysqli_sources; do
+  for ac_src in php_mssql.c; do
   
       IFS=.
       set $ac_src
@@ -61636,18 +61266,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC mysqli"
+    EXT_STATIC="$EXT_STATIC mssql"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC mysqli"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC mssql"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_MYSQLI_SHARED=yes
+      PHP_MSSQL_SHARED=yes
       
-  case ext/mysqli in
+  case ext/mssql in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/mysqli"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/mysqli/"; ac_bdir="ext/mysqli/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/mssql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/mssql/"; ac_bdir="ext/mssql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -61662,14 +61292,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in $mysqli_sources; do
+  for ac_src in php_mssql.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_mysqli="$shared_objects_mysqli $ac_bdir$ac_obj.lo"
+      shared_objects_mssql="$shared_objects_mssql $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -61692,31 +61322,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpmysqli.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqli) $(PHPMYSQLI_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpmysqli.so '$ext_builddir'/phpmysqli.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpmssql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mssql) $(PHPMSSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpmssql.so '$ext_builddir'/phpmssql.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqli) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPMYSQLI, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mssql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPMSSQL, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqli) $(PHPMYSQLI_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mssql) $(PHPMSSQL_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpmysqli.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpmssql.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpmysqli.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpmssql.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mysqli"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mssql"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpmysqli.$suffix: $ext_builddir/phpmysqli.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpmysqli.$suffix \$(phplibdir)
+\$(phplibdir)/phpmssql.$suffix: $ext_builddir/phpmssql.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpmssql.$suffix \$(phplibdir)
 
-$ext_builddir/phpmysqli.$suffix: \$(shared_objects_mysqli) \$(PHPMYSQLI_SHARED_DEPENDENCIES)
+$ext_builddir/phpmssql.$suffix: \$(shared_objects_mssql) \$(PHPMSSQL_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -61729,31 +61359,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/mysqli.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqli) $(MYSQLI_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/mysqli.so '$ext_builddir'/mysqli.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/mssql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mssql) $(MSSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/mssql.so '$ext_builddir'/mssql.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqli) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(MYSQLI, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mssql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(MSSQL, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqli) $(MYSQLI_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mssql) $(MSSQL_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/mysqli.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/mssql.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/mysqli.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/mssql.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mysqli"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mssql"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/mysqli.$suffix: $ext_builddir/mysqli.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/mysqli.$suffix \$(phplibdir)
+\$(phplibdir)/mssql.$suffix: $ext_builddir/mssql.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/mssql.$suffix \$(phplibdir)
 
-$ext_builddir/mysqli.$suffix: \$(shared_objects_mysqli) \$(MYSQLI_SHARED_DEPENDENCIES)
+$ext_builddir/mssql.$suffix: \$(shared_objects_mssql) \$(MSSQL_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -61761,23 +61391,23 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_MYSQLI 1
+#define COMPILE_DL_MSSQL 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_MYSQLI_SHARED=no
+    PHP_MSSQL_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/mysqli in
+  case ext/mssql in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/mysqli"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/mysqli/"; ac_bdir="ext/mysqli/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+  /*) ac_srcdir=`echo "ext/mssql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/mssql/"; ac_bdir="ext/mssql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
   
 
@@ -61791,7 +61421,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in $mysqli_sources; do
+  for ac_src in php_mssql.c; do
   
       IFS=.
       set $ac_src
@@ -61814,15 +61444,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC mysqli"
+        EXT_STATIC="$EXT_STATIC mssql"
         ;;
       *)
         
   
-  case ext/mysqli in
+  case ext/mssql in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/mysqli"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/mysqli/"; ac_bdir="ext/mysqli/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/mssql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/mssql/"; ac_bdir="ext/mssql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -61837,7 +61467,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in $mysqli_sources; do
+  for ac_src in php_mssql.c; do
   
       IFS=.
       set $ac_src
@@ -61862,7 +61492,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC mysqli"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC mssql"
   fi
   
   
@@ -61871,71 +61501,165 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=mysqli
+    PHP_PECL_EXTENSION=mssql
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQLI_SHARED_LIBADD"
+  echo $ac_n "checking for dnet_addr in -ldnet_stub""... $ac_c" 1>&6
+echo "configure:61512: checking for dnet_addr in -ldnet_stub" >&5
+ac_lib_var=`echo dnet_stub'_'dnet_addr | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-ldnet_stub  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 61520 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char dnet_addr();
 
-  
-  
-    for header_file in ext/mysqli/php_mysqli_structs.h; do
+int main() {
+dnet_addr()
+; return 0; }
+EOF
+if { (eval echo configure:61531: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+   
+
+  if test "$ext_shared" = "yes"; then
+    MSSQL_SHARED_LIBADD="-ldnet_stub $MSSQL_SHARED_LIBADD"
+    if test -n ""; then
       
+  if test "" != "/usr/$PHP_LIBDIR" && test "" != "/usr/lib"; then
+    
+  if test -z "" || echo "" | grep '^/' >/dev/null ; then
+    ai_p=
+  else
+    
+    ep_dir="`echo |$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        MSSQL_SHARED_LIBADD="-L$ai_p $MSSQL_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && MSSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $MSSQL_SHARED_LIBADD"
+      else
+        
   
-  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INSTALLHEADERS$unique=set"
+    eval "LIBPATH$unique=set"
     
-        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
-      
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
   fi
 
-    done 
+
+      fi
+    
+  fi
+
+    fi
+  else
+    
+
+  if test -n ""; then
+    
+  if test "" != "/usr/$PHP_LIBDIR" && test "" != "/usr/lib"; then
+    
+  if test -z "" || echo "" | grep '^/' >/dev/null ; then
+    ai_p=
+  else
+    
+    ep_dir="`echo |$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"\"`"
+  fi
+
+    
+      
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
+  fi
 
 
-  if test "$PHP_MYSQLI" = "mysqlnd"; then
     
-  am_i_shared=$PHP_MYSQLI_SHARED
-  is_it_shared=$PHP_MYSQLND_SHARED
-  is_it_enabled=$PHP_MYSQLND
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension mysqli to build statically, but it
-depends on extension mysqlnd, which you've configured to build shared.
-You either need to build mysqli shared or build mysqlnd statically for the
-build to be successful.
-" 1>&2; exit 1; }
   fi
-  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension mysqli, which depends on extension mysqlnd,
-but you've either not enabled mysqlnd, or have disabled it.
-" 1>&2; exit 1; }
+
   fi
   
-    cat >> confdefs.h <<\EOF
-#define MYSQLI_USE_MYSQLND 1
-EOF
+  
+  case dnet_stub in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-ldnet_stub $LIBS" 
+   ;;
+  esac
+
+
+
 
   fi
-fi
 
 
-if test -z "$SED"; then
-  PHP_OCI8_SED="sed";
+        cat >> confdefs.h <<\EOF
+#define HAVE_LIBDNET_STUB 1
+EOF
+
+     
 else
-  PHP_OCI8_SED="$SED";
+  echo "$ac_t""no" 1>&6
 fi
 
+  cat >> confdefs.h <<\EOF
+#define HAVE_MSSQL 1
+EOF
 
+  cat >> confdefs.h <<\EOF
+#define HAVE_FREETDS 1
+EOF
 
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST MSSQL_SHARED_LIBADD"
 
+fi
 
 
 
@@ -61944,18 +61668,18 @@ fi
 
 
 
-php_with_oci8=no
+php_with_mysql=no
 
-echo $ac_n "checking for Oracle (OCI8) support""... $ac_c" 1>&6
-echo "configure:61951: checking for Oracle (OCI8) support" >&5
-# Check whether --with-oci8 or --without-oci8 was given.
-if test "${with_oci8+set}" = set; then
-  withval="$with_oci8"
-  PHP_OCI8=$withval
+echo $ac_n "checking for MySQL support""... $ac_c" 1>&6
+echo "configure:61675: checking for MySQL support" >&5
+# Check whether --with-mysql or --without-mysql was given.
+if test "${with_mysql+set}" = set; then
+  withval="$with_mysql"
+  PHP_MYSQL=$withval
 else
   
-  PHP_OCI8=no
-  test "$PHP_ENABLE_ALL" && PHP_OCI8=$PHP_ENABLE_ALL
+  PHP_MYSQL=no
+  test "$PHP_ENABLE_ALL" && PHP_MYSQL=$PHP_ENABLE_ALL
 
 fi
 
@@ -61963,12 +61687,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_OCI8 in
+case $PHP_MYSQL in
 shared,*)
-  PHP_OCI8=`echo "$PHP_OCI8"|$SED 's/^shared,//'`
+  PHP_MYSQL=`echo "$PHP_MYSQL"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_OCI8=yes
+  PHP_MYSQL=yes
   ;;
 no)
   ext_output=no
@@ -61987,364 +61711,318 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
-if test "$PHP_OCI8" != "no"; then 
 
-  if test -z "$PHP_OCI8"; then
-        { echo "configure: error: Empty parameter value passed to --with-oci8" 1>&2; exit 1; }
-  fi
+php_with_mysql_sock=no
 
+echo $ac_n "checking for specified location of the MySQL UNIX socket""... $ac_c" 1>&6
+echo "configure:61719: checking for specified location of the MySQL UNIX socket" >&5
+# Check whether --with-mysql-sock or --without-mysql-sock was given.
+if test "${with_mysql_sock+set}" = set; then
+  withval="$with_mysql_sock"
+  PHP_MYSQL_SOCK=$withval
+else
+  
+  PHP_MYSQL_SOCK=no
   
-  echo $ac_n "checking PHP version""... $ac_c" 1>&6
-echo "configure:61999: checking PHP version" >&5
 
-  tmp_version=$PHP_VERSION
-  if test -z "$tmp_version"; then
-    if test -z "$PHP_CONFIG"; then
-      { echo "configure: error: php-config not found" 1>&2; exit 1; }
-    fi
-    php_version=`$PHP_CONFIG --version 2>/dev/null|head -n 1|$PHP_OCI8_SED -e 's#\([0-9]\.[0-9]*\.[0-9]*\)\(.*\)#\1#'`
-  else
-    php_version=`echo "$tmp_version"|$PHP_OCI8_SED -e 's#\([0-9]\.[0-9]*\.[0-9]*\)\(.*\)#\1#'`
-  fi
+fi
 
-  if test -z "$php_version"; then
-    { echo "configure: error: failed to detect PHP version, please report" 1>&2; exit 1; }
-  fi
 
-  ac_IFS=$IFS
-  IFS="."
-  set $php_version
-  IFS=$ac_IFS
-  oci8_php_version=`expr $1 \* 1000000 + $2 \* 1000 + $3`
+ext_output=$PHP_MYSQL_SOCK
+echo "$ac_t""$ext_output" 1>&6
+
 
-  if test "$oci8_php_version" -lt "4003009"; then
-    { echo "configure: error: You need at least PHP 4.3.9 to be able to use this version of OCI8. PHP $php_version found" 1>&2; exit 1; }
-  elif test "$oci8_php_version" -ge "6000000"; then
-    { echo "configure: error: This version of OCI8 is not compatible with PHP 6 or higher" 1>&2; exit 1; }
-  else
-    echo "$ac_t""$php_version, ok" 1>&6
-  fi
 
+
+if test -z "$PHP_ZLIB_DIR"; then
   
-  echo $ac_n "checking size of long int""... $ac_c" 1>&6
-echo "configure:62031: checking size of long int" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_long_int'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  ac_cv_sizeof_long_int=4
-else
-  cat > conftest.$ac_ext <<EOF
-#line 62039 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-int main()
-{
-  FILE *f=fopen("conftestval", "w");
-  if (!f) return(1);
-  fprintf(f, "%d\n", sizeof(long int));
-  return(0);
-}
-EOF
-if { (eval echo configure:62050: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_sizeof_long_int=`cat conftestval`
+php_with_zlib_dir=no
+
+echo $ac_n "checking for the location of libz""... $ac_c" 1>&6
+echo "configure:61743: checking for the location of libz" >&5
+# Check whether --with-zlib-dir or --without-zlib-dir was given.
+if test "${with_zlib_dir+set}" = set; then
+  withval="$with_zlib_dir"
+  PHP_ZLIB_DIR=$withval
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_sizeof_long_int=0
-fi
-rm -fr conftest*
-fi
+  
+  PHP_ZLIB_DIR=no
+  
 
 fi
-echo "$ac_t""$ac_cv_sizeof_long_int" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_LONG_INT $ac_cv_sizeof_long_int
-EOF
 
 
-  echo $ac_n "checking checking if we're on a 64-bit platform""... $ac_c" 1>&6
-echo "configure:62070: checking checking if we're on a 64-bit platform" >&5
-  if test "$ac_cv_sizeof_long_int" = "4"; then
-    echo "$ac_t""no" 1>&6
-    PHP_OCI8_OH_LIBDIR=lib32 
-    PHP_OCI8_IC_LIBDIR_SUFFIX=""
-  else
-    echo "$ac_t""yes" 1>&6
-    PHP_OCI8_OH_LIBDIR=lib
-    PHP_OCI8_IC_LIBDIR_SUFFIX=64
-  fi
+ext_output=$PHP_ZLIB_DIR
+echo "$ac_t""$ext_output" 1>&6
 
-  
-  PHP_OCI8_INSTANT_CLIENT="no"
 
-            if test "$PHP_OCI8" = "yes" && test -z "$ORACLE_HOME"; then
-    echo "configure: warning: OCI8 extension: ORACLE_HOME is not set, looking for default Oracle Instant Client instead" 1>&2
-    PHP_OCI8=instantclient
-  fi
 
-  if test "`echo $PHP_OCI8`" = "instantclient"; then
-    PHP_OCI8_INSTANT_CLIENT="yes"
-  elif test "`echo $PHP_OCI8 | cut -d, -f2`" = "instantclient"; then
-    PHP_OCI8_INSTANT_CLIENT="`echo $PHP_OCI8 | cut -d, -f3`"
-    PHP_OCI8="`echo $PHP_OCI8 | cut -d, -f1,4`"
-    if test "$PHP_OCI8_INSTANT_CLIENT" = ""; then
-	PHP_OCI8_INSTANT_CLIENT="yes"
-    fi
-    if test -z "$PHP_OCI8"; then
-	PHP_OCI8=yes
-    fi
-  elif test "`echo $PHP_OCI8 | cut -d, -f1`" = "instantclient"; then
-    PHP_OCI8_INSTANT_CLIENT="`echo $PHP_OCI8 | cut -d, -f2`"
-    PHP_OCI8="`echo $PHP_OCI8 | cut -d, -f3,4`"
-    if test "$PHP_OCI8_INSTANT_CLIENT" = ""; then
-	PHP_OCI8_INSTANT_CLIENT="yes"
-    fi
-    if test -z "$PHP_OCI8"; then
-	PHP_OCI8=yes
-    fi
-  fi
+fi
 
-  if test "$PHP_OCI8_INSTANT_CLIENT" = "no"; then
-            
-    echo $ac_n "checking Oracle ORACLE_HOME install directory""... $ac_c" 1>&6
-echo "configure:62114: checking Oracle ORACLE_HOME install directory" >&5
+if test "$PHP_MYSQL" = "mysqlnd"; then
+    PHP_MYSQLND_ENABLED=yes
 
-    if test "$PHP_OCI8" = "yes"; then
-      OCI8_DIR=$ORACLE_HOME
-    else
-      OCI8_DIR=$PHP_OCI8
+elif test "$PHP_MYSQL" != "no"; then
+  MYSQL_DIR=
+  MYSQL_INC_DIR=
+
+  for i in $PHP_MYSQL /usr/local /usr; do
+    if test -r $i/include/mysql/mysql.h; then
+      MYSQL_DIR=$i
+      MYSQL_INC_DIR=$i/include/mysql
+      break
+    elif test -r $i/include/mysql.h; then
+      MYSQL_DIR=$i
+      MYSQL_INC_DIR=$i/include
+      break
     fi
-    echo "$ac_t""$OCI8_DIR" 1>&6
+  done
 
-    
-  echo $ac_n "checking ORACLE_HOME library validity""... $ac_c" 1>&6
-echo "configure:62125: checking ORACLE_HOME library validity" >&5
-  if test ! -d "$OCI8_DIR"; then
-    { echo "configure: error: ${OCI8_DIR} is not a directory" 1>&2; exit 1; }
+  if test -z "$MYSQL_DIR"; then
+    { echo "configure: error: Cannot find MySQL header files under $PHP_MYSQL.
+Note that the MySQL client library is not bundled anymore!" 1>&2; exit 1; }
   fi
-  if test -d "$OCI8_DIR/lib" && test ! -d "$OCI8_DIR/lib32"; then
-    OCI8_LIB_DIR=lib
-  elif test ! -d "$OCI8_DIR/lib" && test -d "$OCI8_DIR/lib32"; then
-    OCI8_LIB_DIR=lib32
-  elif test -d "$OCI8_DIR/lib" && test -d "$OCI8_DIR/lib32"; then
-    OCI8_LIB_DIR=$PHP_OCI8_OH_LIBDIR
+
+  if test "$enable_maintainer_zts" = "yes"; then
+    MYSQL_LIBNAME=mysqlclient_r
   else
-        if test -f "$OCI8_DIR/libociei.$SHLIB_SUFFIX_NAME"; then
-      { echo "configure: error: Expected an ORACLE_HOME top level directory but ${OCI8_DIR} appears to be an Instant Client directory. Try --with-oci8=instantclient,${OCI8_DIR}" 1>&2; exit 1; }
-    else
-      { echo "configure: error: Oracle library directory not found in ${OCI8_DIR}" 1>&2; exit 1; }
-    fi
+    MYSQL_LIBNAME=mysqlclient
   fi
-  echo "$ac_t""$OCI8_LIB_DIR" 1>&6
+  case $host_alias in
+    *netware*)
+      MYSQL_LIBNAME=mysql
+      ;;
+  esac
 
+    if test -z "$PHP_LIBDIR"; then
+    PHP_LIBDIR=lib
+  fi
 
-    if test -d "$OCI8_DIR/rdbms/public"; then
-      
-  if test "$OCI8_DIR/rdbms/public" != "/usr/include"; then
-    
-  if test -z "$OCI8_DIR/rdbms/public" || echo "$OCI8_DIR/rdbms/public" | grep '^/' >/dev/null ; then
-    ai_p=$OCI8_DIR/rdbms/public
-  else
-    
-    ep_dir="`echo $OCI8_DIR/rdbms/public|$SED 's%/*[^/][^/]*/*$%%'`"
+  for i in $PHP_LIBDIR $PHP_LIBDIR/mysql; do
     
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$OCI8_DIR/rdbms/public\"`"
+  str="$MYSQL_DIR/$i/lib$MYSQL_LIBNAME.*"
+  for j in `echo $str`; do
+    if test -r $j; then
+      MYSQL_LIB_DIR=$MYSQL_DIR/$i
+      break 2
+    fi
+  done
+
+  done
+
+  if test -z "$MYSQL_LIB_DIR"; then
+    { echo "configure: error: Cannot find lib$MYSQL_LIBNAME under $MYSQL_DIR.
+Note that the MySQL client library is not bundled anymore!" 1>&2; exit 1; }
   fi
 
-    
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    -L$MYSQL_LIB_DIR 
+  "
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
       else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
   fi
 
-  fi
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
 
-      OCI8_INCLUDES="$OCI8_INCLUDES -I$OCI8_DIR/rdbms/public"
     fi
-    if test -d "$OCI8_DIR/rdbms/demo"; then
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
       
-  if test "$OCI8_DIR/rdbms/demo" != "/usr/include"; then
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
     
-  if test -z "$OCI8_DIR/rdbms/demo" || echo "$OCI8_DIR/rdbms/demo" | grep '^/' >/dev/null ; then
-    ai_p=$OCI8_DIR/rdbms/demo
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
     
-    ep_dir="`echo $OCI8_DIR/rdbms/demo|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$OCI8_DIR/rdbms/demo\"`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
 
     
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
+    eval "LIBPATH$unique=set"
     
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
   fi
 
-  fi
 
-      OCI8_INCLUDES="$OCI8_INCLUDES -I$OCI8_DIR/rdbms/demo"
-    fi
-    if test -d "$OCI8_DIR/network/public"; then
-      
-  if test "$OCI8_DIR/network/public" != "/usr/include"; then
-    
-  if test -z "$OCI8_DIR/network/public" || echo "$OCI8_DIR/network/public" | grep '^/' >/dev/null ; then
-    ai_p=$OCI8_DIR/network/public
-  else
-    
-    ep_dir="`echo $OCI8_DIR/network/public|$SED 's%/*[^/][^/]*/*$%%'`"
+      fi
     
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$OCI8_DIR/network/public\"`"
   fi
 
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for mysql_close in -l$MYSQL_LIBNAME""... $ac_c" 1>&6
+echo "configure:61917: checking for mysql_close in -l$MYSQL_LIBNAME" >&5
+ac_lib_var=`echo $MYSQL_LIBNAME'_'mysql_close | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-l$MYSQL_LIBNAME  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 61925 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char mysql_close();
+
+int main() {
+mysql_close()
+; return 0; }
+EOF
+if { (eval echo configure:61936: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+     
+  
+else
+  echo "$ac_t""no" 1>&6
 
-  fi
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_$MYSQL_LIBNAME_mysql_close
+    
+    if test "$PHP_ZLIB_DIR" != "no"; then
+      
 
-      OCI8_INCLUDES="$OCI8_INCLUDES -I$OCI8_DIR/network/public"
-    fi
-    if test -d "$OCI8_DIR/plsql/public"; then
+  if test "$ext_shared" = "yes"; then
+    MYSQL_SHARED_LIBADD="-lz $MYSQL_SHARED_LIBADD"
+    if test -n "$PHP_ZLIB_DIR"; then
       
-  if test "$OCI8_DIR/plsql/public" != "/usr/include"; then
+  if test "$PHP_ZLIB_DIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR" != "/usr/lib"; then
     
-  if test -z "$OCI8_DIR/plsql/public" || echo "$OCI8_DIR/plsql/public" | grep '^/' >/dev/null ; then
-    ai_p=$OCI8_DIR/plsql/public
+  if test -z "$PHP_ZLIB_DIR" || echo "$PHP_ZLIB_DIR" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_ZLIB_DIR
   else
     
-    ep_dir="`echo $OCI8_DIR/plsql/public|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $PHP_ZLIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$OCI8_DIR/plsql/public\"`"
+    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR\"`"
   fi
 
     
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
-
-      OCI8_INCLUDES="$OCI8_INCLUDES -I$OCI8_DIR/plsql/public"
-    fi
-
-    if test -f "$OCI8_DIR/$OCI8_LIB_DIR/sysliblist"; then
-      
-  for ac_i in `cat $OCI8_DIR/$OCI8_LIB_DIR/sysliblist`; do
-    case $ac_i in
-    -pthread)
       if test "$ext_shared" = "yes"; then
-        OCI8_SYSLIB="$OCI8_SYSLIB -pthread"
+        MYSQL_SHARED_LIBADD="-L$ai_p $MYSQL_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && MYSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $MYSQL_SHARED_LIBADD"
       else
         
   
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
   fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        OCI8_SYSLIB="$OCI8_SYSLIB -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
 
+      fi
+    
+  fi
 
     fi
-   ;;
-  esac
-
+  else
+    
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+  if test -n "$PHP_ZLIB_DIR"; then
     
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+  if test "$PHP_ZLIB_DIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR" != "/usr/lib"; then
+    
+  if test -z "$PHP_ZLIB_DIR" || echo "$PHP_ZLIB_DIR" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_ZLIB_DIR
   else
     
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $PHP_ZLIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR\"`"
   fi
 
     
-      if test "$ext_shared" = "yes"; then
-        OCI8_SYSLIB="-L$ai_p $OCI8_SYSLIB"
-        test -n "$ld_runpath_switch" && OCI8_SYSLIB="$ld_runpath_switch$ai_p $OCI8_SYSLIB"
-      else
-        
+      
   
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
@@ -62360,21 +62038,39 @@ echo "configure:62125: checking ORACLE_H
   fi
 
 
-      fi
     
   fi
 
-    ;;
-    esac
-  done
+  fi
+  
+  
+  case z in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lz $LIBS" 
+   ;;
+  esac
+
+
+
+
+  fi
+
 
-    elif test -f "$OCI8_DIR/rdbms/$OCI8_LIB_DIR/sysliblist"; then
       
-  for ac_i in `cat $OCI8_DIR/rdbms/$OCI8_LIB_DIR/sysliblist`; do
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+        -L$PHP_ZLIB_DIR/$PHP_LIBDIR -L$MYSQL_LIB_DIR 
+      "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
     case $ac_i in
     -pthread)
       if test "$ext_shared" = "yes"; then
-        OCI8_SYSLIB="$OCI8_SYSLIB -pthread"
+        LDFLAGS="$LDFLAGS -pthread"
       else
         
   
@@ -62396,7 +62092,7 @@ echo "configure:62125: checking ORACLE_H
   c|c_r|pthread*) ;;
   *) 
     if test "$ext_shared" = "yes"; then
-        OCI8_SYSLIB="$OCI8_SYSLIB -l$ac_ii" 
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
     else
       
   
@@ -62431,8 +62127,8 @@ echo "configure:62125: checking ORACLE_H
 
     
       if test "$ext_shared" = "yes"; then
-        OCI8_SYSLIB="-L$ai_p $OCI8_SYSLIB"
-        test -n "$ld_runpath_switch" && OCI8_SYSLIB="$ld_runpath_switch$ai_p $OCI8_SYSLIB"
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
       else
         
   
@@ -62458,47 +62154,88 @@ echo "configure:62125: checking ORACLE_H
     esac
   done
 
-    fi
+  echo $ac_n "checking for mysql_error in -l$MYSQL_LIBNAME""... $ac_c" 1>&6
+echo "configure:62159: checking for mysql_error in -l$MYSQL_LIBNAME" >&5
+ac_lib_var=`echo $MYSQL_LIBNAME'_'mysql_error | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-l$MYSQL_LIBNAME  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 62167 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char mysql_error();
+
+int main() {
+mysql_error()
+; return 0; }
+EOF
+if { (eval echo configure:62178: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
     
-  echo $ac_n "checking Oracle version""... $ac_c" 1>&6
-echo "configure:62466: checking Oracle version" >&5
-  if test -s "$OCI8_DIR/orainst/unix.rgs"; then
-    OCI8_ORACLE_VERSION=`grep '"ocommon"' $OCI8_DIR/orainst/unix.rgs | $PHP_OCI8_SED 's/  */:/g' | cut -d: -f 6 | cut -c 2-4`
-    test -z "$OCI8_ORACLE_VERSION" && OCI8_ORACLE_VERSION=7.3
-  elif test -f $OCI8_DIR/$OCI8_LIB_DIR/libclntsh.$SHLIB_SUFFIX_NAME.11.1; then
-    OCI8_ORACLE_VERSION=11.1
-  elif test -f $OCI8_DIR/$OCI8_LIB_DIR/libclntsh.$SHLIB_SUFFIX_NAME.10.1; then
-        OCI8_ORACLE_VERSION=10.1
-  elif test -f $OCI8_DIR/$OCI8_LIB_DIR/libclntsh.$SHLIB_SUFFIX_NAME.9.0; then
-        OCI8_ORACLE_VERSION=9.0
-  elif test -f $OCI8_DIR/$OCI8_LIB_DIR/libclntsh.$SHLIB_SUFFIX_NAME.8.0; then
-    OCI8_ORACLE_VERSION=8.1
-  elif test -f $OCI8_DIR/$OCI8_LIB_DIR/libclntsh.$SHLIB_SUFFIX_NAME.1.0; then
-    OCI8_ORACLE_VERSION=8.0
-  elif test -f $OCI8_DIR/$OCI8_LIB_DIR/libclntsh.a; then 
-    if test -f $OCI8_DIR/$OCI8_LIB_DIR/libcore4.a; then 
-      OCI8_ORACLE_VERSION=8.0
+  
+else
+  echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_$MYSQL_LIBNAME_mysql_error
+    
+        { echo "configure: error: mysql configure failed. Please check config.log for more information." 1>&2; exit 1; }
+      
+  
+fi
+  
+      MYSQL_LIBS="-L$PHP_ZLIB_DIR/$PHP_LIBDIR -lz"
     else
-      OCI8_ORACLE_VERSION=8.1
-    fi
-  else
-    { echo "configure: error: Oracle client libraries not found" 1>&2; exit 1; }
-  fi
-  echo "$ac_t""$OCI8_ORACLE_VERSION" 1>&6
+      
+  
+  case z in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        MYSQL_SHARED_LIBADD="-lz $MYSQL_SHARED_LIBADD" 
+    else
+      
+  
+  case z in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lz $LIBS" 
+   ;;
+  esac
 
 
-    case $OCI8_ORACLE_VERSION in
-      7.3|8.0|8.1)
-	{ echo "configure: error: Oracle client libraries < 9.2 are not supported" 1>&2; exit 1; }
-	;;
+    fi
+   ;;
+  esac
 
-      9.0)
-	
+
+      
   save_old_LDFLAGS=$LDFLAGS
   ac_stuff="
-	  -L$OCI8_DIR/$OCI8_LIB_DIR $OCI8_SHARED_LIBADD
-	"
+        -L$MYSQL_LIB_DIR
+      "
   
   save_ext_shared=$ext_shared
   ext_shared=yes
@@ -62591,27 +62328,27 @@ echo "configure:62466: checking Oracle v
     esac
   done
 
-  echo $ac_n "checking for OCIEnvNlsCreate in -lclntsh""... $ac_c" 1>&6
-echo "configure:62596: checking for OCIEnvNlsCreate in -lclntsh" >&5
-ac_lib_var=`echo clntsh'_'OCIEnvNlsCreate | sed 'y%./+-%__p_%'`
+  echo $ac_n "checking for mysql_errno in -l$MYSQL_LIBNAME""... $ac_c" 1>&6
+echo "configure:62333: checking for mysql_errno in -l$MYSQL_LIBNAME" >&5
+ac_lib_var=`echo $MYSQL_LIBNAME'_'mysql_errno | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lclntsh  $LIBS"
+LIBS="-l$MYSQL_LIBNAME  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 62604 "configure"
+#line 62341 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char OCIEnvNlsCreate();
+char mysql_errno();
 
 int main() {
-OCIEnvNlsCreate()
+mysql_errno()
 ; return 0; }
 EOF
-if { (eval echo configure:62615: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:62352: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -62630,75 +62367,48 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
     
-	  OCI8_ORACLE_VERSION=9.2
-	
   
 else
   echo "$ac_t""no" 1>&6
 
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
-    unset ac_cv_lib_clntsh_OCIEnvNlsCreate
+    unset ac_cv_lib_$MYSQL_LIBNAME_mysql_errno
     
-	  { echo "configure: error: Oracle client libraries < 9.2 are not supported" 1>&2; exit 1; }
-	
+        { echo "configure: error: Try adding --with-zlib-dir=<DIR>. Please check config.log for more information." 1>&2; exit 1; }
+      
   
 fi
-
-	;;
-
-      10.1|11.1)
-	cat >> confdefs.h <<\EOF
-#define HAVE_OCI_LOB_READ2 1
-EOF
-
-	;;
-
-      *)
-	{ echo "configure: error: Oracle version $OCI8_ORACLE_VERSION is not supported" 1>&2; exit 1; }
-	;;
-    esac
-
-    
+   
+      MYSQL_LIBS="-lz"
+    fi
   
-  case clntsh in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        OCI8_SHARED_LIBADD="$OCI8_SHARED_LIBADD -lclntsh" 
-    else
-      
   
-  case clntsh in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -lclntsh" 
-   ;;
-  esac
-
+fi
 
-    fi
-   ;;
-  esac
 
+  
 
+  if test "$ext_shared" = "yes"; then
+    MYSQL_SHARED_LIBADD="-l$MYSQL_LIBNAME $MYSQL_SHARED_LIBADD"
+    if test -n "$MYSQL_LIB_DIR"; then
+      
+  if test "$MYSQL_LIB_DIR" != "/usr/$PHP_LIBDIR" && test "$MYSQL_LIB_DIR" != "/usr/lib"; then
     
-  if test "$OCI8_DIR/$OCI8_LIB_DIR" != "/usr/$PHP_LIBDIR" && test "$OCI8_DIR/$OCI8_LIB_DIR" != "/usr/lib"; then
-    
-  if test -z "$OCI8_DIR/$OCI8_LIB_DIR" || echo "$OCI8_DIR/$OCI8_LIB_DIR" | grep '^/' >/dev/null ; then
-    ai_p=$OCI8_DIR/$OCI8_LIB_DIR
+  if test -z "$MYSQL_LIB_DIR" || echo "$MYSQL_LIB_DIR" | grep '^/' >/dev/null ; then
+    ai_p=$MYSQL_LIB_DIR
   else
     
-    ep_dir="`echo $OCI8_DIR/$OCI8_LIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $MYSQL_LIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$OCI8_DIR/$OCI8_LIB_DIR\"`"
+    ai_p="$ep_realdir/`basename \"$MYSQL_LIB_DIR\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        OCI8_SHARED_LIBADD="-L$ai_p $OCI8_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && OCI8_SHARED_LIBADD="$ld_runpath_switch$ai_p $OCI8_SHARED_LIBADD"
+        MYSQL_SHARED_LIBADD="-L$ai_p $MYSQL_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && MYSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $MYSQL_SHARED_LIBADD"
       else
         
   
@@ -62720,91 +62430,248 @@ EOF
     
   fi
 
+    fi
+  else
     
-  ext_builddir=ext/oci8
-  ext_srcdir=$abs_srcdir/ext/oci8
 
-  ac_extra=
+  if test -n "$MYSQL_LIB_DIR"; then
+    
+  if test "$MYSQL_LIB_DIR" != "/usr/$PHP_LIBDIR" && test "$MYSQL_LIB_DIR" != "/usr/lib"; then
+    
+  if test -z "$MYSQL_LIB_DIR" || echo "$MYSQL_LIB_DIR" | grep '^/' >/dev/null ; then
+    ai_p=$MYSQL_LIB_DIR
+  else
+    
+    ep_dir="`echo $MYSQL_LIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$MYSQL_LIB_DIR\"`"
+  fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_OCI8_SHARED=no
     
+      
   
-  case ext/oci8 in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
+  fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
 
+    
+  fi
 
-  old_IFS=$IFS
-  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do
+  fi
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+  
+  case $MYSQL_LIBNAME in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-l$MYSQL_LIBNAME $LIBS" 
+   ;;
+  esac
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
 
 
-    EXT_STATIC="$EXT_STATIC oci8"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC oci8"
-    fi
+  fi
+
+
+  
+  if test "$MYSQL_INC_DIR" != "/usr/include"; then
+    
+  if test -z "$MYSQL_INC_DIR" || echo "$MYSQL_INC_DIR" | grep '^/' >/dev/null ; then
+    ai_p=$MYSQL_INC_DIR
   else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_OCI8_SHARED=yes
-      
-  case ext/oci8 in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+    
+    ep_dir="`echo $MYSQL_INC_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$MYSQL_INC_DIR\"`"
+  fi
+
+    
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
+  fi
 
 
-  old_IFS=$IFS
-  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do
+  MYSQL_MODULE_TYPE=external
+  MYSQL_LIBS="-L$MYSQL_LIB_DIR -l$MYSQL_LIBNAME $MYSQL_LIBS"
+  MYSQL_INCLUDE=-I$MYSQL_INC_DIR
+ 
   
-      IFS=.
-      set $ac_src
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQL_MODULE_TYPE"
+
+  
+
+  
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQL_LIBS"
+
+  
+
+  
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQL_INCLUDE"
+
+  
+
+fi
+
+if test "$PHP_MYSQL" != "no"; then
+  echo $ac_n "checking for MySQL UNIX socket location""... $ac_c" 1>&6
+echo "configure:62546: checking for MySQL UNIX socket location" >&5
+  if test "$PHP_MYSQL_SOCK" != "no" && test "$PHP_MYSQL_SOCK" != "yes"; then
+    MYSQL_SOCK=$PHP_MYSQL_SOCK
+    cat >> confdefs.h <<EOF
+#define PHP_MYSQL_UNIX_SOCK_ADDR "$MYSQL_SOCK"
+EOF
+
+    echo "$ac_t""$MYSQL_SOCK" 1>&6
+  elif test "$PHP_MYSQL" = "yes" || test "$PHP_MYSQL_SOCK" = "yes"; then
+    
+  for i in  \
+    /var/run/mysqld/mysqld.sock \
+    /var/tmp/mysql.sock \
+    /var/run/mysql/mysql.sock \
+    /var/lib/mysql/mysql.sock \
+    /var/mysql/mysql.sock \
+    /usr/local/mysql/var/mysql.sock \
+    /Private/tmp/mysql.sock \
+    /private/tmp/mysql.sock \
+    /tmp/mysql.sock \
+  ; do
+    if test -r $i; then
+      MYSQL_SOCK=$i
+      break 2
+    fi
+  done
+
+  if test -n "$MYSQL_SOCK"; then
+    cat >> confdefs.h <<EOF
+#define PHP_MYSQL_UNIX_SOCK_ADDR "$MYSQL_SOCK"
+EOF
+
+    echo "$ac_t""$MYSQL_SOCK" 1>&6
+  else
+    echo "$ac_t""no" 1>&6
+  fi
+
+  else
+    echo "$ac_t""no" 1>&6
+  fi
+
+  cat >> confdefs.h <<\EOF
+#define HAVE_MYSQL 1
+EOF
+
+  
+  ext_builddir=ext/mysql
+  ext_srcdir=$abs_srcdir/ext/mysql
+
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_MYSQL_SHARED=no
+    
+  
+  case ext/mysql in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/mysql/"; ac_bdir="ext/mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in php_mysql.c; do
+  
+      IFS=.
+      set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_oci8="$shared_objects_oci8 $ac_bdir$ac_obj.lo"
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+    EXT_STATIC="$EXT_STATIC mysql"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC mysql"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_MYSQL_SHARED=yes
+      
+  case ext/mysql in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/mysql/"; ac_bdir="ext/mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in php_mysql.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_mysql="$shared_objects_mysql $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -62827,31 +62694,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpoci8.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(PHPOCI8_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpoci8.so '$ext_builddir'/phpoci8.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpmysql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysql) $(PHPMYSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpmysql.so '$ext_builddir'/phpmysql.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPOCI8, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPMYSQL, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(PHPOCI8_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysql) $(PHPMYSQL_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpoci8.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpmysql.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpoci8.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpmysql.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_oci8"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mysql"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpoci8.$suffix: $ext_builddir/phpoci8.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpoci8.$suffix \$(phplibdir)
+\$(phplibdir)/phpmysql.$suffix: $ext_builddir/phpmysql.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpmysql.$suffix \$(phplibdir)
 
-$ext_builddir/phpoci8.$suffix: \$(shared_objects_oci8) \$(PHPOCI8_SHARED_DEPENDENCIES)
+$ext_builddir/phpmysql.$suffix: \$(shared_objects_mysql) \$(PHPMYSQL_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -62864,31 +62731,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/oci8.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(OCI8_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/oci8.so '$ext_builddir'/oci8.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/mysql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysql) $(MYSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/mysql.so '$ext_builddir'/mysql.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(OCI8, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(MYSQL, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(OCI8_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysql) $(MYSQL_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/oci8.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/mysql.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/oci8.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/mysql.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_oci8"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mysql"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/oci8.$suffix: $ext_builddir/oci8.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/oci8.$suffix \$(phplibdir)
+\$(phplibdir)/mysql.$suffix: $ext_builddir/mysql.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/mysql.$suffix \$(phplibdir)
 
-$ext_builddir/oci8.$suffix: \$(shared_objects_oci8) \$(OCI8_SHARED_DEPENDENCIES)
+$ext_builddir/mysql.$suffix: \$(shared_objects_mysql) \$(MYSQL_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -62896,22 +62763,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_OCI8 1
+#define COMPILE_DL_MYSQL 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_OCI8_SHARED=no
+    PHP_MYSQL_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/oci8 in
+  case ext/mysql in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/mysql/"; ac_bdir="ext/mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -62926,7 +62793,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do
+  for ac_src in php_mysql.c; do
   
       IFS=.
       set $ac_src
@@ -62949,15 +62816,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC oci8"
+        EXT_STATIC="$EXT_STATIC mysql"
         ;;
       *)
         
   
-  case ext/oci8 in
+  case ext/mysql in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/mysql/"; ac_bdir="ext/mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -62972,7 +62839,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do
+  for ac_src in php_mysql.c; do
   
       IFS=.
       set $ac_src
@@ -62997,7 +62864,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC oci8"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC mysql"
   fi
   
   
@@ -63006,183 +62873,159 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=oci8
+    PHP_PECL_EXTENSION=mysql
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_OCI8 1
-EOF
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQL_SHARED_LIBADD"
 
 
+  if test "$PHP_MYSQL" = "mysqlnd"; then
     
+  am_i_shared=$PHP_MYSQL_SHARED
+  is_it_shared=$PHP_MYSQLND_SHARED
+  is_it_enabled=$PHP_MYSQLND
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension mysql to build statically, but it
+depends on extension mysqlnd, which you've configured to build shared.
+You either need to build mysql shared or build mysqlnd statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension mysql, which depends on extension mysqlnd,
+but you've either not enabled mysqlnd, or have disabled it.
+" 1>&2; exit 1; }
+  fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_SHARED_LIBADD"
+    cat >> confdefs.h <<\EOF
+#define MYSQL_USE_MYSQLND 1
+EOF
 
-  
+  fi
+fi
 
-    
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_DIR"
 
-  
 
-    
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_ORACLE_VERSION"
+php_with_mysqli=no
 
+echo $ac_n "checking for MySQLi support""... $ac_c" 1>&6
+echo "configure:62919: checking for MySQLi support" >&5
+# Check whether --with-mysqli or --without-mysqli was given.
+if test "${with_mysqli+set}" = set; then
+  withval="$with_mysqli"
+  PHP_MYSQLI=$withval
+else
   
+  PHP_MYSQLI=no
+  test "$PHP_ENABLE_ALL" && PHP_MYSQLI=$PHP_ENABLE_ALL
 
+fi
 
-        cat >> confdefs.h <<EOF
-#define PHP_OCI8_DEF_DIR "$OCI8_DIR"
-EOF
 
-    cat >> confdefs.h <<EOF
-#define PHP_OCI8_DEF_SHARED_LIBADD "$OCI8_SHARED_LIBADD"
-EOF
 
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_MYSQLI in
+shared,*)
+  PHP_MYSQLI=`echo "$PHP_MYSQLI"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_MYSQLI=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
-  else
-            
-    echo $ac_n "checking Oracle Instant Client directory""... $ac_c" 1>&6
-echo "configure:63052: checking Oracle Instant Client directory" >&5
 
-    if test "$PHP_OCI8_INSTANT_CLIENT" = "yes"; then
-                                    PHP_OCI8_INSTANT_CLIENT=`ls -d /usr/lib/oracle/*/client${PHP_OCI8_IC_LIBDIR_SUFFIX}/lib/libclntsh.* 2> /dev/null | tail -1 | $PHP_OCI8_SED -e 's#/libclntsh[^/]*##'`
-      if test -z "$PHP_OCI8_INSTANT_CLIENT"; then
-	{ echo "configure: error: Oracle Instant Client directory /usr/lib/oracle/.../client${PHP_OCI8_IC_LIBDIR_SUFFIX}/lib libraries not found. Try --with-oci8=instantclient,DIR" 1>&2; exit 1; }
-      fi
-    fi
-    echo "$ac_t""$PHP_OCI8_INSTANT_CLIENT" 1>&6
 
-    OCI8_DIR=$PHP_OCI8_INSTANT_CLIENT
+echo "$ac_t""$ext_output" 1>&6
 
-    echo $ac_n "checking Oracle Instant Client SDK header directory""... $ac_c" 1>&6
-echo "configure:63065: checking Oracle Instant Client SDK header directory" >&5
 
-        OCISDKRPMINC=`echo "$PHP_OCI8_INSTANT_CLIENT" | $PHP_OCI8_SED -e 's!^/usr/lib/oracle/\(.*\)/client\('${PHP_OCI8_IC_LIBDIR_SUFFIX}'\)*/lib/*$!/usr/include/oracle/\1/client\2!'`
 
-        OCISDKZIPINC=$PHP_OCI8_INSTANT_CLIENT/sdk/include
 
-        OCISDKMANINC=`echo "$PHP_OCI8_INSTANT_CLIENT" | $PHP_OCI8_SED -e 's!\(.*\)/lib/*$!\1/include!'`
 
-    if test -f "$OCISDKRPMINC/oci.h"; then
-      echo "$ac_t""$OCISDKRPMINC" 1>&6
-      
-  if test "$OCISDKRPMINC" != "/usr/include"; then
-    
-  if test -z "$OCISDKRPMINC" || echo "$OCISDKRPMINC" | grep '^/' >/dev/null ; then
-    ai_p=$OCISDKRPMINC
-  else
-    
-    ep_dir="`echo $OCISDKRPMINC|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$OCISDKRPMINC\"`"
-  fi
+php_enable_embedded_mysqli=no
 
-    
+echo $ac_n "checking whether to enable embedded MySQLi support""... $ac_c" 1>&6
+echo "configure:62963: checking whether to enable embedded MySQLi support" >&5
+# Check whether --enable-embedded_mysqli or --disable-embedded_mysqli was given.
+if test "${enable_embedded_mysqli+set}" = set; then
+  enableval="$enable_embedded_mysqli"
+  PHP_EMBEDDED_MYSQLI=$enableval
+else
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  PHP_EMBEDDED_MYSQLI=no
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
 
-  fi
+fi
 
-      OCI8INCDIR=$OCISDKRPMINC
-    elif test -f "$OCISDKZIPINC/oci.h"; then
-      echo "$ac_t""$OCISDKZIPINC" 1>&6
-      
-  if test "$OCISDKZIPINC" != "/usr/include"; then
-    
-  if test -z "$OCISDKZIPINC" || echo "$OCISDKZIPINC" | grep '^/' >/dev/null ; then
-    ai_p=$OCISDKZIPINC
+
+ext_output=$PHP_EMBEDDED_MYSQLI
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_MYSQLI" = "mysqlnd"; then
+    PHP_MYSQLND_ENABLED=yes
+
+elif test "$PHP_MYSQLI" != "no"; then
+
+  if test "$PHP_MYSQLI" = "yes"; then
+    MYSQL_CONFIG=`$php_shtool path mysql_config`
   else
-    
-    ep_dir="`echo $OCISDKZIPINC|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$OCISDKZIPINC\"`"
+    MYSQL_CONFIG=$PHP_MYSQLI
   fi
 
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
+  MYSQL_LIB_NAME='mysqlclient'
+  if test "$PHP_EMBEDDED_MYSQLI" = "yes"; then
+    cat >> confdefs.h <<\EOF
+#define HAVE_EMBEDDED_MYSQLI 1
+EOF
 
+    MYSQL_LIB_CFG='--libmysqld-libs'
+        mysqli_extra_sources="mysqli_embedded.c"
+  elif test "$enable_maintainer_zts" = "yes"; then
+    MYSQL_LIB_CFG='--libs_r'
+    MYSQL_LIB_NAME='mysqlclient_r'
+  else
+    MYSQL_LIB_CFG='--libs'
   fi
-
-      OCI8INCDIR=$OCISDKZIPINC
-    elif test -f "$OCISDKMANINC/oci.h"; then
-      echo "$ac_t""$OCISDKMANINC" 1>&6
-      
-  if test "$OCISDKMANINC" != "/usr/include"; then
-    
-  if test -z "$OCISDKMANINC" || echo "$OCISDKMANINC" | grep '^/' >/dev/null ; then
-    ai_p=$OCISDKMANINC
+  
+  if test -x "$MYSQL_CONFIG" && $MYSQL_CONFIG $MYSQL_LIB_CFG > /dev/null 2>&1; then
+    MYSQLI_INCLINE=`$MYSQL_CONFIG --cflags | $SED -e "s/'//g"`
+    MYSQLI_LIBLINE=`$MYSQL_CONFIG $MYSQL_LIB_CFG | $SED -e "s/'//g"`
   else
-    
-    ep_dir="`echo $OCISDKMANINC|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$OCISDKMANINC\"`"
+    echo "$ac_t""mysql_config not found" 1>&6
+    { echo "configure: error: Please reinstall the mysql distribution" 1>&2; exit 1; }
   fi
 
-    
+        
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    $MYSQLI_LIBLINE
+  "
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  save_ext_shared=$ext_shared
+  ext_shared=yes
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
-
-      OCI8INCDIR=$OCISDKMANINC
-    else
-      { echo "configure: error: Oracle Instant Client SDK header files not found" 1>&2; exit 1; }
-    fi
-
-    OCISYSLIBLIST=`echo "$OCI8INCDIR" | $PHP_OCI8_SED -e 's!\(.*\)/include$!\1/demo/sysliblist!'`
-    if test -f "$OCISYSLIBLIST"; then
-      
-  for ac_i in `cat $OCISYSLIBLIST`; do
+  for ac_i in $ac_stuff; do
     case $ac_i in
     -pthread)
       if test "$ext_shared" = "yes"; then
-        OCI8_SYSLIB="$OCI8_SYSLIB -pthread"
+        LDFLAGS="$LDFLAGS -pthread"
       else
         
   
@@ -63204,7 +63047,7 @@ echo "configure:63065: checking Oracle I
   c|c_r|pthread*) ;;
   *) 
     if test "$ext_shared" = "yes"; then
-        OCI8_SYSLIB="$OCI8_SYSLIB -l$ac_ii" 
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
     else
       
   
@@ -63239,8 +63082,8 @@ echo "configure:63065: checking Oracle I
 
     
       if test "$ext_shared" = "yes"; then
-        OCI8_SYSLIB="-L$ai_p $OCI8_SYSLIB"
-        test -n "$ld_runpath_switch" && OCI8_SYSLIB="$ld_runpath_switch$ai_p $OCI8_SYSLIB"
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
       else
         
   
@@ -63266,50 +63109,120 @@ echo "configure:63065: checking Oracle I
     esac
   done
 
-    fi
+  echo $ac_n "checking for mysql_set_server_option in -l$MYSQL_LIB_NAME""... $ac_c" 1>&6
+echo "configure:63114: checking for mysql_set_server_option in -l$MYSQL_LIB_NAME" >&5
+ac_lib_var=`echo $MYSQL_LIB_NAME'_'mysql_set_server_option | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-l$MYSQL_LIB_NAME  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 63122 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char mysql_set_server_option();
 
-    
-  echo $ac_n "checking Oracle Instant Client version""... $ac_c" 1>&6
-echo "configure:63274: checking Oracle Instant Client version" >&5
-  if test -f $PHP_OCI8_INSTANT_CLIENT/libnnz11.$SHLIB_SUFFIX_NAME; then
-    if test -f $PHP_OCI8_INSTANT_CLIENT/libclntsh.$SHLIB_SUFFIX_NAME.11.1; then
-      if test ! -f $PHP_OCI8_INSTANT_CLIENT/libclntsh.$SHLIB_SUFFIX_NAME; then
-        { echo "configure: error: Link from $PHP_OCI8_INSTANT_CLIENT/libclntsh.$SHLIB_SUFFIX_NAME to libclntsh.$SHLIB_SUFFIX_NAME.11.1 not found" 1>&2; exit 1; }
-      fi
-      OCI8_ORACLE_VERSION=11.1
-    else
-      { echo "configure: error: Oracle Instant Client library version not supported" 1>&2; exit 1; }
-    fi
-  elif test -f $PHP_OCI8_INSTANT_CLIENT/libnnz10.$SHLIB_SUFFIX_NAME; then
-    if test -f $PHP_OCI8_INSTANT_CLIENT/libclntsh.$SHLIB_SUFFIX_NAME.10.1; then
-      if test ! -f $PHP_OCI8_INSTANT_CLIENT/libclntsh.$SHLIB_SUFFIX_NAME; then
-        { echo "configure: error: Link from $PHP_OCI8_INSTANT_CLIENT/libclntsh.$SHLIB_SUFFIX_NAME to libclntsh.$SHLIB_SUFFIX_NAME.10.1 not found" 1>&2; exit 1; }
-      fi
-      OCI8_ORACLE_VERSION=10.1
-    else
-      { echo "configure: error: Oracle Instant Client library version not supported" 1>&2; exit 1; }
-    fi
-  else
-    { echo "configure: error: Oracle Instant Client libraries not found" 1>&2; exit 1; }
-  fi
-  echo "$ac_t""$OCI8_ORACLE_VERSION" 1>&6
+int main() {
+mysql_set_server_option()
+; return 0; }
+EOF
+if { (eval echo configure:63133: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-    case $OCI8_ORACLE_VERSION in
-      10.1|11.1)
-	
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
   
-  case clntsh in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        OCI8_SHARED_LIBADD="$OCI8_SHARED_LIBADD -lclntsh" 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+    
+  for ac_i in $MYSQLI_INCLINE; do
+    case $ac_i in
+    -I*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/include"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+    ;;
+    esac
+  done
+
+    
+  for ac_i in $MYSQLI_LIBLINE; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        MYSQLI_SHARED_LIBADD="$MYSQLI_SHARED_LIBADD -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        MYSQLI_SHARED_LIBADD="$MYSQLI_SHARED_LIBADD -l$ac_ii" 
     else
       
   
-  case clntsh in
+  case $ac_ii in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="$LIBS -lclntsh" 
+      LIBS="$LIBS -l$ac_ii" 
    ;;
   esac
 
@@ -63319,23 +63232,26 @@ echo "configure:63274: checking Oracle I
   esac
 
 
-	
-  if test "$PHP_OCI8_INSTANT_CLIENT" != "/usr/$PHP_LIBDIR" && test "$PHP_OCI8_INSTANT_CLIENT" != "/usr/lib"; then
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
     
-  if test -z "$PHP_OCI8_INSTANT_CLIENT" || echo "$PHP_OCI8_INSTANT_CLIENT" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_OCI8_INSTANT_CLIENT
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
     
-    ep_dir="`echo $PHP_OCI8_INSTANT_CLIENT|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_OCI8_INSTANT_CLIENT\"`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        OCI8_SHARED_LIBADD="-L$ai_p $OCI8_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && OCI8_SHARED_LIBADD="$ld_runpath_switch$ai_p $OCI8_SHARED_LIBADD"
+        MYSQLI_SHARED_LIBADD="-L$ai_p $MYSQLI_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && MYSQLI_SHARED_LIBADD="$ld_runpath_switch$ai_p $MYSQLI_SHARED_LIBADD"
       else
         
   
@@ -63357,36 +63273,348 @@ echo "configure:63274: checking Oracle I
     
   fi
 
-	;;
-
-      *)
-	{ echo "configure: error: Oracle Instant Client version $PHP_OCI8_INSTANT_CLIENT is not supported" 1>&2; exit 1; }
-	;;
+    ;;
     esac
+  done
 
     cat >> confdefs.h <<\EOF
-#define HAVE_OCI_INSTANT_CLIENT 1
+#define HAVE_MYSQLILIB 1
+EOF
+
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="$MYSQLI_LIBLINE"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for mysql_set_character_set in -l$MYSQL_LIB_NAME""... $ac_c" 1>&6
+echo "configure:63381: checking for mysql_set_character_set in -l$MYSQL_LIB_NAME" >&5
+ac_lib_var=`echo $MYSQL_LIB_NAME'_'mysql_set_character_set | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-l$MYSQL_LIB_NAME  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 63389 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char mysql_set_character_set();
+
+int main() {
+mysql_set_character_set()
+; return 0; }
+EOF
+if { (eval echo configure:63400: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+     
+  
+else
+  echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_$MYSQL_LIB_NAME_mysql_set_character_set
+    
+      { echo "configure: error: MySQLI doesn't support versions < 4.1.13 (for MySQL 4.1.x) and < 5.0.7 for (MySQL 5.0.x) anymore. Please update your libraries." 1>&2; exit 1; }
+    
+  
+fi
+
+  
+  
+else
+  echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_$MYSQL_LIB_NAME_mysql_set_server_option
+    
+    { echo "configure: error: wrong mysql library version or lib not found. Check config.log for more information." 1>&2; exit 1; }
+  
+  
+fi
+
+        
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    $MYSQLI_LIBLINE
+  "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for mysql_stmt_next_result in -l$MYSQL_LIB_NAME""... $ac_c" 1>&6
+echo "configure:63544: checking for mysql_stmt_next_result in -l$MYSQL_LIB_NAME" >&5
+ac_lib_var=`echo $MYSQL_LIB_NAME'_'mysql_stmt_next_result | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-l$MYSQL_LIB_NAME  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 63552 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char mysql_stmt_next_result();
+
+int main() {
+mysql_stmt_next_result()
+; return 0; }
 EOF
+if { (eval echo configure:63563: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
     cat >> confdefs.h <<\EOF
-#define HAVE_OCI_LOB_READ2 1
+#define HAVE_STMT_NEXT_RESULT 1
 EOF
 
+  
+  
+else
+  echo "$ac_t""no" 1>&6
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_$MYSQL_LIB_NAME_mysql_stmt_next_result
     
-  ext_builddir=ext/oci8
-  ext_srcdir=$abs_srcdir/ext/oci8
+  
+  
+fi
+
+fi
+
+if test "$PHP_MYSQLI" != "no"; then
+  mysqli_sources="mysqli.c mysqli_api.c mysqli_prop.c mysqli_nonapi.c \
+                  mysqli_fe.c mysqli_report.c mysqli_driver.c mysqli_warning.c \
+                  mysqli_exception.c $mysqli_extra_sources"
+  
+  ext_builddir=ext/mysqli
+  ext_srcdir=$abs_srcdir/ext/mysqli
 
   ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_OCI8_SHARED=no
+    PHP_MYSQLI_SHARED=no
     
   
-  case ext/oci8 in
+  case ext/mysqli in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/mysqli"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/mysqli/"; ac_bdir="ext/mysqli/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -63401,7 +63629,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do
+  for ac_src in $mysqli_sources; do
   
       IFS=.
       set $ac_src
@@ -63424,18 +63652,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC oci8"
+    EXT_STATIC="$EXT_STATIC mysqli"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC oci8"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC mysqli"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_OCI8_SHARED=yes
+      PHP_MYSQLI_SHARED=yes
       
-  case ext/oci8 in
+  case ext/mysqli in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/mysqli"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/mysqli/"; ac_bdir="ext/mysqli/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -63450,14 +63678,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do
+  for ac_src in $mysqli_sources; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_oci8="$shared_objects_oci8 $ac_bdir$ac_obj.lo"
+      shared_objects_mysqli="$shared_objects_mysqli $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -63480,31 +63708,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpoci8.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(PHPOCI8_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpoci8.so '$ext_builddir'/phpoci8.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpmysqli.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqli) $(PHPMYSQLI_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpmysqli.so '$ext_builddir'/phpmysqli.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPOCI8, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqli) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPMYSQLI, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(PHPOCI8_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqli) $(PHPMYSQLI_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpoci8.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpmysqli.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpoci8.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpmysqli.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_oci8"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mysqli"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpoci8.$suffix: $ext_builddir/phpoci8.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpoci8.$suffix \$(phplibdir)
+\$(phplibdir)/phpmysqli.$suffix: $ext_builddir/phpmysqli.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpmysqli.$suffix \$(phplibdir)
 
-$ext_builddir/phpoci8.$suffix: \$(shared_objects_oci8) \$(PHPOCI8_SHARED_DEPENDENCIES)
+$ext_builddir/phpmysqli.$suffix: \$(shared_objects_mysqli) \$(PHPMYSQLI_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -63517,31 +63745,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/oci8.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(OCI8_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/oci8.so '$ext_builddir'/oci8.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/mysqli.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqli) $(MYSQLI_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/mysqli.so '$ext_builddir'/mysqli.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(OCI8, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqli) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(MYSQLI, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(OCI8_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqli) $(MYSQLI_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/oci8.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/mysqli.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/oci8.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/mysqli.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_oci8"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mysqli"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/oci8.$suffix: $ext_builddir/oci8.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/oci8.$suffix \$(phplibdir)
+\$(phplibdir)/mysqli.$suffix: $ext_builddir/mysqli.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/mysqli.$suffix \$(phplibdir)
 
-$ext_builddir/oci8.$suffix: \$(shared_objects_oci8) \$(OCI8_SHARED_DEPENDENCIES)
+$ext_builddir/mysqli.$suffix: \$(shared_objects_mysqli) \$(MYSQLI_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -63549,22 +63777,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_OCI8 1
+#define COMPILE_DL_MYSQLI 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_OCI8_SHARED=no
+    PHP_MYSQLI_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/oci8 in
+  case ext/mysqli in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/mysqli"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/mysqli/"; ac_bdir="ext/mysqli/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -63579,7 +63807,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do
+  for ac_src in $mysqli_sources; do
   
       IFS=.
       set $ac_src
@@ -63602,15 +63830,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC oci8"
+        EXT_STATIC="$EXT_STATIC mysqli"
         ;;
       *)
         
   
-  case ext/oci8 in
+  case ext/mysqli in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/mysqli"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/mysqli/"; ac_bdir="ext/mysqli/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -63625,7 +63853,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do
+  for ac_src in $mysqli_sources; do
   
       IFS=.
       set $ac_src
@@ -63650,7 +63878,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC oci8"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC mysqli"
   fi
   
   
@@ -63659,40 +63887,67 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=oci8
+    PHP_PECL_EXTENSION=mysqli
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_OCI8 1
-EOF
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQLI_SHARED_LIBADD"
 
-
-    
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_SHARED_LIBADD"
-
   
-
-    
+    for header_file in ext/mysqli/php_mysqli_structs.h; do
+      
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_DIR"
-
+  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-
+  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INSTALLHEADERS$unique=set"
     
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_ORACLE_VERSION"
+        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
+      
+  fi
 
+    done 
   
 
 
+  if test "$PHP_MYSQLI" = "mysqlnd"; then
+    
+  am_i_shared=$PHP_MYSQLI_SHARED
+  is_it_shared=$PHP_MYSQLND_SHARED
+  is_it_enabled=$PHP_MYSQLND
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension mysqli to build statically, but it
+depends on extension mysqlnd, which you've configured to build shared.
+You either need to build mysqli shared or build mysqlnd statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension mysqli, which depends on extension mysqlnd,
+but you've either not enabled mysqlnd, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+    cat >> confdefs.h <<\EOF
+#define MYSQLI_USE_MYSQLND 1
+EOF
+
   fi
 fi
 
 
+if test -z "$SED"; then
+  PHP_OCI8_SED="sed";
+else
+  PHP_OCI8_SED="$SED";
+fi
 
 
 
@@ -63703,19 +63958,20 @@ fi
 
 
 
-if test -z "$ODBC_TYPE"; then
 
-php_with_adabas=no
 
+php_with_oci8=no
 
-# Check whether --with-adabas or --without-adabas was given.
-if test "${with_adabas+set}" = set; then
-  withval="$with_adabas"
-  PHP_ADABAS=$withval
+echo $ac_n "checking for Oracle (OCI8) support""... $ac_c" 1>&6
+echo "configure:63967: checking for Oracle (OCI8) support" >&5
+# Check whether --with-oci8 or --without-oci8 was given.
+if test "${with_oci8+set}" = set; then
+  withval="$with_oci8"
+  PHP_OCI8=$withval
 else
   
-  PHP_ADABAS=no
-  test "$PHP_ENABLE_ALL" && PHP_ADABAS=$PHP_ENABLE_ALL
+  PHP_OCI8=no
+  test "$PHP_ENABLE_ALL" && PHP_OCI8=$PHP_ENABLE_ALL
 
 fi
 
@@ -63723,12 +63979,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_ADABAS in
+case $PHP_OCI8 in
 shared,*)
-  PHP_ADABAS=`echo "$PHP_ADABAS"|$SED 's/^shared,//'`
+  PHP_OCI8=`echo "$PHP_OCI8"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_ADABAS=yes
+  PHP_OCI8=yes
   ;;
 no)
   ext_output=no
@@ -63742,28 +63998,178 @@ esac
 
 
 
+echo "$ac_t""$ext_output" 1>&6
 
 
 
 
+if test "$PHP_OCI8" != "no"; then 
 
-  if test "$PHP_ADABAS" != "no"; then
-    echo $ac_n "checking for Adabas support""... $ac_c" 1>&6
-echo "configure:63753: checking for Adabas support" >&5
-    if test "$PHP_ADABAS" = "yes"; then
-      PHP_ADABAS=/usr/local
+  if test -z "$PHP_OCI8"; then
+        { echo "configure: error: Empty parameter value passed to --with-oci8" 1>&2; exit 1; }
+  fi
+
+  
+  echo $ac_n "checking PHP version""... $ac_c" 1>&6
+echo "configure:64015: checking PHP version" >&5
+
+  tmp_version=$PHP_VERSION
+  if test -z "$tmp_version"; then
+    if test -z "$PHP_CONFIG"; then
+      { echo "configure: error: php-config not found" 1>&2; exit 1; }
+    fi
+    php_version=`$PHP_CONFIG --version 2>/dev/null|head -n 1|$PHP_OCI8_SED -e 's#\([0-9]\.[0-9]*\.[0-9]*\)\(.*\)#\1#'`
+  else
+    php_version=`echo "$tmp_version"|$PHP_OCI8_SED -e 's#\([0-9]\.[0-9]*\.[0-9]*\)\(.*\)#\1#'`
+  fi
+
+  if test -z "$php_version"; then
+    { echo "configure: error: failed to detect PHP version, please report" 1>&2; exit 1; }
+  fi
+
+  ac_IFS=$IFS
+  IFS="."
+  set $php_version
+  IFS=$ac_IFS
+  oci8_php_version=`expr $1 \* 1000000 + $2 \* 1000 + $3`
+
+  if test "$oci8_php_version" -lt "4003009"; then
+    { echo "configure: error: You need at least PHP 4.3.9 to be able to use this version of OCI8. PHP $php_version found" 1>&2; exit 1; }
+  elif test "$oci8_php_version" -ge "6000000"; then
+    { echo "configure: error: This version of OCI8 is not compatible with PHP 6 or higher" 1>&2; exit 1; }
+  else
+    echo "$ac_t""$php_version, ok" 1>&6
+  fi
+
+  
+  echo $ac_n "checking size of long int""... $ac_c" 1>&6
+echo "configure:64047: checking size of long int" >&5
+if eval "test \"`echo '$''{'ac_cv_sizeof_long_int'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_sizeof_long_int=4
+else
+  cat > conftest.$ac_ext <<EOF
+#line 64055 "configure"
+#include "confdefs.h"
+#include <stdio.h>
+#include <sys/types.h>
+main()
+{
+  FILE *f=fopen("conftestval", "w");
+  if (!f) exit(1);
+  fprintf(f, "%d\n", sizeof(long int));
+  exit(0);
+}
+EOF
+if { (eval echo configure:64067: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_sizeof_long_int=`cat conftestval`
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_sizeof_long_int=0
+fi
+rm -fr conftest*
+fi
+
+fi
+echo "$ac_t""$ac_cv_sizeof_long_int" 1>&6
+cat >> confdefs.h <<EOF
+#define SIZEOF_LONG_INT $ac_cv_sizeof_long_int
+EOF
+
+
+  echo $ac_n "checking checking if we're on a 64-bit platform""... $ac_c" 1>&6
+echo "configure:64087: checking checking if we're on a 64-bit platform" >&5
+  if test "$ac_cv_sizeof_long_int" = "4"; then
+    echo "$ac_t""no" 1>&6
+    PHP_OCI8_OH_LIBDIR=lib32 
+    PHP_OCI8_IC_LIBDIR_SUFFIX=""
+  else
+    echo "$ac_t""yes" 1>&6
+    PHP_OCI8_OH_LIBDIR=lib
+    PHP_OCI8_IC_LIBDIR_SUFFIX=64
+  fi
+
+  
+  PHP_OCI8_INSTANT_CLIENT="no"
+
+            if test "$PHP_OCI8" = "yes" && test -z "$ORACLE_HOME"; then
+    echo "configure: warning: OCI8 extension: ORACLE_HOME is not set, looking for default Oracle Instant Client instead" 1>&2
+    PHP_OCI8=instantclient
+  fi
+
+  if test "`echo $PHP_OCI8`" = "instantclient"; then
+    PHP_OCI8_INSTANT_CLIENT="yes"
+  elif test "`echo $PHP_OCI8 | cut -d, -f2`" = "instantclient"; then
+    PHP_OCI8_INSTANT_CLIENT="`echo $PHP_OCI8 | cut -d, -f3`"
+    PHP_OCI8="`echo $PHP_OCI8 | cut -d, -f1,4`"
+    if test "$PHP_OCI8_INSTANT_CLIENT" = ""; then
+	PHP_OCI8_INSTANT_CLIENT="yes"
+    fi
+    if test -z "$PHP_OCI8"; then
+	PHP_OCI8=yes
+    fi
+  elif test "`echo $PHP_OCI8 | cut -d, -f1`" = "instantclient"; then
+    PHP_OCI8_INSTANT_CLIENT="`echo $PHP_OCI8 | cut -d, -f2`"
+    PHP_OCI8="`echo $PHP_OCI8 | cut -d, -f3,4`"
+    if test "$PHP_OCI8_INSTANT_CLIENT" = ""; then
+	PHP_OCI8_INSTANT_CLIENT="yes"
+    fi
+    if test -z "$PHP_OCI8"; then
+	PHP_OCI8=yes
+    fi
+  fi
+
+  if test "$PHP_OCI8_INSTANT_CLIENT" = "no"; then
+            
+    echo $ac_n "checking Oracle ORACLE_HOME install directory""... $ac_c" 1>&6
+echo "configure:64131: checking Oracle ORACLE_HOME install directory" >&5
+
+    if test "$PHP_OCI8" = "yes"; then
+      OCI8_DIR=$ORACLE_HOME
+    else
+      OCI8_DIR=$PHP_OCI8
     fi
+    echo "$ac_t""$OCI8_DIR" 1>&6
+
     
-  if test "$PHP_ADABAS/incl" != "/usr/include"; then
+  echo $ac_n "checking ORACLE_HOME library validity""... $ac_c" 1>&6
+echo "configure:64142: checking ORACLE_HOME library validity" >&5
+  if test ! -d "$OCI8_DIR"; then
+    { echo "configure: error: ${OCI8_DIR} is not a directory" 1>&2; exit 1; }
+  fi
+  if test -d "$OCI8_DIR/lib" && test ! -d "$OCI8_DIR/lib32"; then
+    OCI8_LIB_DIR=lib
+  elif test ! -d "$OCI8_DIR/lib" && test -d "$OCI8_DIR/lib32"; then
+    OCI8_LIB_DIR=lib32
+  elif test -d "$OCI8_DIR/lib" && test -d "$OCI8_DIR/lib32"; then
+    OCI8_LIB_DIR=$PHP_OCI8_OH_LIBDIR
+  else
+        if test -f "$OCI8_DIR/libociei.$SHLIB_SUFFIX_NAME"; then
+      { echo "configure: error: Expected an ORACLE_HOME top level directory but ${OCI8_DIR} appears to be an Instant Client directory. Try --with-oci8=instantclient,${OCI8_DIR}" 1>&2; exit 1; }
+    else
+      { echo "configure: error: Oracle library directory not found in ${OCI8_DIR}" 1>&2; exit 1; }
+    fi
+  fi
+  echo "$ac_t""$OCI8_LIB_DIR" 1>&6
+
+
+    if test -d "$OCI8_DIR/rdbms/public"; then
+      
+  if test "$OCI8_DIR/rdbms/public" != "/usr/include"; then
     
-  if test -z "$PHP_ADABAS/incl" || echo "$PHP_ADABAS/incl" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_ADABAS/incl
+  if test -z "$OCI8_DIR/rdbms/public" || echo "$OCI8_DIR/rdbms/public" | grep '^/' >/dev/null ; then
+    ai_p=$OCI8_DIR/rdbms/public
   else
     
-    ep_dir="`echo $PHP_ADABAS/incl|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $OCI8_DIR/rdbms/public|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_ADABAS/incl\"`"
+    ai_p="$ep_realdir/`basename \"$OCI8_DIR/rdbms/public\"`"
   fi
 
     
@@ -63784,189 +64190,88 @@ echo "configure:63753: checking for Adab
 
   fi
 
+      OCI8_INCLUDES="$OCI8_INCLUDES -I$OCI8_DIR/rdbms/public"
+    fi
+    if test -d "$OCI8_DIR/rdbms/demo"; then
+      
+  if test "$OCI8_DIR/rdbms/demo" != "/usr/include"; then
     
-  if test "$PHP_ADABAS/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ADABAS/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$PHP_ADABAS/$PHP_LIBDIR" || echo "$PHP_ADABAS/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_ADABAS/$PHP_LIBDIR
+  if test -z "$OCI8_DIR/rdbms/demo" || echo "$OCI8_DIR/rdbms/demo" | grep '^/' >/dev/null ; then
+    ai_p=$OCI8_DIR/rdbms/demo
   else
     
-    ep_dir="`echo $PHP_ADABAS/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $OCI8_DIR/rdbms/demo|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_ADABAS/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$OCI8_DIR/rdbms/demo\"`"
   fi
 
     
-      
-  
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
+    eval "INCLUDEPATH$unique=set"
     
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
     
   fi
 
-    ODBC_OBJS="$PHP_ADABAS/$PHP_LIBDIR/odbclib.a"
-    ODBC_LIB="$abs_builddir/ext/odbc/libodbc_adabas.a"
-    $srcdir/build/shtool mkdir -f -p ext/odbc
-    rm -f "$ODBC_LIB"
-    cp "$ODBC_OBJS" "$ODBC_LIB"
-    
-  
-  case sqlptc in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsqlptc $LIBS" 
-   ;;
-  esac
-
-
-    
-  
-  case sqlrte in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsqlrte $LIBS" 
-   ;;
-  esac
-
-
-    
+  fi
 
-  if test -n "$abs_builddir/ext/odbc"; then
-    
-  if test "$abs_builddir/ext/odbc" != "/usr/$PHP_LIBDIR" && test "$abs_builddir/ext/odbc" != "/usr/lib"; then
+      OCI8_INCLUDES="$OCI8_INCLUDES -I$OCI8_DIR/rdbms/demo"
+    fi
+    if test -d "$OCI8_DIR/network/public"; then
+      
+  if test "$OCI8_DIR/network/public" != "/usr/include"; then
     
-  if test -z "$abs_builddir/ext/odbc" || echo "$abs_builddir/ext/odbc" | grep '^/' >/dev/null ; then
-    ai_p=$abs_builddir/ext/odbc
+  if test -z "$OCI8_DIR/network/public" || echo "$OCI8_DIR/network/public" | grep '^/' >/dev/null ; then
+    ai_p=$OCI8_DIR/network/public
   else
     
-    ep_dir="`echo $abs_builddir/ext/odbc|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $OCI8_DIR/network/public|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$abs_builddir/ext/odbc\"`"
+    ai_p="$ep_realdir/`basename \"$OCI8_DIR/network/public\"`"
   fi
 
     
-      
-  
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
+    eval "INCLUDEPATH$unique=set"
     
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
     
   fi
 
   fi
-  
-  
-  case odbc_adabas in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lodbc_adabas $LIBS" 
-   ;;
-  esac
-
-
-
-
-    ODBC_TYPE=adabas
-    ODBC_INCDIR=$PHP_ADABAS/incl
-    
-if ! test -f "$ODBC_INCDIR/sqlext.h"; then
-  { echo "configure: error: ODBC header file '$ODBC_INCDIR/sqlext.h' not found!" 1>&2; exit 1; }
-fi
-
-    cat >> confdefs.h <<\EOF
-#define HAVE_ADABAS 1
-EOF
-
-    echo "$ac_t""$ext_output" 1>&6
-  fi
-fi
-
-if test -z "$ODBC_TYPE"; then
-
-php_with_sapdb=no
-
-
-# Check whether --with-sapdb or --without-sapdb was given.
-if test "${with_sapdb+set}" = set; then
-  withval="$with_sapdb"
-  PHP_SAPDB=$withval
-else
-  
-  PHP_SAPDB=no
-  test "$PHP_ENABLE_ALL" && PHP_SAPDB=$PHP_ENABLE_ALL
-
-fi
-
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_SAPDB in
-shared,*)
-  PHP_SAPDB=`echo "$PHP_SAPDB"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_SAPDB=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
 
-
-
-
-
-
-  if test "$PHP_SAPDB" != "no"; then
-    echo $ac_n "checking for SAP DB support""... $ac_c" 1>&6
-echo "configure:63956: checking for SAP DB support" >&5
-    if test "$PHP_SAPDB" = "yes"; then
-      PHP_SAPDB=/usr/local
+      OCI8_INCLUDES="$OCI8_INCLUDES -I$OCI8_DIR/network/public"
     fi
+    if test -d "$OCI8_DIR/plsql/public"; then
+      
+  if test "$OCI8_DIR/plsql/public" != "/usr/include"; then
     
-  if test "$PHP_SAPDB/incl" != "/usr/include"; then
-    
-  if test -z "$PHP_SAPDB/incl" || echo "$PHP_SAPDB/incl" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_SAPDB/incl
+  if test -z "$OCI8_DIR/plsql/public" || echo "$OCI8_DIR/plsql/public" | grep '^/' >/dev/null ; then
+    ai_p=$OCI8_DIR/plsql/public
   else
     
-    ep_dir="`echo $PHP_SAPDB/incl|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $OCI8_DIR/plsql/public|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_SAPDB/incl\"`"
+    ai_p="$ep_realdir/`basename \"$OCI8_DIR/plsql/public\"`"
   fi
 
     
@@ -63987,21 +64292,76 @@ echo "configure:63956: checking for SAP
 
   fi
 
+      OCI8_INCLUDES="$OCI8_INCLUDES -I$OCI8_DIR/plsql/public"
+    fi
+
+    if test -f "$OCI8_DIR/$OCI8_LIB_DIR/sysliblist"; then
+      
+  for ac_i in `cat $OCI8_DIR/$OCI8_LIB_DIR/sysliblist`; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        OCI8_SYSLIB="$OCI8_SYSLIB -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        OCI8_SYSLIB="$OCI8_SYSLIB -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
     
-  if test "$PHP_SAPDB/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_SAPDB/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$PHP_SAPDB/$PHP_LIBDIR" || echo "$PHP_SAPDB/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_SAPDB/$PHP_LIBDIR
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
     
-    ep_dir="`echo $PHP_SAPDB/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_SAPDB/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
 
     
-      
+      if test "$ext_shared" = "yes"; then
+        OCI8_SYSLIB="-L$ai_p $OCI8_SYSLIB"
+        test -n "$ld_runpath_switch" && OCI8_SYSLIB="$ld_runpath_switch$ai_p $OCI8_SYSLIB"
+      else
+        
   
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
@@ -64017,813 +64377,728 @@ echo "configure:63956: checking for SAP
   fi
 
 
+      fi
     
   fi
 
-    
+    ;;
+    esac
+  done
+
+    elif test -f "$OCI8_DIR/rdbms/$OCI8_LIB_DIR/sysliblist"; then
+      
+  for ac_i in `cat $OCI8_DIR/rdbms/$OCI8_LIB_DIR/sysliblist`; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        OCI8_SYSLIB="$OCI8_SYSLIB -pthread"
+      else
+        
   
-  case sqlod in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsqlod $LIBS" 
-   ;;
-  esac
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        OCI8_SYSLIB="$OCI8_SYSLIB -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-    ODBC_TYPE=sapdb
-    cat >> confdefs.h <<\EOF
-#define HAVE_SAPDB 1
-EOF
-
-    echo "$ac_t""$ext_output" 1>&6
-  fi
-fi
 
-if test -z "$ODBC_TYPE"; then
+    fi
+   ;;
+  esac
 
-php_with_solid=no
 
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
 
-# Check whether --with-solid or --without-solid was given.
-if test "${with_solid+set}" = set; then
-  withval="$with_solid"
-  PHP_SOLID=$withval
-else
+    
+      if test "$ext_shared" = "yes"; then
+        OCI8_SYSLIB="-L$ai_p $OCI8_SYSLIB"
+        test -n "$ld_runpath_switch" && OCI8_SYSLIB="$ld_runpath_switch$ai_p $OCI8_SYSLIB"
+      else
+        
   
-  PHP_SOLID=no
-  test "$PHP_ENABLE_ALL" && PHP_SOLID=$PHP_ENABLE_ALL
-
-fi
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
 
+      fi
+    
+  fi
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_SOLID in
-shared,*)
-  PHP_SOLID=`echo "$PHP_SOLID"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_SOLID=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
+    ;;
+    esac
+  done
 
+    fi
 
+    
+  echo $ac_n "checking Oracle version""... $ac_c" 1>&6
+echo "configure:64483: checking Oracle version" >&5
+  if test -s "$OCI8_DIR/orainst/unix.rgs"; then
+    OCI8_ORACLE_VERSION=`grep '"ocommon"' $OCI8_DIR/orainst/unix.rgs | $PHP_OCI8_SED 's/  */:/g' | cut -d: -f 6 | cut -c 2-4`
+    test -z "$OCI8_ORACLE_VERSION" && OCI8_ORACLE_VERSION=7.3
+  elif test -f $OCI8_DIR/$OCI8_LIB_DIR/libclntsh.$SHLIB_SUFFIX_NAME.11.1; then
+    OCI8_ORACLE_VERSION=11.1
+  elif test -f $OCI8_DIR/$OCI8_LIB_DIR/libclntsh.$SHLIB_SUFFIX_NAME.10.1; then
+        OCI8_ORACLE_VERSION=10.1
+  elif test -f $OCI8_DIR/$OCI8_LIB_DIR/libclntsh.$SHLIB_SUFFIX_NAME.9.0; then
+        OCI8_ORACLE_VERSION=9.0
+  elif test -f $OCI8_DIR/$OCI8_LIB_DIR/libclntsh.$SHLIB_SUFFIX_NAME.8.0; then
+    OCI8_ORACLE_VERSION=8.1
+  elif test -f $OCI8_DIR/$OCI8_LIB_DIR/libclntsh.$SHLIB_SUFFIX_NAME.1.0; then
+    OCI8_ORACLE_VERSION=8.0
+  elif test -f $OCI8_DIR/$OCI8_LIB_DIR/libclntsh.a; then 
+    if test -f $OCI8_DIR/$OCI8_LIB_DIR/libcore4.a; then 
+      OCI8_ORACLE_VERSION=8.0
+    else
+      OCI8_ORACLE_VERSION=8.1
+    fi
+  else
+    { echo "configure: error: Oracle client libraries not found" 1>&2; exit 1; }
+  fi
+  echo "$ac_t""$OCI8_ORACLE_VERSION" 1>&6
 
 
+    case $OCI8_ORACLE_VERSION in
+      7.3|8.0|8.1)
+	{ echo "configure: error: Oracle client libraries < 9.2 are not supported" 1>&2; exit 1; }
+	;;
 
+      9.0)
+	
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+	  -L$OCI8_DIR/$OCI8_LIB_DIR $OCI8_SHARED_LIBADD
+	"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
 
-  if test "$PHP_SOLID" != "no"; then
-    echo $ac_n "checking for Solid support""... $ac_c" 1>&6
-echo "configure:64089: checking for Solid support" >&5
-    if test "$PHP_SOLID" = "yes"; then
-      PHP_SOLID=/usr/local/solid
     fi
-    ODBC_INCDIR=$PHP_SOLID/include
-    ODBC_LIBDIR=$PHP_SOLID/$PHP_LIBDIR
-    ODBC_INCLUDE=-I$ODBC_INCDIR
-    ODBC_TYPE=solid
-    if test -f $ODBC_LIBDIR/soc*35.a; then
-      cat >> confdefs.h <<\EOF
-#define HAVE_SOLID_35 1
-EOF
-
-    elif test -f $ODBC_LIBDIR/scl*30.a; then
-      cat >> confdefs.h <<\EOF
-#define HAVE_SOLID_30 1
-EOF
+   ;;
+  esac
 
-    elif test -f $ODBC_LIBDIR/scl*23.a; then
-      cat >> confdefs.h <<\EOF
-#define HAVE_SOLID 1
-EOF
 
-    fi
-    echo "$ac_t""$ext_output" 1>&6
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
     
-  echo $ac_n "checking Solid library file""... $ac_c" 1>&6
-echo "configure:64116: checking Solid library file" >&5  
-  ac_solid_uname_r=`uname -r 2>/dev/null`
-  ac_solid_uname_s=`uname -s 2>/dev/null`
-  case $ac_solid_uname_s in
-    AIX) ac_solid_os=a3x;;   # a4x for AIX4/ Solid 2.3/3.0 only
-    HP-UX) ac_solid_os=h9x;; # h1x for hpux11, h0x for hpux10
-    IRIX) ac_solid_os=irx;;  # Solid 2.3(?)/ 3.0 only
-    Linux) 
-      if ldd -v /bin/sh | grep GLIBC > /dev/null; then
-        cat >> confdefs.h <<\EOF
-#define SS_LINUX 1
-EOF
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
 
-        ac_solid_os=l2x
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
       else
-        cat >> confdefs.h <<\EOF
-#define SS_LINUX 1
-EOF
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-        ac_solid_os=lux
-      fi;; 
-    SunOS) 
-      ac_solid_os=ssx;; # should we deal with SunOS 4?
-    FreeBSD) 
-      if test `expr $ac_solid_uname_r : '\(.\)'` -gt "2"; then
-        cat >> confdefs.h <<\EOF
-#define SS_FBX 1
-EOF
 
-        ac_solid_os=fex
-      else 
-        cat >> confdefs.h <<\EOF
-#define SS_FBX 1
-EOF
+      fi
+    
+  fi
 
-        ac_solid_os=fbx
-      fi;;
-  esac
+    ;;
+    esac
+  done
 
-  if test -f $ODBC_LIBDIR/soc${ac_solid_os}35.a; then
-    ac_solid_version=35
-    ac_solid_prefix=soc
-  elif test -f $ODBC_LIBDIR/scl${ac_solid_os}30.a; then
-    ac_solid_version=30
-    ac_solid_prefix=scl
-  elif test -f $ODBC_LIBDIR/scl${ac_solid_os}23.a; then
-    ac_solid_version=23
-    ac_solid_prefix=scl
-  fi
+  echo $ac_n "checking for OCIEnvNlsCreate in -lclntsh""... $ac_c" 1>&6
+echo "configure:64613: checking for OCIEnvNlsCreate in -lclntsh" >&5
+ac_lib_var=`echo clntsh'_'OCIEnvNlsCreate | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lclntsh  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 64621 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char OCIEnvNlsCreate();
 
-#
-# Check for the library files, and setup the ODBC_LIBS path...
-#
-if test ! -f $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.so -a \
-  ! -f $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.a; then
-  #
-  # we have an error and should bail out, as we can't find the libs!
-  #
-  echo ""
-  echo "*********************************************************************"
-  echo "* Unable to locate $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.so or $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.a"
-  echo "* Please correct this by creating the following links and reconfiguring:"
-  echo "* $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.a -> $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.a"
-  echo "* $ODBC_LIBDIR/${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.so -> $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.so"
-  echo "*********************************************************************"
+int main() {
+OCIEnvNlsCreate()
+; return 0; }
+EOF
+if { (eval echo configure:64632: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
-  ODBC_LFLAGS=-L$ODBC_LIBDIR
-  ODBC_LIBS=-l${ac_solid_prefix}${ac_solid_os}${ac_solid_version}
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-  echo "$ac_t""`echo $ODBC_LIBS | sed -e 's!.*/!!'`" 1>&6
-
-  fi
 fi
-
-if test -z "$ODBC_TYPE"; then
-
-php_with_ibm_db2=no
-
-
-# Check whether --with-ibm-db2 or --without-ibm-db2 was given.
-if test "${with_ibm_db2+set}" = set; then
-  withval="$with_ibm_db2"
-  PHP_IBM_DB2=$withval
-else
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
   
-  PHP_IBM_DB2=no
-  test "$PHP_ENABLE_ALL" && PHP_IBM_DB2=$PHP_ENABLE_ALL
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+	  OCI8_ORACLE_VERSION=9.2
+	
+  
+else
+  echo "$ac_t""no" 1>&6
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_clntsh_OCIEnvNlsCreate
+    
+	  { echo "configure: error: Oracle client libraries < 9.2 are not supported" 1>&2; exit 1; }
+	
+  
 fi
 
+	;;
 
+      10.1|11.1)
+	cat >> confdefs.h <<\EOF
+#define HAVE_OCI_LOB_READ2 1
+EOF
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_IBM_DB2 in
-shared,*)
-  PHP_IBM_DB2=`echo "$PHP_IBM_DB2"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_IBM_DB2=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-
-
-
+	;;
 
+      *)
+	{ echo "configure: error: Oracle version $OCI8_ORACLE_VERSION is not supported" 1>&2; exit 1; }
+	;;
+    esac
 
-  if test "$PHP_IBM_DB2" != "no"; then
-    echo $ac_n "checking for IBM DB2 support""... $ac_c" 1>&6
-echo "configure:64237: checking for IBM DB2 support" >&5
-    if test "$PHP_IBM_DB2" = "yes"; then
-      ODBC_INCDIR=/home/db2inst1/sqllib/include
-      ODBC_LIBDIR=/home/db2inst1/sqllib/lib
+    
+  
+  case clntsh in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        OCI8_SHARED_LIBADD="$OCI8_SHARED_LIBADD -lclntsh" 
     else
-      ODBC_INCDIR=$PHP_IBM_DB2/include
-      ODBC_LIBDIR=$PHP_IBM_DB2/$PHP_LIBDIR
-    fi
+      
+  
+  case clntsh in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -lclntsh" 
+   ;;
+  esac
 
-    
-if ! test -f "$ODBC_INCDIR/sqlcli1.h"; then
-  { echo "configure: error: ODBC header file '$ODBC_INCDIR/sqlcli1.h' not found!" 1>&2; exit 1; }
-fi
 
+    fi
+   ;;
+  esac
 
-    ODBC_INCLUDE=-I$ODBC_INCDIR
-    ODBC_LFLAGS=-L$ODBC_LIBDIR
-    ODBC_TYPE=ibm-db2
-    ODBC_LIBS=-ldb2
 
     
-  old_LIBS=$LIBS
-  LIBS="
-      $ODBC_LFLAGS $ODBC_LIBS
-     $LIBS"
-  if test "$cross_compiling" = yes; then
-  
-    LIBS=$old_LIBS
-  
-else
-  cat > conftest.$ac_ext <<EOF
-#line 64268 "configure"
-#include "confdefs.h"
-
+  if test "$OCI8_DIR/$OCI8_LIB_DIR" != "/usr/$PHP_LIBDIR" && test "$OCI8_DIR/$OCI8_LIB_DIR" != "/usr/lib"; then
     
-    char SQLExecute();
-    int main() {
-      SQLExecute();
-      return 0;
-    }
-  
-EOF
-if { (eval echo configure:64279: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-    LIBS=$old_LIBS
+  if test -z "$OCI8_DIR/$OCI8_LIB_DIR" || echo "$OCI8_DIR/$OCI8_LIB_DIR" | grep '^/' >/dev/null ; then
+    ai_p=$OCI8_DIR/$OCI8_LIB_DIR
+  else
     
-      cat >> confdefs.h <<\EOF
-#define HAVE_IBMDB2 1
-EOF
+    ep_dir="`echo $OCI8_DIR/$OCI8_LIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$OCI8_DIR/$OCI8_LIB_DIR\"`"
+  fi
 
-      echo "$ac_t""$ext_output" 1>&6
     
+      if test "$ext_shared" = "yes"; then
+        OCI8_SHARED_LIBADD="-L$ai_p $OCI8_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && OCI8_SHARED_LIBADD="$ld_runpath_switch$ai_p $OCI8_SHARED_LIBADD"
+      else
+        
   
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
   
-    LIBS=$old_LIBS
-    
-      echo "$ac_t""no" 1>&6
-      { echo "configure: error: 
-build test failed. Please check the config.log for details.
-You need to source your DB2 environment before running PHP configure:
-# . \$IBM_DB2/db2profile
-" 1>&2; exit 1; }
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
     
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-fi
-rm -fr conftest*
-fi
+  fi
 
 
+      fi
+    
   fi
-fi
-
-if test -z "$ODBC_TYPE"; then
 
-php_with_odbcrouter=no
+    
+  ext_builddir=ext/oci8
+  ext_srcdir=$abs_srcdir/ext/oci8
 
+  ac_extra=
 
-# Check whether --with-ODBCRouter or --without-ODBCRouter was given.
-if test "${with_ODBCRouter+set}" = set; then
-  withval="$with_ODBCRouter"
-  PHP_ODBCROUTER=$withval
-else
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_OCI8_SHARED=no
+    
+  
+  case ext/oci8 in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
   
-  PHP_ODBCROUTER=no
-  test "$PHP_ENABLE_ALL" && PHP_ODBCROUTER=$PHP_ENABLE_ALL
-
-fi
-
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_ODBCROUTER in
-shared,*)
-  PHP_ODBCROUTER=`echo "$PHP_ODBCROUTER"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_ODBCROUTER=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
 
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
 
+  old_IFS=$IFS
+  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
 
-  if test "$PHP_ODBCROUTER" != "no"; then
-    echo $ac_n "checking for ODBCRouter.com support""... $ac_c" 1>&6
-echo "configure:64360: checking for ODBCRouter.com support" >&5
-    if test "$PHP_ODBCROUTER" = "yes"; then
-      PHP_ODBCROUTER=/usr
+    EXT_STATIC="$EXT_STATIC oci8"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC oci8"
     fi
-    ODBC_INCDIR=$PHP_ODBCROUTER/include
-    ODBC_LIBDIR=$PHP_ODBCROUTER/lib
-    ODBC_LFLAGS=-L$ODBC_LIBDIR
-    ODBC_INCLUDE=-I$ODBC_INCDIR
-    ODBC_LIBS=-lodbcsdk
-    ODBC_TYPE=ODBCRouter
-    cat >> confdefs.h <<\EOF
-#define HAVE_ODBC_ROUTER 1
-EOF
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_OCI8_SHARED=yes
+      
+  case ext/oci8 in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-    echo "$ac_t""$ext_output" 1>&6
-  fi
-fi
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
 
-if test -z "$ODBC_TYPE"; then
 
-php_with_empress=no
+  old_IFS=$IFS
+  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_oci8="$shared_objects_oci8 $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-# Check whether --with-empress or --without-empress was given.
-if test "${with_empress+set}" = set; then
-  withval="$with_empress"
-  PHP_EMPRESS=$withval
-else
-  
-  PHP_EMPRESS=no
-  test "$PHP_ENABLE_ALL" && PHP_EMPRESS=$PHP_ENABLE_ALL
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
-fi
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
 
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpoci8.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(PHPOCI8_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpoci8.so '$ext_builddir'/phpoci8.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPOCI8, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(PHPOCI8_SHARED_LIBADD)'
+      ;;
+  esac
 
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpoci8.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpoci8.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_oci8"
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_EMPRESS in
-shared,*)
-  PHP_EMPRESS=`echo "$PHP_EMPRESS"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_EMPRESS=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpoci8.$suffix: $ext_builddir/phpoci8.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpoci8.$suffix \$(phplibdir)
 
+$ext_builddir/phpoci8.$suffix: \$(shared_objects_oci8) \$(PHPOCI8_SHARED_DEPENDENCIES)
+	$link_cmd
 
+EOF
 
+          ;;
+        *)
+          
+  install_modules="install-modules"
 
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/oci8.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(OCI8_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/oci8.so '$ext_builddir'/oci8.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(OCI8, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(OCI8_SHARED_LIBADD)'
+      ;;
+  esac
 
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/oci8.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/oci8.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_oci8"
 
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/oci8.$suffix: $ext_builddir/oci8.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/oci8.$suffix \$(phplibdir)
 
+$ext_builddir/oci8.$suffix: \$(shared_objects_oci8) \$(OCI8_SHARED_DEPENDENCIES)
+	$link_cmd
 
-  if test "$PHP_EMPRESS" != "no"; then
-    echo $ac_n "checking for Empress support""... $ac_c" 1>&6
-echo "configure:64424: checking for Empress support" >&5
-    if test "$PHP_EMPRESS" = "yes"; then
-      ODBC_INCDIR=$EMPRESSPATH/include/odbc
-      ODBC_LIBDIR=$EMPRESSPATH/shlib
-    else
-      ODBC_INCDIR=$PHP_EMPRESS/include/odbc
-      ODBC_LIBDIR=$PHP_EMPRESS/shlib
-    fi
-    ODBC_INCLUDE=-I$ODBC_INCDIR
-    ODBC_LFLAGS=-L$ODBC_LIBDIR
-    ODBC_TYPE=empress
-    cat >> confdefs.h <<\EOF
-#define HAVE_EMPRESS 1
 EOF
 
-    echo "$ac_t""$ext_output" 1>&6
-    
-  echo $ac_n "checking Empress library file""... $ac_c" 1>&6
-echo "configure:64442: checking Empress library file" >&5
-  ODBC_LIBS=`echo $ODBC_LIBDIR/libempodbccl.so | cut -d' ' -f1`
-  if test ! -f $ODBC_LIBS; then
-    ODBC_LIBS=`echo $ODBC_LIBDIR/libempodbccl.so | cut -d' ' -f1`
-  fi
-  echo "$ac_t""`echo $ODBC_LIBS | sed -e 's!.*/!!'`" 1>&6
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_OCI8 1
+EOF
 
+    fi
   fi
-fi
 
-if test -z "$ODBC_TYPE"; then
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_OCI8_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/oci8 in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-php_with_empress_bcs=no
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
 
-# Check whether --with-empress-bcs or --without-empress-bcs was given.
-if test "${with_empress_bcs+set}" = set; then
-  withval="$with_empress_bcs"
-  PHP_EMPRESS_BCS=$withval
-else
+  old_IFS=$IFS
+  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do
   
-  PHP_EMPRESS_BCS=no
-  test "$PHP_ENABLE_ALL" && PHP_EMPRESS_BCS=$PHP_ENABLE_ALL
-
-fi
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_EMPRESS_BCS in
-shared,*)
-  PHP_EMPRESS_BCS=`echo "$PHP_EMPRESS_BCS"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_EMPRESS_BCS=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
 
+        EXT_STATIC="$EXT_STATIC oci8"
+        ;;
+      *)
+        
+  
+  case ext/oci8 in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
 
+  old_IFS=$IFS
+  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
 
-  if test "$PHP_EMPRESS_BCS" != "no"; then
-    echo $ac_n "checking for Empress local access support""... $ac_c" 1>&6
-echo "configure:64498: checking for Empress local access support" >&5
-    if test "$PHP_EMPRESS_BCS" = "yes"; then
-      ODBC_INCDIR=$EMPRESSPATH/include/odbc
-      ODBC_LIBDIR=$EMPRESSPATH/shlib
-    else
-      ODBC_INCDIR=$PHP_EMPRESS_BCS/include/odbc
-      ODBC_LIBDIR=$PHP_EMPRESS_BCS/shlib
-    fi
-    CC="empocc -bcs";export CC;
-    LD="empocc -bcs";export LD;
-    ODBC_INCLUDE=-I$ODBC_INCDIR
-    ODBC_LFLAGS=-L$ODBC_LIBDIR
-    LIST=`empocc -listlines -bcs -o a a.c`
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC oci8"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
 
-    NEWLIST=
-    for I in $LIST
-    do
-      case $I in
-        $EMPRESSPATH/odbccl/lib/* | \
-        $EMPRESSPATH/rdbms/lib/* | \
-        $EMPRESSPATH/common/lib/*)
-              NEWLIST="$NEWLIST $I"
-              ;;
-      esac
-    done
-    ODBC_LIBS="-lempphpbcs -lms -lmscfg -lbasic -lbasic_os -lnlscstab -lnlsmsgtab -lm -ldl -lcrypt"
-    ODBC_TYPE=empress-bcs
-    cat >> confdefs.h <<\EOF
-#define HAVE_EMPRESS 1
-EOF
 
-    echo "$ac_t""$ext_output" 1>&6
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=oci8
     
-  echo $ac_n "checking Empress local access library file""... $ac_c" 1>&6
-echo "configure:64532: checking Empress local access library file" >&5
-  ODBCBCS_LIBS=`echo $ODBC_LIBDIR/libempodbcbcs.a | cut -d' ' -f1`
-  if test ! -f $ODBCBCS_LIBS; then
-    ODBCBCS_LIBS=`echo $ODBC_LIBDIR/libempodbcbcs.a | cut -d' ' -f1`
-  fi
-  echo "$ac_t""`echo $ODBCBCS_LIBS | sed -e 's!.*/!!'`" 1>&6
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
-fi
-
-if test -z "$ODBC_TYPE"; then
 
-php_with_birdstep=no
+    cat >> confdefs.h <<\EOF
+#define HAVE_OCI8 1
+EOF
 
 
-# Check whether --with-birdstep or --without-birdstep was given.
-if test "${with_birdstep+set}" = set; then
-  withval="$with_birdstep"
-  PHP_BIRDSTEP=$withval
-else
+    
   
-  PHP_BIRDSTEP=no
-  test "$PHP_ENABLE_ALL" && PHP_BIRDSTEP=$PHP_ENABLE_ALL
+  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_SHARED_LIBADD"
 
-fi
+  
 
+    
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_DIR"
 
+  
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_BIRDSTEP in
-shared,*)
-  PHP_BIRDSTEP=`echo "$PHP_BIRDSTEP"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_BIRDSTEP=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
+    
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_ORACLE_VERSION"
 
+  
 
 
+        cat >> confdefs.h <<EOF
+#define PHP_OCI8_DEF_DIR "$OCI8_DIR"
+EOF
 
+    cat >> confdefs.h <<EOF
+#define PHP_OCI8_DEF_SHARED_LIBADD "$OCI8_SHARED_LIBADD"
+EOF
 
 
+  else
+            
+    echo $ac_n "checking Oracle Instant Client directory""... $ac_c" 1>&6
+echo "configure:65069: checking Oracle Instant Client directory" >&5
 
-  
-  if test "$PHP_BIRDSTEP" != "no"; then
-    echo $ac_n "checking for Birdstep support""... $ac_c" 1>&6
-echo "configure:64588: checking for Birdstep support" >&5
-    if test "$PHP_BIRDSTEP" = "yes"; then
-        ODBC_INCDIR=/usr/local/birdstep/include
-        ODBC_LIBDIR=/usr/local/birdstep/lib
-    else
-        ODBC_INCDIR=$PHP_BIRDSTEP/include
-        ODBC_LIBDIR=$PHP_BIRDSTEP/$PHP_LIBDIR
+    if test "$PHP_OCI8_INSTANT_CLIENT" = "yes"; then
+                                    PHP_OCI8_INSTANT_CLIENT=`ls -d /usr/lib/oracle/*/client${PHP_OCI8_IC_LIBDIR_SUFFIX}/lib/libclntsh.* 2> /dev/null | tail -1 | $PHP_OCI8_SED -e 's#/libclntsh[^/]*##'`
+      if test -z "$PHP_OCI8_INSTANT_CLIENT"; then
+	{ echo "configure: error: Oracle Instant Client directory /usr/lib/oracle/.../client${PHP_OCI8_IC_LIBDIR_SUFFIX}/lib libraries not found. Try --with-oci8=instantclient,DIR" 1>&2; exit 1; }
+      fi
     fi
-   
-    case $host_alias in
-      *aix*)
-        cat >> confdefs.h <<\EOF
-#define AIX 1
-EOF
-;;
-      *hpux*)
-        cat >> confdefs.h <<\EOF
-#define HPUX 1
-EOF
-;;
-      *linux*)
-        cat >> confdefs.h <<\EOF
-#define LINUX 1
-EOF
-;;
-      *qnx*)
-        cat >> confdefs.h <<\EOF
-#define NEUTRINO 1
-EOF
-;;
-      i?86-*-solaris*)
-        cat >> confdefs.h <<\EOF
-#define ISOLARIS 1
-EOF
-;;
-      sparc-*-solaris*)
-        cat >> confdefs.h <<\EOF
-#define SOLARIS 1
-EOF
-;;
-      *unixware*)
-        cat >> confdefs.h <<\EOF
-#define UNIXWARE 1
-EOF
-;;
-    esac
+    echo "$ac_t""$PHP_OCI8_INSTANT_CLIENT" 1>&6
 
-    ODBC_INCLUDE=-I$ODBC_INCDIR
-    ODBC_TYPE=birdstep
-    ODBC_LFLAGS=-L$ODBC_LIBDIR
-    ODBC_LIBS="-lCadm -lCdict -lCenc -lCrdm -lCrpc -lCrdbc -lCrm -lCuapi -lutil"
+    OCI8_DIR=$PHP_OCI8_INSTANT_CLIENT
 
-    if test -f "$ODBC_LIBDIR/libCrdbc32.$SHLIB_SUFFIX_NAME"; then
-      ODBC_LIBS="-lCrdbc32 -lCadm32 -lCncp32 -lCrm32 -lCsql32 -lCdict32 -lCrdm32 -lCrpc32 -lutil"
-    elif test -f "$ODBC_LIBDIR/libCrdbc.$SHLIB_SUFFIX_NAME"; then
-      ODBC_LIBS="-lCrdbc -lCadm -lCncp -lCrm -lCsql -lCdict -lCrdm -lCrpc -lutil"
-    fi
+    echo $ac_n "checking Oracle Instant Client SDK header directory""... $ac_c" 1>&6
+echo "configure:65082: checking Oracle Instant Client SDK header directory" >&5
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_BIRDSTEP 1
-EOF
+        OCISDKRPMINC=`echo "$PHP_OCI8_INSTANT_CLIENT" | $PHP_OCI8_SED -e 's!^/usr/lib/oracle/\(.*\)/client\('${PHP_OCI8_IC_LIBDIR_SUFFIX}'\)*/lib/*$!/usr/include/oracle/\1/client\2!'`
 
-    echo "$ac_t""$ext_output" 1>&6
-  fi
-fi
+        OCISDKZIPINC=$PHP_OCI8_INSTANT_CLIENT/sdk/include
 
-if test -z "$ODBC_TYPE"; then
+        OCISDKMANINC=`echo "$PHP_OCI8_INSTANT_CLIENT" | $PHP_OCI8_SED -e 's!\(.*\)/lib/*$!\1/include!'`
 
-php_with_custom_odbc=no
-
-
-# Check whether --with-custom-odbc or --without-custom-odbc was given.
-if test "${with_custom_odbc+set}" = set; then
-  withval="$with_custom_odbc"
-  PHP_CUSTOM_ODBC=$withval
-else
-  
-  PHP_CUSTOM_ODBC=no
-  test "$PHP_ENABLE_ALL" && PHP_CUSTOM_ODBC=$PHP_ENABLE_ALL
-
-fi
-
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_CUSTOM_ODBC in
-shared,*)
-  PHP_CUSTOM_ODBC=`echo "$PHP_CUSTOM_ODBC"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_CUSTOM_ODBC=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-
-
-
-
-
-  if test "$PHP_CUSTOM_ODBC" != "no"; then
-    echo $ac_n "checking for a custom ODBC support""... $ac_c" 1>&6
-echo "configure:64700: checking for a custom ODBC support" >&5
-    if test "$PHP_CUSTOM_ODBC" = "yes"; then
-      PHP_CUSTOM_ODBC=/usr/local
-    fi
-    ODBC_INCDIR=$PHP_CUSTOM_ODBC/include
-    ODBC_LIBDIR=$PHP_CUSTOM_ODBC/$PHP_LIBDIR
-    ODBC_LFLAGS=-L$ODBC_LIBDIR
-    ODBC_INCLUDE=-I$ODBC_INCDIR
-    ODBC_LIBS=$CUSTOM_ODBC_LIBS
-    ODBC_TYPE=custom-odbc
-    cat >> confdefs.h <<\EOF
-#define HAVE_CODBC 1
-EOF
-
-    echo "$ac_t""$ext_ouput" 1>&6
-  fi
-fi
-
-if test -z "$ODBC_TYPE"; then
-
-php_with_iodbc=no
-
-
-# Check whether --with-iodbc or --without-iodbc was given.
-if test "${with_iodbc+set}" = set; then
-  withval="$with_iodbc"
-  PHP_IODBC=$withval
-else
-  
-  PHP_IODBC=no
-  test "$PHP_ENABLE_ALL" && PHP_IODBC=$PHP_ENABLE_ALL
-
-fi
-
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_IODBC in
-shared,*)
-  PHP_IODBC=`echo "$PHP_IODBC"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_IODBC=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-
-
-
-
-
-  if test "$PHP_IODBC" != "no"; then
-    echo $ac_n "checking for iODBC support""... $ac_c" 1>&6
-echo "configure:64764: checking for iODBC support" >&5
-    if test "$PHP_IODBC" = "yes"; then
-      PHP_IODBC=/usr/local
-    fi
-    
-
-  if test -n "$PHP_IODBC/$PHP_LIBDIR"; then
-    
-  if test "$PHP_IODBC/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_IODBC/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$PHP_IODBC/$PHP_LIBDIR" || echo "$PHP_IODBC/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_IODBC/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $PHP_IODBC/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_IODBC/$PHP_LIBDIR\"`"
-  fi
-
-    
+    if test -f "$OCISDKRPMINC/oci.h"; then
+      echo "$ac_t""$OCISDKRPMINC" 1>&6
       
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-    
-  fi
-
-  fi
-  
-  
-  case iodbc in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-liodbc $LIBS" 
-   ;;
-  esac
-
-
-
-
-    
-  if test "$PHP_IODBC/include" != "/usr/include"; then
+  if test "$OCISDKRPMINC" != "/usr/include"; then
     
-  if test -z "$PHP_IODBC/include" || echo "$PHP_IODBC/include" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_IODBC/include
+  if test -z "$OCISDKRPMINC" || echo "$OCISDKRPMINC" | grep '^/' >/dev/null ; then
+    ai_p=$OCISDKRPMINC
   else
     
-    ep_dir="`echo $PHP_IODBC/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $OCISDKRPMINC|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_IODBC/include\"`"
+    ai_p="$ep_realdir/`basename \"$OCISDKRPMINC\"`"
   fi
 
     
@@ -64834,7 +65109,7 @@ echo "configure:64764: checking for iODB
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
     eval "INCLUDEPATH$unique=set"
     
-      if test "1"; then
+      if test ""; then
         INCLUDES="-I$ai_p $INCLUDES"
       else
         INCLUDES="$INCLUDES -I$ai_p"
@@ -64844,302 +65119,54 @@ echo "configure:64764: checking for iODB
 
   fi
 
-    ODBC_TYPE=iodbc
-    ODBC_INCLUDE=-I$PHP_IODBC/include
-    ODBC_LFLAGS=-L$PHP_IODBC/$PHP_LIBDIR
-    ODBC_LIBS=-liodbc
-    cat >> confdefs.h <<\EOF
-#define HAVE_IODBC 1
-EOF
-
-    cat >> confdefs.h <<\EOF
-#define HAVE_ODBC2 1
-EOF
-
-    echo "$ac_t""$ext_output" 1>&6
-  fi
-fi
-
-if test -z "$ODBC_TYPE"; then
-
-php_with_esoob=no
-
-
-# Check whether --with-esoob or --without-esoob was given.
-if test "${with_esoob+set}" = set; then
-  withval="$with_esoob"
-  PHP_ESOOB=$withval
-else
-  
-  PHP_ESOOB=no
-  test "$PHP_ENABLE_ALL" && PHP_ESOOB=$PHP_ENABLE_ALL
-
-fi
-
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_ESOOB in
-shared,*)
-  PHP_ESOOB=`echo "$PHP_ESOOB"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_ESOOB=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-
-
-
-
-
-  if test "$PHP_ESOOB" != "no"; then
-    echo $ac_n "checking for Easysoft ODBC-ODBC Bridge support""... $ac_c" 1>&6
-echo "configure:64910: checking for Easysoft ODBC-ODBC Bridge support" >&5
-    if test "$PHP_ESOOB" = "yes"; then
-      PHP_ESOOB=/usr/local/easysoft/oob/client
-    fi
-    ODBC_INCDIR=$PHP_ESOOB/include
-    ODBC_LIBDIR=$PHP_ESOOB/$PHP_LIBDIR
-    ODBC_LFLAGS=-L$ODBC_LIBDIR
-    ODBC_INCLUDE=-I$ODBC_INCDIR
-    ODBC_LIBS=-lesoobclient
-    ODBC_TYPE=esoob
-    cat >> confdefs.h <<\EOF
-#define HAVE_ESOOB 1
-EOF
-
-    echo "$ac_t""$ext_output" 1>&6
-  fi
-fi
-
-if test -z "$ODBC_TYPE"; then
-
-php_with_unixodbc=no
-
-
-# Check whether --with-unixODBC or --without-unixODBC was given.
-if test "${with_unixODBC+set}" = set; then
-  withval="$with_unixODBC"
-  PHP_UNIXODBC=$withval
-else
-  
-  PHP_UNIXODBC=no
-  test "$PHP_ENABLE_ALL" && PHP_UNIXODBC=$PHP_ENABLE_ALL
-
-fi
-
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_UNIXODBC in
-shared,*)
-  PHP_UNIXODBC=`echo "$PHP_UNIXODBC"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_UNIXODBC=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-
-
-
-
-
-  if test "$PHP_UNIXODBC" != "no"; then
-    echo $ac_n "checking for unixODBC support""... $ac_c" 1>&6
-echo "configure:64974: checking for unixODBC support" >&5
-    if test "$PHP_UNIXODBC" = "yes"; then
-      PHP_UNIXODBC=/usr/local
-    fi
-    ODBC_INCDIR=$PHP_UNIXODBC/include
-    ODBC_LIBDIR=$PHP_UNIXODBC/$PHP_LIBDIR
-    ODBC_LFLAGS=-L$ODBC_LIBDIR
-    ODBC_INCLUDE=-I$ODBC_INCDIR
-    ODBC_LIBS=-lodbc
-    ODBC_TYPE=unixODBC
-    
-if ! test -f "$ODBC_INCDIR/sqlext.h"; then
-  { echo "configure: error: ODBC header file '$ODBC_INCDIR/sqlext.h' not found!" 1>&2; exit 1; }
-fi
-
-    cat >> confdefs.h <<\EOF
-#define HAVE_UNIXODBC 1
-EOF
-
-    echo "$ac_t""$ext_output" 1>&6
-  fi
-fi
-
-if test -z "$ODBC_TYPE"; then
-
-php_with_dbmaker=no
-
-
-# Check whether --with-dbmaker or --without-dbmaker was given.
-if test "${with_dbmaker+set}" = set; then
-  withval="$with_dbmaker"
-  PHP_DBMAKER=$withval
-else
-  
-  PHP_DBMAKER=no
-  test "$PHP_ENABLE_ALL" && PHP_DBMAKER=$PHP_ENABLE_ALL
-
-fi
-
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_DBMAKER in
-shared,*)
-  PHP_DBMAKER=`echo "$PHP_DBMAKER"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_DBMAKER=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-
-
-
-
-
-  if test "$PHP_DBMAKER" != "no"; then
-    echo $ac_n "checking for DBMaker support""... $ac_c" 1>&6
-echo "configure:65043: checking for DBMaker support" >&5
-    if test "$PHP_DBMAKER" = "yes"; then
-      # find dbmaker's home directory
-      DBMAKER_HOME=`grep "^dbmaker:" /etc/passwd | $AWK -F: '{print $6}'`
-
-      # check DBMaker version (from 5.0 to 2.0)
-      DBMAKER_VERSION=5.0
-
-      while test ! -d $DBMAKER_HOME/$DBMAKER_VERSION -a "$DBMAKER_VERSION" != "2.9"; do
-        DM_VER=`echo $DBMAKER_VERSION | sed -e 's/\.//' | $AWK '{ print $1-1;}'`
-        MAJOR_V=`echo $DM_VER | $AWK '{ print $1/10; }'  | $AWK -F. '{ print $1; }'`
-        MINOR_V=`echo $DM_VER | $AWK '{ print $1%10; }'`
-        DBMAKER_VERSION=$MAJOR_V.$MINOR_V
-      done
-
-      if test "$DBMAKER_VERSION" = "2.9"; then
-        PHP_DBMAKER=$DBMAKER_HOME
-      else
-        PHP_DBMAKER=$DBMAKER_HOME/$DBMAKER_VERSION
-      fi
-    fi
-
-    ODBC_INCDIR=$PHP_DBMAKER/include
-    ODBC_LIBDIR=$PHP_DBMAKER/$PHP_LIBDIR
-    ODBC_INCLUDE=-I$ODBC_INCDIR
-    ODBC_LFLAGS=-L$ODBC_LIBDIR
-    ODBC_INCLUDE=-I$ODBC_INCDIR
-    ODBC_LIBS="-ldmapic -lc"
-    ODBC_TYPE=dbmaker
-
-    cat >> confdefs.h <<\EOF
-#define HAVE_DBMAKER 1
-EOF
-
-
-    if test "$ext_shared" = "yes"; then
-      echo "$ac_t""yes (shared)" 1>&6
-      ODBC_LIBS="-ldmapic -lc -lm"
-      ODBC_SHARED="odbc.la"
-    else
-      echo "$ac_t""yes (static)" 1>&6
+      OCI8INCDIR=$OCISDKRPMINC
+    elif test -f "$OCISDKZIPINC/oci.h"; then
+      echo "$ac_t""$OCISDKZIPINC" 1>&6
       
-
-  if test -n "$ODBC_LIBDIR"; then
-    
-  if test "$ODBC_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ODBC_LIBDIR" != "/usr/lib"; then
+  if test "$OCISDKZIPINC" != "/usr/include"; then
     
-  if test -z "$ODBC_LIBDIR" || echo "$ODBC_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$ODBC_LIBDIR
+  if test -z "$OCISDKZIPINC" || echo "$OCISDKZIPINC" | grep '^/' >/dev/null ; then
+    ai_p=$OCISDKZIPINC
   else
     
-    ep_dir="`echo $ODBC_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $OCISDKZIPINC|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ODBC_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$OCISDKZIPINC\"`"
   fi
 
     
-      
-  
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
+    eval "INCLUDEPATH$unique=set"
     
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
     
   fi
 
   fi
-  
-  
-  case dmapic in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-ldmapic $LIBS" 
-   ;;
-  esac
-
-
-
 
+      OCI8INCDIR=$OCISDKZIPINC
+    elif test -f "$OCISDKMANINC/oci.h"; then
+      echo "$ac_t""$OCISDKMANINC" 1>&6
       
-  if test "$ODBC_INCDIR" != "/usr/include"; then
+  if test "$OCISDKMANINC" != "/usr/include"; then
     
-  if test -z "$ODBC_INCDIR" || echo "$ODBC_INCDIR" | grep '^/' >/dev/null ; then
-    ai_p=$ODBC_INCDIR
+  if test -z "$OCISDKMANINC" || echo "$OCISDKMANINC" | grep '^/' >/dev/null ; then
+    ai_p=$OCISDKMANINC
   else
     
-    ep_dir="`echo $ODBC_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $OCISDKMANINC|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ODBC_INCDIR\"`"
+    ai_p="$ep_realdir/`basename \"$OCISDKMANINC\"`"
   fi
 
     
@@ -65160,19 +65187,19 @@ EOF
 
   fi
 
-      ODBC_STATIC="libphpext_odbc.la"
+      OCI8INCDIR=$OCISDKMANINC
+    else
+      { echo "configure: error: Oracle Instant Client SDK header files not found" 1>&2; exit 1; }
     fi
-  fi
-fi
 
-if test -n "$ODBC_TYPE"; then
-  if test "$ODBC_TYPE" != "dbmaker"; then
-    
-  for ac_i in $ODBC_LFLAGS $ODBC_LIBS; do
+    OCISYSLIBLIST=`echo "$OCI8INCDIR" | $PHP_OCI8_SED -e 's!\(.*\)/include$!\1/demo/sysliblist!'`
+    if test -f "$OCISYSLIBLIST"; then
+      
+  for ac_i in `cat $OCISYSLIBLIST`; do
     case $ac_i in
     -pthread)
       if test "$ext_shared" = "yes"; then
-        ODBC_SHARED_LIBADD="$ODBC_SHARED_LIBADD -pthread"
+        OCI8_SYSLIB="$OCI8_SYSLIB -pthread"
       else
         
   
@@ -65194,7 +65221,7 @@ if test -n "$ODBC_TYPE"; then
   c|c_r|pthread*) ;;
   *) 
     if test "$ext_shared" = "yes"; then
-        ODBC_SHARED_LIBADD="$ODBC_SHARED_LIBADD -l$ac_ii" 
+        OCI8_SYSLIB="$OCI8_SYSLIB -l$ac_ii" 
     else
       
   
@@ -65229,8 +65256,8 @@ if test -n "$ODBC_TYPE"; then
 
     
       if test "$ext_shared" = "yes"; then
-        ODBC_SHARED_LIBADD="-L$ai_p $ODBC_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && ODBC_SHARED_LIBADD="$ld_runpath_switch$ai_p $ODBC_SHARED_LIBADD"
+        OCI8_SYSLIB="-L$ai_p $OCI8_SYSLIB"
+        test -n "$ld_runpath_switch" && OCI8_SYSLIB="$ld_runpath_switch$ai_p $OCI8_SYSLIB"
       else
         
   
@@ -65256,66 +65283,127 @@ if test -n "$ODBC_TYPE"; then
     esac
   done
 
-    if test "$ODBC_TYPE" != "birdstep" && test "$ODBC_TYPE" != "solid"; then
-      cat >> confdefs.h <<\EOF
-#define HAVE_SQLDATASOURCES 1
-EOF
+    fi
 
+    
+  echo $ac_n "checking Oracle Instant Client version""... $ac_c" 1>&6
+echo "configure:65291: checking Oracle Instant Client version" >&5
+  if test -f $PHP_OCI8_INSTANT_CLIENT/libnnz11.$SHLIB_SUFFIX_NAME; then
+    if test -f $PHP_OCI8_INSTANT_CLIENT/libclntsh.$SHLIB_SUFFIX_NAME.11.1; then
+      if test ! -f $PHP_OCI8_INSTANT_CLIENT/libclntsh.$SHLIB_SUFFIX_NAME; then
+        { echo "configure: error: Link from $PHP_OCI8_INSTANT_CLIENT/libclntsh.$SHLIB_SUFFIX_NAME to libclntsh.$SHLIB_SUFFIX_NAME.11.1 not found" 1>&2; exit 1; }
+      fi
+      OCI8_ORACLE_VERSION=11.1
+    else
+      { echo "configure: error: Oracle Instant Client library version not supported" 1>&2; exit 1; }
+    fi
+  elif test -f $PHP_OCI8_INSTANT_CLIENT/libnnz10.$SHLIB_SUFFIX_NAME; then
+    if test -f $PHP_OCI8_INSTANT_CLIENT/libclntsh.$SHLIB_SUFFIX_NAME.10.1; then
+      if test ! -f $PHP_OCI8_INSTANT_CLIENT/libclntsh.$SHLIB_SUFFIX_NAME; then
+        { echo "configure: error: Link from $PHP_OCI8_INSTANT_CLIENT/libclntsh.$SHLIB_SUFFIX_NAME to libclntsh.$SHLIB_SUFFIX_NAME.10.1 not found" 1>&2; exit 1; }
+      fi
+      OCI8_ORACLE_VERSION=10.1
+    else
+      { echo "configure: error: Oracle Instant Client library version not supported" 1>&2; exit 1; }
     fi
+  else
+    { echo "configure: error: Oracle Instant Client libraries not found" 1>&2; exit 1; }
   fi
-  
-  cat >> confdefs.h <<\EOF
-#define HAVE_UODBC 1
-EOF
+  echo "$ac_t""$OCI8_ORACLE_VERSION" 1>&6
 
+    case $OCI8_ORACLE_VERSION in
+      10.1|11.1)
+	
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_SHARED_LIBADD"
-
+  case clntsh in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        OCI8_SHARED_LIBADD="$OCI8_SHARED_LIBADD -lclntsh" 
+    else
+      
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_INCDIR"
+  case clntsh in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -lclntsh" 
+   ;;
+  esac
 
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_LIBDIR"
 
-  
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_INCLUDE"
+    fi
+   ;;
+  esac
 
-  
 
-  
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_LIBS"
+	
+  if test "$PHP_OCI8_INSTANT_CLIENT" != "/usr/$PHP_LIBDIR" && test "$PHP_OCI8_INSTANT_CLIENT" != "/usr/lib"; then
+    
+  if test -z "$PHP_OCI8_INSTANT_CLIENT" || echo "$PHP_OCI8_INSTANT_CLIENT" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_OCI8_INSTANT_CLIENT
+  else
+    
+    ep_dir="`echo $PHP_OCI8_INSTANT_CLIENT|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PHP_OCI8_INSTANT_CLIENT\"`"
+  fi
 
+    
+      if test "$ext_shared" = "yes"; then
+        OCI8_SHARED_LIBADD="-L$ai_p $OCI8_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && OCI8_SHARED_LIBADD="$ld_runpath_switch$ai_p $OCI8_SHARED_LIBADD"
+      else
+        
   
-
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_LFLAGS"
-
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
+  fi
 
-  
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_TYPE"
 
-  
+      fi
+    
+  fi
 
+	;;
 
-  
-  ext_builddir=ext/odbc
-  ext_srcdir=$abs_srcdir/ext/odbc
+      *)
+	{ echo "configure: error: Oracle Instant Client version $PHP_OCI8_INSTANT_CLIENT is not supported" 1>&2; exit 1; }
+	;;
+    esac
 
-  ac_extra=`echo "$ODBC_INCLUDE"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
+    cat >> confdefs.h <<\EOF
+#define HAVE_OCI_INSTANT_CLIENT 1
+EOF
+
+    cat >> confdefs.h <<\EOF
+#define HAVE_OCI_LOB_READ2 1
+EOF
+
+
+    
+  ext_builddir=ext/oci8
+  ext_srcdir=$abs_srcdir/ext/oci8
+
+  ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_ODBC_SHARED=no
+    PHP_OCI8_SHARED=no
     
   
-  case ext/odbc in
+  case ext/oci8 in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/odbc/"; ac_bdir="ext/odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -65330,7 +65418,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_odbc.c; do
+  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do
   
       IFS=.
       set $ac_src
@@ -65353,18 +65441,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC odbc"
+    EXT_STATIC="$EXT_STATIC oci8"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC odbc"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC oci8"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_ODBC_SHARED=yes
+      PHP_OCI8_SHARED=yes
       
-  case ext/odbc in
+  case ext/oci8 in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/odbc/"; ac_bdir="ext/odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -65379,14 +65467,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_odbc.c; do
+  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_odbc="$shared_objects_odbc $ac_bdir$ac_obj.lo"
+      shared_objects_oci8="$shared_objects_oci8 $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -65409,31 +65497,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpodbc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_odbc) $(PHPODBC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpodbc.so '$ext_builddir'/phpodbc.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpoci8.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(PHPOCI8_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpoci8.so '$ext_builddir'/phpoci8.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_odbc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPODBC, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPOCI8, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_odbc) $(PHPODBC_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(PHPOCI8_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpodbc.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpoci8.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpodbc.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpoci8.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_odbc"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_oci8"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpodbc.$suffix: $ext_builddir/phpodbc.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpodbc.$suffix \$(phplibdir)
+\$(phplibdir)/phpoci8.$suffix: $ext_builddir/phpoci8.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpoci8.$suffix \$(phplibdir)
 
-$ext_builddir/phpodbc.$suffix: \$(shared_objects_odbc) \$(PHPODBC_SHARED_DEPENDENCIES)
+$ext_builddir/phpoci8.$suffix: \$(shared_objects_oci8) \$(PHPOCI8_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -65446,31 +65534,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/odbc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_odbc) $(ODBC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/odbc.so '$ext_builddir'/odbc.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/oci8.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(OCI8_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/oci8.so '$ext_builddir'/oci8.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_odbc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(ODBC, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(OCI8, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_odbc) $(ODBC_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(OCI8_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/odbc.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/oci8.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/odbc.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/oci8.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_odbc"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_oci8"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/odbc.$suffix: $ext_builddir/odbc.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/odbc.$suffix \$(phplibdir)
+\$(phplibdir)/oci8.$suffix: $ext_builddir/oci8.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/oci8.$suffix \$(phplibdir)
 
-$ext_builddir/odbc.$suffix: \$(shared_objects_odbc) \$(ODBC_SHARED_DEPENDENCIES)
+$ext_builddir/oci8.$suffix: \$(shared_objects_oci8) \$(OCI8_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -65478,22 +65566,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_ODBC 1
+#define COMPILE_DL_OCI8 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_ODBC_SHARED=no
+    PHP_OCI8_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/odbc in
+  case ext/oci8 in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/odbc/"; ac_bdir="ext/odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -65508,7 +65596,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_odbc.c; do
+  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do
   
       IFS=.
       set $ac_src
@@ -65531,15 +65619,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC odbc"
+        EXT_STATIC="$EXT_STATIC oci8"
         ;;
       *)
         
   
-  case ext/odbc in
+  case ext/oci8 in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/odbc/"; ac_bdir="ext/odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -65554,7 +65642,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_odbc.c; do
+  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do
   
       IFS=.
       set $ac_src
@@ -65579,7 +65667,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC odbc"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC oci8"
   fi
   
   
@@ -65588,28 +65676,63 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=odbc
+    PHP_PECL_EXTENSION=oci8
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_OCI8 1
+EOF
+
+
+    
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_SHARED_LIBADD"
+
+  
+
+    
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_DIR"
+
+  
+
+    
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_ORACLE_VERSION"
+
+  
+
+
+  fi
 fi
 
 
 
-php_enable_pcntl=no
 
-echo $ac_n "checking whether to enable pcntl support""... $ac_c" 1>&6
-echo "configure:65605: checking whether to enable pcntl support" >&5
-# Check whether --enable-pcntl or --disable-pcntl was given.
-if test "${enable_pcntl+set}" = set; then
-  enableval="$enable_pcntl"
-  PHP_PCNTL=$enableval
+
+
+
+
+
+
+
+
+if test -z "$ODBC_TYPE"; then
+
+php_with_adabas=no
+
+
+# Check whether --with-adabas or --without-adabas was given.
+if test "${with_adabas+set}" = set; then
+  withval="$with_adabas"
+  PHP_ADABAS=$withval
 else
   
-  PHP_PCNTL=no
-  test "$PHP_ENABLE_ALL" && PHP_PCNTL=$PHP_ENABLE_ALL
+  PHP_ADABAS=no
+  test "$PHP_ENABLE_ALL" && PHP_ADABAS=$PHP_ENABLE_ALL
 
 fi
 
@@ -65617,12 +65740,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_PCNTL in
+case $PHP_ADABAS in
 shared,*)
-  PHP_PCNTL=`echo "$PHP_PCNTL"|$SED 's/^shared,//'`
+  PHP_ADABAS=`echo "$PHP_ADABAS"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_PCNTL=yes
+  PHP_ADABAS=yes
   ;;
 no)
   ext_output=no
@@ -65636,554 +65759,316 @@ esac
 
 
 
-echo "$ac_t""$ext_output" 1>&6
 
 
 
 
-if test "$PHP_PCNTL" != "no"; then
-  for ac_func in fork
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:65649: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 65654 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
 
-int main() {
+  if test "$PHP_ADABAS" != "no"; then
+    echo $ac_n "checking for Adabas support""... $ac_c" 1>&6
+echo "configure:65770: checking for Adabas support" >&5
+    if test "$PHP_ADABAS" = "yes"; then
+      PHP_ADABAS=/usr/local
+    fi
+    
+  if test "$PHP_ADABAS/incl" != "/usr/include"; then
+    
+  if test -z "$PHP_ADABAS/incl" || echo "$PHP_ADABAS/incl" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_ADABAS/incl
+  else
+    
+    ep_dir="`echo $PHP_ADABAS/incl|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PHP_ADABAS/incl\"`"
+  fi
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-; return 0; }
-EOF
-if { (eval echo configure:65677: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
+  fi
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
-  cat >> confdefs.h <<\EOF
-#define HAVE_FORK 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-{ echo "configure: error: pcntl: fork() not supported by this platform" 1>&2; exit 1; } 
-fi
-done
+    
+  if test "$PHP_ADABAS/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ADABAS/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PHP_ADABAS/$PHP_LIBDIR" || echo "$PHP_ADABAS/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_ADABAS/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $PHP_ADABAS/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PHP_ADABAS/$PHP_LIBDIR\"`"
+  fi
 
-  for ac_func in waitpid
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:65708: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 65713 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
+    
+      
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-int main() {
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
+    
+  fi
 
-; return 0; }
-EOF
-if { (eval echo configure:65736: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
+    ODBC_OBJS="$PHP_ADABAS/$PHP_LIBDIR/odbclib.a"
+    ODBC_LIB="$abs_builddir/ext/odbc/libodbc_adabas.a"
+    $srcdir/build/shtool mkdir -f -p ext/odbc
+    rm -f "$ODBC_LIB"
+    cp "$ODBC_OBJS" "$ODBC_LIB"
+    
+  
+  case sqlptc in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsqlptc $LIBS" 
+   ;;
+  esac
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
-  cat >> confdefs.h <<\EOF
-#define HAVE_WAITPID 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-{ echo "configure: error: pcntl: fork() not supported by this platform" 1>&2; exit 1; } 
-fi
-done
 
-  for ac_func in sigaction
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:65767: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 65772 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
+    
+  
+  case sqlrte in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsqlrte $LIBS" 
+   ;;
+  esac
 
-int main() {
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
+    
 
-; return 0; }
-EOF
-if { (eval echo configure:65795: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
+  if test -n "$abs_builddir/ext/odbc"; then
+    
+  if test "$abs_builddir/ext/odbc" != "/usr/$PHP_LIBDIR" && test "$abs_builddir/ext/odbc" != "/usr/lib"; then
+    
+  if test -z "$abs_builddir/ext/odbc" || echo "$abs_builddir/ext/odbc" | grep '^/' >/dev/null ; then
+    ai_p=$abs_builddir/ext/odbc
+  else
+    
+    ep_dir="`echo $abs_builddir/ext/odbc|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$abs_builddir/ext/odbc\"`"
+  fi
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
-  cat >> confdefs.h <<\EOF
-#define HAVE_SIGACTION 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-{ echo "configure: error: pcntl: sigaction() not supported by this platform" 1>&2; exit 1; } 
-fi
-done
+    
+      
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-  for ac_func in getpriority setpriority wait3 sigprocmask sigwaitinfo sigtimedwait
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:65826: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 65831 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:65854: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
+    
+  fi
 
+  fi
   
-  ext_builddir=ext/pcntl
-  ext_srcdir=$abs_srcdir/ext/pcntl
-
-  ac_extra=
-
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" != "cli"; then
-    PHP_PCNTL_SHARED=no
-    
   
-  case ext/pcntl in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pcntl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pcntl/"; ac_bdir="ext/pcntl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  case odbc_adabas in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lodbc_adabas $LIBS" 
+   ;;
   esac
-  
-  
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
 
 
-  old_IFS=$IFS
-  for ac_src in pcntl.c php_signal.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+    ODBC_TYPE=adabas
+    ODBC_INCDIR=$PHP_ADABAS/incl
+    
+if ! test -f "$ODBC_INCDIR/sqlext.h"; then
+  { echo "configure: error: ODBC header file '$ODBC_INCDIR/sqlext.h' not found!" 1>&2; exit 1; }
+fi
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+    cat >> confdefs.h <<\EOF
+#define HAVE_ADABAS 1
 EOF
-  done
 
+    echo "$ac_t""$ext_output" 1>&6
+  fi
+fi
 
-    EXT_STATIC="$EXT_STATIC pcntl"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC pcntl"
-    fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_PCNTL_SHARED=yes
-      
-  case ext/pcntl in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pcntl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pcntl/"; ac_bdir="ext/pcntl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
+if test -z "$ODBC_TYPE"; then
 
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
+php_with_sapdb=no
 
 
-  old_IFS=$IFS
-  for ac_src in pcntl.c php_signal.c; do
+# Check whether --with-sapdb or --without-sapdb was given.
+if test "${with_sapdb+set}" = set; then
+  withval="$with_sapdb"
+  PHP_SAPDB=$withval
+else
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_pcntl="$shared_objects_pcntl $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppcntl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcntl) $(PHPPCNTL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppcntl.so '$ext_builddir'/phppcntl.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcntl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPCNTL, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcntl) $(PHPPCNTL_SHARED_LIBADD)'
-      ;;
-  esac
+  PHP_SAPDB=no
+  test "$PHP_ENABLE_ALL" && PHP_SAPDB=$PHP_ENABLE_ALL
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppcntl.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppcntl.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pcntl"
+fi
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phppcntl.$suffix: $ext_builddir/phppcntl.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phppcntl.$suffix \$(phplibdir)
 
-$ext_builddir/phppcntl.$suffix: \$(shared_objects_pcntl) \$(PHPPCNTL_SHARED_DEPENDENCIES)
-	$link_cmd
 
-EOF
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_SAPDB in
+shared,*)
+  PHP_SAPDB=`echo "$PHP_SAPDB"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_SAPDB=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pcntl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcntl) $(PCNTL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pcntl.so '$ext_builddir'/pcntl.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcntl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PCNTL, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcntl) $(PCNTL_SHARED_LIBADD)'
-      ;;
-  esac
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pcntl.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pcntl.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pcntl"
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/pcntl.$suffix: $ext_builddir/pcntl.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/pcntl.$suffix \$(phplibdir)
 
-$ext_builddir/pcntl.$suffix: \$(shared_objects_pcntl) \$(PCNTL_SHARED_DEPENDENCIES)
-	$link_cmd
 
-EOF
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_PCNTL 1
-EOF
 
+  if test "$PHP_SAPDB" != "no"; then
+    echo $ac_n "checking for SAP DB support""... $ac_c" 1>&6
+echo "configure:65973: checking for SAP DB support" >&5
+    if test "$PHP_SAPDB" = "yes"; then
+      PHP_SAPDB=/usr/local
     fi
+    
+  if test "$PHP_SAPDB/incl" != "/usr/include"; then
+    
+  if test -z "$PHP_SAPDB/incl" || echo "$PHP_SAPDB/incl" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_SAPDB/incl
+  else
+    
+    ep_dir="`echo $PHP_SAPDB/incl|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PHP_SAPDB/incl\"`"
   fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" = "cli"; then
-    PHP_PCNTL_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
-  
-  case ext/pcntl in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pcntl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pcntl/"; ac_bdir="ext/pcntl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+    
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+  fi
 
+    
+  if test "$PHP_SAPDB/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_SAPDB/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PHP_SAPDB/$PHP_LIBDIR" || echo "$PHP_SAPDB/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_SAPDB/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $PHP_SAPDB/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PHP_SAPDB/$PHP_LIBDIR\"`"
+  fi
 
-  old_IFS=$IFS
-  for ac_src in pcntl.c php_signal.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+    
       
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-        EXT_STATIC="$EXT_STATIC pcntl"
-        ;;
-      *)
-        
   
-  case ext/pcntl in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pcntl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pcntl/"; ac_bdir="ext/pcntl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in pcntl.c php_signal.c; do
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+  fi
 
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC pcntl"
+    
   fi
+
+    
   
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
+  case sqlod in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsqlod $LIBS" 
+   ;;
+  esac
 
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=pcntl
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+    ODBC_TYPE=sapdb
+    cat >> confdefs.h <<\EOF
+#define HAVE_SAPDB 1
+EOF
 
+    echo "$ac_t""$ext_output" 1>&6
   fi
-
 fi
 
+if test -z "$ODBC_TYPE"; then
 
+php_with_solid=no
 
 
-
-php_enable_pdo=yes
-
-echo $ac_n "checking whether to enable PDO support""... $ac_c" 1>&6
-echo "configure:66179: checking whether to enable PDO support" >&5
-# Check whether --enable-pdo or --disable-pdo was given.
-if test "${enable_pdo+set}" = set; then
-  enableval="$enable_pdo"
-  PHP_PDO=$enableval
+# Check whether --with-solid or --without-solid was given.
+if test "${with_solid+set}" = set; then
+  withval="$with_solid"
+  PHP_SOLID=$withval
 else
   
-  PHP_PDO=yes
-  test "$PHP_ENABLE_ALL" && PHP_PDO=$PHP_ENABLE_ALL
+  PHP_SOLID=no
+  test "$PHP_ENABLE_ALL" && PHP_SOLID=$PHP_ENABLE_ALL
 
 fi
 
@@ -66191,12 +66076,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_PDO in
+case $PHP_SOLID in
 shared,*)
-  PHP_PDO=`echo "$PHP_PDO"|$SED 's/^shared,//'`
+  PHP_SOLID=`echo "$PHP_SOLID"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_PDO=yes
+  PHP_SOLID=yes
   ;;
 no)
   ext_output=no
@@ -66210,414 +66095,315 @@ esac
 
 
 
-echo "$ac_t""$ext_output" 1>&6
 
 
 
 
-if test "$PHP_PDO" != "no"; then
 
-    PHP_PDO=yes
+  if test "$PHP_SOLID" != "no"; then
+    echo $ac_n "checking for Solid support""... $ac_c" 1>&6
+echo "configure:66106: checking for Solid support" >&5
+    if test "$PHP_SOLID" = "yes"; then
+      PHP_SOLID=/usr/local/solid
+    fi
+    ODBC_INCDIR=$PHP_SOLID/include
+    ODBC_LIBDIR=$PHP_SOLID/$PHP_LIBDIR
+    ODBC_INCLUDE=-I$ODBC_INCDIR
+    ODBC_TYPE=solid
+    if test -f $ODBC_LIBDIR/soc*35.a; then
+      cat >> confdefs.h <<\EOF
+#define HAVE_SOLID_35 1
+EOF
 
-  
-  pdo_running_under_pear=0
-  case `pwd` in
-    /var/tmp/pear-build-*)
-      pdo_running_under_pear=1
-      ;;
-  esac
+    elif test -f $ODBC_LIBDIR/scl*30.a; then
+      cat >> confdefs.h <<\EOF
+#define HAVE_SOLID_30 1
+EOF
 
-  if test "$pdo_running_under_pear$PHP_PEAR_VERSION" = "1"; then
-    # we're running in an environment that smells like pear,
-    # and the PHP_PEAR_VERSION env var is not set.  That implies
-    # that we're running under a slightly broken pear installer
-    { echo "configure: error: 
-PDO requires that you upgrade your PEAR installer tools. Please
-do so now by running:
+    elif test -f $ODBC_LIBDIR/scl*23.a; then
+      cat >> confdefs.h <<\EOF
+#define HAVE_SOLID 1
+EOF
 
-  % sudo pear upgrade pear
+    fi
+    echo "$ac_t""$ext_output" 1>&6
+    
+  echo $ac_n "checking Solid library file""... $ac_c" 1>&6
+echo "configure:66133: checking Solid library file" >&5  
+  ac_solid_uname_r=`uname -r 2>/dev/null`
+  ac_solid_uname_s=`uname -s 2>/dev/null`
+  case $ac_solid_uname_s in
+    AIX) ac_solid_os=a3x;;   # a4x for AIX4/ Solid 2.3/3.0 only
+    HP-UX) ac_solid_os=h9x;; # h1x for hpux11, h0x for hpux10
+    IRIX) ac_solid_os=irx;;  # Solid 2.3(?)/ 3.0 only
+    Linux) 
+      if ldd -v /bin/sh | grep GLIBC > /dev/null; then
+        cat >> confdefs.h <<\EOF
+#define SS_LINUX 1
+EOF
 
-or by manually downloading and installing PEAR version 1.3.5 or higher.
+        ac_solid_os=l2x
+      else
+        cat >> confdefs.h <<\EOF
+#define SS_LINUX 1
+EOF
 
-Once you've upgraded, please re-try your PDO install.
-    " 1>&2; exit 1; }
-  fi
+        ac_solid_os=lux
+      fi;; 
+    SunOS) 
+      ac_solid_os=ssx;; # should we deal with SunOS 4?
+    FreeBSD) 
+      if test `expr $ac_solid_uname_r : '\(.\)'` -gt "2"; then
+        cat >> confdefs.h <<\EOF
+#define SS_FBX 1
+EOF
 
+        ac_solid_os=fex
+      else 
+        cat >> confdefs.h <<\EOF
+#define SS_FBX 1
+EOF
 
-  if test "$ext_shared" = "yes" ; then
-    case $host_alias in
-      *darwin*)
-          { echo "configure: error: 
-Due to the way that loadable modules work on OSX/Darwin, you need to
-compile the PDO package statically into the PHP core.
+        ac_solid_os=fbx
+      fi;;
+  esac
 
-Please follow the instructions at: http://netevil.org/node.php?nid=202
-for more detail on this issue.
-          " 1>&2; exit 1; }
-        ext_shared=no
-        ;;
-    esac
+  if test -f $ODBC_LIBDIR/soc${ac_solid_os}35.a; then
+    ac_solid_version=35
+    ac_solid_prefix=soc
+  elif test -f $ODBC_LIBDIR/scl${ac_solid_os}30.a; then
+    ac_solid_version=30
+    ac_solid_prefix=scl
+  elif test -f $ODBC_LIBDIR/scl${ac_solid_os}23.a; then
+    ac_solid_version=23
+    ac_solid_prefix=scl
   fi
-  
-  ext_builddir=ext/pdo
-  ext_srcdir=$abs_srcdir/ext/pdo
-
-  ac_extra=
-
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_PDO_SHARED=no
-    
-  
-  case ext/pdo in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo/"; ac_bdir="ext/pdo/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+#
+# Check for the library files, and setup the ODBC_LIBS path...
+#
+if test ! -f $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.so -a \
+  ! -f $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.a; then
+  #
+  # we have an error and should bail out, as we can't find the libs!
+  #
+  echo ""
+  echo "*********************************************************************"
+  echo "* Unable to locate $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.so or $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.a"
+  echo "* Please correct this by creating the following links and reconfiguring:"
+  echo "* $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.a -> $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.a"
+  echo "* $ODBC_LIBDIR/${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.so -> $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.so"
+  echo "*********************************************************************"
+else
+  ODBC_LFLAGS=-L$ODBC_LIBDIR
+  ODBC_LIBS=-l${ac_solid_prefix}${ac_solid_os}${ac_solid_version}
+fi
 
+  echo "$ac_t""`echo $ODBC_LIBS | sed -e 's!.*/!!'`" 1>&6
 
-  old_IFS=$IFS
-  for ac_src in pdo.c pdo_dbh.c pdo_stmt.c pdo_sql_parser.c pdo_sqlstate.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+  fi
+fi
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+if test -z "$ODBC_TYPE"; then
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+php_with_ibm_db2=no
 
 
-    EXT_STATIC="$EXT_STATIC pdo"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo"
-    fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_PDO_SHARED=yes
-      
-  case ext/pdo in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo/"; ac_bdir="ext/pdo/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
+# Check whether --with-ibm-db2 or --without-ibm-db2 was given.
+if test "${with_ibm_db2+set}" = set; then
+  withval="$with_ibm_db2"
+  PHP_IBM_DB2=$withval
+else
   
+  PHP_IBM_DB2=no
+  test "$PHP_ENABLE_ALL" && PHP_IBM_DB2=$PHP_ENABLE_ALL
 
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
+fi
 
 
-  old_IFS=$IFS
-  for ac_src in pdo.c pdo_dbh.c pdo_stmt.c pdo_sql_parser.c pdo_sqlstate.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_pdo="$shared_objects_pdo $ac_bdir$ac_obj.lo"
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_IBM_DB2 in
+shared,*)
+  PHP_IBM_DB2=`echo "$PHP_IBM_DB2"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_IBM_DB2=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
 
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo) $(PHPPDO_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo.so '$ext_builddir'/phppdo.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo) $(PHPPDO_SHARED_LIBADD)'
-      ;;
-  esac
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo"
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phppdo.$suffix: $ext_builddir/phppdo.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo.$suffix \$(phplibdir)
 
-$ext_builddir/phppdo.$suffix: \$(shared_objects_pdo) \$(PHPPDO_SHARED_DEPENDENCIES)
-	$link_cmd
 
-EOF
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
+  if test "$PHP_IBM_DB2" != "no"; then
+    echo $ac_n "checking for IBM DB2 support""... $ac_c" 1>&6
+echo "configure:66254: checking for IBM DB2 support" >&5
+    if test "$PHP_IBM_DB2" = "yes"; then
+      ODBC_INCDIR=/home/db2inst1/sqllib/include
+      ODBC_LIBDIR=/home/db2inst1/sqllib/lib
+    else
+      ODBC_INCDIR=$PHP_IBM_DB2/include
+      ODBC_LIBDIR=$PHP_IBM_DB2/$PHP_LIBDIR
+    fi
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo) $(PDO_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo.so '$ext_builddir'/pdo.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo) $(PDO_SHARED_LIBADD)'
-      ;;
-  esac
+    
+if ! test -f "$ODBC_INCDIR/sqlcli1.h"; then
+  { echo "configure: error: ODBC header file '$ODBC_INCDIR/sqlcli1.h' not found!" 1>&2; exit 1; }
+fi
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo"
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/pdo.$suffix: $ext_builddir/pdo.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo.$suffix \$(phplibdir)
+    ODBC_INCLUDE=-I$ODBC_INCDIR
+    ODBC_LFLAGS=-L$ODBC_LIBDIR
+    ODBC_TYPE=ibm-db2
+    ODBC_LIBS=-ldb2
 
-$ext_builddir/pdo.$suffix: \$(shared_objects_pdo) \$(PDO_SHARED_DEPENDENCIES)
-	$link_cmd
+    
+  old_LIBS=$LIBS
+  LIBS="
+      $ODBC_LFLAGS $ODBC_LIBS
+     $LIBS"
+  if test "$cross_compiling" = yes; then
+  
+    LIBS=$old_LIBS
+  
+else
+  cat > conftest.$ac_ext <<EOF
+#line 66285 "configure"
+#include "confdefs.h"
 
+    
+    char SQLExecute();
+    int main() {
+      SQLExecute();
+      return 0;
+    }
+  
 EOF
-
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_PDO 1
+if { (eval echo configure:66296: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+    LIBS=$old_LIBS
+    
+      cat >> confdefs.h <<\EOF
+#define HAVE_IBMDB2 1
 EOF
 
-    fi
-  fi
-
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_PDO_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
+      echo "$ac_t""$ext_output" 1>&6
+    
   
-  case ext/pdo in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo/"; ac_bdir="ext/pdo/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
   
+    LIBS=$old_LIBS
+    
+      echo "$ac_t""no" 1>&6
+      { echo "configure: error: 
+build test failed. Please check the config.log for details.
+You need to source your DB2 environment before running PHP configure:
+# . \$IBM_DB2/db2profile
+" 1>&2; exit 1; }
+    
   
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+fi
+rm -fr conftest*
+fi
 
 
-  old_IFS=$IFS
-  for ac_src in pdo.c pdo_dbh.c pdo_stmt.c pdo_sql_parser.c pdo_sqlstate.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+  fi
+fi
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+if test -z "$ODBC_TYPE"; then
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+php_with_odbcrouter=no
 
 
-        EXT_STATIC="$EXT_STATIC pdo"
-        ;;
-      *)
-        
-  
-  case ext/pdo in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo/"; ac_bdir="ext/pdo/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
+# Check whether --with-ODBCRouter or --without-ODBCRouter was given.
+if test "${with_ODBCRouter+set}" = set; then
+  withval="$with_ODBCRouter"
+  PHP_ODBCROUTER=$withval
+else
   
+  PHP_ODBCROUTER=no
+  test "$PHP_ENABLE_ALL" && PHP_ODBCROUTER=$PHP_ENABLE_ALL
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in pdo.c pdo_dbh.c pdo_stmt.c pdo_sql_parser.c pdo_sqlstate.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+fi
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
 
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_ODBCROUTER in
+shared,*)
+  PHP_ODBCROUTER=`echo "$PHP_ODBCROUTER"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_ODBCROUTER=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo"
-  fi
-  
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
 
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=pdo
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
-  fi
 
-  
-    
-  am_i_shared=$PHP_PDO_SHARED
-  is_it_shared=$PHP_SPL_SHARED
-  is_it_enabled=$PHP_SPL
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension pdo to build statically, but it
-depends on extension spl, which you've configured to build shared.
-You either need to build pdo shared or build spl statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension pdo, which depends on extension spl,
-but you've either not enabled spl, or have disabled it.
-" 1>&2; exit 1; }
-  fi
-  
-  
-  
-  
-        
-  
-    header_path=ext/pdo
-    for header_file in php_pdo.h php_pdo_driver.h; do
-      hp_hf="$header_path/$header_file"
-      
-  
-  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INSTALLHEADERS$unique=set"
-    
-        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
-      
-  fi
 
-    done 
-  
 
-  
 
-    
-  src=$ext_srcdir/Makefile.frag
-  ac_srcdir=$ext_srcdir
-  ac_builddir=$ext_builddir
-  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments
+  if test "$PHP_ODBCROUTER" != "no"; then
+    echo $ac_n "checking for ODBCRouter.com support""... $ac_c" 1>&6
+echo "configure:66377: checking for ODBCRouter.com support" >&5
+    if test "$PHP_ODBCROUTER" = "yes"; then
+      PHP_ODBCROUTER=/usr
+    fi
+    ODBC_INCDIR=$PHP_ODBCROUTER/include
+    ODBC_LIBDIR=$PHP_ODBCROUTER/lib
+    ODBC_LFLAGS=-L$ODBC_LIBDIR
+    ODBC_INCLUDE=-I$ODBC_INCDIR
+    ODBC_LIBS=-lodbcsdk
+    ODBC_TYPE=ODBCRouter
+    cat >> confdefs.h <<\EOF
+#define HAVE_ODBC_ROUTER 1
+EOF
 
+    echo "$ac_t""$ext_output" 1>&6
+  fi
 fi
 
+if test -z "$ODBC_TYPE"; then
 
+php_with_empress=no
 
 
-php_with_pdo_dblib=no
-
-echo $ac_n "checking for PDO_DBLIB support via FreeTDS""... $ac_c" 1>&6
-echo "configure:66613: checking for PDO_DBLIB support via FreeTDS" >&5
-# Check whether --with-pdo-dblib or --without-pdo-dblib was given.
-if test "${with_pdo_dblib+set}" = set; then
-  withval="$with_pdo_dblib"
-  PHP_PDO_DBLIB=$withval
+# Check whether --with-empress or --without-empress was given.
+if test "${with_empress+set}" = set; then
+  withval="$with_empress"
+  PHP_EMPRESS=$withval
 else
   
-  PHP_PDO_DBLIB=no
-  test "$PHP_ENABLE_ALL" && PHP_PDO_DBLIB=$PHP_ENABLE_ALL
+  PHP_EMPRESS=no
+  test "$PHP_ENABLE_ALL" && PHP_EMPRESS=$PHP_ENABLE_ALL
 
 fi
 
@@ -66625,12 +66411,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_PDO_DBLIB in
+case $PHP_EMPRESS in
 shared,*)
-  PHP_PDO_DBLIB=`echo "$PHP_PDO_DBLIB"|$SED 's/^shared,//'`
+  PHP_EMPRESS=`echo "$PHP_EMPRESS"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_PDO_DBLIB=yes
+  PHP_EMPRESS=yes
   ;;
 no)
   ext_output=no
@@ -66644,146 +66430,371 @@ esac
 
 
 
-echo "$ac_t""$ext_output" 1>&6
-
 
 
 
-if test "$PHP_PDO_DBLIB" != "no"; then
 
-  if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
-    { echo "configure: error: PDO is not enabled! Add --enable-pdo to your configure line." 1>&2; exit 1; }
-  fi
 
-  if test "$PHP_PDO_DBLIB" = "yes"; then
+  if test "$PHP_EMPRESS" != "no"; then
+    echo $ac_n "checking for Empress support""... $ac_c" 1>&6
+echo "configure:66441: checking for Empress support" >&5
+    if test "$PHP_EMPRESS" = "yes"; then
+      ODBC_INCDIR=$EMPRESSPATH/include/odbc
+      ODBC_LIBDIR=$EMPRESSPATH/shlib
+    else
+      ODBC_INCDIR=$PHP_EMPRESS/include/odbc
+      ODBC_LIBDIR=$PHP_EMPRESS/shlib
+    fi
+    ODBC_INCLUDE=-I$ODBC_INCDIR
+    ODBC_LFLAGS=-L$ODBC_LIBDIR
+    ODBC_TYPE=empress
+    cat >> confdefs.h <<\EOF
+#define HAVE_EMPRESS 1
+EOF
 
-    for i in /usr/local /usr; do
-      if test -f $i/include/sybdb.h; then
-        PDO_FREETDS_INSTALLATION_DIR=$i
-        PDO_FREETDS_INCLUDE_DIR=$i/include
-        break
-      elif test -f $i/include/freetds/sybdb.h; then
-        PDO_FREETDS_INSTALLATION_DIR=$i
-        PDO_FREETDS_INCLUDE_DIR=$i/include/freetds
-        break;
-      fi
-    done
+    echo "$ac_t""$ext_output" 1>&6
+    
+  echo $ac_n "checking Empress library file""... $ac_c" 1>&6
+echo "configure:66459: checking Empress library file" >&5
+  ODBC_LIBS=`echo $ODBC_LIBDIR/libempodbccl.so | cut -d' ' -f1`
+  if test ! -f $ODBC_LIBS; then
+    ODBC_LIBS=`echo $ODBC_LIBDIR/libempodbccl.so | cut -d' ' -f1`
+  fi
+  echo "$ac_t""`echo $ODBC_LIBS | sed -e 's!.*/!!'`" 1>&6
 
-    if test -z "$PDO_FREETDS_INSTALLATION_DIR"; then
-      { echo "configure: error: Cannot find FreeTDS in known installation directories" 1>&2; exit 1; }
-    fi
+  fi
+fi
 
-  elif test "$PHP_PDO_DBLIB" != "no"; then
+if test -z "$ODBC_TYPE"; then
 
-    if test -f $PHP_PDO_DBLIB/include/sybdb.h; then
-      PDO_FREETDS_INSTALLATION_DIR=$PHP_PDO_DBLIB
-      PDO_FREETDS_INCLUDE_DIR=$PHP_PDO_DBLIB/include
-    elif test -f $PHP_PDO_DBLIB/include/freetds/sybdb.h; then
-      PDO_FREETDS_INSTALLATION_DIR=$PHP_PDO_DBLIB
-      PDO_FREETDS_INCLUDE_DIR=$PHP_PDO_DBLIB/include/freetds
+php_with_empress_bcs=no
+
+
+# Check whether --with-empress-bcs or --without-empress-bcs was given.
+if test "${with_empress_bcs+set}" = set; then
+  withval="$with_empress_bcs"
+  PHP_EMPRESS_BCS=$withval
+else
+  
+  PHP_EMPRESS_BCS=no
+  test "$PHP_ENABLE_ALL" && PHP_EMPRESS_BCS=$PHP_ENABLE_ALL
+
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_EMPRESS_BCS in
+shared,*)
+  PHP_EMPRESS_BCS=`echo "$PHP_EMPRESS_BCS"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_EMPRESS_BCS=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+
+
+
+
+
+  if test "$PHP_EMPRESS_BCS" != "no"; then
+    echo $ac_n "checking for Empress local access support""... $ac_c" 1>&6
+echo "configure:66515: checking for Empress local access support" >&5
+    if test "$PHP_EMPRESS_BCS" = "yes"; then
+      ODBC_INCDIR=$EMPRESSPATH/include/odbc
+      ODBC_LIBDIR=$EMPRESSPATH/shlib
     else
-      { echo "configure: error: Directory $PHP_PDO_DBLIB is not a FreeTDS installation directory" 1>&2; exit 1; }
+      ODBC_INCDIR=$PHP_EMPRESS_BCS/include/odbc
+      ODBC_LIBDIR=$PHP_EMPRESS_BCS/shlib
     fi
-  fi  
+    CC="empocc -bcs";export CC;
+    LD="empocc -bcs";export LD;
+    ODBC_INCLUDE=-I$ODBC_INCDIR
+    ODBC_LFLAGS=-L$ODBC_LIBDIR
+    LIST=`empocc -listlines -bcs -o a a.c`
 
-  if test "x$PHP_LIBDIR" = "x" ; then
-    PHP_LIBDIR=lib
-  fi
+    NEWLIST=
+    for I in $LIST
+    do
+      case $I in
+        $EMPRESSPATH/odbccl/lib/* | \
+        $EMPRESSPATH/rdbms/lib/* | \
+        $EMPRESSPATH/common/lib/*)
+              NEWLIST="$NEWLIST $I"
+              ;;
+      esac
+    done
+    ODBC_LIBS="-lempphpbcs -lms -lmscfg -lbasic -lbasic_os -lnlscstab -lnlsmsgtab -lm -ldl -lcrypt"
+    ODBC_TYPE=empress-bcs
+    cat >> confdefs.h <<\EOF
+#define HAVE_EMPRESS 1
+EOF
 
-  if test ! -r "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR/libsybdb.a" && test ! -r "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR/libsybdb.so"; then
-     { echo "configure: error: Could not find $PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR/libsybdb.a|so" 1>&2; exit 1; }
+    echo "$ac_t""$ext_output" 1>&6
+    
+  echo $ac_n "checking Empress local access library file""... $ac_c" 1>&6
+echo "configure:66549: checking Empress local access library file" >&5
+  ODBCBCS_LIBS=`echo $ODBC_LIBDIR/libempodbcbcs.a | cut -d' ' -f1`
+  if test ! -f $ODBCBCS_LIBS; then
+    ODBCBCS_LIBS=`echo $ODBC_LIBDIR/libempodbcbcs.a | cut -d' ' -f1`
   fi
+  echo "$ac_t""`echo $ODBCBCS_LIBS | sed -e 's!.*/!!'`" 1>&6
 
-  
-  if test "$PDO_FREETDS_INCLUDE_DIR" != "/usr/include"; then
-    
-  if test -z "$PDO_FREETDS_INCLUDE_DIR" || echo "$PDO_FREETDS_INCLUDE_DIR" | grep '^/' >/dev/null ; then
-    ai_p=$PDO_FREETDS_INCLUDE_DIR
-  else
-    
-    ep_dir="`echo $PDO_FREETDS_INCLUDE_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PDO_FREETDS_INCLUDE_DIR\"`"
   fi
+fi
 
-    
+if test -z "$ODBC_TYPE"; then
+
+php_with_birdstep=no
+
+
+# Check whether --with-birdstep or --without-birdstep was given.
+if test "${with_birdstep+set}" = set; then
+  withval="$with_birdstep"
+  PHP_BIRDSTEP=$withval
+else
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  PHP_BIRDSTEP=no
+  test "$PHP_ENABLE_ALL" && PHP_BIRDSTEP=$PHP_ENABLE_ALL
+
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_BIRDSTEP in
+shared,*)
+  PHP_BIRDSTEP=`echo "$PHP_BIRDSTEP"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_BIRDSTEP=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+
+
+
+
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
+  if test "$PHP_BIRDSTEP" != "no"; then
+    echo $ac_n "checking for Birdstep support""... $ac_c" 1>&6
+echo "configure:66605: checking for Birdstep support" >&5
+    if test "$PHP_BIRDSTEP" = "yes"; then
+        ODBC_INCDIR=/usr/local/birdstep/include
+        ODBC_LIBDIR=/usr/local/birdstep/lib
+    else
+        ODBC_INCDIR=$PHP_BIRDSTEP/include
+        ODBC_LIBDIR=$PHP_BIRDSTEP/$PHP_LIBDIR
+    fi
+   
+    case $host_alias in
+      *aix*)
+        cat >> confdefs.h <<\EOF
+#define AIX 1
+EOF
+;;
+      *hpux*)
+        cat >> confdefs.h <<\EOF
+#define HPUX 1
+EOF
+;;
+      *linux*)
+        cat >> confdefs.h <<\EOF
+#define LINUX 1
+EOF
+;;
+      *qnx*)
+        cat >> confdefs.h <<\EOF
+#define NEUTRINO 1
+EOF
+;;
+      i?86-*-solaris*)
+        cat >> confdefs.h <<\EOF
+#define ISOLARIS 1
+EOF
+;;
+      sparc-*-solaris*)
+        cat >> confdefs.h <<\EOF
+#define SOLARIS 1
+EOF
+;;
+      *unixware*)
+        cat >> confdefs.h <<\EOF
+#define UNIXWARE 1
+EOF
+;;
+    esac
+
+    ODBC_INCLUDE=-I$ODBC_INCDIR
+    ODBC_TYPE=birdstep
+    ODBC_LFLAGS=-L$ODBC_LIBDIR
+    ODBC_LIBS="-lCadm -lCdict -lCenc -lCrdm -lCrpc -lCrdbc -lCrm -lCuapi -lutil"
+
+    if test -f "$ODBC_LIBDIR/libCrdbc32.$SHLIB_SUFFIX_NAME"; then
+      ODBC_LIBS="-lCrdbc32 -lCadm32 -lCncp32 -lCrm32 -lCsql32 -lCdict32 -lCrdm32 -lCrpc32 -lutil"
+    elif test -f "$ODBC_LIBDIR/libCrdbc.$SHLIB_SUFFIX_NAME"; then
+      ODBC_LIBS="-lCrdbc -lCadm -lCncp -lCrm -lCsql -lCdict -lCrdm -lCrpc -lutil"
+    fi
+
+    cat >> confdefs.h <<\EOF
+#define HAVE_BIRDSTEP 1
+EOF
 
+    echo "$ac_t""$ext_output" 1>&6
   fi
+fi
+
+if test -z "$ODBC_TYPE"; then
+
+php_with_custom_odbc=no
+
 
+# Check whether --with-custom-odbc or --without-custom-odbc was given.
+if test "${with_custom_odbc+set}" = set; then
+  withval="$with_custom_odbc"
+  PHP_CUSTOM_ODBC=$withval
+else
   
+  PHP_CUSTOM_ODBC=no
+  test "$PHP_ENABLE_ALL" && PHP_CUSTOM_ODBC=$PHP_ENABLE_ALL
 
-  if test "$ext_shared" = "yes"; then
-    PDO_DBLIB_SHARED_LIBADD="-lsybdb $PDO_DBLIB_SHARED_LIBADD"
-    if test -n "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR"; then
-      
-  if test "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" || echo "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR\"`"
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_CUSTOM_ODBC in
+shared,*)
+  PHP_CUSTOM_ODBC=`echo "$PHP_CUSTOM_ODBC"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_CUSTOM_ODBC=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+
+
+
+
+
+  if test "$PHP_CUSTOM_ODBC" != "no"; then
+    echo $ac_n "checking for a custom ODBC support""... $ac_c" 1>&6
+echo "configure:66717: checking for a custom ODBC support" >&5
+    if test "$PHP_CUSTOM_ODBC" = "yes"; then
+      PHP_CUSTOM_ODBC=/usr/local
+    fi
+    ODBC_INCDIR=$PHP_CUSTOM_ODBC/include
+    ODBC_LIBDIR=$PHP_CUSTOM_ODBC/$PHP_LIBDIR
+    ODBC_LFLAGS=-L$ODBC_LIBDIR
+    ODBC_INCLUDE=-I$ODBC_INCDIR
+    ODBC_LIBS=$CUSTOM_ODBC_LIBS
+    ODBC_TYPE=custom-odbc
+    cat >> confdefs.h <<\EOF
+#define HAVE_CODBC 1
+EOF
+
+    echo "$ac_t""$ext_ouput" 1>&6
   fi
+fi
 
-    
-      if test "$ext_shared" = "yes"; then
-        PDO_DBLIB_SHARED_LIBADD="-L$ai_p $PDO_DBLIB_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && PDO_DBLIB_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_DBLIB_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+if test -z "$ODBC_TYPE"; then
+
+php_with_iodbc=no
+
+
+# Check whether --with-iodbc or --without-iodbc was given.
+if test "${with_iodbc+set}" = set; then
+  withval="$with_iodbc"
+  PHP_IODBC=$withval
+else
   
-  fi
+  PHP_IODBC=no
+  test "$PHP_ENABLE_ALL" && PHP_IODBC=$PHP_ENABLE_ALL
+
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_IODBC in
+shared,*)
+  PHP_IODBC=`echo "$PHP_IODBC"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_IODBC=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+
 
 
-      fi
-    
-  fi
 
+
+  if test "$PHP_IODBC" != "no"; then
+    echo $ac_n "checking for iODBC support""... $ac_c" 1>&6
+echo "configure:66781: checking for iODBC support" >&5
+    if test "$PHP_IODBC" = "yes"; then
+      PHP_IODBC=/usr/local
     fi
-  else
     
 
-  if test -n "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR"; then
+  if test -n "$PHP_IODBC/$PHP_LIBDIR"; then
     
-  if test "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  if test "$PHP_IODBC/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_IODBC/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" || echo "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR
+  if test -z "$PHP_IODBC/$PHP_LIBDIR" || echo "$PHP_IODBC/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_IODBC/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $PHP_IODBC/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$PHP_IODBC/$PHP_LIBDIR\"`"
   fi
 
     
@@ -66809,401 +66820,301 @@ if test "$PHP_PDO_DBLIB" != "no"; then
   fi
   
   
-  case sybdb in
+  case iodbc in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lsybdb $LIBS" 
+      LIBS="-liodbc $LIBS" 
    ;;
   esac
 
 
 
 
+    
+  if test "$PHP_IODBC/include" != "/usr/include"; then
+    
+  if test -z "$PHP_IODBC/include" || echo "$PHP_IODBC/include" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_IODBC/include
+  else
+    
+    ep_dir="`echo $PHP_IODBC/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PHP_IODBC/include\"`"
   fi
 
-
-
-  
     
-  echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:66830: checking for PDO includes" >&5
-if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
   
-    echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:66836: checking for PDO includes" >&5
-    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
-      pdo_inc_path=$abs_srcdir/ext
-    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
-      pdo_inc_path=$abs_srcdir/ext
-    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
-      pdo_inc_path=$prefix/include/php/ext
-    fi
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-fi
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test "1"; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-echo "$ac_t""$pdo_inc_path" 1>&6
-  if test -n "$pdo_inc_path"; then
-:
-  else
-{ echo "configure: error: Cannot find php_pdo_driver.h." 1>&2; exit 1; }
   fi
 
-  
+    ODBC_TYPE=iodbc
+    ODBC_INCLUDE=-I$PHP_IODBC/include
+    ODBC_LFLAGS=-L$PHP_IODBC/$PHP_LIBDIR
+    ODBC_LIBS=-liodbc
+    cat >> confdefs.h <<\EOF
+#define HAVE_IODBC 1
+EOF
 
-  PDO_DBLIB_DEFS="-DPDO_DBLIB_FLAVOUR=\\\"freetds\\\""
-  
-  ext_builddir=ext/pdo_dblib
-  ext_srcdir=$abs_srcdir/ext/pdo_dblib
+    cat >> confdefs.h <<\EOF
+#define HAVE_ODBC2 1
+EOF
 
-  ac_extra=`echo "-I$pdo_inc_path $PDO_DBLIB_DEFS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
+    echo "$ac_t""$ext_output" 1>&6
+  fi
+fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_PDO_DBLIB_SHARED=no
-    
-  
-  case ext/pdo_dblib in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_dblib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_dblib/"; ac_bdir="ext/pdo_dblib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
+if test -z "$ODBC_TYPE"; then
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+php_with_esoob=no
 
 
-  old_IFS=$IFS
-  for ac_src in pdo_dblib.c dblib_driver.c dblib_stmt.c; do
+# Check whether --with-esoob or --without-esoob was given.
+if test "${with_esoob+set}" = set; then
+  withval="$with_esoob"
+  PHP_ESOOB=$withval
+else
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+  PHP_ESOOB=no
+  test "$PHP_ENABLE_ALL" && PHP_ESOOB=$PHP_ENABLE_ALL
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+fi
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
 
 
-    EXT_STATIC="$EXT_STATIC pdo_dblib"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_dblib"
-    fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_PDO_DBLIB_SHARED=yes
-      
-  case ext/pdo_dblib in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_dblib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_dblib/"; ac_bdir="ext/pdo_dblib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_ESOOB in
+shared,*)
+  PHP_ESOOB=`echo "$PHP_ESOOB"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_ESOOB=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
 
 
-  old_IFS=$IFS
-  for ac_src in pdo_dblib.c dblib_driver.c dblib_stmt.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_pdo_dblib="$shared_objects_pdo_dblib $ac_bdir$ac_obj.lo"
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
 
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_dblib.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_dblib) $(PHPPDO_DBLIB_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_dblib.so '$ext_builddir'/phppdo_dblib.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_dblib) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO_DBLIB, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_dblib) $(PHPPDO_DBLIB_SHARED_LIBADD)'
-      ;;
-  esac
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_dblib.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_dblib.$suffix"
+  if test "$PHP_ESOOB" != "no"; then
+    echo $ac_n "checking for Easysoft ODBC-ODBC Bridge support""... $ac_c" 1>&6
+echo "configure:66927: checking for Easysoft ODBC-ODBC Bridge support" >&5
+    if test "$PHP_ESOOB" = "yes"; then
+      PHP_ESOOB=/usr/local/easysoft/oob/client
+    fi
+    ODBC_INCDIR=$PHP_ESOOB/include
+    ODBC_LIBDIR=$PHP_ESOOB/$PHP_LIBDIR
+    ODBC_LFLAGS=-L$ODBC_LIBDIR
+    ODBC_INCLUDE=-I$ODBC_INCDIR
+    ODBC_LIBS=-lesoobclient
+    ODBC_TYPE=esoob
+    cat >> confdefs.h <<\EOF
+#define HAVE_ESOOB 1
+EOF
+
+    echo "$ac_t""$ext_output" 1>&6
   fi
+fi
+
+if test -z "$ODBC_TYPE"; then
+
+php_with_unixodbc=no
+
+
+# Check whether --with-unixODBC or --without-unixODBC was given.
+if test "${with_unixODBC+set}" = set; then
+  withval="$with_unixODBC"
+  PHP_UNIXODBC=$withval
+else
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_dblib"
+  PHP_UNIXODBC=no
+  test "$PHP_ENABLE_ALL" && PHP_UNIXODBC=$PHP_ENABLE_ALL
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phppdo_dblib.$suffix: $ext_builddir/phppdo_dblib.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_dblib.$suffix \$(phplibdir)
+fi
 
-$ext_builddir/phppdo_dblib.$suffix: \$(shared_objects_pdo_dblib) \$(PHPPDO_DBLIB_SHARED_DEPENDENCIES)
-	$link_cmd
 
-EOF
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_UNIXODBC in
+shared,*)
+  PHP_UNIXODBC=`echo "$PHP_UNIXODBC"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_UNIXODBC=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_dblib.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_dblib) $(PDO_DBLIB_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_dblib.so '$ext_builddir'/pdo_dblib.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_dblib) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO_DBLIB, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_dblib) $(PDO_DBLIB_SHARED_LIBADD)'
-      ;;
-  esac
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_dblib.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_dblib.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_dblib"
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/pdo_dblib.$suffix: $ext_builddir/pdo_dblib.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_dblib.$suffix \$(phplibdir)
 
-$ext_builddir/pdo_dblib.$suffix: \$(shared_objects_pdo_dblib) \$(PDO_DBLIB_SHARED_DEPENDENCIES)
-	$link_cmd
 
-EOF
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_PDO_DBLIB 1
-EOF
 
+
+  if test "$PHP_UNIXODBC" != "no"; then
+    echo $ac_n "checking for unixODBC support""... $ac_c" 1>&6
+echo "configure:66991: checking for unixODBC support" >&5
+    if test "$PHP_UNIXODBC" = "yes"; then
+      PHP_UNIXODBC=/usr/local
     fi
+    ODBC_INCDIR=$PHP_UNIXODBC/include
+    ODBC_LIBDIR=$PHP_UNIXODBC/$PHP_LIBDIR
+    ODBC_LFLAGS=-L$ODBC_LIBDIR
+    ODBC_INCLUDE=-I$ODBC_INCDIR
+    ODBC_LIBS=-lodbc
+    ODBC_TYPE=unixODBC
+    
+if ! test -f "$ODBC_INCDIR/sqlext.h"; then
+  { echo "configure: error: ODBC header file '$ODBC_INCDIR/sqlext.h' not found!" 1>&2; exit 1; }
+fi
+
+    cat >> confdefs.h <<\EOF
+#define HAVE_UNIXODBC 1
+EOF
+
+    echo "$ac_t""$ext_output" 1>&6
   fi
+fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_PDO_DBLIB_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
-  
-  case ext/pdo_dblib in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_dblib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_dblib/"; ac_bdir="ext/pdo_dblib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
+if test -z "$ODBC_TYPE"; then
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+php_with_dbmaker=no
 
 
-  old_IFS=$IFS
-  for ac_src in pdo_dblib.c dblib_driver.c dblib_stmt.c; do
+# Check whether --with-dbmaker or --without-dbmaker was given.
+if test "${with_dbmaker+set}" = set; then
+  withval="$with_dbmaker"
+  PHP_DBMAKER=$withval
+else
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+  PHP_DBMAKER=no
+  test "$PHP_ENABLE_ALL" && PHP_DBMAKER=$PHP_ENABLE_ALL
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+fi
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
 
 
-        EXT_STATIC="$EXT_STATIC pdo_dblib"
-        ;;
-      *)
-        
-  
-  case ext/pdo_dblib in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_dblib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_dblib/"; ac_bdir="ext/pdo_dblib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_DBMAKER in
+shared,*)
+  PHP_DBMAKER=`echo "$PHP_DBMAKER"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_DBMAKER=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
 
 
-  old_IFS=$IFS
-  for ac_src in pdo_dblib.c dblib_driver.c dblib_stmt.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
 
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_dblib"
-  fi
-  
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
 
+  if test "$PHP_DBMAKER" != "no"; then
+    echo $ac_n "checking for DBMaker support""... $ac_c" 1>&6
+echo "configure:67060: checking for DBMaker support" >&5
+    if test "$PHP_DBMAKER" = "yes"; then
+      # find dbmaker's home directory
+      DBMAKER_HOME=`grep "^dbmaker:" /etc/passwd | $AWK -F: '{print $6}'`
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=pdo_dblib
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+      # check DBMaker version (from 5.0 to 2.0)
+      DBMAKER_VERSION=5.0
 
-  fi
+      while test ! -d $DBMAKER_HOME/$DBMAKER_VERSION -a "$DBMAKER_VERSION" != "2.9"; do
+        DM_VER=`echo $DBMAKER_VERSION | sed -e 's/\.//' | $AWK '{ print $1-1;}'`
+        MAJOR_V=`echo $DM_VER | $AWK '{ print $1/10; }'  | $AWK -F. '{ print $1; }'`
+        MINOR_V=`echo $DM_VER | $AWK '{ print $1%10; }'`
+        DBMAKER_VERSION=$MAJOR_V.$MINOR_V
+      done
 
-  echo $ac_n "checking for dnet_addr in -ldnet_stub""... $ac_c" 1>&6
-echo "configure:67150: checking for dnet_addr in -ldnet_stub" >&5
-ac_lib_var=`echo dnet_stub'_'dnet_addr | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-ldnet_stub  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 67158 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char dnet_addr();
+      if test "$DBMAKER_VERSION" = "2.9"; then
+        PHP_DBMAKER=$DBMAKER_HOME
+      else
+        PHP_DBMAKER=$DBMAKER_HOME/$DBMAKER_VERSION
+      fi
+    fi
 
-int main() {
-dnet_addr()
-; return 0; }
+    ODBC_INCDIR=$PHP_DBMAKER/include
+    ODBC_LIBDIR=$PHP_DBMAKER/$PHP_LIBDIR
+    ODBC_INCLUDE=-I$ODBC_INCDIR
+    ODBC_LFLAGS=-L$ODBC_LIBDIR
+    ODBC_INCLUDE=-I$ODBC_INCDIR
+    ODBC_LIBS="-ldmapic -lc"
+    ODBC_TYPE=dbmaker
+
+    cat >> confdefs.h <<\EOF
+#define HAVE_DBMAKER 1
 EOF
-if { (eval echo configure:67169: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-   
 
-  if test "$ext_shared" = "yes"; then
-    PDO_DBLIB_SHARED_LIBADD="-ldnet_stub $PDO_DBLIB_SHARED_LIBADD"
-    if test -n ""; then
+    if test "$ext_shared" = "yes"; then
+      echo "$ac_t""yes (shared)" 1>&6
+      ODBC_LIBS="-ldmapic -lc -lm"
+      ODBC_SHARED="odbc.la"
+    else
+      echo "$ac_t""yes (static)" 1>&6
       
-  if test "" != "/usr/$PHP_LIBDIR" && test "" != "/usr/lib"; then
+
+  if test -n "$ODBC_LIBDIR"; then
     
-  if test -z "" || echo "" | grep '^/' >/dev/null ; then
-    ai_p=
+  if test "$ODBC_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ODBC_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$ODBC_LIBDIR" || echo "$ODBC_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$ODBC_LIBDIR
   else
     
-    ep_dir="`echo |$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $ODBC_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"\"`"
+    ai_p="$ep_realdir/`basename \"$ODBC_LIBDIR\"`"
   fi
 
     
-      if test "$ext_shared" = "yes"; then
-        PDO_DBLIB_SHARED_LIBADD="-L$ai_p $PDO_DBLIB_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && PDO_DBLIB_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_DBLIB_SHARED_LIBADD"
-      else
-        
+      
   
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
@@ -67219,241 +67130,124 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
   fi
 
 
-      fi
     
   fi
 
-    fi
-  else
-    
+  fi
+  
+  
+  case dmapic in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-ldmapic $LIBS" 
+   ;;
+  esac
 
-  if test -n ""; then
-    
-  if test "" != "/usr/$PHP_LIBDIR" && test "" != "/usr/lib"; then
+
+
+
+      
+  if test "$ODBC_INCDIR" != "/usr/include"; then
     
-  if test -z "" || echo "" | grep '^/' >/dev/null ; then
-    ai_p=
+  if test -z "$ODBC_INCDIR" || echo "$ODBC_INCDIR" | grep '^/' >/dev/null ; then
+    ai_p=$ODBC_INCDIR
   else
     
-    ep_dir="`echo |$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $ODBC_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"\"`"
+    ai_p="$ep_realdir/`basename \"$ODBC_INCDIR\"`"
   fi
 
     
-      
-  
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
     
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
   fi
 
+  fi
 
-    
+      ODBC_STATIC="libphpext_odbc.la"
+    fi
   fi
+fi
 
+if test -n "$ODBC_TYPE"; then
+  if test "$ODBC_TYPE" != "dbmaker"; then
+    
+  for ac_i in $ODBC_LFLAGS $ODBC_LIBS; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        ODBC_SHARED_LIBADD="$ODBC_SHARED_LIBADD -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
   fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        ODBC_SHARED_LIBADD="$ODBC_SHARED_LIBADD -l$ac_ii" 
+    else
+      
   
-  case dnet_stub in
+  case $ac_ii in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-ldnet_stub $LIBS" 
+      LIBS="$LIBS -l$ac_ii" 
    ;;
   esac
 
 
+    fi
+   ;;
+  esac
 
 
-  fi
-
-
-        cat >> confdefs.h <<\EOF
-#define HAVE_LIBDNET_STUB 1
-EOF
-
-     
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-  cat >> confdefs.h <<\EOF
-#define HAVE_PDO_DBLIB 1
-EOF
-
-  cat >> confdefs.h <<\EOF
-#define HAVE_FREETDS 1
-EOF
-
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_DBLIB_SHARED_LIBADD"
-
-
-  
-    
-  am_i_shared=$PHP_PDO_DBLIB_SHARED
-  is_it_shared=$PHP_PDO_SHARED
-  is_it_enabled=$PHP_PDO
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension pdo_dblib to build statically, but it
-depends on extension pdo, which you've configured to build shared.
-You either need to build pdo_dblib shared or build pdo statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension pdo_dblib, which depends on extension pdo,
-but you've either not enabled pdo, or have disabled it.
-" 1>&2; exit 1; }
-  fi
-  
-  
-fi
-
-
-
-php_with_pdo_firebird=no
-
-echo $ac_n "checking for Firebird support for PDO""... $ac_c" 1>&6
-echo "configure:67330: checking for Firebird support for PDO" >&5
-# Check whether --with-pdo-firebird or --without-pdo-firebird was given.
-if test "${with_pdo_firebird+set}" = set; then
-  withval="$with_pdo_firebird"
-  PHP_PDO_FIREBIRD=$withval
-else
-  
-  PHP_PDO_FIREBIRD=no
-  test "$PHP_ENABLE_ALL" && PHP_PDO_FIREBIRD=$PHP_ENABLE_ALL
-
-fi
-
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_PDO_FIREBIRD in
-shared,*)
-  PHP_PDO_FIREBIRD=`echo "$PHP_PDO_FIREBIRD"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_PDO_FIREBIRD=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test "$PHP_PDO_FIREBIRD" != "no"; then
-
-  if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
-    { echo "configure: error: PDO is not enabled! Add --enable-pdo to your configure line." 1>&2; exit 1; }
-  fi
-
-  if test "$PHP_PDO_FIREBIRD" = "yes"; then
-    FIREBIRD_INCDIR=
-    FIREBIRD_LIBDIR=
-    FIREBIRD_LIBDIR_FLAG=
-  else
-    FIREBIRD_INCDIR=$PHP_PDO_FIREBIRD/include
-    FIREBIRD_LIBDIR=$PHP_PDO_FIREBIRD/$PHP_LIBDIR
-    FIREBIRD_LIBDIR_FLAG=-L$FIREBIRD_LIBDIR
-  fi
-
-  
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-    $FIREBIRD_LIBDIR_FLAG
-  "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+        ODBC_SHARED_LIBADD="-L$ai_p $ODBC_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && ODBC_SHARED_LIBADD="$ld_runpath_switch$ai_p $ODBC_SHARED_LIBADD"
       else
         
   
@@ -67479,652 +67273,184 @@ if test "$PHP_PDO_FIREBIRD" != "no"; the
     esac
   done
 
-  echo $ac_n "checking for isc_detach_database in -lfbclient""... $ac_c" 1>&6
-echo "configure:67484: checking for isc_detach_database in -lfbclient" >&5
-ac_lib_var=`echo fbclient'_'isc_detach_database | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lfbclient  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 67492 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char isc_detach_database();
+    if test "$ODBC_TYPE" != "birdstep" && test "$ODBC_TYPE" != "solid"; then
+      cat >> confdefs.h <<\EOF
+#define HAVE_SQLDATASOURCES 1
+EOF
 
-int main() {
-isc_detach_database()
-; return 0; }
+    fi
+  fi
+  
+  cat >> confdefs.h <<\EOF
+#define HAVE_UODBC 1
 EOF
-if { (eval echo configure:67503: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
   
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-    FIREBIRD_LIBNAME=fbclient
+  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_SHARED_LIBADD"
+
   
+  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_INCDIR"
+
   
-else
-  echo "$ac_t""no" 1>&6
+  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_LIBDIR"
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_fbclient_isc_detach_database
-    
-    
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-      $FIREBIRD_LIBDIR_FLAG
-    "
   
-  save_ext_shared=$ext_shared
-  ext_shared=yes
   
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
+  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_INCLUDE"
+
   
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+
   
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_LIBS"
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
+
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_LFLAGS"
 
+  
 
-    fi
-   ;;
-  esac
+  
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_TYPE"
 
+  
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
 
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
   
+  ext_builddir=ext/odbc
+  ext_srcdir=$abs_srcdir/ext/odbc
+
+  ac_extra=`echo "$ODBC_INCLUDE"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_ODBC_SHARED=no
+    
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  case ext/odbc in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/odbc/"; ac_bdir="ext/odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  fi
 
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-      fi
-    
-  fi
 
-    ;;
-    esac
-  done
+  old_IFS=$IFS
+  for ac_src in php_odbc.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-  echo $ac_n "checking for isc_detach_database in -lgds""... $ac_c" 1>&6
-echo "configure:67630: checking for isc_detach_database in -lgds" >&5
-ac_lib_var=`echo gds'_'isc_detach_database | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lgds  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 67638 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char isc_detach_database();
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-int main() {
-isc_detach_database()
-; return 0; }
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:67649: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  done
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-      FIREBIRD_LIBNAME=gds
-    
-  
-else
-  echo "$ac_t""no" 1>&6
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_gds_isc_detach_database
-    
+    EXT_STATIC="$EXT_STATIC odbc"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC odbc"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_ODBC_SHARED=yes
       
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-        $FIREBIRD_LIBDIR_FLAG
-      "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
+  case ext/odbc in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/odbc/"; ac_bdir="ext/odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in php_odbc.c; do
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
+      shared_objects_odbc="$shared_objects_odbc $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-    fi
-   ;;
-  esac
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpodbc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_odbc) $(PHPODBC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpodbc.so '$ext_builddir'/phpodbc.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_odbc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPODBC, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_odbc) $(PHPODBC_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpodbc.$suffix"
   else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpodbc.$suffix"
   fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-      fi
-    
-  fi
-
-    ;;
-    esac
-  done
-
-  echo $ac_n "checking for isc_detach_database in -lib_util""... $ac_c" 1>&6
-echo "configure:67776: checking for isc_detach_database in -lib_util" >&5
-ac_lib_var=`echo ib_util'_'isc_detach_database | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lib_util  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 67784 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char isc_detach_database();
-
-int main() {
-isc_detach_database()
-; return 0; }
-EOF
-if { (eval echo configure:67795: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-        FIREBIRD_LIBNAME=ib_util
-      
-  
-else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_ib_util_isc_detach_database
-    
-        { echo "configure: error: libfbclient, libgds or libib_util not found! Check config.log for more information." 1>&2; exit 1; }
-      
-  
-fi
-
-    
-  
-fi
-
-  
-  
-fi
-
- 
-  
-  echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:67840: checking for PDO includes" >&5
-if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-    echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:67846: checking for PDO includes" >&5
-    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
-      pdo_inc_path=$abs_srcdir/ext
-    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
-      pdo_inc_path=$abs_srcdir/ext
-    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
-      pdo_inc_path=$prefix/include/php/ext
-    fi
-  
-fi
-
-echo "$ac_t""$pdo_inc_path" 1>&6
-  if test -n "$pdo_inc_path"; then
-:
-  else
-{ echo "configure: error: Cannot find php_pdo_driver.h." 1>&2; exit 1; }
-  fi
-
-
-  
-
-  if test "$ext_shared" = "yes"; then
-    PDO_FIREBIRD_SHARED_LIBADD="-l$FIREBIRD_LIBNAME $PDO_FIREBIRD_SHARED_LIBADD"
-    if test -n "$FIREBIRD_LIBDIR"; then
-      
-  if test "$FIREBIRD_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$FIREBIRD_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$FIREBIRD_LIBDIR" || echo "$FIREBIRD_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$FIREBIRD_LIBDIR
-  else
-    
-    ep_dir="`echo $FIREBIRD_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$FIREBIRD_LIBDIR\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        PDO_FIREBIRD_SHARED_LIBADD="-L$ai_p $PDO_FIREBIRD_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && PDO_FIREBIRD_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_FIREBIRD_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-      fi
-    
-  fi
-
-    fi
-  else
-    
-
-  if test -n "$FIREBIRD_LIBDIR"; then
-    
-  if test "$FIREBIRD_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$FIREBIRD_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$FIREBIRD_LIBDIR" || echo "$FIREBIRD_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$FIREBIRD_LIBDIR
-  else
-    
-    ep_dir="`echo $FIREBIRD_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$FIREBIRD_LIBDIR\"`"
-  fi
-
-    
-      
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-    
-  fi
-
-  fi
-  
-  
-  case $FIREBIRD_LIBNAME in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-l$FIREBIRD_LIBNAME $LIBS" 
-   ;;
-  esac
-
-
-
-
-  fi
-
-
-  
-  if test "$FIREBIRD_INCDIR" != "/usr/include"; then
-    
-  if test -z "$FIREBIRD_INCDIR" || echo "$FIREBIRD_INCDIR" | grep '^/' >/dev/null ; then
-    ai_p=$FIREBIRD_INCDIR
-  else
-    
-    ep_dir="`echo $FIREBIRD_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$FIREBIRD_INCDIR\"`"
-  fi
-
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
-
-  cat >> confdefs.h <<\EOF
-#define HAVE_PDO_FIREBIRD 1
-EOF
-
-  
-  ext_builddir=ext/pdo_firebird
-  ext_srcdir=$abs_srcdir/ext/pdo_firebird
-
-  ac_extra=`echo "-I$pdo_inc_path"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
-
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_PDO_FIREBIRD_SHARED=no
-    
-  
-  case ext/pdo_firebird in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_firebird"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_firebird/"; ac_bdir="ext/pdo_firebird/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in pdo_firebird.c firebird_driver.c firebird_statement.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-    EXT_STATIC="$EXT_STATIC pdo_firebird"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_firebird"
-    fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_PDO_FIREBIRD_SHARED=yes
-      
-  case ext/pdo_firebird in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_firebird"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_firebird/"; ac_bdir="ext/pdo_firebird/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
-
-
-  old_IFS=$IFS
-  for ac_src in pdo_firebird.c firebird_driver.c firebird_statement.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_pdo_firebird="$shared_objects_pdo_firebird $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_firebird.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_firebird) $(PHPPDO_FIREBIRD_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_firebird.so '$ext_builddir'/phppdo_firebird.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_firebird) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO_FIREBIRD, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_firebird) $(PHPPDO_FIREBIRD_SHARED_LIBADD)'
-      ;;
-  esac
-
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_firebird.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_firebird.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_firebird"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_odbc"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phppdo_firebird.$suffix: $ext_builddir/phppdo_firebird.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_firebird.$suffix \$(phplibdir)
+\$(phplibdir)/phpodbc.$suffix: $ext_builddir/phpodbc.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpodbc.$suffix \$(phplibdir)
 
-$ext_builddir/phppdo_firebird.$suffix: \$(shared_objects_pdo_firebird) \$(PHPPDO_FIREBIRD_SHARED_DEPENDENCIES)
+$ext_builddir/phpodbc.$suffix: \$(shared_objects_odbc) \$(PHPODBC_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -68137,31 +67463,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_firebird.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_firebird) $(PDO_FIREBIRD_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_firebird.so '$ext_builddir'/pdo_firebird.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/odbc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_odbc) $(ODBC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/odbc.so '$ext_builddir'/odbc.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_firebird) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO_FIREBIRD, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_odbc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(ODBC, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_firebird) $(PDO_FIREBIRD_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_odbc) $(ODBC_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_firebird.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/odbc.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_firebird.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/odbc.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_firebird"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_odbc"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/pdo_firebird.$suffix: $ext_builddir/pdo_firebird.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_firebird.$suffix \$(phplibdir)
+\$(phplibdir)/odbc.$suffix: $ext_builddir/odbc.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/odbc.$suffix \$(phplibdir)
 
-$ext_builddir/pdo_firebird.$suffix: \$(shared_objects_pdo_firebird) \$(PDO_FIREBIRD_SHARED_DEPENDENCIES)
+$ext_builddir/odbc.$suffix: \$(shared_objects_odbc) \$(ODBC_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -68169,22 +67495,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_PDO_FIREBIRD 1
+#define COMPILE_DL_ODBC 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_PDO_FIREBIRD_SHARED=no
+    PHP_ODBC_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/pdo_firebird in
+  case ext/odbc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_firebird"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_firebird/"; ac_bdir="ext/pdo_firebird/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/odbc/"; ac_bdir="ext/odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -68199,7 +67525,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in pdo_firebird.c firebird_driver.c firebird_statement.c; do
+  for ac_src in php_odbc.c; do
   
       IFS=.
       set $ac_src
@@ -68222,15 +67548,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC pdo_firebird"
+        EXT_STATIC="$EXT_STATIC odbc"
         ;;
       *)
         
   
-  case ext/pdo_firebird in
+  case ext/odbc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_firebird"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_firebird/"; ac_bdir="ext/pdo_firebird/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/odbc/"; ac_bdir="ext/odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -68245,7 +67571,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in pdo_firebird.c firebird_driver.c firebird_statement.c; do
+  for ac_src in php_odbc.c; do
   
       IFS=.
       set $ac_src
@@ -68270,7 +67596,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_firebird"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC odbc"
   fi
   
   
@@ -68279,50 +67605,28 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=pdo_firebird
+    PHP_PECL_EXTENSION=odbc
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_FIREBIRD_SHARED_LIBADD"
-
-  
-  am_i_shared=$PHP_PDO_FIREBIRD_SHARED
-  is_it_shared=$PHP_PDO_SHARED
-  is_it_enabled=$PHP_PDO
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension pdo_firebird to build statically, but it
-depends on extension pdo, which you've configured to build shared.
-You either need to build pdo_firebird shared or build pdo statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension pdo_firebird, which depends on extension pdo,
-but you've either not enabled pdo, or have disabled it.
-" 1>&2; exit 1; }
-  fi
-  
 fi
 
 
 
-php_with_pdo_mysql=no
+php_enable_pcntl=no
 
-echo $ac_n "checking for MySQL support for PDO""... $ac_c" 1>&6
-echo "configure:68318: checking for MySQL support for PDO" >&5
-# Check whether --with-pdo-mysql or --without-pdo-mysql was given.
-if test "${with_pdo_mysql+set}" = set; then
-  withval="$with_pdo_mysql"
-  PHP_PDO_MYSQL=$withval
+echo $ac_n "checking whether to enable pcntl support""... $ac_c" 1>&6
+echo "configure:67622: checking whether to enable pcntl support" >&5
+# Check whether --enable-pcntl or --disable-pcntl was given.
+if test "${enable_pcntl+set}" = set; then
+  enableval="$enable_pcntl"
+  PHP_PCNTL=$enableval
 else
   
-  PHP_PDO_MYSQL=no
-  test "$PHP_ENABLE_ALL" && PHP_PDO_MYSQL=$PHP_ENABLE_ALL
+  PHP_PCNTL=no
+  test "$PHP_ENABLE_ALL" && PHP_PCNTL=$PHP_ENABLE_ALL
 
 fi
 
@@ -68330,12 +67634,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_PDO_MYSQL in
+case $PHP_PCNTL in
 shared,*)
-  PHP_PDO_MYSQL=`echo "$PHP_PDO_MYSQL"|$SED 's/^shared,//'`
+  PHP_PCNTL=`echo "$PHP_PCNTL"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_PDO_MYSQL=yes
+  PHP_PCNTL=yes
   ;;
 no)
   ext_output=no
@@ -68354,1125 +67658,637 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
-if test -z "$PHP_ZLIB_DIR"; then
-  
-php_with_zlib_dir=no
-
-echo $ac_n "checking for the location of libz""... $ac_c" 1>&6
-echo "configure:68363: checking for the location of libz" >&5
-# Check whether --with-zlib-dir or --without-zlib-dir was given.
-if test "${with_zlib_dir+set}" = set; then
-  withval="$with_zlib_dir"
-  PHP_ZLIB_DIR=$withval
+if test "$PHP_PCNTL" != "no"; then
+  for ac_func in fork
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:67666: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
-  
-  PHP_ZLIB_DIR=no
-  
-
-fi
-
-
-ext_output=$PHP_ZLIB_DIR
-echo "$ac_t""$ext_output" 1>&6
+  cat > conftest.$ac_ext <<EOF
+#line 67671 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
 
+int main() {
 
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
 
+; return 0; }
+EOF
+if { (eval echo configure:67694: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=no"
+fi
+rm -f conftest*
 fi
 
-if test "$PHP_PDO_MYSQL" != "no"; then
-
-  if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
-    { echo "configure: error: PDO is not enabled! Add --enable-pdo to your configure line." 1>&2; exit 1; }
-  fi
-
-  
-
-  if test -f $PHP_PDO_MYSQL && test -x $PHP_PDO_MYSQL ; then
-    PDO_MYSQL_CONFIG=$PHP_PDO_MYSQL
-  elif test "$PHP_PDO_MYSQL" != "yes"; then
-    if test -d "$PHP_PDO_MYSQL" ; then
-      if test -x "$PHP_PDO_MYSQL/bin/mysql_config" ; then
-        PDO_MYSQL_CONFIG="$PHP_PDO_MYSQL/bin/mysql_config"
-      else
-        PDO_MYSQL_DIR="$PHP_PDO_MYSQL"
-      fi
-    fi
-  else
-    for i in /usr/local /usr ; do
-      if test -x "$i/bin/mysql_config" ; then
-        PDO_MYSQL_CONFIG="$i/bin/mysql_config"
-        break;
-      fi
-      if test -r $i/include/mysql/mysql.h || test -r $i/include/mysql.h ; then
-        PDO_MYSQL_DIR="$i"
-        break;
-      fi
-    done
-  fi
-
-  if test "$PHP_PDO_MYSQL" = "mysqlnd"; then
-        PHP_MYSQLND_ENABLED=yes
-    cat >> confdefs.h <<\EOF
-#define PDO_USE_MYSQLND 1
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
 EOF
-
-  else
-    cat >> confdefs.h <<\EOF
-#define HAVE_MYSQL 1
+  cat >> confdefs.h <<\EOF
+#define HAVE_FORK 1
 EOF
-
-
-    echo $ac_n "checking for mysql_config""... $ac_c" 1>&6
-echo "configure:68427: checking for mysql_config" >&5
-    if test -n "$PDO_MYSQL_CONFIG"; then
-      echo "$ac_t""$PDO_MYSQL_CONFIG" 1>&6
-      if test "x$SED" = "x"; then
-        # Extract the first word of "sed", so it can be a program name with args.
-set dummy sed; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:68434: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_path_SED'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  case "$SED" in
-  /*)
-  ac_cv_path_SED="$SED" # Let the user override the test with a path.
-  ;;
-  ?:/*)			 
-  ac_cv_path_SED="$SED" # Let the user override the test with a dos path.
-  ;;
-  *)
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do 
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_path_SED="$ac_dir/$ac_word"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
-  ;;
-esac
-fi
-SED="$ac_cv_path_SED"
-if test -n "$SED"; then
-  echo "$ac_t""$SED" 1>&6
+ 
 else
   echo "$ac_t""no" 1>&6
+{ echo "configure: error: pcntl: fork() not supported by this platform" 1>&2; exit 1; } 
 fi
+done
 
-      fi
-      if test "$enable_maintainer_zts" = "yes"; then
-        PDO_MYSQL_LIBNAME=mysqlclient_r
-        PDO_MYSQL_LIBS=`$PDO_MYSQL_CONFIG --libs_r | $SED -e "s/'//g"`
-      else
-        PDO_MYSQL_LIBNAME=mysqlclient
-        PDO_MYSQL_LIBS=`$PDO_MYSQL_CONFIG --libs | $SED -e "s/'//g"`
-      fi
-      PDO_MYSQL_INCLUDE=`$PDO_MYSQL_CONFIG --cflags | $SED -e "s/'//g"`
-    elif test -n "$PDO_MYSQL_DIR"; then
-      echo "$ac_t""not found" 1>&6
-      echo $ac_n "checking for mysql install under $PDO_MYSQL_DIR""... $ac_c" 1>&6
-echo "configure:68478: checking for mysql install under $PDO_MYSQL_DIR" >&5
-      if test -r $PDO_MYSQL_DIR/include/mysql; then
-        PDO_MYSQL_INC_DIR=$PDO_MYSQL_DIR/include/mysql
-      else
-        PDO_MYSQL_INC_DIR=$PDO_MYSQL_DIR/include
-      fi
-      if test -r $PDO_MYSQL_DIR/$PHP_LIBDIR/mysql; then
-        PDO_MYSQL_LIB_DIR=$PDO_MYSQL_DIR/$PHP_LIBDIR/mysql
-      else
-        PDO_MYSQL_LIB_DIR=$PDO_MYSQL_DIR/$PHP_LIBDIR
-      fi
-
-      if test -r "$PDO_MYSQL_LIB_DIR"; then
-        echo "$ac_t""libs under $PDO_MYSQL_LIB_DIR; seems promising" 1>&6
-      else
-        echo "$ac_t""can not find it" 1>&6
-        { echo "configure: error: Unable to find your mysql installation" 1>&2; exit 1; }
-      fi
-
-      
-  if test "$PDO_MYSQL_INC_DIR" != "/usr/include"; then
-    
-  if test -z "$PDO_MYSQL_INC_DIR" || echo "$PDO_MYSQL_INC_DIR" | grep '^/' >/dev/null ; then
-    ai_p=$PDO_MYSQL_INC_DIR
-  else
-    
-    ep_dir="`echo $PDO_MYSQL_INC_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PDO_MYSQL_INC_DIR\"`"
-  fi
-
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
-
-      PDO_MYSQL_INCLUDE=-I$PDO_MYSQL_INC_DIR
-    else
-      echo "$ac_t""not found" 1>&6
-      { echo "configure: error: Unable to find your mysql installation" 1>&2; exit 1; }
-    fi
-
-    
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-      $PDO_MYSQL_LIBS
-    "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
+  for ac_func in waitpid
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:67725: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 67730 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
+int main() {
 
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
 
-    fi
-   ;;
-  esac
+; return 0; }
+EOF
+if { (eval echo configure:67753: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=no"
+fi
+rm -f conftest*
+fi
 
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
+EOF
+  cat >> confdefs.h <<\EOF
+#define HAVE_WAITPID 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+{ echo "configure: error: pcntl: fork() not supported by this platform" 1>&2; exit 1; } 
+fi
+done
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
+  for ac_func in sigaction
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:67784: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 67789 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
 
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
+int main() {
 
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
 
-      fi
-    
-  fi
+; return 0; }
+EOF
+if { (eval echo configure:67812: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=no"
+fi
+rm -f conftest*
+fi
 
-    ;;
-    esac
-  done
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
+EOF
+  cat >> confdefs.h <<\EOF
+#define HAVE_SIGACTION 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+{ echo "configure: error: pcntl: sigaction() not supported by this platform" 1>&2; exit 1; } 
+fi
+done
 
-  echo $ac_n "checking for mysql_query in -l$PDO_MYSQL_LIBNAME""... $ac_c" 1>&6
-echo "configure:68632: checking for mysql_query in -l$PDO_MYSQL_LIBNAME" >&5
-ac_lib_var=`echo $PDO_MYSQL_LIBNAME'_'mysql_query | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  for ac_func in getpriority setpriority wait3 sigprocmask sigwaitinfo sigtimedwait
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:67843: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  ac_save_LIBS="$LIBS"
-LIBS="-l$PDO_MYSQL_LIBNAME  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 68640 "configure"
+  cat > conftest.$ac_ext <<EOF
+#line 67848 "configure"
 #include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char mysql_query();
+char $ac_func();
 
 int main() {
-mysql_query()
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
+
 ; return 0; }
 EOF
-if { (eval echo configure:68651: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:67871: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+  eval "ac_cv_func_$ac_func=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
+  eval "ac_cv_func_$ac_func=no"
 fi
 rm -f conftest*
-LIBS="$ac_save_LIBS"
-
 fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
   echo "$ac_t""yes" 1>&6
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
   
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-      
-  for ac_i in $PDO_MYSQL_INCLUDE; do
-    case $ac_i in
-    -I*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/include"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
+  ext_builddir=ext/pcntl
+  ext_srcdir=$abs_srcdir/ext/pcntl
+
+  ac_extra=
 
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" != "cli"; then
+    PHP_PCNTL_SHARED=no
     
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  case ext/pcntl in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pcntl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pcntl/"; ac_bdir="ext/pcntl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
 
-    ;;
-    esac
-  done
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-      
-  for ac_i in $PDO_MYSQL_LIBS; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        PDO_MYSQL_SHARED_LIBADD="$PDO_MYSQL_SHARED_LIBADD -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
+  old_IFS=$IFS
+  for ac_src in pcntl.c php_signal.c; do
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        PDO_MYSQL_SHARED_LIBADD="$PDO_MYSQL_SHARED_LIBADD -l$ac_ii" 
-    else
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-    fi
-   ;;
-  esac
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+    EXT_STATIC="$EXT_STATIC pcntl"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC pcntl"
+    fi
   else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        PDO_MYSQL_SHARED_LIBADD="-L$ai_p $PDO_MYSQL_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && PDO_MYSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_MYSQL_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_PCNTL_SHARED=yes
+      
+  case ext/pcntl in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pcntl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pcntl/"; ac_bdir="ext/pcntl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  fi
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
 
 
-      fi
-    
-  fi
+  old_IFS=$IFS
+  for ac_src in pcntl.c php_signal.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_pcntl="$shared_objects_pcntl $ac_bdir$ac_obj.lo"
 
-    ;;
-    esac
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
   done
 
-    
-  
-else
-  echo "$ac_t""no" 1>&6
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_$PDO_MYSQL_LIBNAME_mysql_query
-    
-      if test "$PHP_ZLIB_DIR" != "no"; then
-        
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppcntl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcntl) $(PHPPCNTL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppcntl.so '$ext_builddir'/phppcntl.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcntl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPCNTL, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcntl) $(PHPPCNTL_SHARED_LIBADD)'
+      ;;
+  esac
 
-  if test "$ext_shared" = "yes"; then
-    PDO_MYSQL_SHARED_LIBADD="-lz $PDO_MYSQL_SHARED_LIBADD"
-    if test -n "$PHP_ZLIB_DIR"; then
-      
-  if test "$PHP_ZLIB_DIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR" != "/usr/lib"; then
-    
-  if test -z "$PHP_ZLIB_DIR" || echo "$PHP_ZLIB_DIR" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_ZLIB_DIR
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppcntl.$suffix"
   else
-    
-    ep_dir="`echo $PHP_ZLIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR\"`"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppcntl.$suffix"
   fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        PDO_MYSQL_SHARED_LIBADD="-L$ai_p $PDO_MYSQL_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && PDO_MYSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_MYSQL_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  fi
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pcntl"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phppcntl.$suffix: $ext_builddir/phppcntl.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phppcntl.$suffix \$(phplibdir)
 
+$ext_builddir/phppcntl.$suffix: \$(shared_objects_pcntl) \$(PHPPCNTL_SHARED_DEPENDENCIES)
+	$link_cmd
 
-      fi
-    
-  fi
+EOF
 
-    fi
-  else
-    
+          ;;
+        *)
+          
+  install_modules="install-modules"
 
-  if test -n "$PHP_ZLIB_DIR"; then
-    
-  if test "$PHP_ZLIB_DIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR" != "/usr/lib"; then
-    
-  if test -z "$PHP_ZLIB_DIR" || echo "$PHP_ZLIB_DIR" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_ZLIB_DIR
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pcntl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcntl) $(PCNTL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pcntl.so '$ext_builddir'/pcntl.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcntl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PCNTL, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcntl) $(PCNTL_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pcntl.$suffix"
   else
-    
-    ep_dir="`echo $PHP_ZLIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR\"`"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pcntl.$suffix"
   fi
-
-    
-      
   
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pcntl"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/pcntl.$suffix: $ext_builddir/pcntl.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/pcntl.$suffix \$(phplibdir)
 
+$ext_builddir/pcntl.$suffix: \$(shared_objects_pcntl) \$(PCNTL_SHARED_DEPENDENCIES)
+	$link_cmd
 
-    
-  fi
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_PCNTL 1
+EOF
 
+    fi
   fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" = "cli"; then
+    PHP_PCNTL_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
   
-  
-  case z in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lz $LIBS" 
-   ;;
+  case ext/pcntl in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pcntl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pcntl/"; ac_bdir="ext/pcntl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
 
+  old_IFS=$IFS
+  for ac_src in pcntl.c php_signal.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-  fi
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
 
+        EXT_STATIC="$EXT_STATIC pcntl"
+        ;;
+      *)
         
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-          -L$PHP_ZLIB_DIR/$PHP_LIBDIR -L$PDO_MYSQL_LIB_DIR 
-        "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
   
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
+  case ext/pcntl in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pcntl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pcntl/"; ac_bdir="ext/pcntl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pcntl.c php_signal.c; do
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-    fi
-   ;;
-  esac
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC pcntl"
   fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
   
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
   
-  fi
 
 
-      fi
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=pcntl
     
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
   fi
 
-    ;;
-    esac
-  done
+fi
 
-  echo $ac_n "checking for mysql_query in -l$PDO_MYSQL_LIBNAME""... $ac_c" 1>&6
-echo "configure:69004: checking for mysql_query in -l$PDO_MYSQL_LIBNAME" >&5
-ac_lib_var=`echo $PDO_MYSQL_LIBNAME'_'mysql_query | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-l$PDO_MYSQL_LIBNAME  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 69012 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char mysql_query();
 
-int main() {
-mysql_query()
-; return 0; }
-EOF
-if { (eval echo configure:69023: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-  
-else
-  echo "$ac_t""no" 1>&6
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_$PDO_MYSQL_LIBNAME_mysql_query
-    
-          { echo "configure: error: PDO_MYSQL configure failed. Please check config.log for more information." 1>&2; exit 1; }
-        
+
+php_enable_pdo=yes
+
+echo $ac_n "checking whether to enable PDO support""... $ac_c" 1>&6
+echo "configure:68196: checking whether to enable PDO support" >&5
+# Check whether --enable-pdo or --disable-pdo was given.
+if test "${enable_pdo+set}" = set; then
+  enableval="$enable_pdo"
+  PHP_PDO=$enableval
+else
   
+  PHP_PDO=yes
+  test "$PHP_ENABLE_ALL" && PHP_PDO=$PHP_ENABLE_ALL
+
 fi
-  
-        PDO_MYSQL_LIBS="$PDO_MYSQL_LIBS -L$PHP_ZLIB_DIR/$PHP_LIBDIR -lz"
-      else
-        
-  
-  case z in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        PDO_MYSQL_SHARED_LIBADD="-lz $PDO_MYSQL_SHARED_LIBADD" 
-    else
-      
-  
-  case z in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lz $LIBS" 
-   ;;
-  esac
 
 
-    fi
-   ;;
-  esac
 
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_PDO in
+shared,*)
+  PHP_PDO=`echo "$PHP_PDO"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_PDO=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
-        
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-          -L$PDO_MYSQL_LIB_DIR
-        "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
 
+echo "$ac_t""$ext_output" 1>&6
 
-    fi
-   ;;
-  esac
-
-
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-      fi
-    
-  fi
-
-    ;;
-    esac
-  done
-
-  echo $ac_n "checking for mysql_query in -l$PDO_MYSQL_LIBNAME""... $ac_c" 1>&6
-echo "configure:69178: checking for mysql_query in -l$PDO_MYSQL_LIBNAME" >&5
-ac_lib_var=`echo $PDO_MYSQL_LIBNAME'_'mysql_query | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-l$PDO_MYSQL_LIBNAME  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 69186 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char mysql_query();
-
-int main() {
-mysql_query()
-; return 0; }
-EOF
-if { (eval echo configure:69197: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-  
-else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_$PDO_MYSQL_LIBNAME_mysql_query
-    
-          { echo "configure: error: Try adding --with-zlib-dir=<DIR>. Please check config.log for more information." 1>&2; exit 1; }
-        
-  
-fi
-   
-        PDO_MYSQL_LIBS="$PDO_MYSQL_LIBS -lz"
-      fi
-
-      
-  for ac_i in $PDO_MYSQL_INCLUDE; do
-    case $ac_i in
-    -I*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/include"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
 
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
 
-  fi
 
-    ;;
-    esac
-  done
+if test "$PHP_PDO" != "no"; then
 
-      
-  for ac_i in $PDO_MYSQL_LIBS; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        PDO_MYSQL_SHARED_LIBADD="$PDO_MYSQL_SHARED_LIBADD -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
+    PHP_PDO=yes
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        PDO_MYSQL_SHARED_LIBADD="$PDO_MYSQL_SHARED_LIBADD -l$ac_ii" 
-    else
-      
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
+  pdo_running_under_pear=0
+  case `pwd` in
+    /var/tmp/pear-build-*)
+      pdo_running_under_pear=1
+      ;;
   esac
 
+  if test "$pdo_running_under_pear$PHP_PEAR_VERSION" = "1"; then
+    # we're running in an environment that smells like pear,
+    # and the PHP_PEAR_VERSION env var is not set.  That implies
+    # that we're running under a slightly broken pear installer
+    { echo "configure: error: 
+PDO requires that you upgrade your PEAR installer tools. Please
+do so now by running:
 
-    fi
-   ;;
-  esac
-
+  % sudo pear upgrade pear
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
+or by manually downloading and installing PEAR version 1.3.5 or higher.
 
-    
-      if test "$ext_shared" = "yes"; then
-        PDO_MYSQL_SHARED_LIBADD="-L$ai_p $PDO_MYSQL_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && PDO_MYSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_MYSQL_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
+Once you've upgraded, please re-try your PDO install.
+    " 1>&2; exit 1; }
   fi
 
 
-      fi
-    
-  fi
+  if test "$ext_shared" = "yes" ; then
+    case $host_alias in
+      *darwin*)
+          { echo "configure: error: 
+Due to the way that loadable modules work on OSX/Darwin, you need to
+compile the PDO package statically into the PHP core.
 
-    ;;
+Please follow the instructions at: http://netevil.org/node.php?nid=202
+for more detail on this issue.
+          " 1>&2; exit 1; }
+        ext_shared=no
+        ;;
     esac
-  done
-
-    
-  
-fi
-
-
-    _SAVE_LIBS=$LIBS
-    LIBS="$LIBS $PDO_MYSQL_LIBS"
-    for ac_func in mysql_commit mysql_stmt_prepare mysql_next_result mysql_sqlstate
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:69371: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 69376 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:69399: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
- 
-    LIBS=$_SAVE_LIBS
-  fi
-
-  
-    
-  echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:69429: checking for PDO includes" >&5
-if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-    echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:69435: checking for PDO includes" >&5
-    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
-      pdo_inc_path=$abs_srcdir/ext
-    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
-      pdo_inc_path=$abs_srcdir/ext
-    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
-      pdo_inc_path=$prefix/include/php/ext
-    fi
-  
-fi
-
-echo "$ac_t""$pdo_inc_path" 1>&6
-  if test -n "$pdo_inc_path"; then
-:
-  else
-{ echo "configure: error: Cannot find php_pdo_driver.h." 1>&2; exit 1; }
   fi
-
   
+  ext_builddir=ext/pdo
+  ext_srcdir=$abs_srcdir/ext/pdo
 
-  if test -n "$PDO_MYSQL_CONFIG"; then
-    PDO_MYSQL_SOCKET=`$PDO_MYSQL_CONFIG --socket`
-    cat >> confdefs.h <<EOF
-#define PDO_MYSQL_UNIX_ADDR "$PDO_MYSQL_SOCKET"
-EOF
-
-  fi
-
-    
-  ext_builddir=ext/pdo_mysql
-  ext_srcdir=$abs_srcdir/ext/pdo_mysql
-
-  ac_extra=`echo "-I$pdo_inc_path -I"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
+  ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_PDO_MYSQL_SHARED=no
+    PHP_PDO_SHARED=no
     
   
-  case ext/pdo_mysql in
+  case ext/pdo in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_mysql/"; ac_bdir="ext/pdo_mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo/"; ac_bdir="ext/pdo/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -69487,7 +68303,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in pdo_mysql.c mysql_driver.c mysql_statement.c; do
+  for ac_src in pdo.c pdo_dbh.c pdo_stmt.c pdo_sql_parser.c pdo_sqlstate.c; do
   
       IFS=.
       set $ac_src
@@ -69510,18 +68326,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC pdo_mysql"
+    EXT_STATIC="$EXT_STATIC pdo"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_mysql"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_PDO_MYSQL_SHARED=yes
+      PHP_PDO_SHARED=yes
       
-  case ext/pdo_mysql in
+  case ext/pdo in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_mysql/"; ac_bdir="ext/pdo_mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo/"; ac_bdir="ext/pdo/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -69536,14 +68352,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in pdo_mysql.c mysql_driver.c mysql_statement.c; do
+  for ac_src in pdo.c pdo_dbh.c pdo_stmt.c pdo_sql_parser.c pdo_sqlstate.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_pdo_mysql="$shared_objects_pdo_mysql $ac_bdir$ac_obj.lo"
+      shared_objects_pdo="$shared_objects_pdo $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -69566,31 +68382,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_mysql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_mysql) $(PHPPDO_MYSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_mysql.so '$ext_builddir'/phppdo_mysql.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo) $(PHPPDO_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo.so '$ext_builddir'/phppdo.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_mysql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO_MYSQL, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_mysql) $(PHPPDO_MYSQL_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo) $(PHPPDO_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_mysql.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_mysql.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_mysql"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phppdo_mysql.$suffix: $ext_builddir/phppdo_mysql.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_mysql.$suffix \$(phplibdir)
+\$(phplibdir)/phppdo.$suffix: $ext_builddir/phppdo.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo.$suffix \$(phplibdir)
 
-$ext_builddir/phppdo_mysql.$suffix: \$(shared_objects_pdo_mysql) \$(PHPPDO_MYSQL_SHARED_DEPENDENCIES)
+$ext_builddir/phppdo.$suffix: \$(shared_objects_pdo) \$(PHPPDO_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -69603,31 +68419,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_mysql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_mysql) $(PDO_MYSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_mysql.so '$ext_builddir'/pdo_mysql.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo) $(PDO_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo.so '$ext_builddir'/pdo.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_mysql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO_MYSQL, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_mysql) $(PDO_MYSQL_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo) $(PDO_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_mysql.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_mysql.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_mysql"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/pdo_mysql.$suffix: $ext_builddir/pdo_mysql.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_mysql.$suffix \$(phplibdir)
+\$(phplibdir)/pdo.$suffix: $ext_builddir/pdo.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo.$suffix \$(phplibdir)
 
-$ext_builddir/pdo_mysql.$suffix: \$(shared_objects_pdo_mysql) \$(PDO_MYSQL_SHARED_DEPENDENCIES)
+$ext_builddir/pdo.$suffix: \$(shared_objects_pdo) \$(PDO_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -69635,22 +68451,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_PDO_MYSQL 1
+#define COMPILE_DL_PDO 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_PDO_MYSQL_SHARED=no
+    PHP_PDO_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/pdo_mysql in
+  case ext/pdo in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_mysql/"; ac_bdir="ext/pdo_mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo/"; ac_bdir="ext/pdo/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -69665,7 +68481,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in pdo_mysql.c mysql_driver.c mysql_statement.c; do
+  for ac_src in pdo.c pdo_dbh.c pdo_stmt.c pdo_sql_parser.c pdo_sqlstate.c; do
   
       IFS=.
       set $ac_src
@@ -69688,15 +68504,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC pdo_mysql"
+        EXT_STATIC="$EXT_STATIC pdo"
         ;;
       *)
         
   
-  case ext/pdo_mysql in
+  case ext/pdo in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_mysql/"; ac_bdir="ext/pdo_mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo/"; ac_bdir="ext/pdo/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -69711,7 +68527,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in pdo_mysql.c mysql_driver.c mysql_statement.c; do
+  for ac_src in pdo.c pdo_dbh.c pdo_stmt.c pdo_sql_parser.c pdo_sqlstate.c; do
   
       IFS=.
       set $ac_src
@@ -69736,7 +68552,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_mysql"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo"
   fi
   
   
@@ -69745,7 +68561,7 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=pdo_mysql
+    PHP_PECL_EXTENSION=pdo
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
@@ -69753,91 +68569,85 @@ EOF
 
   
     
-  am_i_shared=$PHP_PDO_MYSQL_SHARED
-  is_it_shared=$PHP_PDO_SHARED
-  is_it_enabled=$PHP_PDO
+  am_i_shared=$PHP_PDO_SHARED
+  is_it_shared=$PHP_SPL_SHARED
+  is_it_enabled=$PHP_SPL
   if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
     { echo "configure: error: 
-You've configured extension pdo_mysql to build statically, but it
-depends on extension pdo, which you've configured to build shared.
-You either need to build pdo_mysql shared or build pdo statically for the
+You've configured extension pdo to build statically, but it
+depends on extension spl, which you've configured to build shared.
+You either need to build pdo shared or build spl statically for the
 build to be successful.
 " 1>&2; exit 1; }
   fi
-  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
     { echo "configure: error: 
-You've configured extension pdo_mysql, which depends on extension pdo,
-but you've either not enabled pdo, or have disabled it.
+You've configured extension pdo, which depends on extension spl,
+but you've either not enabled spl, or have disabled it.
 " 1>&2; exit 1; }
   fi
   
-    if test "$PHP_MYSQL" = "mysqlnd"; then
+  
+  
+  
+        
+  
+    header_path=ext/pdo
+    for header_file in php_pdo.h php_pdo_driver.h; do
+      hp_hf="$header_path/$header_file"
       
-  am_i_shared=$PHP_PDO_MYSQL_SHARED
-  is_it_shared=$PHP_MYSQLND_SHARED
-  is_it_enabled=$PHP_MYSQLND
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension pdo_mysql to build statically, but it
-depends on extension mysqlnd, which you've configured to build shared.
-You either need to build pdo_mysql shared or build mysqlnd statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension pdo_mysql, which depends on extension mysqlnd,
-but you've either not enabled mysqlnd, or have disabled it.
-" 1>&2; exit 1; }
-  fi
   
-    fi
+  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  PDO_MYSQL_MODULE_TYPE=external
+  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INSTALLHEADERS$unique=set"
+    
+        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
+      
+  fi
 
+    done 
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_MYSQL_SHARED_LIBADD"
 
   
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_MYSQL_MODULE_TYPE"
 
-  
+    
+  src=$ext_srcdir/Makefile.frag
+  ac_srcdir=$ext_srcdir
+  ac_builddir=$ext_builddir
+  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments
 
 fi
 
 
-SUPPORTED_LIB_VERS="9.0 10.1 11.1"  # This caters for all Oracle 9.x, 10.x and 11.1 installs
-                                                                                                                                                                
 
 
+php_with_pdo_dblib=no
 
+echo $ac_n "checking for PDO_DBLIB support via FreeTDS""... $ac_c" 1>&6
+echo "configure:68630: checking for PDO_DBLIB support via FreeTDS" >&5
+# Check whether --with-pdo-dblib or --without-pdo-dblib was given.
+if test "${with_pdo_dblib+set}" = set; then
+  withval="$with_pdo_dblib"
+  PHP_PDO_DBLIB=$withval
+else
+  
+  PHP_PDO_DBLIB=no
+  test "$PHP_ENABLE_ALL" && PHP_PDO_DBLIB=$PHP_ENABLE_ALL
 
-php_with_pdo_oci=no
-
-echo $ac_n "checking Oracle OCI support for PDO""... $ac_c" 1>&6
-echo "configure:69820: checking Oracle OCI support for PDO" >&5
-# Check whether --with-pdo-oci or --without-pdo-oci was given.
-if test "${with_pdo_oci+set}" = set; then
-  withval="$with_pdo_oci"
-  PHP_PDO_OCI=$withval
-else
-  
-  PHP_PDO_OCI=no
-  test "$PHP_ENABLE_ALL" && PHP_PDO_OCI=$PHP_ENABLE_ALL
-
-fi
+fi
 
 
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_PDO_OCI in
+case $PHP_PDO_DBLIB in
 shared,*)
-  PHP_PDO_OCI=`echo "$PHP_PDO_OCI"|$SED 's/^shared,//'`
+  PHP_PDO_DBLIB=`echo "$PHP_PDO_DBLIB"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_PDO_OCI=yes
+  PHP_PDO_DBLIB=yes
   ;;
 no)
   ext_output=no
@@ -69856,81 +68666,62 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
-if test "$PHP_PDO_OCI" != "no"; then
+if test "$PHP_PDO_DBLIB" != "no"; then
 
   if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
     { echo "configure: error: PDO is not enabled! Add --enable-pdo to your configure line." 1>&2; exit 1; }
   fi
 
-  echo $ac_n "checking Oracle Install-Dir""... $ac_c" 1>&6
-echo "configure:69867: checking Oracle Install-Dir" >&5
-  if test "$PHP_PDO_OCI" = "yes" || test -z "$PHP_PDO_OCI"; then
-    PDO_OCI_DIR=$ORACLE_HOME
-  else
-    PDO_OCI_DIR=$PHP_PDO_OCI
-  fi
-  echo "$ac_t""$PHP_PDO_OCI" 1>&6
+  if test "$PHP_PDO_DBLIB" = "yes"; then
 
-  echo $ac_n "checking if that is sane""... $ac_c" 1>&6
-echo "configure:69876: checking if that is sane" >&5
-  if test -z "$PDO_OCI_DIR"; then
-    { echo "configure: error: 
-You need to tell me where to find your Oracle Instant Client SDK, or set ORACLE_HOME.
-" 1>&2; exit 1; }
-  else
-    echo "$ac_t""yes" 1>&6
-  fi
+    for i in /usr/local /usr; do
+      if test -f $i/include/sybdb.h; then
+        PDO_FREETDS_INSTALLATION_DIR=$i
+        PDO_FREETDS_INCLUDE_DIR=$i/include
+        break
+      elif test -f $i/include/freetds/sybdb.h; then
+        PDO_FREETDS_INSTALLATION_DIR=$i
+        PDO_FREETDS_INCLUDE_DIR=$i/include/freetds
+        break;
+      fi
+    done
 
-  if test "instantclient" = "`echo $PDO_OCI_DIR | cut -d, -f1`" ; then
-    PDO_OCI_IC_PREFIX="`echo $PDO_OCI_DIR | cut -d, -f2`"
-    PDO_OCI_IC_VERS="`echo $PDO_OCI_DIR | cut -d, -f3`"
-    echo $ac_n "checking for oci.h""... $ac_c" 1>&6
-echo "configure:69889: checking for oci.h" >&5
-    if test -f $PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/client/oci.h ; then
-      
-  if test "$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/client" != "/usr/include"; then
-    
-  if test -z "$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/client" || echo "$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/client" | grep '^/' >/dev/null ; then
-    ai_p=$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/client
-  else
-    
-    ep_dir="`echo $PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/client|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/client\"`"
-  fi
+    if test -z "$PDO_FREETDS_INSTALLATION_DIR"; then
+      { echo "configure: error: Cannot find FreeTDS in known installation directories" 1>&2; exit 1; }
+    fi
 
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
+  elif test "$PHP_PDO_DBLIB" != "no"; then
+
+    if test -f $PHP_PDO_DBLIB/include/sybdb.h; then
+      PDO_FREETDS_INSTALLATION_DIR=$PHP_PDO_DBLIB
+      PDO_FREETDS_INCLUDE_DIR=$PHP_PDO_DBLIB/include
+    elif test -f $PHP_PDO_DBLIB/include/freetds/sybdb.h; then
+      PDO_FREETDS_INSTALLATION_DIR=$PHP_PDO_DBLIB
+      PDO_FREETDS_INCLUDE_DIR=$PHP_PDO_DBLIB/include/freetds
+    else
+      { echo "configure: error: Directory $PHP_PDO_DBLIB is not a FreeTDS installation directory" 1>&2; exit 1; }
+    fi
+  fi  
+
+  if test "x$PHP_LIBDIR" = "x" ; then
+    PHP_LIBDIR=lib
   fi
 
+  if test ! -r "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR/libsybdb.a" && test ! -r "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR/libsybdb.so"; then
+     { echo "configure: error: Could not find $PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR/libsybdb.a|so" 1>&2; exit 1; }
   fi
 
-      echo "$ac_t""$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/client" 1>&6
-    elif test -f $PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/client/include/oci.h ; then
-      
-  if test "$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/client/include" != "/usr/include"; then
+  
+  if test "$PDO_FREETDS_INCLUDE_DIR" != "/usr/include"; then
     
-  if test -z "$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/client/include" || echo "$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/client/include" | grep '^/' >/dev/null ; then
-    ai_p=$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/client/include
+  if test -z "$PDO_FREETDS_INCLUDE_DIR" || echo "$PDO_FREETDS_INCLUDE_DIR" | grep '^/' >/dev/null ; then
+    ai_p=$PDO_FREETDS_INCLUDE_DIR
   else
     
-    ep_dir="`echo $PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/client/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $PDO_FREETDS_INCLUDE_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/client/include\"`"
+    ai_p="$ep_realdir/`basename \"$PDO_FREETDS_INCLUDE_DIR\"`"
   fi
 
     
@@ -69951,387 +68742,483 @@ echo "configure:69889: checking for oci.
 
   fi
 
-      echo "$ac_t""$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/client/include" 1>&6
-    elif test -f $PDO_OCI_IC_PREFIX/sdk/include/oci.h ; then
+  
+
+  if test "$ext_shared" = "yes"; then
+    PDO_DBLIB_SHARED_LIBADD="-lsybdb $PDO_DBLIB_SHARED_LIBADD"
+    if test -n "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR"; then
       
-  if test "$PDO_OCI_IC_PREFIX/sdk/include" != "/usr/include"; then
+  if test "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$PDO_OCI_IC_PREFIX/sdk/include" || echo "$PDO_OCI_IC_PREFIX/sdk/include" | grep '^/' >/dev/null ; then
-    ai_p=$PDO_OCI_IC_PREFIX/sdk/include
+  if test -z "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" || echo "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $PDO_OCI_IC_PREFIX/sdk/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PDO_OCI_IC_PREFIX/sdk/include\"`"
+    ai_p="$ep_realdir/`basename \"$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR\"`"
   fi
 
     
+      if test "$ext_shared" = "yes"; then
+        PDO_DBLIB_SHARED_LIBADD="-L$ai_p $PDO_DBLIB_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && PDO_DBLIB_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_DBLIB_SHARED_LIBADD"
+      else
+        
+  
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
+    eval "LIBPATH$unique=set"
     
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
   fi
 
-  fi
-
-      echo "$ac_t""$PDO_OCI_IC_PREFIX/sdk/include" 1>&6
-    elif test -f $PDO_OCI_IC_PREFIX/client/include/oci.h ; then
-      
-  if test "$PDO_OCI_IC_PREFIX/client/include" != "/usr/include"; then
-    
-  if test -z "$PDO_OCI_IC_PREFIX/client/include" || echo "$PDO_OCI_IC_PREFIX/client/include" | grep '^/' >/dev/null ; then
-    ai_p=$PDO_OCI_IC_PREFIX/client/include
-  else
-    
-    ep_dir="`echo $PDO_OCI_IC_PREFIX/client/include|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PDO_OCI_IC_PREFIX/client/include\"`"
-  fi
 
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
       fi
     
   fi
 
-  fi
-
-      echo "$ac_t""$PDO_OCI_IC_PREFIX/client/include" 1>&6
-    else
-      { echo "configure: error: I'm too dumb to figure out where the include dir is in your Instant Client install" 1>&2; exit 1; }
-    fi
-    if test -f "$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/client/lib/libclntsh.so" ; then
-    PDO_OCI_LIB_DIR="$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/client/lib"
-    elif test -f "$PDO_OCI_IC_PREFIX/client/lib/libclntsh.so" ; then
-      PDO_OCI_LIB_DIR="$PDO_OCI_IC_PREFIX/client/lib"
-    elif test -f "$PDO_OCI_IC_PREFIX/libclntsh.so" ; then
-      PDO_OCI_LIB_DIR="$PDO_OCI_IC_PREFIX"
-    else
-      { echo "configure: error: I'm too dumb to figure out where the libraries are in your Instant Client install" 1>&2; exit 1; }
     fi
-    PDO_OCI_VERSION="`echo $PDO_OCI_IC_VERS | cut -d. -f1-2`"
   else
     
-  echo $ac_n "checking size of long int""... $ac_c" 1>&6
-echo "configure:70038: checking size of long int" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_long_int'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  ac_cv_sizeof_long_int=4
-else
-  cat > conftest.$ac_ext <<EOF
-#line 70046 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-int main()
-{
-  FILE *f=fopen("conftestval", "w");
-  if (!f) return(1);
-  fprintf(f, "%d\n", sizeof(long int));
-  return(0);
-}
-EOF
-if { (eval echo configure:70057: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_sizeof_long_int=`cat conftestval`
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_sizeof_long_int=0
-fi
-rm -fr conftest*
-fi
-
-fi
-echo "$ac_t""$ac_cv_sizeof_long_int" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_LONG_INT $ac_cv_sizeof_long_int
-EOF
 
-
-  echo $ac_n "checking if we're on a 64-bit platform""... $ac_c" 1>&6
-echo "configure:70077: checking if we're on a 64-bit platform" >&5
-  if test "$ac_cv_sizeof_long_int" = "4" ; then
-    echo "$ac_t""no" 1>&6
-    TMP_PDO_OCI_LIB_DIR="$PDO_OCI_DIR/lib32"
-  else
-    echo "$ac_t""yes" 1>&6
-    TMP_PDO_OCI_LIB_DIR="$PDO_OCI_DIR/lib"
-  fi
-
-  echo $ac_n "checking OCI8 libraries dir""... $ac_c" 1>&6
-echo "configure:70087: checking OCI8 libraries dir" >&5
-  if test -d "$PDO_OCI_DIR/lib" && test ! -d "$PDO_OCI_DIR/lib32"; then
-    PDO_OCI_LIB_DIR="$PDO_OCI_DIR/lib"
-  elif test ! -d "$PDO_OCI_DIR/lib" && test -d "$PDO_OCI_DIR/lib32"; then
-    PDO_OCI_LIB_DIR="$PDO_OCI_DIR/lib32"
-  elif test -d "$PDO_OCI_DIR/lib" && test -d "$PDO_OCI_DIR/lib32"; then
-    PDO_OCI_LIB_DIR=$TMP_PDO_OCI_LIB_DIR
-  else
-    { echo "configure: error: Oracle required OCI8 libraries not found" 1>&2; exit 1; }
-  fi
-  echo "$ac_t""$PDO_OCI_LIB_DIR" 1>&6
-
-
-    if test -d "$PDO_OCI_DIR/rdbms/public"; then
-      
-  if test "$PDO_OCI_DIR/rdbms/public" != "/usr/include"; then
+  if test -n "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR"; then
     
-  if test -z "$PDO_OCI_DIR/rdbms/public" || echo "$PDO_OCI_DIR/rdbms/public" | grep '^/' >/dev/null ; then
-    ai_p=$PDO_OCI_DIR/rdbms/public
+  if test "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" || echo "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $PDO_OCI_DIR/rdbms/public|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PDO_OCI_DIR/rdbms/public\"`"
+    ai_p="$ep_realdir/`basename \"$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR\"`"
   fi
 
     
+      
+  
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
+    eval "LIBPATH$unique=set"
     
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
   fi
 
-  fi
 
-      PDO_OCI_INCLUDES="$PDO_OCI_INCLUDES -I$PDO_OCI_DIR/rdbms/public"
-    fi
-    if test -d "$PDO_OCI_DIR/rdbms/demo"; then
-      
-  if test "$PDO_OCI_DIR/rdbms/demo" != "/usr/include"; then
-    
-  if test -z "$PDO_OCI_DIR/rdbms/demo" || echo "$PDO_OCI_DIR/rdbms/demo" | grep '^/' >/dev/null ; then
-    ai_p=$PDO_OCI_DIR/rdbms/demo
-  else
-    
-    ep_dir="`echo $PDO_OCI_DIR/rdbms/demo|$SED 's%/*[^/][^/]*/*$%%'`"
     
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PDO_OCI_DIR/rdbms/demo\"`"
   fi
 
-    
+  fi
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
+  case sybdb in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybdb $LIBS" 
+   ;;
+  esac
 
-  fi
 
-      PDO_OCI_INCLUDES="$PDO_OCI_INCLUDES -I$PDO_OCI_DIR/rdbms/demo"
-    fi
-    if test -d "$PDO_OCI_DIR/network/public"; then
-      
-  if test "$PDO_OCI_DIR/network/public" != "/usr/include"; then
-    
-  if test -z "$PDO_OCI_DIR/network/public" || echo "$PDO_OCI_DIR/network/public" | grep '^/' >/dev/null ; then
-    ai_p=$PDO_OCI_DIR/network/public
-  else
-    
-    ep_dir="`echo $PDO_OCI_DIR/network/public|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PDO_OCI_DIR/network/public\"`"
-  fi
 
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
 
   fi
 
-      PDO_OCI_INCLUDES="$PDO_OCI_INCLUDES -I$PDO_OCI_DIR/network/public"
-    fi
-    if test -d "$PDO_OCI_DIR/plsql/public"; then
-      
-  if test "$PDO_OCI_DIR/plsql/public" != "/usr/include"; then
-    
-  if test -z "$PDO_OCI_DIR/plsql/public" || echo "$PDO_OCI_DIR/plsql/public" | grep '^/' >/dev/null ; then
-    ai_p=$PDO_OCI_DIR/plsql/public
-  else
-    
-    ep_dir="`echo $PDO_OCI_DIR/plsql/public|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PDO_OCI_DIR/plsql/public\"`"
-  fi
 
+
+  
     
+  echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
+echo "configure:68847: checking for PDO includes" >&5
+if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+    echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
+echo "configure:68853: checking for PDO includes" >&5
+    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
+      pdo_inc_path=$abs_srcdir/ext
+    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
+      pdo_inc_path=$abs_srcdir/ext
+    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
+      pdo_inc_path=$prefix/include/php/ext
+    fi
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
+fi
 
-      PDO_OCI_INCLUDES="$PDO_OCI_INCLUDES -I$PDO_OCI_DIR/plsql/public"
-    fi
-    if test -d "$PDO_OCI_DIR/include"; then
-      
-  if test "$PDO_OCI_DIR/include" != "/usr/include"; then
-    
-  if test -z "$PDO_OCI_DIR/include" || echo "$PDO_OCI_DIR/include" | grep '^/' >/dev/null ; then
-    ai_p=$PDO_OCI_DIR/include
+echo "$ac_t""$pdo_inc_path" 1>&6
+  if test -n "$pdo_inc_path"; then
+:
   else
-    
-    ep_dir="`echo $PDO_OCI_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PDO_OCI_DIR/include\"`"
+{ echo "configure: error: Cannot find php_pdo_driver.h." 1>&2; exit 1; }
   fi
 
-    
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
 
-  fi
+  PDO_DBLIB_DEFS="-DPDO_DBLIB_FLAVOUR=\\\"freetds\\\""
+  
+  ext_builddir=ext/pdo_dblib
+  ext_srcdir=$abs_srcdir/ext/pdo_dblib
 
-      PDO_OCI_INCLUDES="$PDO_OCI_INCLUDES -I$PDO_OCI_DIR/include"
-    fi
+  ac_extra=`echo "-I$pdo_inc_path $PDO_DBLIB_DEFS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
 
-    if test -f "$PDO_OCI_LIB_DIR/sysliblist"; then
-      
-  for ac_i in `cat $PDO_OCI_LIB_DIR/sysliblist`; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        PDO_OCI_SYSLIB="$PDO_OCI_SYSLIB -pthread"
-      else
-        
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_PDO_DBLIB_SHARED=no
+    
+  
+  case ext/pdo_dblib in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_dblib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_dblib/"; ac_bdir="ext/pdo_dblib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pdo_dblib.c dblib_driver.c dblib_stmt.c; do
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        PDO_OCI_SYSLIB="$PDO_OCI_SYSLIB -l$ac_ii" 
-    else
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-    fi
-   ;;
-  esac
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+    EXT_STATIC="$EXT_STATIC pdo_dblib"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_dblib"
+    fi
   else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_PDO_DBLIB_SHARED=yes
+      
+  case ext/pdo_dblib in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_dblib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_dblib/"; ac_bdir="ext/pdo_dblib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pdo_dblib.c dblib_driver.c dblib_stmt.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_pdo_dblib="$shared_objects_pdo_dblib $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_dblib.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_dblib) $(PHPPDO_DBLIB_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_dblib.so '$ext_builddir'/phppdo_dblib.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_dblib) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO_DBLIB, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_dblib) $(PHPPDO_DBLIB_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_dblib.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_dblib.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_dblib"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phppdo_dblib.$suffix: $ext_builddir/phppdo_dblib.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_dblib.$suffix \$(phplibdir)
+
+$ext_builddir/phppdo_dblib.$suffix: \$(shared_objects_pdo_dblib) \$(PHPPDO_DBLIB_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_dblib.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_dblib) $(PDO_DBLIB_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_dblib.so '$ext_builddir'/pdo_dblib.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_dblib) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO_DBLIB, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_dblib) $(PDO_DBLIB_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_dblib.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_dblib.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_dblib"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/pdo_dblib.$suffix: $ext_builddir/pdo_dblib.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_dblib.$suffix \$(phplibdir)
+
+$ext_builddir/pdo_dblib.$suffix: \$(shared_objects_pdo_dblib) \$(PDO_DBLIB_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_PDO_DBLIB 1
+EOF
+
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_PDO_DBLIB_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/pdo_dblib in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_dblib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_dblib/"; ac_bdir="ext/pdo_dblib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pdo_dblib.c dblib_driver.c dblib_stmt.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        EXT_STATIC="$EXT_STATIC pdo_dblib"
+        ;;
+      *)
+        
+  
+  case ext/pdo_dblib in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_dblib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_dblib/"; ac_bdir="ext/pdo_dblib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pdo_dblib.c dblib_driver.c dblib_stmt.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_dblib"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=pdo_dblib
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
+  echo $ac_n "checking for dnet_addr in -ldnet_stub""... $ac_c" 1>&6
+echo "configure:69167: checking for dnet_addr in -ldnet_stub" >&5
+ac_lib_var=`echo dnet_stub'_'dnet_addr | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-ldnet_stub  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 69175 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char dnet_addr();
+
+int main() {
+dnet_addr()
+; return 0; }
+EOF
+if { (eval echo configure:69186: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+   
+
+  if test "$ext_shared" = "yes"; then
+    PDO_DBLIB_SHARED_LIBADD="-ldnet_stub $PDO_DBLIB_SHARED_LIBADD"
+    if test -n ""; then
+      
+  if test "" != "/usr/$PHP_LIBDIR" && test "" != "/usr/lib"; then
+    
+  if test -z "" || echo "" | grep '^/' >/dev/null ; then
+    ai_p=
+  else
+    
+    ep_dir="`echo |$SED 's%/*[^/][^/]*/*$%%'`"
+    
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    ai_p="$ep_realdir/`basename \"\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        PDO_OCI_SYSLIB="-L$ai_p $PDO_OCI_SYSLIB"
-        test -n "$ld_runpath_switch" && PDO_OCI_SYSLIB="$ld_runpath_switch$ai_p $PDO_OCI_SYSLIB"
+        PDO_DBLIB_SHARED_LIBADD="-L$ai_p $PDO_DBLIB_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && PDO_DBLIB_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_DBLIB_SHARED_LIBADD"
       else
         
   
@@ -70353,17 +69240,179 @@ echo "configure:70087: checking OCI8 lib
     
   fi
 
-    ;;
-    esac
-  done
+    fi
+  else
+    
 
-    elif test -f "$PDO_OCI_DIR/rdbms/lib/sysliblist"; then
+  if test -n ""; then
+    
+  if test "" != "/usr/$PHP_LIBDIR" && test "" != "/usr/lib"; then
+    
+  if test -z "" || echo "" | grep '^/' >/dev/null ; then
+    ai_p=
+  else
+    
+    ep_dir="`echo |$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"\"`"
+  fi
+
+    
       
-  for ac_i in `cat $PDO_OCI_DIR/rdbms/lib/sysliblist`; do
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+    
+  fi
+
+  fi
+  
+  
+  case dnet_stub in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-ldnet_stub $LIBS" 
+   ;;
+  esac
+
+
+
+
+  fi
+
+
+        cat >> confdefs.h <<\EOF
+#define HAVE_LIBDNET_STUB 1
+EOF
+
+     
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  cat >> confdefs.h <<\EOF
+#define HAVE_PDO_DBLIB 1
+EOF
+
+  cat >> confdefs.h <<\EOF
+#define HAVE_FREETDS 1
+EOF
+
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_DBLIB_SHARED_LIBADD"
+
+
+  
+    
+  am_i_shared=$PHP_PDO_DBLIB_SHARED
+  is_it_shared=$PHP_PDO_SHARED
+  is_it_enabled=$PHP_PDO
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension pdo_dblib to build statically, but it
+depends on extension pdo, which you've configured to build shared.
+You either need to build pdo_dblib shared or build pdo statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension pdo_dblib, which depends on extension pdo,
+but you've either not enabled pdo, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+  
+fi
+
+
+
+php_with_pdo_firebird=no
+
+echo $ac_n "checking for Firebird support for PDO""... $ac_c" 1>&6
+echo "configure:69347: checking for Firebird support for PDO" >&5
+# Check whether --with-pdo-firebird or --without-pdo-firebird was given.
+if test "${with_pdo_firebird+set}" = set; then
+  withval="$with_pdo_firebird"
+  PHP_PDO_FIREBIRD=$withval
+else
+  
+  PHP_PDO_FIREBIRD=no
+  test "$PHP_ENABLE_ALL" && PHP_PDO_FIREBIRD=$PHP_ENABLE_ALL
+
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_PDO_FIREBIRD in
+shared,*)
+  PHP_PDO_FIREBIRD=`echo "$PHP_PDO_FIREBIRD"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_PDO_FIREBIRD=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_PDO_FIREBIRD" != "no"; then
+
+  if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
+    { echo "configure: error: PDO is not enabled! Add --enable-pdo to your configure line." 1>&2; exit 1; }
+  fi
+
+  if test "$PHP_PDO_FIREBIRD" = "yes"; then
+    FIREBIRD_INCDIR=
+    FIREBIRD_LIBDIR=
+    FIREBIRD_LIBDIR_FLAG=
+  else
+    FIREBIRD_INCDIR=$PHP_PDO_FIREBIRD/include
+    FIREBIRD_LIBDIR=$PHP_PDO_FIREBIRD/$PHP_LIBDIR
+    FIREBIRD_LIBDIR_FLAG=-L$FIREBIRD_LIBDIR
+  fi
+
+  
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    $FIREBIRD_LIBDIR_FLAG
+  "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
     case $ac_i in
     -pthread)
       if test "$ext_shared" = "yes"; then
-        PDO_OCI_SYSLIB="$PDO_OCI_SYSLIB -pthread"
+        LDFLAGS="$LDFLAGS -pthread"
       else
         
   
@@ -70385,7 +69434,7 @@ echo "configure:70087: checking OCI8 lib
   c|c_r|pthread*) ;;
   *) 
     if test "$ext_shared" = "yes"; then
-        PDO_OCI_SYSLIB="$PDO_OCI_SYSLIB -l$ac_ii" 
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
     else
       
   
@@ -70420,8 +69469,8 @@ echo "configure:70087: checking OCI8 lib
 
     
       if test "$ext_shared" = "yes"; then
-        PDO_OCI_SYSLIB="-L$ai_p $PDO_OCI_SYSLIB"
-        test -n "$ld_runpath_switch" && PDO_OCI_SYSLIB="$ld_runpath_switch$ai_p $PDO_OCI_SYSLIB"
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
       else
         
   
@@ -70447,98 +69496,60 @@ echo "configure:70087: checking OCI8 lib
     esac
   done
 
-    fi
-    
-  echo $ac_n "checking Oracle version""... $ac_c" 1>&6
-echo "configure:70454: checking Oracle version" >&5
-  for OCI_VER in $SUPPORTED_LIB_VERS; do
-    if test -f $PDO_OCI_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.$OCI_VER; then
-      PDO_OCI_VERSION="$OCI_VER"
-    fi
-  done
-  if test -z "$PDO_OCI_VERSION"; then
-    { echo "configure: error: Oracle required OCI8 libraries not found under $PDO_OCI_DIR" 1>&2; exit 1; }
-  fi
-  echo "$ac_t""$PDO_OCI_VERSION" 1>&6
+  echo $ac_n "checking for isc_detach_database in -lfbclient""... $ac_c" 1>&6
+echo "configure:69501: checking for isc_detach_database in -lfbclient" >&5
+ac_lib_var=`echo fbclient'_'isc_detach_database | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lfbclient  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 69509 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char isc_detach_database();
 
-  fi
-
-  case $PDO_OCI_VERSION in
-    9.0|10.1|10.2|11.1|11.2)
-      
-  
-  case clntsh in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        PDO_OCI_SHARED_LIBADD="$PDO_OCI_SHARED_LIBADD -lclntsh" 
-    else
-      
-  
-  case clntsh in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -lclntsh" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-      ;;
-
-    *)
-      { echo "configure: error: Unsupported Oracle version $PDO_OCI_VERSION" 1>&2; exit 1; }
-      ;;
-  esac
+int main() {
+isc_detach_database()
+; return 0; }
+EOF
+if { (eval echo configure:69520: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
   
-  if test "$PDO_OCI_LIB_DIR" != "/usr/$PHP_LIBDIR" && test "$PDO_OCI_LIB_DIR" != "/usr/lib"; then
-    
-  if test -z "$PDO_OCI_LIB_DIR" || echo "$PDO_OCI_LIB_DIR" | grep '^/' >/dev/null ; then
-    ai_p=$PDO_OCI_LIB_DIR
-  else
-    
-    ep_dir="`echo $PDO_OCI_LIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PDO_OCI_LIB_DIR\"`"
-  fi
-
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
     
-      if test "$ext_shared" = "yes"; then
-        PDO_OCI_SHARED_LIBADD="-L$ai_p $PDO_OCI_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && PDO_OCI_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_OCI_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+    FIREBIRD_LIBNAME=fbclient
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  fi
-
+else
+  echo "$ac_t""no" 1>&6
 
-      fi
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_fbclient_isc_detach_database
+    
     
-  fi
-
-
-  
   save_old_LDFLAGS=$LDFLAGS
   ac_stuff="
-    -L$PDO_OCI_LIB_DIR $PDO_OCI_SHARED_LIBADD
-  "
+      $FIREBIRD_LIBDIR_FLAG
+    "
   
   save_ext_shared=$ext_shared
   ext_shared=yes
@@ -70631,27 +69642,27 @@ echo "configure:70454: checking Oracle v
     esac
   done
 
-  echo $ac_n "checking for OCIEnvCreate in -lclntsh""... $ac_c" 1>&6
-echo "configure:70636: checking for OCIEnvCreate in -lclntsh" >&5
-ac_lib_var=`echo clntsh'_'OCIEnvCreate | sed 'y%./+-%__p_%'`
+  echo $ac_n "checking for isc_detach_database in -lgds""... $ac_c" 1>&6
+echo "configure:69647: checking for isc_detach_database in -lgds" >&5
+ac_lib_var=`echo gds'_'isc_detach_database | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lclntsh  $LIBS"
+LIBS="-lgds  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 70644 "configure"
+#line 69655 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char OCIEnvCreate();
+char isc_detach_database();
 
 int main() {
-OCIEnvCreate()
+isc_detach_database()
 ; return 0; }
 EOF
-if { (eval echo configure:70655: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:69666: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -70670,28 +69681,21 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
     
-    cat >> confdefs.h <<\EOF
-#define HAVE_OCIENVCREATE 1
-EOF
-
-  
+      FIREBIRD_LIBNAME=gds
+    
   
 else
   echo "$ac_t""no" 1>&6
 
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
-    unset ac_cv_lib_clntsh_OCIEnvCreate
+    unset ac_cv_lib_gds_isc_detach_database
     
-  
-fi
-
-
-  
+      
   save_old_LDFLAGS=$LDFLAGS
   ac_stuff="
-    -L$PDO_OCI_LIB_DIR $PDO_OCI_SHARED_LIBADD
-  "
+        $FIREBIRD_LIBDIR_FLAG
+      "
   
   save_ext_shared=$ext_shared
   ext_shared=yes
@@ -70784,27 +69788,27 @@ fi
     esac
   done
 
-  echo $ac_n "checking for OCIEnvNlsCreate in -lclntsh""... $ac_c" 1>&6
-echo "configure:70789: checking for OCIEnvNlsCreate in -lclntsh" >&5
-ac_lib_var=`echo clntsh'_'OCIEnvNlsCreate | sed 'y%./+-%__p_%'`
+  echo $ac_n "checking for isc_detach_database in -lib_util""... $ac_c" 1>&6
+echo "configure:69793: checking for isc_detach_database in -lib_util" >&5
+ac_lib_var=`echo ib_util'_'isc_detach_database | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lclntsh  $LIBS"
+LIBS="-lib_util  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 70797 "configure"
+#line 69801 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char OCIEnvNlsCreate();
+char isc_detach_database();
 
 int main() {
-OCIEnvNlsCreate()
+isc_detach_database()
 ; return 0; }
 EOF
-if { (eval echo configure:70808: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:69812: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -70823,95 +69827,79 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
     
-    cat >> confdefs.h <<\EOF
-#define HAVE_OCIENVNLSCREATE 1
-EOF
-
-  
+        FIREBIRD_LIBNAME=ib_util
+      
   
 else
   echo "$ac_t""no" 1>&6
 
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
-    unset ac_cv_lib_clntsh_OCIEnvNlsCreate
+    unset ac_cv_lib_ib_util_isc_detach_database
     
+        { echo "configure: error: libfbclient, libgds or libib_util not found! Check config.log for more information." 1>&2; exit 1; }
+      
   
 fi
 
-
-        
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-    -L$PDO_OCI_LIB_DIR $PDO_OCI_SHARED_LIBADD
-  "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
+    
   
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
+fi
+
   
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
+fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
+ 
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
+  echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
+echo "configure:69857: checking for PDO includes" >&5
+if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
+    echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
+echo "configure:69863: checking for PDO includes" >&5
+    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
+      pdo_inc_path=$abs_srcdir/ext
+    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
+      pdo_inc_path=$abs_srcdir/ext
+    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
+      pdo_inc_path=$prefix/include/php/ext
+    fi
+  
+fi
 
+echo "$ac_t""$pdo_inc_path" 1>&6
+  if test -n "$pdo_inc_path"; then
+:
+  else
+{ echo "configure: error: Cannot find php_pdo_driver.h." 1>&2; exit 1; }
+  fi
 
-    fi
-   ;;
-  esac
 
+  
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
+  if test "$ext_shared" = "yes"; then
+    PDO_FIREBIRD_SHARED_LIBADD="-l$FIREBIRD_LIBNAME $PDO_FIREBIRD_SHARED_LIBADD"
+    if test -n "$FIREBIRD_LIBDIR"; then
       
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+  if test "$FIREBIRD_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$FIREBIRD_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+  if test -z "$FIREBIRD_LIBDIR" || echo "$FIREBIRD_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$FIREBIRD_LIBDIR
   else
     
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $FIREBIRD_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    ai_p="$ep_realdir/`basename \"$FIREBIRD_LIBDIR\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+        PDO_FIREBIRD_SHARED_LIBADD="-L$ai_p $PDO_FIREBIRD_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && PDO_FIREBIRD_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_FIREBIRD_SHARED_LIBADD"
       else
         
   
@@ -70933,136 +69921,26 @@ fi
     
   fi
 
-    ;;
-    esac
-  done
-
-  echo $ac_n "checking for OCILobIsTemporary in -lclntsh""... $ac_c" 1>&6
-echo "configure:70942: checking for OCILobIsTemporary in -lclntsh" >&5
-ac_lib_var=`echo clntsh'_'OCILobIsTemporary | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lclntsh  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 70950 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char OCILobIsTemporary();
-
-int main() {
-OCILobIsTemporary()
-; return 0; }
-EOF
-if { (eval echo configure:70961: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
+    fi
+  else
     
-    cat >> confdefs.h <<\EOF
-#define HAVE_OCILOBISTEMPORARY 1
-EOF
-
-  
-  
-else
-  echo "$ac_t""no" 1>&6
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_clntsh_OCILobIsTemporary
-    
+  if test -n "$FIREBIRD_LIBDIR"; then
     
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-      -L$PDO_OCI_LIB_DIR $PDO_OCI_SHARED_LIBADD
-    "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+  if test "$FIREBIRD_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$FIREBIRD_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+  if test -z "$FIREBIRD_LIBDIR" || echo "$FIREBIRD_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$FIREBIRD_LIBDIR
   else
     
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $FIREBIRD_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    ai_p="$ep_realdir/`basename \"$FIREBIRD_LIBDIR\"`"
   fi
 
     
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
+      
   
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
@@ -71078,446 +69956,74 @@ else
   fi
 
 
-      fi
     
   fi
 
-    ;;
-    esac
-  done
-
-  echo $ac_n "checking for OCILobIsTemporary in -locijdbc8""... $ac_c" 1>&6
-echo "configure:71091: checking for OCILobIsTemporary in -locijdbc8" >&5
-ac_lib_var=`echo ocijdbc8'_'OCILobIsTemporary | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-locijdbc8  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 71099 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char OCILobIsTemporary();
-
-int main() {
-OCILobIsTemporary()
-; return 0; }
-EOF
-if { (eval echo configure:71110: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-      
+  fi
   
-  case ocijdbc8 in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        PDO_OCI_SHARED_LIBADD="$PDO_OCI_SHARED_LIBADD -locijdbc8" 
-    else
-      
   
-  case ocijdbc8 in
+  case $FIREBIRD_LIBNAME in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="$LIBS -locijdbc8" 
-   ;;
-  esac
-
-
-    fi
+      LIBS="-l$FIREBIRD_LIBNAME $LIBS" 
    ;;
   esac
 
 
-      cat >> confdefs.h <<\EOF
-#define HAVE_OCILOBISTEMPORARY 1
-EOF
-
-    
-  
-else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_ocijdbc8_OCILobIsTemporary
-    
-  
-fi
-
-  
-  
-fi
 
 
-        
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-    -L$PDO_OCI_LIB_DIR $PDO_OCI_SHARED_LIBADD
-  "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
   fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+  
+  if test "$FIREBIRD_INCDIR" != "/usr/include"; then
     
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+  if test -z "$FIREBIRD_INCDIR" || echo "$FIREBIRD_INCDIR" | grep '^/' >/dev/null ; then
+    ai_p=$FIREBIRD_INCDIR
   else
     
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $FIREBIRD_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    ai_p="$ep_realdir/`basename \"$FIREBIRD_INCDIR\"`"
   fi
 
     
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
+    eval "INCLUDEPATH$unique=set"
     
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
       fi
     
   fi
 
-    ;;
-    esac
-  done
+  fi
 
-  echo $ac_n "checking for OCICollAssign in -lclntsh""... $ac_c" 1>&6
-echo "configure:71271: checking for OCICollAssign in -lclntsh" >&5
-ac_lib_var=`echo clntsh'_'OCICollAssign | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lclntsh  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 71279 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char OCICollAssign();
-
-int main() {
-OCICollAssign()
-; return 0; }
-EOF
-if { (eval echo configure:71290: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-    cat >> confdefs.h <<\EOF
-#define HAVE_OCICOLLASSIGN 1
-EOF
-
-  
-  
-else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_clntsh_OCICollAssign
-    
-  
-fi
-
-
-    
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-    -L$PDO_OCI_LIB_DIR $PDO_OCI_SHARED_LIBADD
-  "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-      fi
-    
-  fi
-
-    ;;
-    esac
-  done
-
-  echo $ac_n "checking for OCIStmtFetch2 in -lclntsh""... $ac_c" 1>&6
-echo "configure:71424: checking for OCIStmtFetch2 in -lclntsh" >&5
-ac_lib_var=`echo clntsh'_'OCIStmtFetch2 | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lclntsh  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 71432 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char OCIStmtFetch2();
-
-int main() {
-OCIStmtFetch2()
-; return 0; }
-EOF
-if { (eval echo configure:71443: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-     cat >> confdefs.h <<\EOF
-#define HAVE_OCISTMTFETCH2 1
+  cat >> confdefs.h <<\EOF
+#define HAVE_PDO_FIREBIRD 1
 EOF
 
   
-  
-else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_clntsh_OCIStmtFetch2
-    
-  
-fi
-
-
-  
-    
-  echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:71482: checking for PDO includes" >&5
-if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-    echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:71488: checking for PDO includes" >&5
-    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
-      pdo_inc_path=$abs_srcdir/ext
-    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
-      pdo_inc_path=$abs_srcdir/ext
-    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
-      pdo_inc_path=$prefix/include/php/ext
-    fi
-  
-fi
-
-echo "$ac_t""$pdo_inc_path" 1>&6
-  if test -n "$pdo_inc_path"; then
-:
-  else
-{ echo "configure: error: Cannot find php_pdo_driver.h." 1>&2; exit 1; }
-  fi
-
-  
-
-  
-  ext_builddir=ext/pdo_oci
-  ext_srcdir=$abs_srcdir/ext/pdo_oci
+  ext_builddir=ext/pdo_firebird
+  ext_srcdir=$abs_srcdir/ext/pdo_firebird
 
   ac_extra=`echo "-I$pdo_inc_path"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_PDO_OCI_SHARED=no
+    PHP_PDO_FIREBIRD_SHARED=no
     
   
-  case ext/pdo_oci in
+  case ext/pdo_firebird in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_oci"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_oci/"; ac_bdir="ext/pdo_oci/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_firebird"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_firebird/"; ac_bdir="ext/pdo_firebird/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -71532,7 +70038,7 @@ echo "$ac_t""$pdo_inc_path" 1>&6
 
 
   old_IFS=$IFS
-  for ac_src in pdo_oci.c oci_driver.c oci_statement.c; do
+  for ac_src in pdo_firebird.c firebird_driver.c firebird_statement.c; do
   
       IFS=.
       set $ac_src
@@ -71555,18 +70061,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC pdo_oci"
+    EXT_STATIC="$EXT_STATIC pdo_firebird"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_oci"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_firebird"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_PDO_OCI_SHARED=yes
+      PHP_PDO_FIREBIRD_SHARED=yes
       
-  case ext/pdo_oci in
+  case ext/pdo_firebird in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_oci"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_oci/"; ac_bdir="ext/pdo_oci/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_firebird"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_firebird/"; ac_bdir="ext/pdo_firebird/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -71581,14 +70087,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in pdo_oci.c oci_driver.c oci_statement.c; do
+  for ac_src in pdo_firebird.c firebird_driver.c firebird_statement.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_pdo_oci="$shared_objects_pdo_oci $ac_bdir$ac_obj.lo"
+      shared_objects_pdo_firebird="$shared_objects_pdo_firebird $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -71611,31 +70117,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_oci.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_oci) $(PHPPDO_OCI_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_oci.so '$ext_builddir'/phppdo_oci.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_firebird.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_firebird) $(PHPPDO_FIREBIRD_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_firebird.so '$ext_builddir'/phppdo_firebird.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_oci) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO_OCI, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_firebird) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO_FIREBIRD, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_oci) $(PHPPDO_OCI_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_firebird) $(PHPPDO_FIREBIRD_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_oci.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_firebird.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_oci.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_firebird.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_oci"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_firebird"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phppdo_oci.$suffix: $ext_builddir/phppdo_oci.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_oci.$suffix \$(phplibdir)
+\$(phplibdir)/phppdo_firebird.$suffix: $ext_builddir/phppdo_firebird.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_firebird.$suffix \$(phplibdir)
 
-$ext_builddir/phppdo_oci.$suffix: \$(shared_objects_pdo_oci) \$(PHPPDO_OCI_SHARED_DEPENDENCIES)
+$ext_builddir/phppdo_firebird.$suffix: \$(shared_objects_pdo_firebird) \$(PHPPDO_FIREBIRD_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -71648,31 +70154,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_oci.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_oci) $(PDO_OCI_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_oci.so '$ext_builddir'/pdo_oci.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_firebird.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_firebird) $(PDO_FIREBIRD_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_firebird.so '$ext_builddir'/pdo_firebird.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_oci) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO_OCI, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_firebird) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO_FIREBIRD, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_oci) $(PDO_OCI_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_firebird) $(PDO_FIREBIRD_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_oci.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_firebird.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_oci.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_firebird.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_oci"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_firebird"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/pdo_oci.$suffix: $ext_builddir/pdo_oci.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_oci.$suffix \$(phplibdir)
+\$(phplibdir)/pdo_firebird.$suffix: $ext_builddir/pdo_firebird.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_firebird.$suffix \$(phplibdir)
 
-$ext_builddir/pdo_oci.$suffix: \$(shared_objects_pdo_oci) \$(PDO_OCI_SHARED_DEPENDENCIES)
+$ext_builddir/pdo_firebird.$suffix: \$(shared_objects_pdo_firebird) \$(PDO_FIREBIRD_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -71680,22 +70186,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_PDO_OCI 1
+#define COMPILE_DL_PDO_FIREBIRD 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_PDO_OCI_SHARED=no
+    PHP_PDO_FIREBIRD_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/pdo_oci in
+  case ext/pdo_firebird in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_oci"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_oci/"; ac_bdir="ext/pdo_oci/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_firebird"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_firebird/"; ac_bdir="ext/pdo_firebird/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -71710,7 +70216,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in pdo_oci.c oci_driver.c oci_statement.c; do
+  for ac_src in pdo_firebird.c firebird_driver.c firebird_statement.c; do
   
       IFS=.
       set $ac_src
@@ -71733,15 +70239,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC pdo_oci"
+        EXT_STATIC="$EXT_STATIC pdo_firebird"
         ;;
       *)
         
   
-  case ext/pdo_oci in
+  case ext/pdo_firebird in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_oci"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_oci/"; ac_bdir="ext/pdo_oci/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_firebird"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_firebird/"; ac_bdir="ext/pdo_firebird/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -71756,7 +70262,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in pdo_oci.c oci_driver.c oci_statement.c; do
+  for ac_src in pdo_firebird.c firebird_driver.c firebird_statement.c; do
   
       IFS=.
       set $ac_src
@@ -71781,7 +70287,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_oci"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_firebird"
   fi
   
   
@@ -71790,77 +70296,50 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=pdo_oci
+    PHP_PECL_EXTENSION=pdo_firebird
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
-
-  
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_OCI_SHARED_LIBADD"
-
-  
-
-  
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_OCI_DIR"
-
-  
-
-  
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_OCI_VERSION"
-
   
-
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_FIREBIRD_SHARED_LIBADD"
 
   
-    
-  am_i_shared=$PHP_PDO_OCI_SHARED
+  am_i_shared=$PHP_PDO_FIREBIRD_SHARED
   is_it_shared=$PHP_PDO_SHARED
   is_it_enabled=$PHP_PDO
   if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
     { echo "configure: error: 
-You've configured extension pdo_oci to build statically, but it
+You've configured extension pdo_firebird to build statically, but it
 depends on extension pdo, which you've configured to build shared.
-You either need to build pdo_oci shared or build pdo statically for the
+You either need to build pdo_firebird shared or build pdo statically for the
 build to be successful.
 " 1>&2; exit 1; }
   fi
   if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
     { echo "configure: error: 
-You've configured extension pdo_oci, which depends on extension pdo,
+You've configured extension pdo_firebird, which depends on extension pdo,
 but you've either not enabled pdo, or have disabled it.
 " 1>&2; exit 1; }
   fi
   
-  
-
-  cat >> confdefs.h <<EOF
-#define PHP_PDO_OCI_CLIENT_VERSION "$PDO_OCI_VERSION"
-EOF
-
 fi
 
 
 
+php_with_pdo_mysql=no
 
-
-
-php_with_pdo_odbc=no
-
-echo $ac_n "checking for ODBC v3 support for PDO""... $ac_c" 1>&6
-echo "configure:71856: checking for ODBC v3 support for PDO" >&5
-# Check whether --with-pdo-odbc or --without-pdo-odbc was given.
-if test "${with_pdo_odbc+set}" = set; then
-  withval="$with_pdo_odbc"
-  PHP_PDO_ODBC=$withval
+echo $ac_n "checking for MySQL support for PDO""... $ac_c" 1>&6
+echo "configure:70335: checking for MySQL support for PDO" >&5
+# Check whether --with-pdo-mysql or --without-pdo-mysql was given.
+if test "${with_pdo_mysql+set}" = set; then
+  withval="$with_pdo_mysql"
+  PHP_PDO_MYSQL=$withval
 else
   
-  PHP_PDO_ODBC=no
-  test "$PHP_ENABLE_ALL" && PHP_PDO_ODBC=$PHP_ENABLE_ALL
+  PHP_PDO_MYSQL=no
+  test "$PHP_ENABLE_ALL" && PHP_PDO_MYSQL=$PHP_ENABLE_ALL
 
 fi
 
@@ -71868,12 +70347,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_PDO_ODBC in
+case $PHP_PDO_MYSQL in
 shared,*)
-  PHP_PDO_ODBC=`echo "$PHP_PDO_ODBC"|$SED 's/^shared,//'`
+  PHP_PDO_MYSQL=`echo "$PHP_PDO_MYSQL"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_PDO_ODBC=yes
+  PHP_PDO_MYSQL=yes
   ;;
 no)
   ext_output=no
@@ -71892,475 +70371,187 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
-
-
-                                  
-if test "$PHP_PDO_ODBC" != "no"; then
-
-  if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
-    { echo "configure: error: PDO is not enabled! Add --enable-pdo to your configure line." 1>&2; exit 1; }
-  fi
-
+if test -z "$PHP_ZLIB_DIR"; then
   
-    
-  echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:71908: checking for PDO includes" >&5
-if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+php_with_zlib_dir=no
+
+echo $ac_n "checking for the location of libz""... $ac_c" 1>&6
+echo "configure:70380: checking for the location of libz" >&5
+# Check whether --with-zlib-dir or --without-zlib-dir was given.
+if test "${with_zlib_dir+set}" = set; then
+  withval="$with_zlib_dir"
+  PHP_ZLIB_DIR=$withval
 else
   
-    echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:71914: checking for PDO includes" >&5
-    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
-      pdo_inc_path=$abs_srcdir/ext
-    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
-      pdo_inc_path=$abs_srcdir/ext
-    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
-      pdo_inc_path=$prefix/include/php/ext
-    fi
+  PHP_ZLIB_DIR=no
   
+
 fi
 
-echo "$ac_t""$pdo_inc_path" 1>&6
-  if test -n "$pdo_inc_path"; then
-:
-  else
-{ echo "configure: error: Cannot find php_pdo_driver.h." 1>&2; exit 1; }
-  fi
 
-  
+ext_output=$PHP_ZLIB_DIR
+echo "$ac_t""$ext_output" 1>&6
 
-  echo $ac_n "checking for selected PDO ODBC flavour""... $ac_c" 1>&6
-echo "configure:71935: checking for selected PDO ODBC flavour" >&5
 
-  pdo_odbc_flavour="`echo $PHP_PDO_ODBC | cut -d, -f1`"
-  pdo_odbc_dir="`echo $PHP_PDO_ODBC | cut -d, -f2`"
 
-  if test "$pdo_odbc_dir" = "$PHP_PDO_ODBC" ; then
-    pdo_odbc_dir=
-  fi
+fi
 
-  case $pdo_odbc_flavour in
-    ibm-db2)
-        pdo_odbc_def_libdir=/home/db2inst1/sqllib/lib
-        pdo_odbc_def_incdir=/home/db2inst1/sqllib/include
-        pdo_odbc_def_lib=db2
-        ;;
+if test "$PHP_PDO_MYSQL" != "no"; then
 
-    iODBC|iodbc)
-        pdo_odbc_def_libdir=/usr/local/$PHP_LIBDIR
-        pdo_odbc_def_incdir=/usr/local/include
-        pdo_odbc_def_lib=iodbc
-        ;;
+  if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
+    { echo "configure: error: PDO is not enabled! Add --enable-pdo to your configure line." 1>&2; exit 1; }
+  fi
 
-    unixODBC|unixodbc)
-        pdo_odbc_def_libdir=/usr/local/$PHP_LIBDIR
-        pdo_odbc_def_incdir=/usr/local/include
-        pdo_odbc_def_lib=odbc
-        ;;
+  
 
-    ODBCRouter|odbcrouter)
-        pdo_odbc_def_libdir=/usr/$PHP_LIBDIR
-        pdo_odbc_def_incdir=/usr/include
-        pdo_odbc_def_lib=odbcsdk
-        ;;
+  if test -f $PHP_PDO_MYSQL && test -x $PHP_PDO_MYSQL ; then
+    PDO_MYSQL_CONFIG=$PHP_PDO_MYSQL
+  elif test "$PHP_PDO_MYSQL" != "yes"; then
+    if test -d "$PHP_PDO_MYSQL" ; then
+      if test -x "$PHP_PDO_MYSQL/bin/mysql_config" ; then
+        PDO_MYSQL_CONFIG="$PHP_PDO_MYSQL/bin/mysql_config"
+      else
+        PDO_MYSQL_DIR="$PHP_PDO_MYSQL"
+      fi
+    fi
+  else
+    for i in /usr/local /usr ; do
+      if test -x "$i/bin/mysql_config" ; then
+        PDO_MYSQL_CONFIG="$i/bin/mysql_config"
+        break;
+      fi
+      if test -r $i/include/mysql/mysql.h || test -r $i/include/mysql.h ; then
+        PDO_MYSQL_DIR="$i"
+        break;
+      fi
+    done
+  fi
 
-    generic)
-        pdo_odbc_def_lib="`echo $PHP_PDO_ODBC | cut -d, -f3`"
-        pdo_odbc_def_ldflags="`echo $PHP_PDO_ODBC | cut -d, -f4`"
-        pdo_odbc_def_cflags="`echo $PHP_PDO_ODBC | cut -d, -f5`"
-        pdo_odbc_flavour="generic-$pdo_odbc_def_lib"
-        ;;
+  if test "$PHP_PDO_MYSQL" = "mysqlnd"; then
+        PHP_MYSQLND_ENABLED=yes
+    cat >> confdefs.h <<\EOF
+#define PDO_USE_MYSQLND 1
+EOF
 
-      *)
-        { echo "configure: error: Unknown ODBC flavour $pdo_odbc_flavour
-                            include and lib dirs are looked for under 'dir'.
-                            
-                            'flavour' can be one of:  ibm-db2, iODBC, unixODBC, generic
-                            If ',dir' part is omitted, default for the flavour 
-                            you have selected will used. e.g.:
-                            
-                              --with-pdo-odbc=unixODBC
-                              
-                            will check for unixODBC under /usr/local. You may attempt 
-                            to use an otherwise unsupported driver using the \"generic\" 
-                            flavour.  The syntax for generic ODBC support is:
-                            
-                              --with-pdo-odbc=generic,dir,libname,ldflags,cflags
+  else
+    cat >> confdefs.h <<\EOF
+#define HAVE_MYSQL 1
+EOF
 
-                            When build as shared the extension filename is always pdo_odbc.so" 1>&2; exit 1; }
-        ;;
-  esac
 
-  if test -n "$pdo_odbc_dir"; then
-    PDO_ODBC_INCDIR="$pdo_odbc_dir/include"
-    PDO_ODBC_LIBDIR="$pdo_odbc_dir/$PHP_LIBDIR"
-  else
-    PDO_ODBC_INCDIR="$pdo_odbc_def_incdir"
-    PDO_ODBC_LIBDIR="$pdo_odbc_def_libdir"
-  fi
-  
-  echo "$ac_t""$pdo_odbc_flavour
-          libs       $PDO_ODBC_LIBDIR,
-          headers    $PDO_ODBC_INCDIR" 1>&6
-
-  if test ! -d "$PDO_ODBC_LIBDIR" ; then
-    echo "configure: warning: library dir $PDO_ODBC_LIBDIR does not exist" 1>&2
-  fi
-
-  
-  echo $ac_n "checking for odbc.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72014: checking for odbc.h in $PDO_ODBC_INCDIR" >&5
-  if test -f "$PDO_ODBC_INCDIR/odbc.h"; then
-    php_pdo_have_header=yes
-    cat >> confdefs.h <<\EOF
-#define HAVE_ODBC_H 1
-EOF
-
-    echo "$ac_t""yes" 1>&6
-  else
-    echo "$ac_t""no" 1>&6
-  fi
-
-  
-  echo $ac_n "checking for odbcsdk.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72028: checking for odbcsdk.h in $PDO_ODBC_INCDIR" >&5
-  if test -f "$PDO_ODBC_INCDIR/odbcsdk.h"; then
-    php_pdo_have_header=yes
-    cat >> confdefs.h <<\EOF
-#define HAVE_ODBCSDK_H 1
-EOF
-
-    echo "$ac_t""yes" 1>&6
-  else
-    echo "$ac_t""no" 1>&6
-  fi
-
-  
-  echo $ac_n "checking for iodbc.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72042: checking for iodbc.h in $PDO_ODBC_INCDIR" >&5
-  if test -f "$PDO_ODBC_INCDIR/iodbc.h"; then
-    php_pdo_have_header=yes
-    cat >> confdefs.h <<\EOF
-#define HAVE_IODBC_H 1
-EOF
-
-    echo "$ac_t""yes" 1>&6
-  else
-    echo "$ac_t""no" 1>&6
-  fi
-
-  
-  echo $ac_n "checking for sqlunix.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72056: checking for sqlunix.h in $PDO_ODBC_INCDIR" >&5
-  if test -f "$PDO_ODBC_INCDIR/sqlunix.h"; then
-    php_pdo_have_header=yes
-    cat >> confdefs.h <<\EOF
-#define HAVE_SQLUNIX_H 1
-EOF
-
-    echo "$ac_t""yes" 1>&6
-  else
-    echo "$ac_t""no" 1>&6
-  fi
-
-  
-  echo $ac_n "checking for sqltypes.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72070: checking for sqltypes.h in $PDO_ODBC_INCDIR" >&5
-  if test -f "$PDO_ODBC_INCDIR/sqltypes.h"; then
-    php_pdo_have_header=yes
-    cat >> confdefs.h <<\EOF
-#define HAVE_SQLTYPES_H 1
-EOF
-
-    echo "$ac_t""yes" 1>&6
-  else
-    echo "$ac_t""no" 1>&6
-  fi
-
-  
-  echo $ac_n "checking for sqlucode.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72084: checking for sqlucode.h in $PDO_ODBC_INCDIR" >&5
-  if test -f "$PDO_ODBC_INCDIR/sqlucode.h"; then
-    php_pdo_have_header=yes
-    cat >> confdefs.h <<\EOF
-#define HAVE_SQLUCODE_H 1
-EOF
-
-    echo "$ac_t""yes" 1>&6
-  else
-    echo "$ac_t""no" 1>&6
-  fi
-
-  
-  echo $ac_n "checking for sql.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72098: checking for sql.h in $PDO_ODBC_INCDIR" >&5
-  if test -f "$PDO_ODBC_INCDIR/sql.h"; then
-    php_pdo_have_header=yes
-    cat >> confdefs.h <<\EOF
-#define HAVE_SQL_H 1
-EOF
-
-    echo "$ac_t""yes" 1>&6
-  else
-    echo "$ac_t""no" 1>&6
-  fi
-
-  
-  echo $ac_n "checking for isql.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72112: checking for isql.h in $PDO_ODBC_INCDIR" >&5
-  if test -f "$PDO_ODBC_INCDIR/isql.h"; then
-    php_pdo_have_header=yes
-    cat >> confdefs.h <<\EOF
-#define HAVE_ISQL_H 1
-EOF
-
-    echo "$ac_t""yes" 1>&6
-  else
-    echo "$ac_t""no" 1>&6
-  fi
-
-  
-  echo $ac_n "checking for sqlext.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72126: checking for sqlext.h in $PDO_ODBC_INCDIR" >&5
-  if test -f "$PDO_ODBC_INCDIR/sqlext.h"; then
-    php_pdo_have_header=yes
-    cat >> confdefs.h <<\EOF
-#define HAVE_SQLEXT_H 1
-EOF
-
-    echo "$ac_t""yes" 1>&6
-  else
-    echo "$ac_t""no" 1>&6
-  fi
-
-  
-  echo $ac_n "checking for isqlext.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72140: checking for isqlext.h in $PDO_ODBC_INCDIR" >&5
-  if test -f "$PDO_ODBC_INCDIR/isqlext.h"; then
-    php_pdo_have_header=yes
-    cat >> confdefs.h <<\EOF
-#define HAVE_ISQLEXT_H 1
-EOF
-
-    echo "$ac_t""yes" 1>&6
-  else
-    echo "$ac_t""no" 1>&6
-  fi
-
-  
-  echo $ac_n "checking for udbcext.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72154: checking for udbcext.h in $PDO_ODBC_INCDIR" >&5
-  if test -f "$PDO_ODBC_INCDIR/udbcext.h"; then
-    php_pdo_have_header=yes
-    cat >> confdefs.h <<\EOF
-#define HAVE_UDBCEXT_H 1
-EOF
-
-    echo "$ac_t""yes" 1>&6
-  else
-    echo "$ac_t""no" 1>&6
-  fi
-
-  
-  echo $ac_n "checking for sqlcli1.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72168: checking for sqlcli1.h in $PDO_ODBC_INCDIR" >&5
-  if test -f "$PDO_ODBC_INCDIR/sqlcli1.h"; then
-    php_pdo_have_header=yes
-    cat >> confdefs.h <<\EOF
-#define HAVE_SQLCLI1_H 1
-EOF
-
-    echo "$ac_t""yes" 1>&6
-  else
-    echo "$ac_t""no" 1>&6
-  fi
-
-  
-  echo $ac_n "checking for LibraryManager.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72182: checking for LibraryManager.h in $PDO_ODBC_INCDIR" >&5
-  if test -f "$PDO_ODBC_INCDIR/LibraryManager.h"; then
-    php_pdo_have_header=yes
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBRARYMANAGER_H 1
-EOF
-
-    echo "$ac_t""yes" 1>&6
-  else
-    echo "$ac_t""no" 1>&6
-  fi
-
-  
-  echo $ac_n "checking for cli0core.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72196: checking for cli0core.h in $PDO_ODBC_INCDIR" >&5
-  if test -f "$PDO_ODBC_INCDIR/cli0core.h"; then
-    php_pdo_have_header=yes
-    cat >> confdefs.h <<\EOF
-#define HAVE_CLI0CORE_H 1
-EOF
-
-    echo "$ac_t""yes" 1>&6
-  else
-    echo "$ac_t""no" 1>&6
-  fi
-
-  
-  echo $ac_n "checking for cli0ext.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72210: checking for cli0ext.h in $PDO_ODBC_INCDIR" >&5
-  if test -f "$PDO_ODBC_INCDIR/cli0ext.h"; then
-    php_pdo_have_header=yes
-    cat >> confdefs.h <<\EOF
-#define HAVE_CLI0EXT_H 1
-EOF
-
-    echo "$ac_t""yes" 1>&6
-  else
-    echo "$ac_t""no" 1>&6
-  fi
-
-  
-  echo $ac_n "checking for cli0cli.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72224: checking for cli0cli.h in $PDO_ODBC_INCDIR" >&5
-  if test -f "$PDO_ODBC_INCDIR/cli0cli.h"; then
-    php_pdo_have_header=yes
-    cat >> confdefs.h <<\EOF
-#define HAVE_CLI0CLI_H 1
-EOF
-
-    echo "$ac_t""yes" 1>&6
-  else
-    echo "$ac_t""no" 1>&6
-  fi
-
-  
-  echo $ac_n "checking for cli0defs.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72238: checking for cli0defs.h in $PDO_ODBC_INCDIR" >&5
-  if test -f "$PDO_ODBC_INCDIR/cli0defs.h"; then
-    php_pdo_have_header=yes
-    cat >> confdefs.h <<\EOF
-#define HAVE_CLI0DEFS_H 1
-EOF
-
-    echo "$ac_t""yes" 1>&6
-  else
-    echo "$ac_t""no" 1>&6
-  fi
-
-  
-  echo $ac_n "checking for cli0env.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72252: checking for cli0env.h in $PDO_ODBC_INCDIR" >&5
-  if test -f "$PDO_ODBC_INCDIR/cli0env.h"; then
-    php_pdo_have_header=yes
-    cat >> confdefs.h <<\EOF
-#define HAVE_CLI0ENV_H 1
-EOF
-
-    echo "$ac_t""yes" 1>&6
-  else
-    echo "$ac_t""no" 1>&6
-  fi
-
-
-  if test "$php_pdo_have_header" != "yes"; then
-    { echo "configure: error: Cannot find header file(s) for pdo_odbc" 1>&2; exit 1; }
-  fi
-
-  PDO_ODBC_INCLUDE="$pdo_odbc_def_cflags -I$PDO_ODBC_INCDIR -DPDO_ODBC_TYPE=\\\"$pdo_odbc_flavour\\\""
-  PDO_ODBC_LDFLAGS="$pdo_odbc_def_ldflags -L$PDO_ODBC_LIBDIR -l$pdo_odbc_def_lib"
+    echo $ac_n "checking for mysql_config""... $ac_c" 1>&6
+echo "configure:70444: checking for mysql_config" >&5
+    if test -n "$PDO_MYSQL_CONFIG"; then
+      echo "$ac_t""$PDO_MYSQL_CONFIG" 1>&6
+      if test "x$SED" = "x"; then
+        # Extract the first word of "sed", so it can be a program name with args.
+set dummy sed; ac_word=$2
+echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
+echo "configure:70451: checking for $ac_word" >&5
+if eval "test \"`echo '$''{'ac_cv_path_SED'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  case "$SED" in
+  /*)
+  ac_cv_path_SED="$SED" # Let the user override the test with a path.
+  ;;
+  ?:/*)			 
+  ac_cv_path_SED="$SED" # Let the user override the test with a dos path.
+  ;;
+  *)
+  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
+  ac_dummy="$PATH"
+  for ac_dir in $ac_dummy; do 
+    test -z "$ac_dir" && ac_dir=.
+    if test -f $ac_dir/$ac_word; then
+      ac_cv_path_SED="$ac_dir/$ac_word"
+      break
+    fi
+  done
+  IFS="$ac_save_ifs"
+  ;;
+esac
+fi
+SED="$ac_cv_path_SED"
+if test -n "$SED"; then
+  echo "$ac_t""$SED" 1>&6
+else
+  echo "$ac_t""no" 1>&6
+fi
 
-  
-  for ac_i in $PDO_ODBC_LDFLAGS; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        PDO_ODBC_SHARED_LIBADD="$PDO_ODBC_SHARED_LIBADD -pthread"
+      fi
+      if test "$enable_maintainer_zts" = "yes"; then
+        PDO_MYSQL_LIBNAME=mysqlclient_r
+        PDO_MYSQL_LIBS=`$PDO_MYSQL_CONFIG --libs_r | $SED -e "s/'//g"`
       else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
+        PDO_MYSQL_LIBNAME=mysqlclient
+        PDO_MYSQL_LIBS=`$PDO_MYSQL_CONFIG --libs | $SED -e "s/'//g"`
+      fi
+      PDO_MYSQL_INCLUDE=`$PDO_MYSQL_CONFIG --cflags | $SED -e "s/'//g"`
+    elif test -n "$PDO_MYSQL_DIR"; then
+      echo "$ac_t""not found" 1>&6
+      echo $ac_n "checking for mysql install under $PDO_MYSQL_DIR""... $ac_c" 1>&6
+echo "configure:70495: checking for mysql install under $PDO_MYSQL_DIR" >&5
+      if test -r $PDO_MYSQL_DIR/include/mysql; then
+        PDO_MYSQL_INC_DIR=$PDO_MYSQL_DIR/include/mysql
+      else
+        PDO_MYSQL_INC_DIR=$PDO_MYSQL_DIR/include
+      fi
+      if test -r $PDO_MYSQL_DIR/$PHP_LIBDIR/mysql; then
+        PDO_MYSQL_LIB_DIR=$PDO_MYSQL_DIR/$PHP_LIBDIR/mysql
+      else
+        PDO_MYSQL_LIB_DIR=$PDO_MYSQL_DIR/$PHP_LIBDIR
       fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        PDO_ODBC_SHARED_LIBADD="$PDO_ODBC_SHARED_LIBADD -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
 
+      if test -r "$PDO_MYSQL_LIB_DIR"; then
+        echo "$ac_t""libs under $PDO_MYSQL_LIB_DIR; seems promising" 1>&6
+      else
+        echo "$ac_t""can not find it" 1>&6
+        { echo "configure: error: Unable to find your mysql installation" 1>&2; exit 1; }
+      fi
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
       
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+  if test "$PDO_MYSQL_INC_DIR" != "/usr/include"; then
     
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+  if test -z "$PDO_MYSQL_INC_DIR" || echo "$PDO_MYSQL_INC_DIR" | grep '^/' >/dev/null ; then
+    ai_p=$PDO_MYSQL_INC_DIR
   else
     
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $PDO_MYSQL_INC_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    ai_p="$ep_realdir/`basename \"$PDO_MYSQL_INC_DIR\"`"
   fi
 
     
-      if test "$ext_shared" = "yes"; then
-        PDO_ODBC_SHARED_LIBADD="-L$ai_p $PDO_ODBC_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && PDO_ODBC_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_ODBC_SHARED_LIBADD"
-      else
-        
-  
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
+    eval "INCLUDEPATH$unique=set"
     
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
       fi
     
   fi
 
-    ;;
-    esac
-  done
+  fi
 
+      PDO_MYSQL_INCLUDE=-I$PDO_MYSQL_INC_DIR
+    else
+      echo "$ac_t""not found" 1>&6
+      { echo "configure: error: Unable to find your mysql installation" 1>&2; exit 1; }
+    fi
 
     
   save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="$PDO_ODBC_LDFLAGS"
+  ac_stuff="
+      $PDO_MYSQL_LIBS
+    "
   
   save_ext_shared=$ext_shared
   ext_shared=yes
@@ -72453,27 +70644,27 @@ EOF
     esac
   done
 
-  echo $ac_n "checking for SQLBindCol in -l$pdo_odbc_def_lib""... $ac_c" 1>&6
-echo "configure:72458: checking for SQLBindCol in -l$pdo_odbc_def_lib" >&5
-ac_lib_var=`echo $pdo_odbc_def_lib'_'SQLBindCol | sed 'y%./+-%__p_%'`
+  echo $ac_n "checking for mysql_query in -l$PDO_MYSQL_LIBNAME""... $ac_c" 1>&6
+echo "configure:70649: checking for mysql_query in -l$PDO_MYSQL_LIBNAME" >&5
+ac_lib_var=`echo $PDO_MYSQL_LIBNAME'_'mysql_query | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-l$pdo_odbc_def_lib  $LIBS"
+LIBS="-l$PDO_MYSQL_LIBNAME  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 72466 "configure"
+#line 70657 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char SQLBindCol();
+char mysql_query();
 
 int main() {
-SQLBindCol()
+mysql_query()
 ; return 0; }
 EOF
-if { (eval echo configure:72477: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:70668: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -72492,18 +70683,52 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
     
-            
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="$PDO_ODBC_LDFLAGS"
+      
+  for ac_i in $PDO_MYSQL_INCLUDE; do
+    case $ac_i in
+    -I*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/include"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
   
-  save_ext_shared=$ext_shared
-  ext_shared=yes
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  for ac_i in $ac_stuff; do
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+    ;;
+    esac
+  done
+
+      
+  for ac_i in $PDO_MYSQL_LIBS; do
     case $ac_i in
     -pthread)
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
+        PDO_MYSQL_SHARED_LIBADD="$PDO_MYSQL_SHARED_LIBADD -pthread"
       else
         
   
@@ -72525,7 +70750,7 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
   c|c_r|pthread*) ;;
   *) 
     if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
+        PDO_MYSQL_SHARED_LIBADD="$PDO_MYSQL_SHARED_LIBADD -l$ac_ii" 
     else
       
   
@@ -72560,8 +70785,8 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
 
     
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+        PDO_MYSQL_SHARED_LIBADD="-L$ai_p $PDO_MYSQL_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && PDO_MYSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_MYSQL_SHARED_LIBADD"
       else
         
   
@@ -72587,44 +70812,6 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
     esac
   done
 
-  echo $ac_n "checking for SQLAllocHandle in -l$pdo_odbc_def_lib""... $ac_c" 1>&6
-echo "configure:72592: checking for SQLAllocHandle in -l$pdo_odbc_def_lib" >&5
-ac_lib_var=`echo $pdo_odbc_def_lib'_'SQLAllocHandle | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-l$pdo_odbc_def_lib  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 72600 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char SQLAllocHandle();
-
-int main() {
-SQLAllocHandle()
-; return 0; }
-EOF
-if { (eval echo configure:72611: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
     
   
 else
@@ -72632,548 +70819,398 @@ else
 
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
-    unset ac_cv_lib_$pdo_odbc_def_lib_SQLAllocHandle
+    unset ac_cv_lib_$PDO_MYSQL_LIBNAME_mysql_query
     
-      { echo "configure: error: 
-Your ODBC library does not appear to be ODBC 3 compatible.
-You should consider using iODBC or unixODBC instead, and loading your
-libraries as a driver in that environment; it will emulate the
-functions required for PDO support.
-" 1>&2; exit 1; }
-  
-fi
+      if test "$PHP_ZLIB_DIR" != "no"; then
+        
 
-  
-  
-else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_$pdo_odbc_def_lib_SQLBindCol
+  if test "$ext_shared" = "yes"; then
+    PDO_MYSQL_SHARED_LIBADD="-lz $PDO_MYSQL_SHARED_LIBADD"
+    if test -n "$PHP_ZLIB_DIR"; then
+      
+  if test "$PHP_ZLIB_DIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR" != "/usr/lib"; then
     
-    { echo "configure: error: Your ODBC library does not exist or there was an error. Check config.log for more information" 1>&2; exit 1; }
-  
-  
-fi
-
-
-  
-  ext_builddir=ext/pdo_odbc
-  ext_srcdir=$abs_srcdir/ext/pdo_odbc
-
-  ac_extra=`echo "-I$pdo_inc_path $PDO_ODBC_INCLUDE"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
+  if test -z "$PHP_ZLIB_DIR" || echo "$PHP_ZLIB_DIR" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_ZLIB_DIR
+  else
+    
+    ep_dir="`echo $PHP_ZLIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR\"`"
+  fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_PDO_ODBC_SHARED=no
     
+      if test "$ext_shared" = "yes"; then
+        PDO_MYSQL_SHARED_LIBADD="-L$ai_p $PDO_MYSQL_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && PDO_MYSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_MYSQL_SHARED_LIBADD"
+      else
+        
   
-  case ext/pdo_odbc in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_odbc/"; ac_bdir="ext/pdo_odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in pdo_odbc.c odbc_driver.c odbc_stmt.c; do
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+  fi
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
 
+      fi
+    
+  fi
 
-    EXT_STATIC="$EXT_STATIC pdo_odbc"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_odbc"
     fi
   else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_PDO_ODBC_SHARED=yes
+    
+
+  if test -n "$PHP_ZLIB_DIR"; then
+    
+  if test "$PHP_ZLIB_DIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR" != "/usr/lib"; then
+    
+  if test -z "$PHP_ZLIB_DIR" || echo "$PHP_ZLIB_DIR" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_ZLIB_DIR
+  else
+    
+    ep_dir="`echo $PHP_ZLIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR\"`"
+  fi
+
+    
       
-  case ext/pdo_odbc in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_odbc/"; ac_bdir="ext/pdo_odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
   
   
-
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
-
-
-  old_IFS=$IFS
-  for ac_src in pdo_odbc.c odbc_driver.c odbc_stmt.c; do
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_pdo_odbc="$shared_objects_pdo_odbc $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_odbc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_odbc) $(PHPPDO_ODBC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_odbc.so '$ext_builddir'/phppdo_odbc.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_odbc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO_ODBC, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_odbc) $(PHPPDO_ODBC_SHARED_LIBADD)'
-      ;;
-  esac
+    
+  fi
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_odbc.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_odbc.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_odbc"
+  
+  case z in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lz $LIBS" 
+   ;;
+  esac
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phppdo_odbc.$suffix: $ext_builddir/phppdo_odbc.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_odbc.$suffix \$(phplibdir)
 
-$ext_builddir/phppdo_odbc.$suffix: \$(shared_objects_pdo_odbc) \$(PHPPDO_ODBC_SHARED_DEPENDENCIES)
-	$link_cmd
 
-EOF
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
+  fi
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_odbc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_odbc) $(PDO_ODBC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_odbc.so '$ext_builddir'/pdo_odbc.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_odbc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO_ODBC, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_odbc) $(PDO_ODBC_SHARED_LIBADD)'
-      ;;
-  esac
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_odbc.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_odbc.$suffix"
-  fi
+        
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+          -L$PHP_ZLIB_DIR/$PHP_LIBDIR -L$PDO_MYSQL_LIB_DIR 
+        "
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_odbc"
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/pdo_odbc.$suffix: $ext_builddir/pdo_odbc.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_odbc.$suffix \$(phplibdir)
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-$ext_builddir/pdo_odbc.$suffix: \$(shared_objects_pdo_odbc) \$(PDO_ODBC_SHARED_DEPENDENCIES)
-	$link_cmd
 
-EOF
+    fi
+   ;;
+  esac
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_PDO_ODBC 1
-EOF
 
-    fi
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_PDO_ODBC_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
         
   
-  case ext/pdo_odbc in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_odbc/"; ac_bdir="ext/pdo_odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
+  fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
 
+      fi
+    
+  fi
 
-  old_IFS=$IFS
-  for ac_src in pdo_odbc.c odbc_driver.c odbc_stmt.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+    ;;
+    esac
+  done
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+  echo $ac_n "checking for mysql_query in -l$PDO_MYSQL_LIBNAME""... $ac_c" 1>&6
+echo "configure:71021: checking for mysql_query in -l$PDO_MYSQL_LIBNAME" >&5
+ac_lib_var=`echo $PDO_MYSQL_LIBNAME'_'mysql_query | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-l$PDO_MYSQL_LIBNAME  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 71029 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char mysql_query();
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+int main() {
+mysql_query()
+; return 0; }
 EOF
-  done
+if { (eval echo configure:71040: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+  
+else
+  echo "$ac_t""no" 1>&6
 
-        EXT_STATIC="$EXT_STATIC pdo_odbc"
-        ;;
-      *)
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_$PDO_MYSQL_LIBNAME_mysql_query
+    
+          { echo "configure: error: PDO_MYSQL configure failed. Please check config.log for more information." 1>&2; exit 1; }
         
   
-  case ext/pdo_odbc in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_odbc/"; ac_bdir="ext/pdo_odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
+fi
   
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in pdo_odbc.c odbc_driver.c odbc_stmt.c; do
+        PDO_MYSQL_LIBS="$PDO_MYSQL_LIBS -L$PHP_ZLIB_DIR/$PHP_LIBDIR -lz"
+      else
+        
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+  case z in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        PDO_MYSQL_SHARED_LIBADD="-lz $PDO_MYSQL_SHARED_LIBADD" 
+    else
       
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+  
+  case z in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lz $LIBS" 
+   ;;
+  esac
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+    fi
+   ;;
+  esac
 
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_odbc"
-  fi
+        
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+          -L$PDO_MYSQL_LIB_DIR
+        "
   
+  save_ext_shared=$ext_shared
+  ext_shared=yes
   
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=pdo_odbc
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
-  fi
+    fi
+   ;;
+  esac
 
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_ODBC_SHARED_LIBADD"
 
-  
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
     
-  am_i_shared=$PHP_PDO_ODBC_SHARED
-  is_it_shared=$PHP_PDO_SHARED
-  is_it_enabled=$PHP_PDO
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension pdo_odbc to build statically, but it
-depends on extension pdo, which you've configured to build shared.
-You either need to build pdo_odbc shared or build pdo statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension pdo_odbc, which depends on extension pdo,
-but you've either not enabled pdo, or have disabled it.
-" 1>&2; exit 1; }
-  fi
-  
-  
-fi
-
-
-
-php_with_pdo_pgsql=no
-
-echo $ac_n "checking for PostgreSQL support for PDO""... $ac_c" 1>&6
-echo "configure:72985: checking for PostgreSQL support for PDO" >&5
-# Check whether --with-pdo-pgsql or --without-pdo-pgsql was given.
-if test "${with_pdo_pgsql+set}" = set; then
-  withval="$with_pdo_pgsql"
-  PHP_PDO_PGSQL=$withval
-else
-  
-  PHP_PDO_PGSQL=no
-  test "$PHP_ENABLE_ALL" && PHP_PDO_PGSQL=$PHP_ENABLE_ALL
-
-fi
-
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_PDO_PGSQL in
-shared,*)
-  PHP_PDO_PGSQL=`echo "$PHP_PDO_PGSQL"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_PDO_PGSQL=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test "$PHP_PDO_PGSQL" != "no"; then
-
-  if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
-    { echo "configure: error: PDO is not enabled! Add --enable-pdo to your configure line." 1>&2; exit 1; }
-  fi
-
-  
-  if test -z "$PGSQL_INCLUDE" || echo "$PGSQL_INCLUDE" | grep '^/' >/dev/null ; then
-    PGSQL_INCLUDE=$PGSQL_INCLUDE
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
     
-    ep_dir="`echo $PGSQL_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    PGSQL_INCLUDE="$ep_realdir/`basename \"$PGSQL_INCLUDE\"`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
 
-
-  echo $ac_n "checking for pg_config""... $ac_c" 1>&6
-echo "configure:73044: checking for pg_config" >&5
-  for i in $PHP_PDO_PGSQL $PHP_PDO_PGSQL/bin /usr/local/pgsql/bin /usr/local/bin /usr/bin ""; do
-    if test -x $i/pg_config; then
-      PG_CONFIG="$i/pg_config"
-      break;
-    fi
-  done
-
-  if test -n "$PG_CONFIG"; then
-    echo "$ac_t""$PG_CONFIG" 1>&6
-    PGSQL_INCLUDE=`$PG_CONFIG --includedir`
-    PGSQL_LIBDIR=`$PG_CONFIG --libdir`
-    cat >> confdefs.h <<\EOF
-#define HAVE_PG_CONFIG_H 1
-EOF
-
-  else
-    echo "$ac_t""not found" 1>&6
-    if test "$PHP_PDO_PGSQL" = "yes"; then
-      PGSQL_SEARCH_PATHS="/usr /usr/local /usr/local/pgsql"
-    else
-      PGSQL_SEARCH_PATHS=$PHP_PDO_PGSQL
-    fi
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-    for i in $PGSQL_SEARCH_PATHS; do
-      for j in include include/pgsql include/postgres include/postgresql ""; do
-        if test -r "$i/$j/libpq-fe.h"; then
-          PGSQL_INC_BASE=$i
-          PGSQL_INCLUDE=$i/$j
-          if test -r "$i/$j/pg_config.h"; then
-            cat >> confdefs.h <<\EOF
-#define HAVE_PG_CONFIG_H 1
-EOF
-
-          fi
-        fi
-      done
-
-      for j in $PHP_LIBDIR $PHP_LIBDIR/pgsql $PHP_LIBDIR/postgres $PHP_LIBDIR/postgresql ""; do
-        if test -f "$i/$j/libpq.so" || test -f "$i/$j/libpq.a"; then 
-          PGSQL_LIBDIR=$i/$j
-        fi
-      done
-    done
-  fi
-
-  if test -z "$PGSQL_INCLUDE"; then
-    { echo "configure: error: Cannot find libpq-fe.h. Please specify correct PostgreSQL installation path" 1>&2; exit 1; }
   fi
 
-  if test -z "$PGSQL_LIBDIR"; then
-    { echo "configure: error: Cannot find libpq.so. Please specify correct PostgreSQL installation path" 1>&2; exit 1; }
-  fi
 
-  if test -z "$PGSQL_INCLUDE" -a -z "$PGSQL_LIBDIR" ; then
-    { echo "configure: error: Unable to find libpq anywhere under $PGSQL_SEARCH_PATHS" 1>&2; exit 1; }
+      fi
+    
   fi
 
-  cat >> confdefs.h <<\EOF
-#define HAVE_PDO_PGSQL 1
-EOF
-
-
-  echo $ac_n "checking for openssl dependencies""... $ac_c" 1>&6
-echo "configure:73108: checking for openssl dependencies" >&5
-  if grep -q openssl $PGSQL_INCLUDE/libpq-fe.h ; then
-    echo "$ac_t""yes" 1>&6
-        # Extract the first word of "pkg-config", so it can be a program name with args.
-set dummy pkg-config; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:73114: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  case "$PKG_CONFIG" in
-  /*)
-  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
-  ;;
-  ?:/*)			 
-  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
-  ;;
-  *)
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do 
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
-      break
-    fi
+    ;;
+    esac
   done
-  IFS="$ac_save_ifs"
-  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
-  ;;
-esac
-fi
-PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
-if test -n "$PKG_CONFIG"; then
-  echo "$ac_t""$PKG_CONFIG" 1>&6
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-    if test -x "$PKG_CONFIG" && $PKG_CONFIG --exists openssl; then
-      PDO_PGSQL_CFLAGS=`$PKG_CONFIG openssl --cflags`
-    fi
-  else
-    echo "$ac_t""no" 1>&6
-  fi
 
-  old_LIBS=$LIBS
-  old_LDFLAGS=$LDFLAGS
-  LDFLAGS="-L$PGSQL_LIBDIR $LDFLAGS"
-  echo $ac_n "checking for PQparameterStatus in -lpq""... $ac_c" 1>&6
-echo "configure:73158: checking for PQparameterStatus in -lpq" >&5
-ac_lib_var=`echo pq'_'PQparameterStatus | sed 'y%./+-%__p_%'`
+  echo $ac_n "checking for mysql_query in -l$PDO_MYSQL_LIBNAME""... $ac_c" 1>&6
+echo "configure:71195: checking for mysql_query in -l$PDO_MYSQL_LIBNAME" >&5
+ac_lib_var=`echo $PDO_MYSQL_LIBNAME'_'mysql_query | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
+LIBS="-l$PDO_MYSQL_LIBNAME  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 73166 "configure"
+#line 71203 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char PQparameterStatus();
+char mysql_query();
 
 int main() {
-PQparameterStatus()
+mysql_query()
 ; return 0; }
 EOF
-if { (eval echo configure:73177: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:71214: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -73188,260 +71225,132 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQPARAMETERSTATUS 1
-EOF
-
-else
-  echo "$ac_t""no" 1>&6
-
-    echo "Unable to build the PDO PostgreSQL driver: libpq 7.4+ is required"
-    exit 1
   
-fi
-
-
-  echo $ac_n "checking for PQprepare in -lpq""... $ac_c" 1>&6
-echo "configure:73206: checking for PQprepare in -lpq" >&5
-ac_lib_var=`echo pq'_'PQprepare | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 73214 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQprepare();
-
-int main() {
-PQprepare()
-; return 0; }
-EOF
-if { (eval echo configure:73225: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQPREPARE 1
-EOF
-
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-  echo $ac_n "checking for PQescapeStringConn in -lpq""... $ac_c" 1>&6
-echo "configure:73249: checking for PQescapeStringConn in -lpq" >&5
-ac_lib_var=`echo pq'_'PQescapeStringConn | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 73257 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQescapeStringConn();
-
-int main() {
-PQescapeStringConn()
-; return 0; }
-EOF
-if { (eval echo configure:73268: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQESCAPE_CONN 1
-EOF
-
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-  echo $ac_n "checking for PQescapeByteaConn in -lpq""... $ac_c" 1>&6
-echo "configure:73292: checking for PQescapeByteaConn in -lpq" >&5
-ac_lib_var=`echo pq'_'PQescapeByteaConn | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 73300 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQescapeByteaConn();
-
-int main() {
-PQescapeByteaConn()
-; return 0; }
-EOF
-if { (eval echo configure:73311: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQESCAPE_BYTEA_CONN 1
-EOF
-
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-
-  echo $ac_n "checking for pg_encoding_to_char in -lpq""... $ac_c" 1>&6
-echo "configure:73336: checking for pg_encoding_to_char in -lpq" >&5
-ac_lib_var=`echo pq'_'pg_encoding_to_char | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 73344 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char pg_encoding_to_char();
-
-int main() {
-pg_encoding_to_char()
-; return 0; }
-EOF
-if { (eval echo configure:73355: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PGSQL_WITH_MULTIBYTE_SUPPORT 1
-EOF
-
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+  
 else
   echo "$ac_t""no" 1>&6
-fi
-
-  
-
-  LIBS=$old_LIBS
-  LDFLAGS=$old_LDFLAGS
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_$PDO_MYSQL_LIBNAME_mysql_query
+    
+          { echo "configure: error: Try adding --with-zlib-dir=<DIR>. Please check config.log for more information." 1>&2; exit 1; }
+        
   
+fi
+   
+        PDO_MYSQL_LIBS="$PDO_MYSQL_LIBS -lz"
+      fi
 
-  if test "$ext_shared" = "yes"; then
-    PDO_PGSQL_SHARED_LIBADD="-lpq $PDO_PGSQL_SHARED_LIBADD"
-    if test -n "$PGSQL_LIBDIR"; then
       
-  if test "$PGSQL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PGSQL_LIBDIR" != "/usr/lib"; then
+  for ac_i in $PDO_MYSQL_INCLUDE; do
+    case $ac_i in
+    -I*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/include"; then
     
-  if test -z "$PGSQL_LIBDIR" || echo "$PGSQL_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PGSQL_LIBDIR
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
     
-    ep_dir="`echo $PGSQL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PGSQL_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
 
     
-      if test "$ext_shared" = "yes"; then
-        PDO_PGSQL_SHARED_LIBADD="-L$ai_p $PDO_PGSQL_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && PDO_PGSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_PGSQL_SHARED_LIBADD"
-      else
-        
-  
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
     
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
   fi
 
+  fi
 
-      fi
-    
+    ;;
+    esac
+  done
+
+      
+  for ac_i in $PDO_MYSQL_LIBS; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        PDO_MYSQL_SHARED_LIBADD="$PDO_MYSQL_SHARED_LIBADD -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
   fi
 
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        PDO_MYSQL_SHARED_LIBADD="$PDO_MYSQL_SHARED_LIBADD -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
     fi
-  else
-    
+   ;;
+  esac
 
-  if test -n "$PGSQL_LIBDIR"; then
-    
-  if test "$PGSQL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PGSQL_LIBDIR" != "/usr/lib"; then
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
     
-  if test -z "$PGSQL_LIBDIR" || echo "$PGSQL_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PGSQL_LIBDIR
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
     
-    ep_dir="`echo $PGSQL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PGSQL_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
 
     
-      
+      if test "$ext_shared" = "yes"; then
+        PDO_MYSQL_SHARED_LIBADD="-L$ai_p $PDO_MYSQL_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && PDO_MYSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_MYSQL_SHARED_LIBADD"
+      else
+        
   
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
@@ -73457,71 +71366,89 @@ fi
   fi
 
 
+      fi
     
   fi
 
-  fi
-  
-  
-  case pq in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lpq $LIBS" 
-   ;;
-  esac
-
-
-
+    ;;
+    esac
+  done
 
-  fi
+    
+  
+fi
 
 
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_PGSQL_SHARED_LIBADD"
+    _SAVE_LIBS=$LIBS
+    LIBS="$LIBS $PDO_MYSQL_LIBS"
+    for ac_func in mysql_commit mysql_stmt_prepare mysql_next_result mysql_sqlstate
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:71388: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 71393 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
 
+int main() {
 
-  
-  if test "$PGSQL_INCLUDE" != "/usr/include"; then
-    
-  if test -z "$PGSQL_INCLUDE" || echo "$PGSQL_INCLUDE" | grep '^/' >/dev/null ; then
-    ai_p=$PGSQL_INCLUDE
-  else
-    
-    ep_dir="`echo $PGSQL_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PGSQL_INCLUDE\"`"
-  fi
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
 
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
+; return 0; }
+EOF
+if { (eval echo configure:71416: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=no"
+fi
+rm -f conftest*
+fi
 
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+ 
+    LIBS=$_SAVE_LIBS
   fi
 
-
   
     
   echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:73519: checking for PDO includes" >&5
+echo "configure:71446: checking for PDO includes" >&5
 if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
     echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:73525: checking for PDO includes" >&5
+echo "configure:71452: checking for PDO includes" >&5
     if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
       pdo_inc_path=$abs_srcdir/ext
     elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
@@ -73541,20 +71468,28 @@ echo "$ac_t""$pdo_inc_path" 1>&6
 
   
 
-  
-  ext_builddir=ext/pdo_pgsql
-  ext_srcdir=$abs_srcdir/ext/pdo_pgsql
+  if test -n "$PDO_MYSQL_CONFIG"; then
+    PDO_MYSQL_SOCKET=`$PDO_MYSQL_CONFIG --socket`
+    cat >> confdefs.h <<EOF
+#define PDO_MYSQL_UNIX_ADDR "$PDO_MYSQL_SOCKET"
+EOF
 
-  ac_extra=`echo "-I$pdo_inc_path $PDO_PGSQL_CFLAGS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
+  fi
+
+    
+  ext_builddir=ext/pdo_mysql
+  ext_srcdir=$abs_srcdir/ext/pdo_mysql
+
+  ac_extra=`echo "-I$pdo_inc_path -I"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_PDO_PGSQL_SHARED=no
+    PHP_PDO_MYSQL_SHARED=no
     
   
-  case ext/pdo_pgsql in
+  case ext/pdo_mysql in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_pgsql/"; ac_bdir="ext/pdo_pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_mysql/"; ac_bdir="ext/pdo_mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -73569,7 +71504,7 @@ echo "$ac_t""$pdo_inc_path" 1>&6
 
 
   old_IFS=$IFS
-  for ac_src in pdo_pgsql.c pgsql_driver.c pgsql_statement.c; do
+  for ac_src in pdo_mysql.c mysql_driver.c mysql_statement.c; do
   
       IFS=.
       set $ac_src
@@ -73592,18 +71527,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC pdo_pgsql"
+    EXT_STATIC="$EXT_STATIC pdo_mysql"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_pgsql"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_mysql"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_PDO_PGSQL_SHARED=yes
+      PHP_PDO_MYSQL_SHARED=yes
       
-  case ext/pdo_pgsql in
+  case ext/pdo_mysql in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_pgsql/"; ac_bdir="ext/pdo_pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_mysql/"; ac_bdir="ext/pdo_mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -73618,14 +71553,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in pdo_pgsql.c pgsql_driver.c pgsql_statement.c; do
+  for ac_src in pdo_mysql.c mysql_driver.c mysql_statement.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_pdo_pgsql="$shared_objects_pdo_pgsql $ac_bdir$ac_obj.lo"
+      shared_objects_pdo_mysql="$shared_objects_pdo_mysql $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -73648,31 +71583,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_pgsql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_pgsql) $(PHPPDO_PGSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_pgsql.so '$ext_builddir'/phppdo_pgsql.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_mysql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_mysql) $(PHPPDO_MYSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_mysql.so '$ext_builddir'/phppdo_mysql.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_pgsql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO_PGSQL, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_mysql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO_MYSQL, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_pgsql) $(PHPPDO_PGSQL_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_mysql) $(PHPPDO_MYSQL_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_pgsql.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_mysql.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_pgsql.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_mysql.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_pgsql"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_mysql"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phppdo_pgsql.$suffix: $ext_builddir/phppdo_pgsql.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_pgsql.$suffix \$(phplibdir)
+\$(phplibdir)/phppdo_mysql.$suffix: $ext_builddir/phppdo_mysql.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_mysql.$suffix \$(phplibdir)
 
-$ext_builddir/phppdo_pgsql.$suffix: \$(shared_objects_pdo_pgsql) \$(PHPPDO_PGSQL_SHARED_DEPENDENCIES)
+$ext_builddir/phppdo_mysql.$suffix: \$(shared_objects_pdo_mysql) \$(PHPPDO_MYSQL_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -73685,31 +71620,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_pgsql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_pgsql) $(PDO_PGSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_pgsql.so '$ext_builddir'/pdo_pgsql.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_mysql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_mysql) $(PDO_MYSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_mysql.so '$ext_builddir'/pdo_mysql.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_pgsql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO_PGSQL, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_mysql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO_MYSQL, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_pgsql) $(PDO_PGSQL_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_mysql) $(PDO_MYSQL_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_pgsql.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_mysql.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_pgsql.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_mysql.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_pgsql"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_mysql"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/pdo_pgsql.$suffix: $ext_builddir/pdo_pgsql.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_pgsql.$suffix \$(phplibdir)
+\$(phplibdir)/pdo_mysql.$suffix: $ext_builddir/pdo_mysql.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_mysql.$suffix \$(phplibdir)
 
-$ext_builddir/pdo_pgsql.$suffix: \$(shared_objects_pdo_pgsql) \$(PDO_PGSQL_SHARED_DEPENDENCIES)
+$ext_builddir/pdo_mysql.$suffix: \$(shared_objects_pdo_mysql) \$(PDO_MYSQL_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -73717,22 +71652,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_PDO_PGSQL 1
+#define COMPILE_DL_PDO_MYSQL 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_PDO_PGSQL_SHARED=no
+    PHP_PDO_MYSQL_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/pdo_pgsql in
+  case ext/pdo_mysql in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_pgsql/"; ac_bdir="ext/pdo_pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_mysql/"; ac_bdir="ext/pdo_mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -73747,7 +71682,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in pdo_pgsql.c pgsql_driver.c pgsql_statement.c; do
+  for ac_src in pdo_mysql.c mysql_driver.c mysql_statement.c; do
   
       IFS=.
       set $ac_src
@@ -73770,15 +71705,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC pdo_pgsql"
+        EXT_STATIC="$EXT_STATIC pdo_mysql"
         ;;
       *)
         
   
-  case ext/pdo_pgsql in
+  case ext/pdo_mysql in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_pgsql/"; ac_bdir="ext/pdo_pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_mysql/"; ac_bdir="ext/pdo_mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -73793,7 +71728,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in pdo_pgsql.c pgsql_driver.c pgsql_statement.c; do
+  for ac_src in pdo_mysql.c mysql_driver.c mysql_statement.c; do
   
       IFS=.
       set $ac_src
@@ -73818,7 +71753,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_pgsql"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_mysql"
   fi
   
   
@@ -73827,7 +71762,7 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=pdo_pgsql
+    PHP_PECL_EXTENSION=pdo_mysql
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
@@ -73835,41 +71770,78 @@ EOF
 
   
     
-  am_i_shared=$PHP_PDO_PGSQL_SHARED
+  am_i_shared=$PHP_PDO_MYSQL_SHARED
   is_it_shared=$PHP_PDO_SHARED
   is_it_enabled=$PHP_PDO
   if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
     { echo "configure: error: 
-You've configured extension pdo_pgsql to build statically, but it
+You've configured extension pdo_mysql to build statically, but it
 depends on extension pdo, which you've configured to build shared.
-You either need to build pdo_pgsql shared or build pdo statically for the
+You either need to build pdo_mysql shared or build pdo statically for the
 build to be successful.
 " 1>&2; exit 1; }
   fi
   if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
     { echo "configure: error: 
-You've configured extension pdo_pgsql, which depends on extension pdo,
+You've configured extension pdo_mysql, which depends on extension pdo,
 but you've either not enabled pdo, or have disabled it.
 " 1>&2; exit 1; }
   fi
-   
   
+    if test "$PHP_MYSQL" = "mysqlnd"; then
+      
+  am_i_shared=$PHP_PDO_MYSQL_SHARED
+  is_it_shared=$PHP_MYSQLND_SHARED
+  is_it_enabled=$PHP_MYSQLND
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension pdo_mysql to build statically, but it
+depends on extension mysqlnd, which you've configured to build shared.
+You either need to build pdo_mysql shared or build mysqlnd statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension pdo_mysql, which depends on extension mysqlnd,
+but you've either not enabled mysqlnd, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+    fi
+  
+  PDO_MYSQL_MODULE_TYPE=external
+
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_MYSQL_SHARED_LIBADD"
+
+  
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_MYSQL_MODULE_TYPE"
+
+  
+
 fi
 
 
+SUPPORTED_LIB_VERS="9.0 10.1 11.1"  # This caters for all Oracle 9.x, 10.x and 11.1 installs
+                                                                                                                                                                
 
-php_with_pdo_sqlite=$PHP_PDO
 
-echo $ac_n "checking for sqlite 3 support for PDO""... $ac_c" 1>&6
-echo "configure:73865: checking for sqlite 3 support for PDO" >&5
-# Check whether --with-pdo-sqlite or --without-pdo-sqlite was given.
-if test "${with_pdo_sqlite+set}" = set; then
-  withval="$with_pdo_sqlite"
-  PHP_PDO_SQLITE=$withval
+
+
+php_with_pdo_oci=no
+
+echo $ac_n "checking Oracle OCI support for PDO""... $ac_c" 1>&6
+echo "configure:71837: checking Oracle OCI support for PDO" >&5
+# Check whether --with-pdo-oci or --without-pdo-oci was given.
+if test "${with_pdo_oci+set}" = set; then
+  withval="$with_pdo_oci"
+  PHP_PDO_OCI=$withval
 else
   
-  PHP_PDO_SQLITE=$PHP_PDO
-  test "$PHP_ENABLE_ALL" && PHP_PDO_SQLITE=$PHP_ENABLE_ALL
+  PHP_PDO_OCI=no
+  test "$PHP_ENABLE_ALL" && PHP_PDO_OCI=$PHP_ENABLE_ALL
 
 fi
 
@@ -73877,12 +71849,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_PDO_SQLITE in
+case $PHP_PDO_OCI in
 shared,*)
-  PHP_PDO_SQLITE=`echo "$PHP_PDO_SQLITE"|$SED 's/^shared,//'`
+  PHP_PDO_OCI=`echo "$PHP_PDO_OCI"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_PDO_SQLITE=yes
+  PHP_PDO_OCI=yes
   ;;
 no)
   ext_output=no
@@ -73901,74 +71873,48 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
-if test "$PHP_PDO_SQLITE" != "no"; then
+if test "$PHP_PDO_OCI" != "no"; then
 
   if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
     { echo "configure: error: PDO is not enabled! Add --enable-pdo to your configure line." 1>&2; exit 1; }
   fi
 
-  
-    
-  echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:73914: checking for PDO includes" >&5
-if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-    echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:73920: checking for PDO includes" >&5
-    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
-      pdo_inc_path=$abs_srcdir/ext
-    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
-      pdo_inc_path=$abs_srcdir/ext
-    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
-      pdo_inc_path=$prefix/include/php/ext
-    fi
-  
-fi
-
-echo "$ac_t""$pdo_inc_path" 1>&6
-  if test -n "$pdo_inc_path"; then
-:
+  echo $ac_n "checking Oracle Install-Dir""... $ac_c" 1>&6
+echo "configure:71884: checking Oracle Install-Dir" >&5
+  if test "$PHP_PDO_OCI" = "yes" || test -z "$PHP_PDO_OCI"; then
+    PDO_OCI_DIR=$ORACLE_HOME
   else
-{ echo "configure: error: Cannot find php_pdo_driver.h." 1>&2; exit 1; }
+    PDO_OCI_DIR=$PHP_PDO_OCI
   fi
+  echo "$ac_t""$PHP_PDO_OCI" 1>&6
 
-  
-
-  php_pdo_sqlite_sources_core="pdo_sqlite.c sqlite_driver.c sqlite_statement.c"
-
-  if test "$PHP_PDO_SQLITE" != "yes"; then
-    SEARCH_PATH="$PHP_PDO_SQLITE /usr/local /usr"     # you might want to change this
-    SEARCH_FOR="/include/sqlite3.h"  # you most likely want to change this
-    if test -r $PHP_PDO_SQLITE/$SEARCH_FOR; then # path given as parameter
-      PDO_SQLITE_DIR=$PHP_PDO_SQLITE
-    else # search default path list
-      echo $ac_n "checking for sqlite3 files in default path""... $ac_c" 1>&6
-echo "configure:73949: checking for sqlite3 files in default path" >&5
-      for i in $SEARCH_PATH ; do
-        if test -r $i/$SEARCH_FOR; then
-          PDO_SQLITE_DIR=$i
-          echo "$ac_t""found in $i" 1>&6
-        fi
-      done
-    fi
-    if test -z "$PDO_SQLITE_DIR"; then
-      echo "$ac_t""not found" 1>&6
-      { echo "configure: error: Please reinstall the sqlite3 distribution" 1>&2; exit 1; }
-    fi
+  echo $ac_n "checking if that is sane""... $ac_c" 1>&6
+echo "configure:71893: checking if that is sane" >&5
+  if test -z "$PDO_OCI_DIR"; then
+    { echo "configure: error: 
+You need to tell me where to find your Oracle Instant Client SDK, or set ORACLE_HOME.
+" 1>&2; exit 1; }
+  else
+    echo "$ac_t""yes" 1>&6
+  fi
 
+  if test "instantclient" = "`echo $PDO_OCI_DIR | cut -d, -f1`" ; then
+    PDO_OCI_IC_PREFIX="`echo $PDO_OCI_DIR | cut -d, -f2`"
+    PDO_OCI_IC_VERS="`echo $PDO_OCI_DIR | cut -d, -f3`"
+    echo $ac_n "checking for oci.h""... $ac_c" 1>&6
+echo "configure:71906: checking for oci.h" >&5
+    if test -f $PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/client/oci.h ; then
+      
+  if test "$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/client" != "/usr/include"; then
     
-  if test "$PDO_SQLITE_DIR/include" != "/usr/include"; then
-    
-  if test -z "$PDO_SQLITE_DIR/include" || echo "$PDO_SQLITE_DIR/include" | grep '^/' >/dev/null ; then
-    ai_p=$PDO_SQLITE_DIR/include
+  if test -z "$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/client" || echo "$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/client" | grep '^/' >/dev/null ; then
+    ai_p=$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/client
   else
     
-    ep_dir="`echo $PDO_SQLITE_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/client|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PDO_SQLITE_DIR/include\"`"
+    ai_p="$ep_realdir/`basename \"$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/client\"`"
   fi
 
     
@@ -73989,209 +71935,423 @@ echo "configure:73949: checking for sqli
 
   fi
 
-
-    LIBNAME=sqlite3
-    LIBSYMBOL=sqlite3_open
+      echo "$ac_t""$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/client" 1>&6
+    elif test -f $PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/client/include/oci.h ; then
+      
+  if test "$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/client/include" != "/usr/include"; then
+    
+  if test -z "$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/client/include" || echo "$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/client/include" | grep '^/' >/dev/null ; then
+    ai_p=$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/client/include
+  else
+    
+    ep_dir="`echo $PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/client/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/client/include\"`"
+  fi
 
     
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-      -L$PDO_SQLITE_DIR/$PHP_LIBDIR -lm
-    "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
   
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
       fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
+    
+  fi
 
+  fi
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
+      echo "$ac_t""$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/client/include" 1>&6
+    elif test -f $PDO_OCI_IC_PREFIX/sdk/include/oci.h ; then
       
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+  if test "$PDO_OCI_IC_PREFIX/sdk/include" != "/usr/include"; then
     
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+  if test -z "$PDO_OCI_IC_PREFIX/sdk/include" || echo "$PDO_OCI_IC_PREFIX/sdk/include" | grep '^/' >/dev/null ; then
+    ai_p=$PDO_OCI_IC_PREFIX/sdk/include
   else
     
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $PDO_OCI_IC_PREFIX/sdk/include|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    ai_p="$ep_realdir/`basename \"$PDO_OCI_IC_PREFIX/sdk/include\"`"
   fi
 
     
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
+    eval "INCLUDEPATH$unique=set"
     
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
       fi
     
   fi
 
-    ;;
-    esac
-  done
-
-  echo $ac_n "checking for $LIBSYMBOL in -l$LIBNAME""... $ac_c" 1>&6
-echo "configure:74095: checking for $LIBSYMBOL in -l$LIBNAME" >&5
-ac_lib_var=`echo $LIBNAME'_'$LIBSYMBOL | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-l$LIBNAME  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 74103 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $LIBSYMBOL();
-
-int main() {
-$LIBSYMBOL()
-; return 0; }
-EOF
-if { (eval echo configure:74114: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-      
+  fi
 
-  if test "$ext_shared" = "yes"; then
-    PDO_SQLITE_SHARED_LIBADD="-l$LIBNAME $PDO_SQLITE_SHARED_LIBADD"
-    if test -n "$PDO_SQLITE_DIR/$PHP_LIBDIR"; then
+      echo "$ac_t""$PDO_OCI_IC_PREFIX/sdk/include" 1>&6
+    elif test -f $PDO_OCI_IC_PREFIX/client/include/oci.h ; then
       
-  if test "$PDO_SQLITE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PDO_SQLITE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  if test "$PDO_OCI_IC_PREFIX/client/include" != "/usr/include"; then
     
-  if test -z "$PDO_SQLITE_DIR/$PHP_LIBDIR" || echo "$PDO_SQLITE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PDO_SQLITE_DIR/$PHP_LIBDIR
+  if test -z "$PDO_OCI_IC_PREFIX/client/include" || echo "$PDO_OCI_IC_PREFIX/client/include" | grep '^/' >/dev/null ; then
+    ai_p=$PDO_OCI_IC_PREFIX/client/include
   else
     
-    ep_dir="`echo $PDO_SQLITE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $PDO_OCI_IC_PREFIX/client/include|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PDO_SQLITE_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$PDO_OCI_IC_PREFIX/client/include\"`"
   fi
 
     
-      if test "$ext_shared" = "yes"; then
-        PDO_SQLITE_SHARED_LIBADD="-L$ai_p $PDO_SQLITE_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && PDO_SQLITE_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_SQLITE_SHARED_LIBADD"
-      else
-        
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+      echo "$ac_t""$PDO_OCI_IC_PREFIX/client/include" 1>&6
+    else
+      { echo "configure: error: I'm too dumb to figure out where the include dir is in your Instant Client install" 1>&2; exit 1; }
+    fi
+    if test -f "$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/client/lib/libclntsh.so" ; then
+    PDO_OCI_LIB_DIR="$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/client/lib"
+    elif test -f "$PDO_OCI_IC_PREFIX/client/lib/libclntsh.so" ; then
+      PDO_OCI_LIB_DIR="$PDO_OCI_IC_PREFIX/client/lib"
+    elif test -f "$PDO_OCI_IC_PREFIX/libclntsh.so" ; then
+      PDO_OCI_LIB_DIR="$PDO_OCI_IC_PREFIX"
+    else
+      { echo "configure: error: I'm too dumb to figure out where the libraries are in your Instant Client install" 1>&2; exit 1; }
+    fi
+    PDO_OCI_VERSION="`echo $PDO_OCI_IC_VERS | cut -d. -f1-2`"
+  else
+    
+  echo $ac_n "checking size of long int""... $ac_c" 1>&6
+echo "configure:72055: checking size of long int" >&5
+if eval "test \"`echo '$''{'ac_cv_sizeof_long_int'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_sizeof_long_int=4
+else
+  cat > conftest.$ac_ext <<EOF
+#line 72063 "configure"
+#include "confdefs.h"
+#include <stdio.h>
+#include <sys/types.h>
+main()
+{
+  FILE *f=fopen("conftestval", "w");
+  if (!f) exit(1);
+  fprintf(f, "%d\n", sizeof(long int));
+  exit(0);
+}
+EOF
+if { (eval echo configure:72075: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_sizeof_long_int=`cat conftestval`
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_sizeof_long_int=0
+fi
+rm -fr conftest*
+fi
+
+fi
+echo "$ac_t""$ac_cv_sizeof_long_int" 1>&6
+cat >> confdefs.h <<EOF
+#define SIZEOF_LONG_INT $ac_cv_sizeof_long_int
+EOF
+
+
+  echo $ac_n "checking if we're on a 64-bit platform""... $ac_c" 1>&6
+echo "configure:72095: checking if we're on a 64-bit platform" >&5
+  if test "$ac_cv_sizeof_long_int" = "4" ; then
+    echo "$ac_t""no" 1>&6
+    TMP_PDO_OCI_LIB_DIR="$PDO_OCI_DIR/lib32"
+  else
+    echo "$ac_t""yes" 1>&6
+    TMP_PDO_OCI_LIB_DIR="$PDO_OCI_DIR/lib"
+  fi
+
+  echo $ac_n "checking OCI8 libraries dir""... $ac_c" 1>&6
+echo "configure:72105: checking OCI8 libraries dir" >&5
+  if test -d "$PDO_OCI_DIR/lib" && test ! -d "$PDO_OCI_DIR/lib32"; then
+    PDO_OCI_LIB_DIR="$PDO_OCI_DIR/lib"
+  elif test ! -d "$PDO_OCI_DIR/lib" && test -d "$PDO_OCI_DIR/lib32"; then
+    PDO_OCI_LIB_DIR="$PDO_OCI_DIR/lib32"
+  elif test -d "$PDO_OCI_DIR/lib" && test -d "$PDO_OCI_DIR/lib32"; then
+    PDO_OCI_LIB_DIR=$TMP_PDO_OCI_LIB_DIR
+  else
+    { echo "configure: error: Oracle required OCI8 libraries not found" 1>&2; exit 1; }
+  fi
+  echo "$ac_t""$PDO_OCI_LIB_DIR" 1>&6
+
+
+    if test -d "$PDO_OCI_DIR/rdbms/public"; then
+      
+  if test "$PDO_OCI_DIR/rdbms/public" != "/usr/include"; then
+    
+  if test -z "$PDO_OCI_DIR/rdbms/public" || echo "$PDO_OCI_DIR/rdbms/public" | grep '^/' >/dev/null ; then
+    ai_p=$PDO_OCI_DIR/rdbms/public
+  else
+    
+    ep_dir="`echo $PDO_OCI_DIR/rdbms/public|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PDO_OCI_DIR/rdbms/public\"`"
+  fi
+
+    
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
+    eval "INCLUDEPATH$unique=set"
     
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+      PDO_OCI_INCLUDES="$PDO_OCI_INCLUDES -I$PDO_OCI_DIR/rdbms/public"
+    fi
+    if test -d "$PDO_OCI_DIR/rdbms/demo"; then
+      
+  if test "$PDO_OCI_DIR/rdbms/demo" != "/usr/include"; then
+    
+  if test -z "$PDO_OCI_DIR/rdbms/demo" || echo "$PDO_OCI_DIR/rdbms/demo" | grep '^/' >/dev/null ; then
+    ai_p=$PDO_OCI_DIR/rdbms/demo
+  else
+    
+    ep_dir="`echo $PDO_OCI_DIR/rdbms/demo|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PDO_OCI_DIR/rdbms/demo\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
   fi
 
+      PDO_OCI_INCLUDES="$PDO_OCI_INCLUDES -I$PDO_OCI_DIR/rdbms/demo"
+    fi
+    if test -d "$PDO_OCI_DIR/network/public"; then
+      
+  if test "$PDO_OCI_DIR/network/public" != "/usr/include"; then
+    
+  if test -z "$PDO_OCI_DIR/network/public" || echo "$PDO_OCI_DIR/network/public" | grep '^/' >/dev/null ; then
+    ai_p=$PDO_OCI_DIR/network/public
+  else
+    
+    ep_dir="`echo $PDO_OCI_DIR/network/public|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PDO_OCI_DIR/network/public\"`"
+  fi
 
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
       fi
     
   fi
 
+  fi
+
+      PDO_OCI_INCLUDES="$PDO_OCI_INCLUDES -I$PDO_OCI_DIR/network/public"
     fi
+    if test -d "$PDO_OCI_DIR/plsql/public"; then
+      
+  if test "$PDO_OCI_DIR/plsql/public" != "/usr/include"; then
+    
+  if test -z "$PDO_OCI_DIR/plsql/public" || echo "$PDO_OCI_DIR/plsql/public" | grep '^/' >/dev/null ; then
+    ai_p=$PDO_OCI_DIR/plsql/public
   else
     
+    ep_dir="`echo $PDO_OCI_DIR/plsql/public|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PDO_OCI_DIR/plsql/public\"`"
+  fi
 
-  if test -n "$PDO_SQLITE_DIR/$PHP_LIBDIR"; then
     
-  if test "$PDO_SQLITE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PDO_SQLITE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
     
-  if test -z "$PDO_SQLITE_DIR/$PHP_LIBDIR" || echo "$PDO_SQLITE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PDO_SQLITE_DIR/$PHP_LIBDIR
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+      PDO_OCI_INCLUDES="$PDO_OCI_INCLUDES -I$PDO_OCI_DIR/plsql/public"
+    fi
+    if test -d "$PDO_OCI_DIR/include"; then
+      
+  if test "$PDO_OCI_DIR/include" != "/usr/include"; then
+    
+  if test -z "$PDO_OCI_DIR/include" || echo "$PDO_OCI_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$PDO_OCI_DIR/include
   else
     
-    ep_dir="`echo $PDO_SQLITE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $PDO_OCI_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PDO_SQLITE_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$PDO_OCI_DIR/include\"`"
   fi
 
     
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+      PDO_OCI_INCLUDES="$PDO_OCI_INCLUDES -I$PDO_OCI_DIR/include"
+    fi
+
+    if test -f "$PDO_OCI_LIB_DIR/sysliblist"; then
+      
+  for ac_i in `cat $PDO_OCI_LIB_DIR/sysliblist`; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        PDO_OCI_SYSLIB="$PDO_OCI_SYSLIB -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        PDO_OCI_SYSLIB="$PDO_OCI_SYSLIB -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
       
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        PDO_OCI_SYSLIB="-L$ai_p $PDO_OCI_SYSLIB"
+        test -n "$ld_runpath_switch" && PDO_OCI_SYSLIB="$ld_runpath_switch$ai_p $PDO_OCI_SYSLIB"
+      else
+        
   
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
@@ -74207,46 +72367,196 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
   fi
 
 
+      fi
     
   fi
 
+    ;;
+    esac
+  done
+
+    elif test -f "$PDO_OCI_DIR/rdbms/lib/sysliblist"; then
+      
+  for ac_i in `cat $PDO_OCI_DIR/rdbms/lib/sysliblist`; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        PDO_OCI_SYSLIB="$PDO_OCI_SYSLIB -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
   fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        PDO_OCI_SYSLIB="$PDO_OCI_SYSLIB -l$ac_ii" 
+    else
+      
   
-  case $LIBNAME in
+  case $ac_ii in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-l$LIBNAME $LIBS" 
+      LIBS="$LIBS -l$ac_ii" 
    ;;
   esac
 
 
+    fi
+   ;;
+  esac
+
 
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
 
+    
+      if test "$ext_shared" = "yes"; then
+        PDO_OCI_SYSLIB="-L$ai_p $PDO_OCI_SYSLIB"
+        test -n "$ld_runpath_switch" && PDO_OCI_SYSLIB="$ld_runpath_switch$ai_p $PDO_OCI_SYSLIB"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
   fi
 
 
-      cat >> confdefs.h <<\EOF
-#define HAVE_PDO_SQLITELIB 1
-EOF
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
 
+    fi
     
+  echo $ac_n "checking Oracle version""... $ac_c" 1>&6
+echo "configure:72472: checking Oracle version" >&5
+  for OCI_VER in $SUPPORTED_LIB_VERS; do
+    if test -f $PDO_OCI_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.$OCI_VER; then
+      PDO_OCI_VERSION="$OCI_VER"
+    fi
+  done
+  if test -z "$PDO_OCI_VERSION"; then
+    { echo "configure: error: Oracle required OCI8 libraries not found under $PDO_OCI_DIR" 1>&2; exit 1; }
+  fi
+  echo "$ac_t""$PDO_OCI_VERSION" 1>&6
+
+  fi
+
+  case $PDO_OCI_VERSION in
+    9.0|10.1|10.2|11.1|11.2)
+      
   
-else
-  echo "$ac_t""no" 1>&6
+  case clntsh in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        PDO_OCI_SHARED_LIBADD="$PDO_OCI_SHARED_LIBADD -lclntsh" 
+    else
+      
+  
+  case clntsh in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -lclntsh" 
+   ;;
+  esac
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_$LIBNAME_$LIBSYMBOL
+
+    fi
+   ;;
+  esac
+
+
+      ;;
+
+    *)
+      { echo "configure: error: Unsupported Oracle version $PDO_OCI_VERSION" 1>&2; exit 1; }
+      ;;
+  esac
+
+  
+  if test "$PDO_OCI_LIB_DIR" != "/usr/$PHP_LIBDIR" && test "$PDO_OCI_LIB_DIR" != "/usr/lib"; then
     
-      { echo "configure: error: wrong sqlite lib version or lib not found" 1>&2; exit 1; }
+  if test -z "$PDO_OCI_LIB_DIR" || echo "$PDO_OCI_LIB_DIR" | grep '^/' >/dev/null ; then
+    ai_p=$PDO_OCI_LIB_DIR
+  else
+    
+    ep_dir="`echo $PDO_OCI_LIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PDO_OCI_LIB_DIR\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        PDO_OCI_SHARED_LIBADD="-L$ai_p $PDO_OCI_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && PDO_OCI_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_OCI_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
     
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-fi
+  fi
 
+
+      fi
     
+  fi
+
+
+  
   save_old_LDFLAGS=$LDFLAGS
-  ac_stuff=""
+  ac_stuff="
+    -L$PDO_OCI_LIB_DIR $PDO_OCI_SHARED_LIBADD
+  "
   
   save_ext_shared=$ext_shared
   ext_shared=yes
@@ -74339,27 +72649,27 @@ fi
     esac
   done
 
-  echo $ac_n "checking for sqlite3_key in -lsqlite3""... $ac_c" 1>&6
-echo "configure:74344: checking for sqlite3_key in -lsqlite3" >&5
-ac_lib_var=`echo sqlite3'_'sqlite3_key | sed 'y%./+-%__p_%'`
+  echo $ac_n "checking for OCIEnvCreate in -lclntsh""... $ac_c" 1>&6
+echo "configure:72654: checking for OCIEnvCreate in -lclntsh" >&5
+ac_lib_var=`echo clntsh'_'OCIEnvCreate | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lsqlite3  $LIBS"
+LIBS="-lclntsh  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 74352 "configure"
+#line 72662 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char sqlite3_key();
+char OCIEnvCreate();
 
 int main() {
-sqlite3_key()
+OCIEnvCreate()
 ; return 0; }
 EOF
-if { (eval echo configure:74363: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:72673: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -74378,825 +72688,330 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
     
-      cat >> confdefs.h <<\EOF
-#define HAVE_SQLITE3_KEY 1
+    cat >> confdefs.h <<\EOF
+#define HAVE_OCIENVCREATE 1
 EOF
 
-    
+  
   
 else
   echo "$ac_t""no" 1>&6
 
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
-    unset ac_cv_lib_sqlite3_sqlite3_key
+    unset ac_cv_lib_clntsh_OCIEnvCreate
     
   
 fi
 
 
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_SQLITE_SHARED_LIBADD"
-
-    
-  ext_builddir=ext/pdo_sqlite
-  ext_srcdir=$abs_srcdir/ext/pdo_sqlite
-
-  ac_extra=`echo "-I$pdo_inc_path"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
-
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_PDO_SQLITE_SHARED=no
-    
   
-  case ext/pdo_sqlite in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    -L$PDO_OCI_LIB_DIR $PDO_OCI_SHARED_LIBADD
+  "
   
+  save_ext_shared=$ext_shared
+  ext_shared=yes
   
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in $php_pdo_sqlite_sources_core; do
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
       
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
 
-    EXT_STATIC="$EXT_STATIC pdo_sqlite"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_sqlite"
     fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_PDO_SQLITE_SHARED=yes
-      
-  case ext/pdo_sqlite in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+   ;;
   esac
-  
-  
-
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
 
 
-  old_IFS=$IFS
-  for ac_src in $php_pdo_sqlite_sources_core; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
       
-      shared_objects_pdo_sqlite="$shared_objects_pdo_sqlite $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_sqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PHPPDO_SQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_sqlite.so '$ext_builddir'/phppdo_sqlite.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO_SQLITE, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PHPPDO_SQLITE_SHARED_LIBADD)'
-      ;;
-  esac
-
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_sqlite.$suffix"
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_sqlite.$suffix"
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_sqlite"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phppdo_sqlite.$suffix: $ext_builddir/phppdo_sqlite.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_sqlite.$suffix \$(phplibdir)
-
-$ext_builddir/phppdo_sqlite.$suffix: \$(shared_objects_pdo_sqlite) \$(PHPPDO_SQLITE_SHARED_DEPENDENCIES)
-	$link_cmd
-
-EOF
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_sqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PDO_SQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_sqlite.so '$ext_builddir'/pdo_sqlite.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO_SQLITE, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PDO_SQLITE_SHARED_LIBADD)'
-      ;;
-  esac
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_sqlite.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_sqlite.$suffix"
+      fi
+    
   fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_sqlite"
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/pdo_sqlite.$suffix: $ext_builddir/pdo_sqlite.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_sqlite.$suffix \$(phplibdir)
+    ;;
+    esac
+  done
 
-$ext_builddir/pdo_sqlite.$suffix: \$(shared_objects_pdo_sqlite) \$(PDO_SQLITE_SHARED_DEPENDENCIES)
-	$link_cmd
+  echo $ac_n "checking for OCIEnvNlsCreate in -lclntsh""... $ac_c" 1>&6
+echo "configure:72807: checking for OCIEnvNlsCreate in -lclntsh" >&5
+ac_lib_var=`echo clntsh'_'OCIEnvNlsCreate | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lclntsh  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 72815 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char OCIEnvNlsCreate();
 
+int main() {
+OCIEnvNlsCreate()
+; return 0; }
 EOF
+if { (eval echo configure:72826: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_PDO_SQLITE 1
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+    cat >> confdefs.h <<\EOF
+#define HAVE_OCIENVNLSCREATE 1
 EOF
 
-    fi
-  fi
-
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_PDO_SQLITE_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
-  
-  case ext/pdo_sqlite in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
   
   
+else
+  echo "$ac_t""no" 1>&6
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in $php_pdo_sqlite_sources_core; do
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_clntsh_OCIEnvNlsCreate
+    
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+fi
 
 
-        EXT_STATIC="$EXT_STATIC pdo_sqlite"
-        ;;
-      *)
         
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    -L$PDO_OCI_LIB_DIR $PDO_OCI_SHARED_LIBADD
+  "
   
-  case ext/pdo_sqlite in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+  save_ext_shared=$ext_shared
+  ext_shared=yes
   
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
   
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in $php_pdo_sqlite_sources_core; do
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
       
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+    fi
+   ;;
+  esac
 
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_sqlite"
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
   
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=pdo_sqlite
+      fi
     
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
-
   fi
 
-  else
-      # use bundled libs
-      if test "$enable_maintainer_zts" = "yes"; then
-        threadsafe_flags="-DSQLITE_THREADSAFE=1"
-      else
-        threadsafe_flags="-DSQLITE_THREADSAFE=0"
-      fi
+    ;;
+    esac
+  done
 
-      other_flags="-DSQLITE_ENABLE_FTS3=1 -DSQLITE_CORE=1 -DSQLITE_ENABLE_COLUMN_METADATA=1"
+  echo $ac_n "checking for OCILobIsTemporary in -lclntsh""... $ac_c" 1>&6
+echo "configure:72960: checking for OCILobIsTemporary in -lclntsh" >&5
+ac_lib_var=`echo clntsh'_'OCILobIsTemporary | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lclntsh  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 72968 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char OCILobIsTemporary();
 
-	        if test "$PHP_INTL" = "yes" && test "$PHP_INTL_SHARED" != "yes"; then
-        other_flags="$other_flags -DSQLITE_ENABLE_ICU=1"
-      fi
+int main() {
+OCILobIsTemporary()
+; return 0; }
+EOF
+if { (eval echo configure:72979: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-      if test "$PHP_SQLITE3" != "yes"; then
-        
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
   
-  case ext/sqlite3 in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sqlite3"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sqlite3/"; ac_bdir="ext/sqlite3/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+    cat >> confdefs.h <<\EOF
+#define HAVE_OCILOBISTEMPORARY 1
+EOF
+
   
   
+else
+  echo "$ac_t""no" 1>&6
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in libsqlite/sqlite3.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-      fi
-
-      
-  ext_builddir=ext/pdo_sqlite
-  ext_srcdir=$abs_srcdir/ext/pdo_sqlite
-
-  ac_extra=`echo "-DPDO_SQLITE_BUNDLED=1 $other_flags $threadsafe_flags -I$pdo_inc_path"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
-
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_PDO_SQLITE_SHARED=no
-    
-  
-  case ext/pdo_sqlite in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in $php_pdo_sqlite_sources_core; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-    EXT_STATIC="$EXT_STATIC pdo_sqlite"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_sqlite"
-    fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_PDO_SQLITE_SHARED=yes
-      
-  case ext/pdo_sqlite in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
-
-
-  old_IFS=$IFS
-  for ac_src in $php_pdo_sqlite_sources_core; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_pdo_sqlite="$shared_objects_pdo_sqlite $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_sqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PHPPDO_SQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_sqlite.so '$ext_builddir'/phppdo_sqlite.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO_SQLITE, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PHPPDO_SQLITE_SHARED_LIBADD)'
-      ;;
-  esac
-
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_sqlite.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_sqlite.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_sqlite"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phppdo_sqlite.$suffix: $ext_builddir/phppdo_sqlite.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_sqlite.$suffix \$(phplibdir)
-
-$ext_builddir/phppdo_sqlite.$suffix: \$(shared_objects_pdo_sqlite) \$(PHPPDO_SQLITE_SHARED_DEPENDENCIES)
-	$link_cmd
-
-EOF
-
-          ;;
-        *)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_sqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PDO_SQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_sqlite.so '$ext_builddir'/pdo_sqlite.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO_SQLITE, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PDO_SQLITE_SHARED_LIBADD)'
-      ;;
-  esac
-
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_sqlite.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_sqlite.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_sqlite"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/pdo_sqlite.$suffix: $ext_builddir/pdo_sqlite.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_sqlite.$suffix \$(phplibdir)
-
-$ext_builddir/pdo_sqlite.$suffix: \$(shared_objects_pdo_sqlite) \$(PDO_SQLITE_SHARED_DEPENDENCIES)
-	$link_cmd
-
-EOF
-
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_PDO_SQLITE 1
-EOF
-
-    fi
-  fi
-
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_PDO_SQLITE_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
-  
-  case ext/pdo_sqlite in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in $php_pdo_sqlite_sources_core; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-        EXT_STATIC="$EXT_STATIC pdo_sqlite"
-        ;;
-      *)
-        
-  
-  case ext/pdo_sqlite in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in $php_pdo_sqlite_sources_core; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_sqlite"
-  fi
-  
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
-
-
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=pdo_sqlite
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
-
-  fi
-
-
-      
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_SQLITE_SHARED_LIBADD"
-
-      
-  am_i_shared=$PHP_PDO_SQLITE_SHARED
-  is_it_shared=$PHP_SQLITE3_SHARED
-  is_it_enabled=$PHP_SQLITE3
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension pdo_sqlite to build statically, but it
-depends on extension sqlite3, which you've configured to build shared.
-You either need to build pdo_sqlite shared or build sqlite3 statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension pdo_sqlite, which depends on extension sqlite3,
-but you've either not enabled sqlite3, or have disabled it.
-" 1>&2; exit 1; }
-  fi
-  
-      
-  if test "$abs_srcdir/ext/sqlite3/libsqlite" != "/usr/include"; then
-    
-  if test -z "$abs_srcdir/ext/sqlite3/libsqlite" || echo "$abs_srcdir/ext/sqlite3/libsqlite" | grep '^/' >/dev/null ; then
-    ai_p=$abs_srcdir/ext/sqlite3/libsqlite
-  else
-    
-    ep_dir="`echo $abs_srcdir/ext/sqlite3/libsqlite|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$abs_srcdir/ext/sqlite3/libsqlite\"`"
-  fi
-
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
-
-
-      for ac_func in usleep nanosleep
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:75104: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 75109 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:75132: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-      for ac_hdr in time.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:75160: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 75165 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:75170: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-  fi
-
-    
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff=""
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_clntsh_OCILobIsTemporary
+    
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+      -L$PDO_OCI_LIB_DIR $PDO_OCI_SHARED_LIBADD
+    "
   
   save_ext_shared=$ext_shared
   ext_shared=yes
@@ -75289,27 +73104,27 @@ done
     esac
   done
 
-  echo $ac_n "checking for fdatasync in -lrt""... $ac_c" 1>&6
-echo "configure:75294: checking for fdatasync in -lrt" >&5
-ac_lib_var=`echo rt'_'fdatasync | sed 'y%./+-%__p_%'`
+  echo $ac_n "checking for OCILobIsTemporary in -locijdbc8""... $ac_c" 1>&6
+echo "configure:73109: checking for OCILobIsTemporary in -locijdbc8" >&5
+ac_lib_var=`echo ocijdbc8'_'OCILobIsTemporary | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lrt  $LIBS"
+LIBS="-locijdbc8  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 75302 "configure"
+#line 73117 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char fdatasync();
+char OCILobIsTemporary();
 
 int main() {
-fdatasync()
+OCILobIsTemporary()
 ; return 0; }
 EOF
-if { (eval echo configure:75313: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:73128: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -75328,19 +73143,20 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
     
+      
   
-  case rt in
+  case ocijdbc8 in
   c|c_r|pthread*) ;;
   *) 
     if test "$ext_shared" = "yes"; then
-        PDO_SQLITE_SHARED_LIBADD="-lrt $PDO_SQLITE_SHARED_LIBADD" 
+        PDO_OCI_SHARED_LIBADD="$PDO_OCI_SHARED_LIBADD -locijdbc8" 
     else
       
   
-  case rt in
+  case ocijdbc8 in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lrt $LIBS" 
+      LIBS="$LIBS -locijdbc8" 
    ;;
   esac
 
@@ -75350,188 +73166,145 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
   esac
 
 
+      cat >> confdefs.h <<\EOF
+#define HAVE_OCILOBISTEMPORARY 1
+EOF
+
+    
   
 else
   echo "$ac_t""no" 1>&6
 
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
-    unset ac_cv_lib_rt_fdatasync
+    unset ac_cv_lib_ocijdbc8_OCILobIsTemporary
     
   
 fi
 
-
-  
-    
-  am_i_shared=$PHP_PDO_SQLITE_SHARED
-  is_it_shared=$PHP_PDO_SHARED
-  is_it_enabled=$PHP_PDO
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension pdo_sqlite to build statically, but it
-depends on extension pdo, which you've configured to build shared.
-You either need to build pdo_sqlite shared or build pdo statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension pdo_sqlite, which depends on extension pdo,
-but you've either not enabled pdo, or have disabled it.
-" 1>&2; exit 1; }
-  fi
   
   
 fi
 
 
-
-php_with_pgsql=no
-
-echo $ac_n "checking for PostgreSQL support""... $ac_c" 1>&6
-echo "configure:75394: checking for PostgreSQL support" >&5
-# Check whether --with-pgsql or --without-pgsql was given.
-if test "${with_pgsql+set}" = set; then
-  withval="$with_pgsql"
-  PHP_PGSQL=$withval
-else
+        
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    -L$PDO_OCI_LIB_DIR $PDO_OCI_SHARED_LIBADD
+  "
   
-  PHP_PGSQL=no
-  test "$PHP_ENABLE_ALL" && PHP_PGSQL=$PHP_ENABLE_ALL
-
-fi
-
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_PGSQL in
-shared,*)
-  PHP_PGSQL=`echo "$PHP_PGSQL"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_PGSQL=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-echo "$ac_t""$ext_output" 1>&6
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
 
+    fi
+   ;;
+  esac
 
 
-if test "$PHP_PGSQL" != "no"; then
-  
-  if test -z "$PGSQL_INCLUDE" || echo "$PGSQL_INCLUDE" | grep '^/' >/dev/null ; then
-    PGSQL_INCLUDE=$PGSQL_INCLUDE
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
     
-    ep_dir="`echo $PGSQL_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    PGSQL_INCLUDE="$ep_realdir/`basename \"$PGSQL_INCLUDE\"`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
 
-
-  echo $ac_n "checking for pg_config""... $ac_c" 1>&6
-echo "configure:75448: checking for pg_config" >&5
-  for i in $PHP_PGSQL $PHP_PGSQL/bin /usr/local/pgsql/bin /usr/local/bin /usr/bin ""; do
-	if test -x $i/pg_config; then
-      PG_CONFIG="$i/pg_config"
-      break;
-    fi
-  done
-
-  if test -n "$PG_CONFIG"; then
-    echo "$ac_t""$PG_CONFIG" 1>&6
-    PGSQL_INCLUDE=`$PG_CONFIG --includedir`
-    PGSQL_LIBDIR=`$PG_CONFIG --libdir`
-    if test -r "$PGSQL_INCLUDE/pg_config.h"; then
-      cat >> confdefs.h <<\EOF
-#define HAVE_PG_CONFIG_H 1
-EOF
-
-    fi
-  else
-    echo "$ac_t""not found" 1>&6
-    if test "$PHP_PGSQL" = "yes"; then
-      PGSQL_SEARCH_PATHS="/usr /usr/local /usr/local/pgsql"
-    else
-      PGSQL_SEARCH_PATHS=$PHP_PGSQL
-    fi
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-    for i in $PGSQL_SEARCH_PATHS; do
-      for j in include include/pgsql include/postgres include/postgresql ""; do
-        if test -r "$i/$j/libpq-fe.h"; then
-          PGSQL_INC_BASE=$i
-          PGSQL_INCLUDE=$i/$j
-          if test -r "$i/$j/pg_config.h"; then
-            cat >> confdefs.h <<\EOF
-#define HAVE_PG_CONFIG_H 1
-EOF
-
-          fi
-        fi
-      done
-
-      for j in lib $PHP_LIBDIR/pgsql $PHP_LIBDIR/postgres $PHP_LIBDIR/postgresql ""; do
-        if test -f "$i/$j/libpq.so" || test -f "$i/$j/libpq.a"; then 
-          PGSQL_LIBDIR=$i/$j
-        fi
-      done
-    done
-  fi
-
-  if test -z "$PGSQL_INCLUDE"; then
-    { echo "configure: error: Cannot find libpq-fe.h. Please specify correct PostgreSQL installation path" 1>&2; exit 1; }
   fi
 
-  if test -z "$PGSQL_LIBDIR"; then
-    { echo "configure: error: Cannot find libpq.so. Please specify correct PostgreSQL installation path" 1>&2; exit 1; }
-  fi
 
-  if test -z "$PGSQL_INCLUDE" -a -z "$PGSQL_LIBDIR" ; then
-    { echo "configure: error: Unable to find libpq anywhere under $PGSQL_SEARCH_PATHS" 1>&2; exit 1; }
+      fi
+    
   fi
 
-  cat >> confdefs.h <<\EOF
-#define HAVE_PGSQL 1
-EOF
+    ;;
+    esac
+  done
 
-  old_LIBS=$LIBS
-  old_LDFLAGS=$LDFLAGS
-  LDFLAGS="-L$PGSQL_LIBDIR $LDFLAGS"
-  echo $ac_n "checking for PQescapeString in -lpq""... $ac_c" 1>&6
-echo "configure:75516: checking for PQescapeString in -lpq" >&5
-ac_lib_var=`echo pq'_'PQescapeString | sed 'y%./+-%__p_%'`
+  echo $ac_n "checking for OCICollAssign in -lclntsh""... $ac_c" 1>&6
+echo "configure:73289: checking for OCICollAssign in -lclntsh" >&5
+ac_lib_var=`echo clntsh'_'OCICollAssign | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
+LIBS="-lclntsh  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 75524 "configure"
+#line 73297 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char PQescapeString();
+char OCICollAssign();
 
 int main() {
-PQescapeString()
+OCICollAssign()
 ; return 0; }
 EOF
-if { (eval echo configure:75535: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:73308: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -75546,164 +73319,145 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQESCAPE 1
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+    cat >> confdefs.h <<\EOF
+#define HAVE_OCICOLLASSIGN 1
 EOF
 
+  
+  
 else
   echo "$ac_t""no" 1>&6
-fi
-
-  echo $ac_n "checking for PQunescapeBytea in -lpq""... $ac_c" 1>&6
-echo "configure:75559: checking for PQunescapeBytea in -lpq" >&5
-ac_lib_var=`echo pq'_'PQunescapeBytea | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 75567 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQunescapeBytea();
 
-int main() {
-PQunescapeBytea()
-; return 0; }
-EOF
-if { (eval echo configure:75578: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_clntsh_OCICollAssign
+    
+  
 fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQUNESCAPEBYTEA 1
-EOF
 
-else
-  echo "$ac_t""no" 1>&6
-fi
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    -L$PDO_OCI_LIB_DIR $PDO_OCI_SHARED_LIBADD
+  "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-  echo $ac_n "checking for PQsetnonblocking in -lpq""... $ac_c" 1>&6
-echo "configure:75602: checking for PQsetnonblocking in -lpq" >&5
-ac_lib_var=`echo pq'_'PQsetnonblocking | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 75610 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQsetnonblocking();
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-int main() {
-PQsetnonblocking()
-; return 0; }
-EOF
-if { (eval echo configure:75621: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQSETNONBLOCKING 1
-EOF
+    fi
+   ;;
+  esac
 
-else
-  echo "$ac_t""no" 1>&6
-fi
 
-  echo $ac_n "checking for PQcmdTuples in -lpq""... $ac_c" 1>&6
-echo "configure:75645: checking for PQcmdTuples in -lpq" >&5
-ac_lib_var=`echo pq'_'PQcmdTuples | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 75653 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQcmdTuples();
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
 
-int main() {
-PQcmdTuples()
-; return 0; }
-EOF
-if { (eval echo configure:75664: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQCMDTUPLES 1
-EOF
 
-else
-  echo "$ac_t""no" 1>&6
-fi
+      fi
+    
+  fi
 
-  echo $ac_n "checking for PQoidValue in -lpq""... $ac_c" 1>&6
-echo "configure:75688: checking for PQoidValue in -lpq" >&5
-ac_lib_var=`echo pq'_'PQoidValue | sed 'y%./+-%__p_%'`
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for OCIStmtFetch2 in -lclntsh""... $ac_c" 1>&6
+echo "configure:73442: checking for OCIStmtFetch2 in -lclntsh" >&5
+ac_lib_var=`echo clntsh'_'OCIStmtFetch2 | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
+LIBS="-lclntsh  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 75696 "configure"
+#line 73450 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char PQoidValue();
+char OCIStmtFetch2();
 
 int main() {
-PQoidValue()
+OCIStmtFetch2()
 ; return 0; }
 EOF
-if { (eval echo configure:75707: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:73461: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -75718,250 +73472,7167 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQOIDVALUE 1
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+     cat >> confdefs.h <<\EOF
+#define HAVE_OCISTMTFETCH2 1
 EOF
 
+  
+  
 else
   echo "$ac_t""no" 1>&6
-fi
-
-  echo $ac_n "checking for PQclientEncoding in -lpq""... $ac_c" 1>&6
-echo "configure:75731: checking for PQclientEncoding in -lpq" >&5
-ac_lib_var=`echo pq'_'PQclientEncoding | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 75739 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQclientEncoding();
 
-int main() {
-PQclientEncoding()
-; return 0; }
-EOF
-if { (eval echo configure:75750: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_clntsh_OCIStmtFetch2
+    
+  
 fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQCLIENTENCODING 1
-EOF
 
+  
+    
+  echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
+echo "configure:73500: checking for PDO includes" >&5
+if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
-  echo "$ac_t""no" 1>&6
+  
+    echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
+echo "configure:73506: checking for PDO includes" >&5
+    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
+      pdo_inc_path=$abs_srcdir/ext
+    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
+      pdo_inc_path=$abs_srcdir/ext
+    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
+      pdo_inc_path=$prefix/include/php/ext
+    fi
+  
 fi
 
-  echo $ac_n "checking for PQparameterStatus in -lpq""... $ac_c" 1>&6
-echo "configure:75774: checking for PQparameterStatus in -lpq" >&5
-ac_lib_var=`echo pq'_'PQparameterStatus | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 75782 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQparameterStatus();
+echo "$ac_t""$pdo_inc_path" 1>&6
+  if test -n "$pdo_inc_path"; then
+:
+  else
+{ echo "configure: error: Cannot find php_pdo_driver.h." 1>&2; exit 1; }
+  fi
 
-int main() {
-PQparameterStatus()
-; return 0; }
-EOF
-if { (eval echo configure:75793: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQPARAMETERSTATUS 1
+  
+  ext_builddir=ext/pdo_oci
+  ext_srcdir=$abs_srcdir/ext/pdo_oci
+
+  ac_extra=`echo "-I$pdo_inc_path"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_PDO_OCI_SHARED=no
+    
+  
+  case ext/pdo_oci in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_oci"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_oci/"; ac_bdir="ext/pdo_oci/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pdo_oci.c oci_driver.c oci_statement.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
 
-else
-  echo "$ac_t""no" 1>&6
-fi
 
-  echo $ac_n "checking for PQprotocolVersion in -lpq""... $ac_c" 1>&6
-echo "configure:75817: checking for PQprotocolVersion in -lpq" >&5
-ac_lib_var=`echo pq'_'PQprotocolVersion | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 75825 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQprotocolVersion();
+    EXT_STATIC="$EXT_STATIC pdo_oci"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_oci"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_PDO_OCI_SHARED=yes
+      
+  case ext/pdo_oci in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_oci"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_oci/"; ac_bdir="ext/pdo_oci/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-int main() {
-PQprotocolVersion()
-; return 0; }
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pdo_oci.c oci_driver.c oci_statement.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_pdo_oci="$shared_objects_pdo_oci $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:75836: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_oci.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_oci) $(PHPPDO_OCI_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_oci.so '$ext_builddir'/phppdo_oci.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_oci) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO_OCI, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_oci) $(PHPPDO_OCI_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_oci.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_oci.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_oci"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phppdo_oci.$suffix: $ext_builddir/phppdo_oci.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_oci.$suffix \$(phplibdir)
+
+$ext_builddir/phppdo_oci.$suffix: \$(shared_objects_pdo_oci) \$(PHPPDO_OCI_SHARED_DEPENDENCIES)
+	$link_cmd
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQPROTOCOLVERSION 1
 EOF
 
-else
-  echo "$ac_t""no" 1>&6
-fi
+          ;;
+        *)
+          
+  install_modules="install-modules"
 
-  echo $ac_n "checking for PQtransactionStatus in -lpq""... $ac_c" 1>&6
-echo "configure:75860: checking for PQtransactionStatus in -lpq" >&5
-ac_lib_var=`echo pq'_'PQtransactionStatus | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 75868 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQtransactionStatus();
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_oci.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_oci) $(PDO_OCI_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_oci.so '$ext_builddir'/pdo_oci.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_oci) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO_OCI, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_oci) $(PDO_OCI_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_oci.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_oci.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_oci"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/pdo_oci.$suffix: $ext_builddir/pdo_oci.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_oci.$suffix \$(phplibdir)
+
+$ext_builddir/pdo_oci.$suffix: \$(shared_objects_pdo_oci) \$(PDO_OCI_SHARED_DEPENDENCIES)
+	$link_cmd
 
-int main() {
-PQtransactionStatus()
-; return 0; }
 EOF
-if { (eval echo configure:75879: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PGTRANSACTIONSTATUS 1
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_PDO_OCI 1
+EOF
+
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_PDO_OCI_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/pdo_oci in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_oci"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_oci/"; ac_bdir="ext/pdo_oci/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pdo_oci.c oci_driver.c oci_statement.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        EXT_STATIC="$EXT_STATIC pdo_oci"
+        ;;
+      *)
+        
+  
+  case ext/pdo_oci in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_oci"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_oci/"; ac_bdir="ext/pdo_oci/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pdo_oci.c oci_driver.c oci_statement.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_oci"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=pdo_oci
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
+
+  
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_OCI_SHARED_LIBADD"
+
+  
+
+  
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_OCI_DIR"
+
+  
+
+  
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_OCI_VERSION"
+
+  
+
+
+  
+    
+  am_i_shared=$PHP_PDO_OCI_SHARED
+  is_it_shared=$PHP_PDO_SHARED
+  is_it_enabled=$PHP_PDO
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension pdo_oci to build statically, but it
+depends on extension pdo, which you've configured to build shared.
+You either need to build pdo_oci shared or build pdo statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension pdo_oci, which depends on extension pdo,
+but you've either not enabled pdo, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+  
+
+  cat >> confdefs.h <<EOF
+#define PHP_PDO_OCI_CLIENT_VERSION "$PDO_OCI_VERSION"
 EOF
 
-else
-  echo "$ac_t""no" 1>&6
 fi
 
-  echo $ac_n "checking for PQexecParams in -lpq""... $ac_c" 1>&6
-echo "configure:75903: checking for PQexecParams in -lpq" >&5
-ac_lib_var=`echo pq'_'PQexecParams | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+
+
+
+
+
+php_with_pdo_odbc=no
+
+echo $ac_n "checking for ODBC v3 support for PDO""... $ac_c" 1>&6
+echo "configure:73874: checking for ODBC v3 support for PDO" >&5
+# Check whether --with-pdo-odbc or --without-pdo-odbc was given.
+if test "${with_pdo_odbc+set}" = set; then
+  withval="$with_pdo_odbc"
+  PHP_PDO_ODBC=$withval
 else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 75911 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQexecParams();
+  
+  PHP_PDO_ODBC=no
+  test "$PHP_ENABLE_ALL" && PHP_PDO_ODBC=$PHP_ENABLE_ALL
 
-int main() {
-PQexecParams()
-; return 0; }
-EOF
-if { (eval echo configure:75922: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_PDO_ODBC in
+shared,*)
+  PHP_PDO_ODBC=`echo "$PHP_PDO_ODBC"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_PDO_ODBC=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+
+
+                                  
+if test "$PHP_PDO_ODBC" != "no"; then
+
+  if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
+    { echo "configure: error: PDO is not enabled! Add --enable-pdo to your configure line." 1>&2; exit 1; }
+  fi
+
+  
+    
+  echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
+echo "configure:73926: checking for PDO includes" >&5
+if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
+  
+    echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
+echo "configure:73932: checking for PDO includes" >&5
+    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
+      pdo_inc_path=$abs_srcdir/ext
+    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
+      pdo_inc_path=$abs_srcdir/ext
+    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
+      pdo_inc_path=$prefix/include/php/ext
+    fi
+  
 fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQEXECPARAMS 1
-EOF
+echo "$ac_t""$pdo_inc_path" 1>&6
+  if test -n "$pdo_inc_path"; then
+:
+  else
+{ echo "configure: error: Cannot find php_pdo_driver.h." 1>&2; exit 1; }
+  fi
+
+  
+
+  echo $ac_n "checking for selected PDO ODBC flavour""... $ac_c" 1>&6
+echo "configure:73953: checking for selected PDO ODBC flavour" >&5
+
+  pdo_odbc_flavour="`echo $PHP_PDO_ODBC | cut -d, -f1`"
+  pdo_odbc_dir="`echo $PHP_PDO_ODBC | cut -d, -f2`"
+
+  if test "$pdo_odbc_dir" = "$PHP_PDO_ODBC" ; then
+    pdo_odbc_dir=
+  fi
+
+  case $pdo_odbc_flavour in
+    ibm-db2)
+        pdo_odbc_def_libdir=/home/db2inst1/sqllib/lib
+        pdo_odbc_def_incdir=/home/db2inst1/sqllib/include
+        pdo_odbc_def_lib=db2
+        ;;
+
+    iODBC|iodbc)
+        pdo_odbc_def_libdir=/usr/local/$PHP_LIBDIR
+        pdo_odbc_def_incdir=/usr/local/include
+        pdo_odbc_def_lib=iodbc
+        ;;
+
+    unixODBC|unixodbc)
+        pdo_odbc_def_libdir=/usr/local/$PHP_LIBDIR
+        pdo_odbc_def_incdir=/usr/local/include
+        pdo_odbc_def_lib=odbc
+        ;;
+
+    ODBCRouter|odbcrouter)
+        pdo_odbc_def_libdir=/usr/$PHP_LIBDIR
+        pdo_odbc_def_incdir=/usr/include
+        pdo_odbc_def_lib=odbcsdk
+        ;;
+
+    generic)
+        pdo_odbc_def_lib="`echo $PHP_PDO_ODBC | cut -d, -f3`"
+        pdo_odbc_def_ldflags="`echo $PHP_PDO_ODBC | cut -d, -f4`"
+        pdo_odbc_def_cflags="`echo $PHP_PDO_ODBC | cut -d, -f5`"
+        pdo_odbc_flavour="generic-$pdo_odbc_def_lib"
+        ;;
+
+      *)
+        { echo "configure: error: Unknown ODBC flavour $pdo_odbc_flavour
+                            include and lib dirs are looked for under 'dir'.
+                            
+                            'flavour' can be one of:  ibm-db2, iODBC, unixODBC, generic
+                            If ',dir' part is omitted, default for the flavour 
+                            you have selected will used. e.g.:
+                            
+                              --with-pdo-odbc=unixODBC
+                              
+                            will check for unixODBC under /usr/local. You may attempt 
+                            to use an otherwise unsupported driver using the \"generic\" 
+                            flavour.  The syntax for generic ODBC support is:
+                            
+                              --with-pdo-odbc=generic,dir,libname,ldflags,cflags
+
+                            When build as shared the extension filename is always pdo_odbc.so" 1>&2; exit 1; }
+        ;;
+  esac
+
+  if test -n "$pdo_odbc_dir"; then
+    PDO_ODBC_INCDIR="$pdo_odbc_dir/include"
+    PDO_ODBC_LIBDIR="$pdo_odbc_dir/$PHP_LIBDIR"
+  else
+    PDO_ODBC_INCDIR="$pdo_odbc_def_incdir"
+    PDO_ODBC_LIBDIR="$pdo_odbc_def_libdir"
+  fi
+  
+  echo "$ac_t""$pdo_odbc_flavour
+          libs       $PDO_ODBC_LIBDIR,
+          headers    $PDO_ODBC_INCDIR" 1>&6
+
+  if test ! -d "$PDO_ODBC_LIBDIR" ; then
+    echo "configure: warning: library dir $PDO_ODBC_LIBDIR does not exist" 1>&2
+  fi
+
+  
+  echo $ac_n "checking for odbc.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
+echo "configure:74032: checking for odbc.h in $PDO_ODBC_INCDIR" >&5
+  if test -f "$PDO_ODBC_INCDIR/odbc.h"; then
+    php_pdo_have_header=yes
+    cat >> confdefs.h <<\EOF
+#define HAVE_ODBC_H 1
+EOF
+
+    echo "$ac_t""yes" 1>&6
+  else
+    echo "$ac_t""no" 1>&6
+  fi
+
+  
+  echo $ac_n "checking for odbcsdk.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
+echo "configure:74046: checking for odbcsdk.h in $PDO_ODBC_INCDIR" >&5
+  if test -f "$PDO_ODBC_INCDIR/odbcsdk.h"; then
+    php_pdo_have_header=yes
+    cat >> confdefs.h <<\EOF
+#define HAVE_ODBCSDK_H 1
+EOF
+
+    echo "$ac_t""yes" 1>&6
+  else
+    echo "$ac_t""no" 1>&6
+  fi
+
+  
+  echo $ac_n "checking for iodbc.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
+echo "configure:74060: checking for iodbc.h in $PDO_ODBC_INCDIR" >&5
+  if test -f "$PDO_ODBC_INCDIR/iodbc.h"; then
+    php_pdo_have_header=yes
+    cat >> confdefs.h <<\EOF
+#define HAVE_IODBC_H 1
+EOF
+
+    echo "$ac_t""yes" 1>&6
+  else
+    echo "$ac_t""no" 1>&6
+  fi
+
+  
+  echo $ac_n "checking for sqlunix.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
+echo "configure:74074: checking for sqlunix.h in $PDO_ODBC_INCDIR" >&5
+  if test -f "$PDO_ODBC_INCDIR/sqlunix.h"; then
+    php_pdo_have_header=yes
+    cat >> confdefs.h <<\EOF
+#define HAVE_SQLUNIX_H 1
+EOF
+
+    echo "$ac_t""yes" 1>&6
+  else
+    echo "$ac_t""no" 1>&6
+  fi
+
+  
+  echo $ac_n "checking for sqltypes.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
+echo "configure:74088: checking for sqltypes.h in $PDO_ODBC_INCDIR" >&5
+  if test -f "$PDO_ODBC_INCDIR/sqltypes.h"; then
+    php_pdo_have_header=yes
+    cat >> confdefs.h <<\EOF
+#define HAVE_SQLTYPES_H 1
+EOF
+
+    echo "$ac_t""yes" 1>&6
+  else
+    echo "$ac_t""no" 1>&6
+  fi
+
+  
+  echo $ac_n "checking for sqlucode.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
+echo "configure:74102: checking for sqlucode.h in $PDO_ODBC_INCDIR" >&5
+  if test -f "$PDO_ODBC_INCDIR/sqlucode.h"; then
+    php_pdo_have_header=yes
+    cat >> confdefs.h <<\EOF
+#define HAVE_SQLUCODE_H 1
+EOF
+
+    echo "$ac_t""yes" 1>&6
+  else
+    echo "$ac_t""no" 1>&6
+  fi
+
+  
+  echo $ac_n "checking for sql.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
+echo "configure:74116: checking for sql.h in $PDO_ODBC_INCDIR" >&5
+  if test -f "$PDO_ODBC_INCDIR/sql.h"; then
+    php_pdo_have_header=yes
+    cat >> confdefs.h <<\EOF
+#define HAVE_SQL_H 1
+EOF
+
+    echo "$ac_t""yes" 1>&6
+  else
+    echo "$ac_t""no" 1>&6
+  fi
+
+  
+  echo $ac_n "checking for isql.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
+echo "configure:74130: checking for isql.h in $PDO_ODBC_INCDIR" >&5
+  if test -f "$PDO_ODBC_INCDIR/isql.h"; then
+    php_pdo_have_header=yes
+    cat >> confdefs.h <<\EOF
+#define HAVE_ISQL_H 1
+EOF
+
+    echo "$ac_t""yes" 1>&6
+  else
+    echo "$ac_t""no" 1>&6
+  fi
+
+  
+  echo $ac_n "checking for sqlext.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
+echo "configure:74144: checking for sqlext.h in $PDO_ODBC_INCDIR" >&5
+  if test -f "$PDO_ODBC_INCDIR/sqlext.h"; then
+    php_pdo_have_header=yes
+    cat >> confdefs.h <<\EOF
+#define HAVE_SQLEXT_H 1
+EOF
+
+    echo "$ac_t""yes" 1>&6
+  else
+    echo "$ac_t""no" 1>&6
+  fi
+
+  
+  echo $ac_n "checking for isqlext.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
+echo "configure:74158: checking for isqlext.h in $PDO_ODBC_INCDIR" >&5
+  if test -f "$PDO_ODBC_INCDIR/isqlext.h"; then
+    php_pdo_have_header=yes
+    cat >> confdefs.h <<\EOF
+#define HAVE_ISQLEXT_H 1
+EOF
+
+    echo "$ac_t""yes" 1>&6
+  else
+    echo "$ac_t""no" 1>&6
+  fi
+
+  
+  echo $ac_n "checking for udbcext.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
+echo "configure:74172: checking for udbcext.h in $PDO_ODBC_INCDIR" >&5
+  if test -f "$PDO_ODBC_INCDIR/udbcext.h"; then
+    php_pdo_have_header=yes
+    cat >> confdefs.h <<\EOF
+#define HAVE_UDBCEXT_H 1
+EOF
+
+    echo "$ac_t""yes" 1>&6
+  else
+    echo "$ac_t""no" 1>&6
+  fi
+
+  
+  echo $ac_n "checking for sqlcli1.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
+echo "configure:74186: checking for sqlcli1.h in $PDO_ODBC_INCDIR" >&5
+  if test -f "$PDO_ODBC_INCDIR/sqlcli1.h"; then
+    php_pdo_have_header=yes
+    cat >> confdefs.h <<\EOF
+#define HAVE_SQLCLI1_H 1
+EOF
+
+    echo "$ac_t""yes" 1>&6
+  else
+    echo "$ac_t""no" 1>&6
+  fi
+
+  
+  echo $ac_n "checking for LibraryManager.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
+echo "configure:74200: checking for LibraryManager.h in $PDO_ODBC_INCDIR" >&5
+  if test -f "$PDO_ODBC_INCDIR/LibraryManager.h"; then
+    php_pdo_have_header=yes
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBRARYMANAGER_H 1
+EOF
+
+    echo "$ac_t""yes" 1>&6
+  else
+    echo "$ac_t""no" 1>&6
+  fi
+
+  
+  echo $ac_n "checking for cli0core.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
+echo "configure:74214: checking for cli0core.h in $PDO_ODBC_INCDIR" >&5
+  if test -f "$PDO_ODBC_INCDIR/cli0core.h"; then
+    php_pdo_have_header=yes
+    cat >> confdefs.h <<\EOF
+#define HAVE_CLI0CORE_H 1
+EOF
+
+    echo "$ac_t""yes" 1>&6
+  else
+    echo "$ac_t""no" 1>&6
+  fi
+
+  
+  echo $ac_n "checking for cli0ext.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
+echo "configure:74228: checking for cli0ext.h in $PDO_ODBC_INCDIR" >&5
+  if test -f "$PDO_ODBC_INCDIR/cli0ext.h"; then
+    php_pdo_have_header=yes
+    cat >> confdefs.h <<\EOF
+#define HAVE_CLI0EXT_H 1
+EOF
+
+    echo "$ac_t""yes" 1>&6
+  else
+    echo "$ac_t""no" 1>&6
+  fi
+
+  
+  echo $ac_n "checking for cli0cli.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
+echo "configure:74242: checking for cli0cli.h in $PDO_ODBC_INCDIR" >&5
+  if test -f "$PDO_ODBC_INCDIR/cli0cli.h"; then
+    php_pdo_have_header=yes
+    cat >> confdefs.h <<\EOF
+#define HAVE_CLI0CLI_H 1
+EOF
+
+    echo "$ac_t""yes" 1>&6
+  else
+    echo "$ac_t""no" 1>&6
+  fi
+
+  
+  echo $ac_n "checking for cli0defs.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
+echo "configure:74256: checking for cli0defs.h in $PDO_ODBC_INCDIR" >&5
+  if test -f "$PDO_ODBC_INCDIR/cli0defs.h"; then
+    php_pdo_have_header=yes
+    cat >> confdefs.h <<\EOF
+#define HAVE_CLI0DEFS_H 1
+EOF
+
+    echo "$ac_t""yes" 1>&6
+  else
+    echo "$ac_t""no" 1>&6
+  fi
+
+  
+  echo $ac_n "checking for cli0env.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
+echo "configure:74270: checking for cli0env.h in $PDO_ODBC_INCDIR" >&5
+  if test -f "$PDO_ODBC_INCDIR/cli0env.h"; then
+    php_pdo_have_header=yes
+    cat >> confdefs.h <<\EOF
+#define HAVE_CLI0ENV_H 1
+EOF
+
+    echo "$ac_t""yes" 1>&6
+  else
+    echo "$ac_t""no" 1>&6
+  fi
+
+
+  if test "$php_pdo_have_header" != "yes"; then
+    { echo "configure: error: Cannot find header file(s) for pdo_odbc" 1>&2; exit 1; }
+  fi
+
+  PDO_ODBC_INCLUDE="$pdo_odbc_def_cflags -I$PDO_ODBC_INCDIR -DPDO_ODBC_TYPE=\\\"$pdo_odbc_flavour\\\""
+  PDO_ODBC_LDFLAGS="$pdo_odbc_def_ldflags -L$PDO_ODBC_LIBDIR -l$pdo_odbc_def_lib"
+
+  
+  for ac_i in $PDO_ODBC_LDFLAGS; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        PDO_ODBC_SHARED_LIBADD="$PDO_ODBC_SHARED_LIBADD -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        PDO_ODBC_SHARED_LIBADD="$PDO_ODBC_SHARED_LIBADD -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        PDO_ODBC_SHARED_LIBADD="-L$ai_p $PDO_ODBC_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && PDO_ODBC_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_ODBC_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="$PDO_ODBC_LDFLAGS"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for SQLBindCol in -l$pdo_odbc_def_lib""... $ac_c" 1>&6
+echo "configure:74476: checking for SQLBindCol in -l$pdo_odbc_def_lib" >&5
+ac_lib_var=`echo $pdo_odbc_def_lib'_'SQLBindCol | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-l$pdo_odbc_def_lib  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 74484 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char SQLBindCol();
+
+int main() {
+SQLBindCol()
+; return 0; }
+EOF
+if { (eval echo configure:74495: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+            
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="$PDO_ODBC_LDFLAGS"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for SQLAllocHandle in -l$pdo_odbc_def_lib""... $ac_c" 1>&6
+echo "configure:74610: checking for SQLAllocHandle in -l$pdo_odbc_def_lib" >&5
+ac_lib_var=`echo $pdo_odbc_def_lib'_'SQLAllocHandle | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-l$pdo_odbc_def_lib  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 74618 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char SQLAllocHandle();
+
+int main() {
+SQLAllocHandle()
+; return 0; }
+EOF
+if { (eval echo configure:74629: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+  
+else
+  echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_$pdo_odbc_def_lib_SQLAllocHandle
+    
+      { echo "configure: error: 
+Your ODBC library does not appear to be ODBC 3 compatible.
+You should consider using iODBC or unixODBC instead, and loading your
+libraries as a driver in that environment; it will emulate the
+functions required for PDO support.
+" 1>&2; exit 1; }
+  
+fi
+
+  
+  
+else
+  echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_$pdo_odbc_def_lib_SQLBindCol
+    
+    { echo "configure: error: Your ODBC library does not exist or there was an error. Check config.log for more information" 1>&2; exit 1; }
+  
+  
+fi
+
+
+  
+  ext_builddir=ext/pdo_odbc
+  ext_srcdir=$abs_srcdir/ext/pdo_odbc
+
+  ac_extra=`echo "-I$pdo_inc_path $PDO_ODBC_INCLUDE"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_PDO_ODBC_SHARED=no
+    
+  
+  case ext/pdo_odbc in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_odbc/"; ac_bdir="ext/pdo_odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pdo_odbc.c odbc_driver.c odbc_stmt.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+    EXT_STATIC="$EXT_STATIC pdo_odbc"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_odbc"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_PDO_ODBC_SHARED=yes
+      
+  case ext/pdo_odbc in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_odbc/"; ac_bdir="ext/pdo_odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pdo_odbc.c odbc_driver.c odbc_stmt.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_pdo_odbc="$shared_objects_pdo_odbc $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_odbc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_odbc) $(PHPPDO_ODBC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_odbc.so '$ext_builddir'/phppdo_odbc.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_odbc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO_ODBC, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_odbc) $(PHPPDO_ODBC_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_odbc.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_odbc.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_odbc"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phppdo_odbc.$suffix: $ext_builddir/phppdo_odbc.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_odbc.$suffix \$(phplibdir)
+
+$ext_builddir/phppdo_odbc.$suffix: \$(shared_objects_pdo_odbc) \$(PHPPDO_ODBC_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_odbc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_odbc) $(PDO_ODBC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_odbc.so '$ext_builddir'/pdo_odbc.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_odbc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO_ODBC, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_odbc) $(PDO_ODBC_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_odbc.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_odbc.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_odbc"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/pdo_odbc.$suffix: $ext_builddir/pdo_odbc.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_odbc.$suffix \$(phplibdir)
+
+$ext_builddir/pdo_odbc.$suffix: \$(shared_objects_pdo_odbc) \$(PDO_ODBC_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_PDO_ODBC 1
+EOF
+
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_PDO_ODBC_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/pdo_odbc in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_odbc/"; ac_bdir="ext/pdo_odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pdo_odbc.c odbc_driver.c odbc_stmt.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        EXT_STATIC="$EXT_STATIC pdo_odbc"
+        ;;
+      *)
+        
+  
+  case ext/pdo_odbc in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_odbc/"; ac_bdir="ext/pdo_odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pdo_odbc.c odbc_driver.c odbc_stmt.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_odbc"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=pdo_odbc
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_ODBC_SHARED_LIBADD"
+
+  
+    
+  am_i_shared=$PHP_PDO_ODBC_SHARED
+  is_it_shared=$PHP_PDO_SHARED
+  is_it_enabled=$PHP_PDO
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension pdo_odbc to build statically, but it
+depends on extension pdo, which you've configured to build shared.
+You either need to build pdo_odbc shared or build pdo statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension pdo_odbc, which depends on extension pdo,
+but you've either not enabled pdo, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+  
+fi
+
+
+
+php_with_pdo_pgsql=no
+
+echo $ac_n "checking for PostgreSQL support for PDO""... $ac_c" 1>&6
+echo "configure:75003: checking for PostgreSQL support for PDO" >&5
+# Check whether --with-pdo-pgsql or --without-pdo-pgsql was given.
+if test "${with_pdo_pgsql+set}" = set; then
+  withval="$with_pdo_pgsql"
+  PHP_PDO_PGSQL=$withval
+else
+  
+  PHP_PDO_PGSQL=no
+  test "$PHP_ENABLE_ALL" && PHP_PDO_PGSQL=$PHP_ENABLE_ALL
+
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_PDO_PGSQL in
+shared,*)
+  PHP_PDO_PGSQL=`echo "$PHP_PDO_PGSQL"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_PDO_PGSQL=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_PDO_PGSQL" != "no"; then
+
+  if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
+    { echo "configure: error: PDO is not enabled! Add --enable-pdo to your configure line." 1>&2; exit 1; }
+  fi
+
+  
+  if test -z "$PGSQL_INCLUDE" || echo "$PGSQL_INCLUDE" | grep '^/' >/dev/null ; then
+    PGSQL_INCLUDE=$PGSQL_INCLUDE
+  else
+    
+    ep_dir="`echo $PGSQL_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    PGSQL_INCLUDE="$ep_realdir/`basename \"$PGSQL_INCLUDE\"`"
+  fi
+
+
+  echo $ac_n "checking for pg_config""... $ac_c" 1>&6
+echo "configure:75062: checking for pg_config" >&5
+  for i in $PHP_PDO_PGSQL $PHP_PDO_PGSQL/bin /usr/local/pgsql/bin /usr/local/bin /usr/bin ""; do
+    if test -x $i/pg_config; then
+      PG_CONFIG="$i/pg_config"
+      break;
+    fi
+  done
+
+  if test -n "$PG_CONFIG"; then
+    echo "$ac_t""$PG_CONFIG" 1>&6
+    PGSQL_INCLUDE=`$PG_CONFIG --includedir`
+    PGSQL_LIBDIR=`$PG_CONFIG --libdir`
+    cat >> confdefs.h <<\EOF
+#define HAVE_PG_CONFIG_H 1
+EOF
+
+  else
+    echo "$ac_t""not found" 1>&6
+    if test "$PHP_PDO_PGSQL" = "yes"; then
+      PGSQL_SEARCH_PATHS="/usr /usr/local /usr/local/pgsql"
+    else
+      PGSQL_SEARCH_PATHS=$PHP_PDO_PGSQL
+    fi
+  
+    for i in $PGSQL_SEARCH_PATHS; do
+      for j in include include/pgsql include/postgres include/postgresql ""; do
+        if test -r "$i/$j/libpq-fe.h"; then
+          PGSQL_INC_BASE=$i
+          PGSQL_INCLUDE=$i/$j
+          if test -r "$i/$j/pg_config.h"; then
+            cat >> confdefs.h <<\EOF
+#define HAVE_PG_CONFIG_H 1
+EOF
+
+          fi
+        fi
+      done
+
+      for j in $PHP_LIBDIR $PHP_LIBDIR/pgsql $PHP_LIBDIR/postgres $PHP_LIBDIR/postgresql ""; do
+        if test -f "$i/$j/libpq.so" || test -f "$i/$j/libpq.a"; then 
+          PGSQL_LIBDIR=$i/$j
+        fi
+      done
+    done
+  fi
+
+  if test -z "$PGSQL_INCLUDE"; then
+    { echo "configure: error: Cannot find libpq-fe.h. Please specify correct PostgreSQL installation path" 1>&2; exit 1; }
+  fi
+
+  if test -z "$PGSQL_LIBDIR"; then
+    { echo "configure: error: Cannot find libpq.so. Please specify correct PostgreSQL installation path" 1>&2; exit 1; }
+  fi
+
+  if test -z "$PGSQL_INCLUDE" -a -z "$PGSQL_LIBDIR" ; then
+    { echo "configure: error: Unable to find libpq anywhere under $PGSQL_SEARCH_PATHS" 1>&2; exit 1; }
+  fi
+
+  cat >> confdefs.h <<\EOF
+#define HAVE_PDO_PGSQL 1
+EOF
+
+
+  echo $ac_n "checking for openssl dependencies""... $ac_c" 1>&6
+echo "configure:75126: checking for openssl dependencies" >&5
+  if grep -q openssl $PGSQL_INCLUDE/libpq-fe.h ; then
+    echo "$ac_t""yes" 1>&6
+        # Extract the first word of "pkg-config", so it can be a program name with args.
+set dummy pkg-config; ac_word=$2
+echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
+echo "configure:75132: checking for $ac_word" >&5
+if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  case "$PKG_CONFIG" in
+  /*)
+  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
+  ;;
+  ?:/*)			 
+  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
+  ;;
+  *)
+  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
+  ac_dummy="$PATH"
+  for ac_dir in $ac_dummy; do 
+    test -z "$ac_dir" && ac_dir=.
+    if test -f $ac_dir/$ac_word; then
+      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
+      break
+    fi
+  done
+  IFS="$ac_save_ifs"
+  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
+  ;;
+esac
+fi
+PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
+if test -n "$PKG_CONFIG"; then
+  echo "$ac_t""$PKG_CONFIG" 1>&6
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+    if test -x "$PKG_CONFIG" && $PKG_CONFIG --exists openssl; then
+      PDO_PGSQL_CFLAGS=`$PKG_CONFIG openssl --cflags`
+    fi
+  else
+    echo "$ac_t""no" 1>&6
+  fi
+
+  old_LIBS=$LIBS
+  old_LDFLAGS=$LDFLAGS
+  LDFLAGS="-L$PGSQL_LIBDIR $LDFLAGS"
+  echo $ac_n "checking for PQparameterStatus in -lpq""... $ac_c" 1>&6
+echo "configure:75176: checking for PQparameterStatus in -lpq" >&5
+ac_lib_var=`echo pq'_'PQparameterStatus | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 75184 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQparameterStatus();
+
+int main() {
+PQparameterStatus()
+; return 0; }
+EOF
+if { (eval echo configure:75195: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQPARAMETERSTATUS 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+
+    echo "Unable to build the PDO PostgreSQL driver: libpq 7.4+ is required"
+    exit 1
+  
+fi
+
+
+  echo $ac_n "checking for PQprepare in -lpq""... $ac_c" 1>&6
+echo "configure:75224: checking for PQprepare in -lpq" >&5
+ac_lib_var=`echo pq'_'PQprepare | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 75232 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQprepare();
+
+int main() {
+PQprepare()
+; return 0; }
+EOF
+if { (eval echo configure:75243: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQPREPARE 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQescapeStringConn in -lpq""... $ac_c" 1>&6
+echo "configure:75267: checking for PQescapeStringConn in -lpq" >&5
+ac_lib_var=`echo pq'_'PQescapeStringConn | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 75275 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQescapeStringConn();
+
+int main() {
+PQescapeStringConn()
+; return 0; }
+EOF
+if { (eval echo configure:75286: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQESCAPE_CONN 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQescapeByteaConn in -lpq""... $ac_c" 1>&6
+echo "configure:75310: checking for PQescapeByteaConn in -lpq" >&5
+ac_lib_var=`echo pq'_'PQescapeByteaConn | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 75318 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQescapeByteaConn();
+
+int main() {
+PQescapeByteaConn()
+; return 0; }
+EOF
+if { (eval echo configure:75329: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQESCAPE_BYTEA_CONN 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+
+  echo $ac_n "checking for pg_encoding_to_char in -lpq""... $ac_c" 1>&6
+echo "configure:75354: checking for pg_encoding_to_char in -lpq" >&5
+ac_lib_var=`echo pq'_'pg_encoding_to_char | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 75362 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char pg_encoding_to_char();
+
+int main() {
+pg_encoding_to_char()
+; return 0; }
+EOF
+if { (eval echo configure:75373: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PGSQL_WITH_MULTIBYTE_SUPPORT 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  
+
+  LIBS=$old_LIBS
+  LDFLAGS=$old_LDFLAGS
+
+  
+
+  if test "$ext_shared" = "yes"; then
+    PDO_PGSQL_SHARED_LIBADD="-lpq $PDO_PGSQL_SHARED_LIBADD"
+    if test -n "$PGSQL_LIBDIR"; then
+      
+  if test "$PGSQL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PGSQL_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PGSQL_LIBDIR" || echo "$PGSQL_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PGSQL_LIBDIR
+  else
+    
+    ep_dir="`echo $PGSQL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PGSQL_LIBDIR\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        PDO_PGSQL_SHARED_LIBADD="-L$ai_p $PDO_PGSQL_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && PDO_PGSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_PGSQL_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    fi
+  else
+    
+
+  if test -n "$PGSQL_LIBDIR"; then
+    
+  if test "$PGSQL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PGSQL_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PGSQL_LIBDIR" || echo "$PGSQL_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PGSQL_LIBDIR
+  else
+    
+    ep_dir="`echo $PGSQL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PGSQL_LIBDIR\"`"
+  fi
+
+    
+      
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+    
+  fi
+
+  fi
+  
+  
+  case pq in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lpq $LIBS" 
+   ;;
+  esac
+
+
+
+
+  fi
+
+
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_PGSQL_SHARED_LIBADD"
+
+
+  
+  if test "$PGSQL_INCLUDE" != "/usr/include"; then
+    
+  if test -z "$PGSQL_INCLUDE" || echo "$PGSQL_INCLUDE" | grep '^/' >/dev/null ; then
+    ai_p=$PGSQL_INCLUDE
+  else
+    
+    ep_dir="`echo $PGSQL_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PGSQL_INCLUDE\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+
+  
+    
+  echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
+echo "configure:75537: checking for PDO includes" >&5
+if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+    echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
+echo "configure:75543: checking for PDO includes" >&5
+    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
+      pdo_inc_path=$abs_srcdir/ext
+    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
+      pdo_inc_path=$abs_srcdir/ext
+    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
+      pdo_inc_path=$prefix/include/php/ext
+    fi
+  
+fi
+
+echo "$ac_t""$pdo_inc_path" 1>&6
+  if test -n "$pdo_inc_path"; then
+:
+  else
+{ echo "configure: error: Cannot find php_pdo_driver.h." 1>&2; exit 1; }
+  fi
+
+  
+
+  
+  ext_builddir=ext/pdo_pgsql
+  ext_srcdir=$abs_srcdir/ext/pdo_pgsql
+
+  ac_extra=`echo "-I$pdo_inc_path $PDO_PGSQL_CFLAGS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_PDO_PGSQL_SHARED=no
+    
+  
+  case ext/pdo_pgsql in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_pgsql/"; ac_bdir="ext/pdo_pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pdo_pgsql.c pgsql_driver.c pgsql_statement.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+    EXT_STATIC="$EXT_STATIC pdo_pgsql"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_pgsql"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_PDO_PGSQL_SHARED=yes
+      
+  case ext/pdo_pgsql in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_pgsql/"; ac_bdir="ext/pdo_pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pdo_pgsql.c pgsql_driver.c pgsql_statement.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_pdo_pgsql="$shared_objects_pdo_pgsql $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_pgsql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_pgsql) $(PHPPDO_PGSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_pgsql.so '$ext_builddir'/phppdo_pgsql.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_pgsql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO_PGSQL, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_pgsql) $(PHPPDO_PGSQL_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_pgsql.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_pgsql.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_pgsql"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phppdo_pgsql.$suffix: $ext_builddir/phppdo_pgsql.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_pgsql.$suffix \$(phplibdir)
+
+$ext_builddir/phppdo_pgsql.$suffix: \$(shared_objects_pdo_pgsql) \$(PHPPDO_PGSQL_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_pgsql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_pgsql) $(PDO_PGSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_pgsql.so '$ext_builddir'/pdo_pgsql.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_pgsql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO_PGSQL, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_pgsql) $(PDO_PGSQL_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_pgsql.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_pgsql.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_pgsql"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/pdo_pgsql.$suffix: $ext_builddir/pdo_pgsql.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_pgsql.$suffix \$(phplibdir)
+
+$ext_builddir/pdo_pgsql.$suffix: \$(shared_objects_pdo_pgsql) \$(PDO_PGSQL_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_PDO_PGSQL 1
+EOF
+
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_PDO_PGSQL_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/pdo_pgsql in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_pgsql/"; ac_bdir="ext/pdo_pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pdo_pgsql.c pgsql_driver.c pgsql_statement.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        EXT_STATIC="$EXT_STATIC pdo_pgsql"
+        ;;
+      *)
+        
+  
+  case ext/pdo_pgsql in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_pgsql/"; ac_bdir="ext/pdo_pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pdo_pgsql.c pgsql_driver.c pgsql_statement.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_pgsql"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=pdo_pgsql
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
+  
+    
+  am_i_shared=$PHP_PDO_PGSQL_SHARED
+  is_it_shared=$PHP_PDO_SHARED
+  is_it_enabled=$PHP_PDO
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension pdo_pgsql to build statically, but it
+depends on extension pdo, which you've configured to build shared.
+You either need to build pdo_pgsql shared or build pdo statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension pdo_pgsql, which depends on extension pdo,
+but you've either not enabled pdo, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+   
+  
+fi
+
+
+
+php_with_pdo_sqlite=$PHP_PDO
+
+echo $ac_n "checking for sqlite 3 support for PDO""... $ac_c" 1>&6
+echo "configure:75883: checking for sqlite 3 support for PDO" >&5
+# Check whether --with-pdo-sqlite or --without-pdo-sqlite was given.
+if test "${with_pdo_sqlite+set}" = set; then
+  withval="$with_pdo_sqlite"
+  PHP_PDO_SQLITE=$withval
+else
+  
+  PHP_PDO_SQLITE=$PHP_PDO
+  test "$PHP_ENABLE_ALL" && PHP_PDO_SQLITE=$PHP_ENABLE_ALL
+
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_PDO_SQLITE in
+shared,*)
+  PHP_PDO_SQLITE=`echo "$PHP_PDO_SQLITE"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_PDO_SQLITE=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_PDO_SQLITE" != "no"; then
+
+  if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
+    { echo "configure: error: PDO is not enabled! Add --enable-pdo to your configure line." 1>&2; exit 1; }
+  fi
+
+  
+    
+  echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
+echo "configure:75932: checking for PDO includes" >&5
+if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+    echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
+echo "configure:75938: checking for PDO includes" >&5
+    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
+      pdo_inc_path=$abs_srcdir/ext
+    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
+      pdo_inc_path=$abs_srcdir/ext
+    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
+      pdo_inc_path=$prefix/include/php/ext
+    fi
+  
+fi
+
+echo "$ac_t""$pdo_inc_path" 1>&6
+  if test -n "$pdo_inc_path"; then
+:
+  else
+{ echo "configure: error: Cannot find php_pdo_driver.h." 1>&2; exit 1; }
+  fi
+
+  
+
+  php_pdo_sqlite_sources_core="pdo_sqlite.c sqlite_driver.c sqlite_statement.c"
+
+  if test "$PHP_PDO_SQLITE" != "yes"; then
+    SEARCH_PATH="$PHP_PDO_SQLITE /usr/local /usr"     # you might want to change this
+    SEARCH_FOR="/include/sqlite3.h"  # you most likely want to change this
+    if test -r $PHP_PDO_SQLITE/$SEARCH_FOR; then # path given as parameter
+      PDO_SQLITE_DIR=$PHP_PDO_SQLITE
+    else # search default path list
+      echo $ac_n "checking for sqlite3 files in default path""... $ac_c" 1>&6
+echo "configure:75967: checking for sqlite3 files in default path" >&5
+      for i in $SEARCH_PATH ; do
+        if test -r $i/$SEARCH_FOR; then
+          PDO_SQLITE_DIR=$i
+          echo "$ac_t""found in $i" 1>&6
+        fi
+      done
+    fi
+    if test -z "$PDO_SQLITE_DIR"; then
+      echo "$ac_t""not found" 1>&6
+      { echo "configure: error: Please reinstall the sqlite3 distribution" 1>&2; exit 1; }
+    fi
+
+    
+  if test "$PDO_SQLITE_DIR/include" != "/usr/include"; then
+    
+  if test -z "$PDO_SQLITE_DIR/include" || echo "$PDO_SQLITE_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$PDO_SQLITE_DIR/include
+  else
+    
+    ep_dir="`echo $PDO_SQLITE_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PDO_SQLITE_DIR/include\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+
+    LIBNAME=sqlite3
+    LIBSYMBOL=sqlite3_open
+
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+      -L$PDO_SQLITE_DIR/$PHP_LIBDIR -lm
+    "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for $LIBSYMBOL in -l$LIBNAME""... $ac_c" 1>&6
+echo "configure:76113: checking for $LIBSYMBOL in -l$LIBNAME" >&5
+ac_lib_var=`echo $LIBNAME'_'$LIBSYMBOL | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-l$LIBNAME  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 76121 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $LIBSYMBOL();
+
+int main() {
+$LIBSYMBOL()
+; return 0; }
+EOF
+if { (eval echo configure:76132: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+      
+
+  if test "$ext_shared" = "yes"; then
+    PDO_SQLITE_SHARED_LIBADD="-l$LIBNAME $PDO_SQLITE_SHARED_LIBADD"
+    if test -n "$PDO_SQLITE_DIR/$PHP_LIBDIR"; then
+      
+  if test "$PDO_SQLITE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PDO_SQLITE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PDO_SQLITE_DIR/$PHP_LIBDIR" || echo "$PDO_SQLITE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PDO_SQLITE_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $PDO_SQLITE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PDO_SQLITE_DIR/$PHP_LIBDIR\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        PDO_SQLITE_SHARED_LIBADD="-L$ai_p $PDO_SQLITE_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && PDO_SQLITE_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_SQLITE_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    fi
+  else
+    
+
+  if test -n "$PDO_SQLITE_DIR/$PHP_LIBDIR"; then
+    
+  if test "$PDO_SQLITE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PDO_SQLITE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PDO_SQLITE_DIR/$PHP_LIBDIR" || echo "$PDO_SQLITE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PDO_SQLITE_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $PDO_SQLITE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PDO_SQLITE_DIR/$PHP_LIBDIR\"`"
+  fi
+
+    
+      
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+    
+  fi
+
+  fi
+  
+  
+  case $LIBNAME in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-l$LIBNAME $LIBS" 
+   ;;
+  esac
+
+
+
+
+  fi
+
+
+      cat >> confdefs.h <<\EOF
+#define HAVE_PDO_SQLITELIB 1
+EOF
+
+    
+  
+else
+  echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_$LIBNAME_$LIBSYMBOL
+    
+      { echo "configure: error: wrong sqlite lib version or lib not found" 1>&2; exit 1; }
+    
+  
+fi
+
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff=""
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for sqlite3_key in -lsqlite3""... $ac_c" 1>&6
+echo "configure:76362: checking for sqlite3_key in -lsqlite3" >&5
+ac_lib_var=`echo sqlite3'_'sqlite3_key | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lsqlite3  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 76370 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char sqlite3_key();
+
+int main() {
+sqlite3_key()
+; return 0; }
+EOF
+if { (eval echo configure:76381: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+      cat >> confdefs.h <<\EOF
+#define HAVE_SQLITE3_KEY 1
+EOF
+
+    
+  
+else
+  echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_sqlite3_sqlite3_key
+    
+  
+fi
+
+
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_SQLITE_SHARED_LIBADD"
+
+    
+  ext_builddir=ext/pdo_sqlite
+  ext_srcdir=$abs_srcdir/ext/pdo_sqlite
+
+  ac_extra=`echo "-I$pdo_inc_path"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_PDO_SQLITE_SHARED=no
+    
+  
+  case ext/pdo_sqlite in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in $php_pdo_sqlite_sources_core; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+    EXT_STATIC="$EXT_STATIC pdo_sqlite"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_sqlite"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_PDO_SQLITE_SHARED=yes
+      
+  case ext/pdo_sqlite in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in $php_pdo_sqlite_sources_core; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_pdo_sqlite="$shared_objects_pdo_sqlite $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_sqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PHPPDO_SQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_sqlite.so '$ext_builddir'/phppdo_sqlite.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO_SQLITE, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PHPPDO_SQLITE_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_sqlite.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_sqlite.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_sqlite"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phppdo_sqlite.$suffix: $ext_builddir/phppdo_sqlite.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_sqlite.$suffix \$(phplibdir)
+
+$ext_builddir/phppdo_sqlite.$suffix: \$(shared_objects_pdo_sqlite) \$(PHPPDO_SQLITE_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_sqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PDO_SQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_sqlite.so '$ext_builddir'/pdo_sqlite.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO_SQLITE, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PDO_SQLITE_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_sqlite.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_sqlite.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_sqlite"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/pdo_sqlite.$suffix: $ext_builddir/pdo_sqlite.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_sqlite.$suffix \$(phplibdir)
+
+$ext_builddir/pdo_sqlite.$suffix: \$(shared_objects_pdo_sqlite) \$(PDO_SQLITE_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_PDO_SQLITE 1
+EOF
+
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_PDO_SQLITE_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/pdo_sqlite in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in $php_pdo_sqlite_sources_core; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        EXT_STATIC="$EXT_STATIC pdo_sqlite"
+        ;;
+      *)
+        
+  
+  case ext/pdo_sqlite in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in $php_pdo_sqlite_sources_core; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_sqlite"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=pdo_sqlite
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
+  else
+      # use bundled libs
+      if test "$enable_maintainer_zts" = "yes"; then
+        threadsafe_flags="-DSQLITE_THREADSAFE=1"
+      else
+        threadsafe_flags="-DSQLITE_THREADSAFE=0"
+      fi
+
+      other_flags="-DSQLITE_ENABLE_FTS3=1 -DSQLITE_CORE=1 -DSQLITE_ENABLE_COLUMN_METADATA=1"
+
+	        if test "$PHP_INTL" = "yes" && test "$PHP_INTL_SHARED" != "yes"; then
+        other_flags="$other_flags -DSQLITE_ENABLE_ICU=1"
+      fi
+
+      if test "$PHP_SQLITE3" != "yes"; then
+        
+  
+  case ext/sqlite3 in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sqlite3"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sqlite3/"; ac_bdir="ext/sqlite3/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in libsqlite/sqlite3.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+      fi
+
+      
+  ext_builddir=ext/pdo_sqlite
+  ext_srcdir=$abs_srcdir/ext/pdo_sqlite
+
+  ac_extra=`echo "-DPDO_SQLITE_BUNDLED=1 $other_flags $threadsafe_flags -I$pdo_inc_path"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_PDO_SQLITE_SHARED=no
+    
+  
+  case ext/pdo_sqlite in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in $php_pdo_sqlite_sources_core; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+    EXT_STATIC="$EXT_STATIC pdo_sqlite"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_sqlite"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_PDO_SQLITE_SHARED=yes
+      
+  case ext/pdo_sqlite in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in $php_pdo_sqlite_sources_core; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_pdo_sqlite="$shared_objects_pdo_sqlite $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_sqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PHPPDO_SQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_sqlite.so '$ext_builddir'/phppdo_sqlite.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPDO_SQLITE, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PHPPDO_SQLITE_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_sqlite.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_sqlite.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_sqlite"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phppdo_sqlite.$suffix: $ext_builddir/phppdo_sqlite.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_sqlite.$suffix \$(phplibdir)
+
+$ext_builddir/phppdo_sqlite.$suffix: \$(shared_objects_pdo_sqlite) \$(PHPPDO_SQLITE_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_sqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PDO_SQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_sqlite.so '$ext_builddir'/pdo_sqlite.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PDO_SQLITE, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PDO_SQLITE_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_sqlite.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_sqlite.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_sqlite"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/pdo_sqlite.$suffix: $ext_builddir/pdo_sqlite.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_sqlite.$suffix \$(phplibdir)
+
+$ext_builddir/pdo_sqlite.$suffix: \$(shared_objects_pdo_sqlite) \$(PDO_SQLITE_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_PDO_SQLITE 1
+EOF
+
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_PDO_SQLITE_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/pdo_sqlite in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in $php_pdo_sqlite_sources_core; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        EXT_STATIC="$EXT_STATIC pdo_sqlite"
+        ;;
+      *)
+        
+  
+  case ext/pdo_sqlite in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in $php_pdo_sqlite_sources_core; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_sqlite"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=pdo_sqlite
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
+
+      
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_SQLITE_SHARED_LIBADD"
+
+      
+  am_i_shared=$PHP_PDO_SQLITE_SHARED
+  is_it_shared=$PHP_SQLITE3_SHARED
+  is_it_enabled=$PHP_SQLITE3
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension pdo_sqlite to build statically, but it
+depends on extension sqlite3, which you've configured to build shared.
+You either need to build pdo_sqlite shared or build sqlite3 statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension pdo_sqlite, which depends on extension sqlite3,
+but you've either not enabled sqlite3, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+      
+  if test "$abs_srcdir/ext/sqlite3/libsqlite" != "/usr/include"; then
+    
+  if test -z "$abs_srcdir/ext/sqlite3/libsqlite" || echo "$abs_srcdir/ext/sqlite3/libsqlite" | grep '^/' >/dev/null ; then
+    ai_p=$abs_srcdir/ext/sqlite3/libsqlite
+  else
+    
+    ep_dir="`echo $abs_srcdir/ext/sqlite3/libsqlite|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$abs_srcdir/ext/sqlite3/libsqlite\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+
+      for ac_func in usleep nanosleep
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:77122: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 77127 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
+
+; return 0; }
+EOF
+if { (eval echo configure:77150: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=no"
+fi
+rm -f conftest*
+fi
+
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
+      for ac_hdr in time.h
+do
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:77178: checking for $ac_hdr" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 77183 "configure"
+#include "confdefs.h"
+#include <$ac_hdr>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:77188: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_hdr 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
+  fi
+
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff=""
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for fdatasync in -lrt""... $ac_c" 1>&6
+echo "configure:77312: checking for fdatasync in -lrt" >&5
+ac_lib_var=`echo rt'_'fdatasync | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lrt  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 77320 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char fdatasync();
+
+int main() {
+fdatasync()
+; return 0; }
+EOF
+if { (eval echo configure:77331: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+  
+  case rt in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        PDO_SQLITE_SHARED_LIBADD="-lrt $PDO_SQLITE_SHARED_LIBADD" 
+    else
+      
+  
+  case rt in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lrt $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+  
+else
+  echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_rt_fdatasync
+    
+  
+fi
+
+
+  
+    
+  am_i_shared=$PHP_PDO_SQLITE_SHARED
+  is_it_shared=$PHP_PDO_SHARED
+  is_it_enabled=$PHP_PDO
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension pdo_sqlite to build statically, but it
+depends on extension pdo, which you've configured to build shared.
+You either need to build pdo_sqlite shared or build pdo statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension pdo_sqlite, which depends on extension pdo,
+but you've either not enabled pdo, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+  
+fi
+
+
+
+php_with_pgsql=no
+
+echo $ac_n "checking for PostgreSQL support""... $ac_c" 1>&6
+echo "configure:77412: checking for PostgreSQL support" >&5
+# Check whether --with-pgsql or --without-pgsql was given.
+if test "${with_pgsql+set}" = set; then
+  withval="$with_pgsql"
+  PHP_PGSQL=$withval
+else
+  
+  PHP_PGSQL=no
+  test "$PHP_ENABLE_ALL" && PHP_PGSQL=$PHP_ENABLE_ALL
+
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_PGSQL in
+shared,*)
+  PHP_PGSQL=`echo "$PHP_PGSQL"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_PGSQL=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_PGSQL" != "no"; then
+  
+  if test -z "$PGSQL_INCLUDE" || echo "$PGSQL_INCLUDE" | grep '^/' >/dev/null ; then
+    PGSQL_INCLUDE=$PGSQL_INCLUDE
+  else
+    
+    ep_dir="`echo $PGSQL_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    PGSQL_INCLUDE="$ep_realdir/`basename \"$PGSQL_INCLUDE\"`"
+  fi
+
+
+  echo $ac_n "checking for pg_config""... $ac_c" 1>&6
+echo "configure:77466: checking for pg_config" >&5
+  for i in $PHP_PGSQL $PHP_PGSQL/bin /usr/local/pgsql/bin /usr/local/bin /usr/bin ""; do
+	if test -x $i/pg_config; then
+      PG_CONFIG="$i/pg_config"
+      break;
+    fi
+  done
+
+  if test -n "$PG_CONFIG"; then
+    echo "$ac_t""$PG_CONFIG" 1>&6
+    PGSQL_INCLUDE=`$PG_CONFIG --includedir`
+    PGSQL_LIBDIR=`$PG_CONFIG --libdir`
+    if test -r "$PGSQL_INCLUDE/pg_config.h"; then
+      cat >> confdefs.h <<\EOF
+#define HAVE_PG_CONFIG_H 1
+EOF
+
+    fi
+  else
+    echo "$ac_t""not found" 1>&6
+    if test "$PHP_PGSQL" = "yes"; then
+      PGSQL_SEARCH_PATHS="/usr /usr/local /usr/local/pgsql"
+    else
+      PGSQL_SEARCH_PATHS=$PHP_PGSQL
+    fi
+  
+    for i in $PGSQL_SEARCH_PATHS; do
+      for j in include include/pgsql include/postgres include/postgresql ""; do
+        if test -r "$i/$j/libpq-fe.h"; then
+          PGSQL_INC_BASE=$i
+          PGSQL_INCLUDE=$i/$j
+          if test -r "$i/$j/pg_config.h"; then
+            cat >> confdefs.h <<\EOF
+#define HAVE_PG_CONFIG_H 1
+EOF
+
+          fi
+        fi
+      done
+
+      for j in lib $PHP_LIBDIR/pgsql $PHP_LIBDIR/postgres $PHP_LIBDIR/postgresql ""; do
+        if test -f "$i/$j/libpq.so" || test -f "$i/$j/libpq.a"; then 
+          PGSQL_LIBDIR=$i/$j
+        fi
+      done
+    done
+  fi
+
+  if test -z "$PGSQL_INCLUDE"; then
+    { echo "configure: error: Cannot find libpq-fe.h. Please specify correct PostgreSQL installation path" 1>&2; exit 1; }
+  fi
+
+  if test -z "$PGSQL_LIBDIR"; then
+    { echo "configure: error: Cannot find libpq.so. Please specify correct PostgreSQL installation path" 1>&2; exit 1; }
+  fi
+
+  if test -z "$PGSQL_INCLUDE" -a -z "$PGSQL_LIBDIR" ; then
+    { echo "configure: error: Unable to find libpq anywhere under $PGSQL_SEARCH_PATHS" 1>&2; exit 1; }
+  fi
+
+  cat >> confdefs.h <<\EOF
+#define HAVE_PGSQL 1
+EOF
+
+  old_LIBS=$LIBS
+  old_LDFLAGS=$LDFLAGS
+  LDFLAGS="-L$PGSQL_LIBDIR $LDFLAGS"
+  echo $ac_n "checking for PQescapeString in -lpq""... $ac_c" 1>&6
+echo "configure:77534: checking for PQescapeString in -lpq" >&5
+ac_lib_var=`echo pq'_'PQescapeString | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 77542 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQescapeString();
+
+int main() {
+PQescapeString()
+; return 0; }
+EOF
+if { (eval echo configure:77553: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQESCAPE 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQunescapeBytea in -lpq""... $ac_c" 1>&6
+echo "configure:77577: checking for PQunescapeBytea in -lpq" >&5
+ac_lib_var=`echo pq'_'PQunescapeBytea | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 77585 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQunescapeBytea();
+
+int main() {
+PQunescapeBytea()
+; return 0; }
+EOF
+if { (eval echo configure:77596: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQUNESCAPEBYTEA 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQsetnonblocking in -lpq""... $ac_c" 1>&6
+echo "configure:77620: checking for PQsetnonblocking in -lpq" >&5
+ac_lib_var=`echo pq'_'PQsetnonblocking | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 77628 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQsetnonblocking();
+
+int main() {
+PQsetnonblocking()
+; return 0; }
+EOF
+if { (eval echo configure:77639: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQSETNONBLOCKING 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQcmdTuples in -lpq""... $ac_c" 1>&6
+echo "configure:77663: checking for PQcmdTuples in -lpq" >&5
+ac_lib_var=`echo pq'_'PQcmdTuples | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 77671 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQcmdTuples();
+
+int main() {
+PQcmdTuples()
+; return 0; }
+EOF
+if { (eval echo configure:77682: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQCMDTUPLES 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQoidValue in -lpq""... $ac_c" 1>&6
+echo "configure:77706: checking for PQoidValue in -lpq" >&5
+ac_lib_var=`echo pq'_'PQoidValue | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 77714 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQoidValue();
+
+int main() {
+PQoidValue()
+; return 0; }
+EOF
+if { (eval echo configure:77725: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQOIDVALUE 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQclientEncoding in -lpq""... $ac_c" 1>&6
+echo "configure:77749: checking for PQclientEncoding in -lpq" >&5
+ac_lib_var=`echo pq'_'PQclientEncoding | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 77757 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQclientEncoding();
+
+int main() {
+PQclientEncoding()
+; return 0; }
+EOF
+if { (eval echo configure:77768: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQCLIENTENCODING 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQparameterStatus in -lpq""... $ac_c" 1>&6
+echo "configure:77792: checking for PQparameterStatus in -lpq" >&5
+ac_lib_var=`echo pq'_'PQparameterStatus | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 77800 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQparameterStatus();
+
+int main() {
+PQparameterStatus()
+; return 0; }
+EOF
+if { (eval echo configure:77811: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQPARAMETERSTATUS 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQprotocolVersion in -lpq""... $ac_c" 1>&6
+echo "configure:77835: checking for PQprotocolVersion in -lpq" >&5
+ac_lib_var=`echo pq'_'PQprotocolVersion | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 77843 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQprotocolVersion();
+
+int main() {
+PQprotocolVersion()
+; return 0; }
+EOF
+if { (eval echo configure:77854: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQPROTOCOLVERSION 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQtransactionStatus in -lpq""... $ac_c" 1>&6
+echo "configure:77878: checking for PQtransactionStatus in -lpq" >&5
+ac_lib_var=`echo pq'_'PQtransactionStatus | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 77886 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQtransactionStatus();
+
+int main() {
+PQtransactionStatus()
+; return 0; }
+EOF
+if { (eval echo configure:77897: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PGTRANSACTIONSTATUS 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQexecParams in -lpq""... $ac_c" 1>&6
+echo "configure:77921: checking for PQexecParams in -lpq" >&5
+ac_lib_var=`echo pq'_'PQexecParams | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 77929 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQexecParams();
+
+int main() {
+PQexecParams()
+; return 0; }
+EOF
+if { (eval echo configure:77940: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQEXECPARAMS 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQprepare in -lpq""... $ac_c" 1>&6
+echo "configure:77964: checking for PQprepare in -lpq" >&5
+ac_lib_var=`echo pq'_'PQprepare | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 77972 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQprepare();
+
+int main() {
+PQprepare()
+; return 0; }
+EOF
+if { (eval echo configure:77983: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQPREPARE 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQexecPrepared in -lpq""... $ac_c" 1>&6
+echo "configure:78007: checking for PQexecPrepared in -lpq" >&5
+ac_lib_var=`echo pq'_'PQexecPrepared | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78015 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQexecPrepared();
+
+int main() {
+PQexecPrepared()
+; return 0; }
+EOF
+if { (eval echo configure:78026: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQEXECPREPARED 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQresultErrorField in -lpq""... $ac_c" 1>&6
+echo "configure:78050: checking for PQresultErrorField in -lpq" >&5
+ac_lib_var=`echo pq'_'PQresultErrorField | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78058 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQresultErrorField();
+
+int main() {
+PQresultErrorField()
+; return 0; }
+EOF
+if { (eval echo configure:78069: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQRESULTERRORFIELD 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQsendQueryParams in -lpq""... $ac_c" 1>&6
+echo "configure:78093: checking for PQsendQueryParams in -lpq" >&5
+ac_lib_var=`echo pq'_'PQsendQueryParams | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78101 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQsendQueryParams();
+
+int main() {
+PQsendQueryParams()
+; return 0; }
+EOF
+if { (eval echo configure:78112: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQSENDQUERYPARAMS 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQsendPrepare in -lpq""... $ac_c" 1>&6
+echo "configure:78136: checking for PQsendPrepare in -lpq" >&5
+ac_lib_var=`echo pq'_'PQsendPrepare | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78144 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQsendPrepare();
+
+int main() {
+PQsendPrepare()
+; return 0; }
+EOF
+if { (eval echo configure:78155: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQSENDPREPARE 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQsendQueryPrepared in -lpq""... $ac_c" 1>&6
+echo "configure:78179: checking for PQsendQueryPrepared in -lpq" >&5
+ac_lib_var=`echo pq'_'PQsendQueryPrepared | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78187 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQsendQueryPrepared();
+
+int main() {
+PQsendQueryPrepared()
+; return 0; }
+EOF
+if { (eval echo configure:78198: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQSENDQUERYPREPARED 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQputCopyData in -lpq""... $ac_c" 1>&6
+echo "configure:78222: checking for PQputCopyData in -lpq" >&5
+ac_lib_var=`echo pq'_'PQputCopyData | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78230 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQputCopyData();
+
+int main() {
+PQputCopyData()
+; return 0; }
+EOF
+if { (eval echo configure:78241: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQPUTCOPYDATA 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQputCopyEnd in -lpq""... $ac_c" 1>&6
+echo "configure:78265: checking for PQputCopyEnd in -lpq" >&5
+ac_lib_var=`echo pq'_'PQputCopyEnd | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78273 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQputCopyEnd();
+
+int main() {
+PQputCopyEnd()
+; return 0; }
+EOF
+if { (eval echo configure:78284: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQPUTCOPYEND 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQgetCopyData in -lpq""... $ac_c" 1>&6
+echo "configure:78308: checking for PQgetCopyData in -lpq" >&5
+ac_lib_var=`echo pq'_'PQgetCopyData | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78316 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQgetCopyData();
+
+int main() {
+PQgetCopyData()
+; return 0; }
+EOF
+if { (eval echo configure:78327: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQGETCOPYDATA 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQfreemem in -lpq""... $ac_c" 1>&6
+echo "configure:78351: checking for PQfreemem in -lpq" >&5
+ac_lib_var=`echo pq'_'PQfreemem | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78359 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQfreemem();
+
+int main() {
+PQfreemem()
+; return 0; }
+EOF
+if { (eval echo configure:78370: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQFREEMEM 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQsetErrorVerbosity in -lpq""... $ac_c" 1>&6
+echo "configure:78394: checking for PQsetErrorVerbosity in -lpq" >&5
+ac_lib_var=`echo pq'_'PQsetErrorVerbosity | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78402 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQsetErrorVerbosity();
+
+int main() {
+PQsetErrorVerbosity()
+; return 0; }
+EOF
+if { (eval echo configure:78413: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQSETERRORVERBOSITY 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQftable in -lpq""... $ac_c" 1>&6
+echo "configure:78437: checking for PQftable in -lpq" >&5
+ac_lib_var=`echo pq'_'PQftable | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78445 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQftable();
+
+int main() {
+PQftable()
+; return 0; }
+EOF
+if { (eval echo configure:78456: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQFTABLE 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQescapeStringConn in -lpq""... $ac_c" 1>&6
+echo "configure:78480: checking for PQescapeStringConn in -lpq" >&5
+ac_lib_var=`echo pq'_'PQescapeStringConn | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78488 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQescapeStringConn();
+
+int main() {
+PQescapeStringConn()
+; return 0; }
+EOF
+if { (eval echo configure:78499: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQESCAPE_CONN 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQescapeByteaConn in -lpq""... $ac_c" 1>&6
+echo "configure:78523: checking for PQescapeByteaConn in -lpq" >&5
+ac_lib_var=`echo pq'_'PQescapeByteaConn | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78531 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQescapeByteaConn();
+
+int main() {
+PQescapeByteaConn()
+; return 0; }
+EOF
+if { (eval echo configure:78542: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQESCAPE_BYTEA_CONN 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for pg_encoding_to_char in -lpq""... $ac_c" 1>&6
+echo "configure:78566: checking for pg_encoding_to_char in -lpq" >&5
+ac_lib_var=`echo pq'_'pg_encoding_to_char | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78574 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char pg_encoding_to_char();
+
+int main() {
+pg_encoding_to_char()
+; return 0; }
+EOF
+if { (eval echo configure:78585: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PGSQL_WITH_MULTIBYTE_SUPPORT 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for lo_create in -lpq""... $ac_c" 1>&6
+echo "configure:78609: checking for lo_create in -lpq" >&5
+ac_lib_var=`echo pq'_'lo_create | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78617 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char lo_create();
+
+int main() {
+lo_create()
+; return 0; }
+EOF
+if { (eval echo configure:78628: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PG_LO_CREATE 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for lo_import_with_oid in -lpq""... $ac_c" 1>&6
+echo "configure:78652: checking for lo_import_with_oid in -lpq" >&5
+ac_lib_var=`echo pq'_'lo_import_with_oid | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78660 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char lo_import_with_oid();
+
+int main() {
+lo_import_with_oid()
+; return 0; }
+EOF
+if { (eval echo configure:78671: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PG_LO_IMPORT_WITH_OID 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  LIBS=$old_LIBS
+  LDFLAGS=$old_LDFLAGS
+
+  
+
+  if test "$ext_shared" = "yes"; then
+    PGSQL_SHARED_LIBADD="-lpq $PGSQL_SHARED_LIBADD"
+    if test -n "$PGSQL_LIBDIR"; then
+      
+  if test "$PGSQL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PGSQL_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PGSQL_LIBDIR" || echo "$PGSQL_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PGSQL_LIBDIR
+  else
+    
+    ep_dir="`echo $PGSQL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PGSQL_LIBDIR\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        PGSQL_SHARED_LIBADD="-L$ai_p $PGSQL_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && PGSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PGSQL_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    fi
+  else
+    
+
+  if test -n "$PGSQL_LIBDIR"; then
+    
+  if test "$PGSQL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PGSQL_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PGSQL_LIBDIR" || echo "$PGSQL_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PGSQL_LIBDIR
+  else
+    
+    ep_dir="`echo $PGSQL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PGSQL_LIBDIR\"`"
+  fi
+
+    
+      
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+    
+  fi
+
+  fi
+  
+  
+  case pq in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lpq $LIBS" 
+   ;;
+  esac
+
+
+
+
+  fi
+
+
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PGSQL_SHARED_LIBADD"
+
+
+  
+  if test "$PGSQL_INCLUDE" != "/usr/include"; then
+    
+  if test -z "$PGSQL_INCLUDE" || echo "$PGSQL_INCLUDE" | grep '^/' >/dev/null ; then
+    ai_p=$PGSQL_INCLUDE
+  else
+    
+    ep_dir="`echo $PGSQL_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PGSQL_INCLUDE\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+
+  
+  ext_builddir=ext/pgsql
+  ext_srcdir=$abs_srcdir/ext/pgsql
+
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_PGSQL_SHARED=no
+    
+  
+  case ext/pgsql in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pgsql.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+    EXT_STATIC="$EXT_STATIC pgsql"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC pgsql"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_PGSQL_SHARED=yes
+      
+  case ext/pgsql in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pgsql.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_pgsql="$shared_objects_pgsql $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppgsql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) $(PHPPGSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppgsql.so '$ext_builddir'/phppgsql.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPGSQL, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) $(PHPPGSQL_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppgsql.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppgsql.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pgsql"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phppgsql.$suffix: $ext_builddir/phppgsql.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phppgsql.$suffix \$(phplibdir)
+
+$ext_builddir/phppgsql.$suffix: \$(shared_objects_pgsql) \$(PHPPGSQL_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pgsql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) $(PGSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pgsql.so '$ext_builddir'/pgsql.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PGSQL, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) $(PGSQL_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pgsql.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pgsql.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pgsql"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/pgsql.$suffix: $ext_builddir/pgsql.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/pgsql.$suffix \$(phplibdir)
+
+$ext_builddir/pgsql.$suffix: \$(shared_objects_pgsql) \$(PGSQL_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_PGSQL 1
+EOF
+
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_PGSQL_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/pgsql in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pgsql.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        EXT_STATIC="$EXT_STATIC pgsql"
+        ;;
+      *)
+        
+  
+  case ext/pgsql in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pgsql.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC pgsql"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=pgsql
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
+fi
+
+
+
+
+
+php_enable_phar=yes
+
+echo $ac_n "checking for phar archive support""... $ac_c" 1>&6
+echo "configure:79131: checking for phar archive support" >&5
+# Check whether --enable-phar or --disable-phar was given.
+if test "${enable_phar+set}" = set; then
+  enableval="$enable_phar"
+  PHP_PHAR=$enableval
+else
+  
+  PHP_PHAR=yes
+  test "$PHP_ENABLE_ALL" && PHP_PHAR=$PHP_ENABLE_ALL
+
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_PHAR in
+shared,*)
+  PHP_PHAR=`echo "$PHP_PHAR"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_PHAR=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_PHAR" != "no"; then
+  
+  ext_builddir=ext/phar
+  ext_srcdir=$abs_srcdir/ext/phar
+
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_PHAR_SHARED=no
+    
+  
+  case ext/phar in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/phar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/phar/"; ac_bdir="ext/phar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in util.c tar.c zip.c stream.c func_interceptors.c dirstream.c phar.c phar_object.c phar_path_check.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+    EXT_STATIC="$EXT_STATIC phar"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC phar"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_PHAR_SHARED=yes
+      
+  case ext/phar in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/phar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/phar/"; ac_bdir="ext/phar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in util.c tar.c zip.c stream.c func_interceptors.c dirstream.c phar.c phar_object.c phar_path_check.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_phar="$shared_objects_phar $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpphar.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) $(PHPPHAR_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpphar.so '$ext_builddir'/phpphar.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPHAR, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) $(PHPPHAR_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpphar.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpphar.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_phar"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpphar.$suffix: $ext_builddir/phpphar.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpphar.$suffix \$(phplibdir)
+
+$ext_builddir/phpphar.$suffix: \$(shared_objects_phar) \$(PHPPHAR_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phar.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) $(PHAR_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phar.so '$ext_builddir'/phar.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHAR, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) $(PHAR_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phar.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phar.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_phar"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phar.$suffix: $ext_builddir/phar.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phar.$suffix \$(phplibdir)
+
+$ext_builddir/phar.$suffix: \$(shared_objects_phar) \$(PHAR_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_PHAR 1
+EOF
+
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_PHAR_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/phar in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/phar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/phar/"; ac_bdir="ext/phar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in util.c tar.c zip.c stream.c func_interceptors.c dirstream.c phar.c phar_object.c phar_path_check.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        EXT_STATIC="$EXT_STATIC phar"
+        ;;
+      *)
+        
+  
+  case ext/phar in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/phar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/phar/"; ac_bdir="ext/phar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in util.c tar.c zip.c stream.c func_interceptors.c dirstream.c phar.c phar_object.c phar_path_check.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC phar"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=phar
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
+  echo $ac_n "checking for phar openssl support""... $ac_c" 1>&6
+echo "configure:79465: checking for phar openssl support" >&5
+  if test "$PHP_HASH_SHARED" != "yes"; then
+    if test "$PHP_HASH" != "no"; then
+      cat >> confdefs.h <<\EOF
+#define PHAR_HASH_OK 1
+EOF
+
+    fi
+  else
+    echo "configure: warning: Phar: sha256/sha512 signature support disabled if ext/hash is built shared" 1>&2
+  fi
+  if test "$PHP_OPENSSL_SHARED" = "yes"; then
+    echo "$ac_t""no (shared openssl)" 1>&6
+  else
+    if test "$PHP_OPENSSL" = "yes"; then
+      echo "$ac_t""yes" 1>&6
+      cat >> confdefs.h <<\EOF
+#define PHAR_HAVE_OPENSSL 1
+EOF
+
+    else
+      echo "$ac_t""no" 1>&6
+    fi
+  fi
+  
+  am_i_shared=$PHP_PHAR_SHARED
+  is_it_shared=$PHP_HASH_SHARED
+  is_it_enabled=$PHP_HASH
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension phar to build statically, but it
+depends on extension hash, which you've configured to build shared.
+You either need to build phar shared or build hash statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension phar, which depends on extension hash,
+but you've either not enabled hash, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+  
+  am_i_shared=$PHP_PHAR_SHARED
+  is_it_shared=$PHP_SPL_SHARED
+  is_it_enabled=$PHP_SPL
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension phar to build statically, but it
+depends on extension spl, which you've configured to build shared.
+You either need to build phar shared or build spl statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension phar, which depends on extension spl,
+but you've either not enabled spl, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+  
+  src=$ext_srcdir/Makefile.frag
+  ac_srcdir=$ext_srcdir
+  ac_builddir=$ext_builddir
+  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments
+
+fi
+
+
+
+php_enable_posix=yes
+
+echo $ac_n "checking whether to enable POSIX-like functions""... $ac_c" 1>&6
+echo "configure:79540: checking whether to enable POSIX-like functions" >&5
+# Check whether --enable-posix or --disable-posix was given.
+if test "${enable_posix+set}" = set; then
+  enableval="$enable_posix"
+  PHP_POSIX=$enableval
+else
+  
+  PHP_POSIX=yes
+  test "$PHP_ENABLE_ALL" && PHP_POSIX=$PHP_ENABLE_ALL
+
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_POSIX in
+shared,*)
+  PHP_POSIX=`echo "$PHP_POSIX"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_POSIX=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_POSIX" = "yes"; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_POSIX 1
+EOF
+
+  
+  ext_builddir=ext/posix
+  ext_srcdir=$abs_srcdir/ext/posix
+
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_POSIX_SHARED=no
+    
+  
+  case ext/posix in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in posix.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+    EXT_STATIC="$EXT_STATIC posix"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC posix"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_POSIX_SHARED=yes
+      
+  case ext/posix in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in posix.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_posix="$shared_objects_posix $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpposix.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) $(PHPPOSIX_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpposix.so '$ext_builddir'/phpposix.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPOSIX, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) $(PHPPOSIX_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpposix.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpposix.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_posix"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpposix.$suffix: $ext_builddir/phpposix.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpposix.$suffix \$(phplibdir)
+
+$ext_builddir/phpposix.$suffix: \$(shared_objects_posix) \$(PHPPOSIX_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/posix.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) $(POSIX_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/posix.so '$ext_builddir'/posix.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(POSIX, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) $(POSIX_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/posix.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/posix.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_posix"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/posix.$suffix: $ext_builddir/posix.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/posix.$suffix \$(phplibdir)
+
+$ext_builddir/posix.$suffix: \$(shared_objects_posix) \$(POSIX_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_POSIX 1
+EOF
+
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_POSIX_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/posix in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in posix.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        EXT_STATIC="$EXT_STATIC posix"
+        ;;
+      *)
+        
+  
+  case ext/posix in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in posix.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC posix"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=posix
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
+
+  for ac_hdr in sys/mkdev.h
+do
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:79882: checking for $ac_hdr" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 79887 "configure"
+#include "confdefs.h"
+#include <$ac_hdr>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:79892: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_hdr 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
+
+  for ac_func in seteuid setegid setsid getsid setpgid getpgid ctermid mkfifo mknod getrlimit getlogin getgroups makedev initgroups getpwuid_r getgrgid_r
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:79922: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 79927 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
+
+; return 0; }
+EOF
+if { (eval echo configure:79950: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=no"
+fi
+rm -f conftest*
+fi
+
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
+
+  echo $ac_n "checking for working ttyname_r() implementation""... $ac_c" 1>&6
+echo "configure:79976: checking for working ttyname_r() implementation" >&5
+  if test "$cross_compiling" = yes; then
+  
+    echo "$ac_t""no, cannot detect working ttyname_r() when cross compiling. posix_ttyname() will be thread-unsafe" 1>&6
+  
+else
+  cat > conftest.$ac_ext <<EOF
+#line 79983 "configure"
+#include "confdefs.h"
+
+#include <unistd.h>
+
+int main(int argc, char *argv[])
+{
+	char buf[64];
+
+	return ttyname_r(0, buf, 64) ? 1 : 0;
+}
+  
+EOF
+if { (eval echo configure:79996: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+    echo "$ac_t""yes" 1>&6
+    cat >> confdefs.h <<\EOF
+#define HAVE_TTYNAME_R 1
+EOF
+
+  
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  
+    echo "$ac_t""no, posix_ttyname() will be thread-unsafe" 1>&6
+  
+fi
+rm -fr conftest*
+fi
+
+
+  echo $ac_n "checking for utsname.domainname""... $ac_c" 1>&6
+echo "configure:80018: checking for utsname.domainname" >&5
+if eval "test \"`echo '$''{'ac_cv_have_utsname_domainname'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+    cat > conftest.$ac_ext <<EOF
+#line 80024 "configure"
+#include "confdefs.h"
+
+      #define _GNU_SOURCE
+      #include <sys/utsname.h>
+    
+int main() {
+
+      return sizeof(((struct utsname *)0)->domainname);
+    
+; return 0; }
+EOF
+if { (eval echo configure:80036: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
+  
+      ac_cv_have_utsname_domainname=yes
+    
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  
+      ac_cv_have_utsname_domainname=no
+    
+fi
+rm -f conftest*
+  
+fi
+
+echo "$ac_t""$ac_cv_have_utsname_domainname" 1>&6
+  if test "$ac_cv_have_utsname_domainname" = yes; then
+    cat >> confdefs.h <<\EOF
+#define HAVE_UTSNAME_DOMAINNAME 1
+EOF
+
+  fi
+fi
+
+
+
+php_with_pspell=no
+
+echo $ac_n "checking for PSPELL support""... $ac_c" 1>&6
+echo "configure:80067: checking for PSPELL support" >&5
+# Check whether --with-pspell or --without-pspell was given.
+if test "${with_pspell+set}" = set; then
+  withval="$with_pspell"
+  PHP_PSPELL=$withval
+else
+  
+  PHP_PSPELL=no
+  test "$PHP_ENABLE_ALL" && PHP_PSPELL=$PHP_ENABLE_ALL
+
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_PSPELL in
+shared,*)
+  PHP_PSPELL=`echo "$PHP_PSPELL"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_PSPELL=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_PSPELL" != "no"; then
+	
+  ext_builddir=ext/pspell
+  ext_srcdir=$abs_srcdir/ext/pspell
+
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_PSPELL_SHARED=no
+    
+  
+  case ext/pspell in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pspell.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+    EXT_STATIC="$EXT_STATIC pspell"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC pspell"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_PSPELL_SHARED=yes
+      
+  case ext/pspell in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pspell.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_pspell="$shared_objects_pspell $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppspell.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) $(PHPPSPELL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppspell.so '$ext_builddir'/phppspell.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPSPELL, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) $(PHPPSPELL_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppspell.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppspell.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pspell"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phppspell.$suffix: $ext_builddir/phppspell.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phppspell.$suffix \$(phplibdir)
+
+$ext_builddir/phppspell.$suffix: \$(shared_objects_pspell) \$(PHPPSPELL_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pspell.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) $(PSPELL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pspell.so '$ext_builddir'/pspell.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PSPELL, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) $(PSPELL_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pspell.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pspell.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pspell"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/pspell.$suffix: $ext_builddir/pspell.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/pspell.$suffix \$(phplibdir)
+
+$ext_builddir/pspell.$suffix: \$(shared_objects_pspell) \$(PSPELL_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_PSPELL 1
+EOF
+
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_PSPELL_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/pspell in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pspell.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        EXT_STATIC="$EXT_STATIC pspell"
+        ;;
+      *)
+        
+  
+  case ext/pspell in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pspell.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC pspell"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=pspell
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
+	if test "$PHP_PSPELL" != "yes"; then
+	    PSPELL_SEARCH_DIRS=$PHP_PSPELL
+	else
+	    PSPELL_SEARCH_DIRS="/usr/local /usr"
+	fi
+	for i in $PSPELL_SEARCH_DIRS; do
+		if test -f $i/include/pspell/pspell.h; then
+			PSPELL_DIR=$i
+			PSPELL_INCDIR=$i/include/pspell
+		elif test -f $i/include/pspell.h; then
+			PSPELL_DIR=$i
+			PSPELL_INCDIR=$i/include
+		fi
+	done
+
+	if test -z "$PSPELL_DIR"; then
+		{ echo "configure: error: Cannot find pspell" 1>&2; exit 1; }
+	fi
+
+	PSPELL_LIBDIR=$PSPELL_DIR/$PHP_LIBDIR
+
+	
+
+  if test "$ext_shared" = "yes"; then
+    PSPELL_SHARED_LIBADD="-lpspell $PSPELL_SHARED_LIBADD"
+    if test -n "$PSPELL_LIBDIR"; then
+      
+  if test "$PSPELL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PSPELL_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PSPELL_LIBDIR
+  else
+    
+    ep_dir="`echo $PSPELL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PSPELL_LIBDIR\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        PSPELL_SHARED_LIBADD="-L$ai_p $PSPELL_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && PSPELL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PSPELL_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    fi
+  else
+    
+
+  if test -n "$PSPELL_LIBDIR"; then
+    
+  if test "$PSPELL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PSPELL_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PSPELL_LIBDIR
+  else
+    
+    ep_dir="`echo $PSPELL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PSPELL_LIBDIR\"`"
+  fi
+
+    
+      
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+    
+  fi
+
+  fi
+  
+  
+  case pspell in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lpspell $LIBS" 
+   ;;
+  esac
+
+
+
+
+  fi
+
+
+
+		
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+		-L$PSPELL_LIBDIR
+	"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
 
-else
-  echo "$ac_t""no" 1>&6
-fi
+      fi
+    
+  fi
 
-  echo $ac_n "checking for PQprepare in -lpq""... $ac_c" 1>&6
-echo "configure:75946: checking for PQprepare in -lpq" >&5
-ac_lib_var=`echo pq'_'PQprepare | sed 'y%./+-%__p_%'`
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for new_aspell_config in -laspell""... $ac_c" 1>&6
+echo "configure:80617: checking for new_aspell_config in -laspell" >&5
+ac_lib_var=`echo aspell'_'new_aspell_config | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
+LIBS="-laspell  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 75954 "configure"
+#line 80625 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char PQprepare();
+char new_aspell_config();
 
 int main() {
-PQprepare()
+new_aspell_config()
 ; return 0; }
 EOF
-if { (eval echo configure:75965: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:80636: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -75976,250 +80647,316 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQPREPARE 1
-EOF
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+		
 
-else
-  echo "$ac_t""no" 1>&6
-fi
+  if test "$ext_shared" = "yes"; then
+    PSPELL_SHARED_LIBADD="-laspell $PSPELL_SHARED_LIBADD"
+    if test -n "$PSPELL_LIBDIR"; then
+      
+  if test "$PSPELL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PSPELL_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PSPELL_LIBDIR
+  else
+    
+    ep_dir="`echo $PSPELL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PSPELL_LIBDIR\"`"
+  fi
 
-  echo $ac_n "checking for PQexecPrepared in -lpq""... $ac_c" 1>&6
-echo "configure:75989: checking for PQexecPrepared in -lpq" >&5
-ac_lib_var=`echo pq'_'PQexecPrepared | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 75997 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQexecPrepared();
+    
+      if test "$ext_shared" = "yes"; then
+        PSPELL_SHARED_LIBADD="-L$ai_p $PSPELL_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && PSPELL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PSPELL_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-int main() {
-PQexecPrepared()
-; return 0; }
-EOF
-if { (eval echo configure:76008: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQEXECPREPARED 1
-EOF
+      fi
+    
+  fi
 
-else
-  echo "$ac_t""no" 1>&6
-fi
+    fi
+  else
+    
 
-  echo $ac_n "checking for PQresultErrorField in -lpq""... $ac_c" 1>&6
-echo "configure:76032: checking for PQresultErrorField in -lpq" >&5
-ac_lib_var=`echo pq'_'PQresultErrorField | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 76040 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQresultErrorField();
+  if test -n "$PSPELL_LIBDIR"; then
+    
+  if test "$PSPELL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PSPELL_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PSPELL_LIBDIR
+  else
+    
+    ep_dir="`echo $PSPELL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PSPELL_LIBDIR\"`"
+  fi
 
-int main() {
-PQresultErrorField()
-; return 0; }
-EOF
-if { (eval echo configure:76051: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+    
+      
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQRESULTERRORFIELD 1
-EOF
 
-else
-  echo "$ac_t""no" 1>&6
-fi
+    
+  fi
 
-  echo $ac_n "checking for PQsendQueryParams in -lpq""... $ac_c" 1>&6
-echo "configure:76075: checking for PQsendQueryParams in -lpq" >&5
-ac_lib_var=`echo pq'_'PQsendQueryParams | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 76083 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQsendQueryParams();
+  fi
+  
+  
+  case aspell in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-laspell $LIBS" 
+   ;;
+  esac
 
-int main() {
-PQsendQueryParams()
-; return 0; }
-EOF
-if { (eval echo configure:76094: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQSENDQUERYPARAMS 1
-EOF
 
+
+  fi
+
+
+	
+  
 else
   echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_aspell_new_aspell_config
+    
+  
 fi
 
-  echo $ac_n "checking for PQsendPrepare in -lpq""... $ac_c" 1>&6
-echo "configure:76118: checking for PQsendPrepare in -lpq" >&5
-ac_lib_var=`echo pq'_'PQsendPrepare | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 76126 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQsendPrepare();
 
-int main() {
-PQsendPrepare()
-; return 0; }
+	
+  if test "$PSPELL_INCDIR" != "/usr/include"; then
+    
+  if test -z "$PSPELL_INCDIR" || echo "$PSPELL_INCDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PSPELL_INCDIR
+  else
+    
+    ep_dir="`echo $PSPELL_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PSPELL_INCDIR\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+	
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PSPELL_SHARED_LIBADD"
+
+	cat >> confdefs.h <<\EOF
+#define HAVE_PSPELL 1
 EOF
-if { (eval echo configure:76137: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
 fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQSENDPREPARE 1
-EOF
 
+
+
+php_with_libedit=no
+
+echo $ac_n "checking for libedit readline replacement""... $ac_c" 1>&6
+echo "configure:80810: checking for libedit readline replacement" >&5
+# Check whether --with-libedit or --without-libedit was given.
+if test "${with_libedit+set}" = set; then
+  withval="$with_libedit"
+  PHP_LIBEDIT=$withval
 else
-  echo "$ac_t""no" 1>&6
+  
+  PHP_LIBEDIT=no
+  test "$PHP_ENABLE_ALL" && PHP_LIBEDIT=$PHP_ENABLE_ALL
+
 fi
 
-  echo $ac_n "checking for PQsendQueryPrepared in -lpq""... $ac_c" 1>&6
-echo "configure:76161: checking for PQsendQueryPrepared in -lpq" >&5
-ac_lib_var=`echo pq'_'PQsendQueryPrepared | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 76169 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQsendQueryPrepared();
 
-int main() {
-PQsendQueryPrepared()
-; return 0; }
-EOF
-if { (eval echo configure:76180: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_LIBEDIT in
+shared,*)
+  PHP_LIBEDIT=`echo "$PHP_LIBEDIT"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_LIBEDIT=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_LIBEDIT" = "no"; then
+  
+php_with_readline=no
+
+echo $ac_n "checking for readline support""... $ac_c" 1>&6
+echo "configure:80855: checking for readline support" >&5
+# Check whether --with-readline or --without-readline was given.
+if test "${with_readline+set}" = set; then
+  withval="$with_readline"
+  PHP_READLINE=$withval
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  
+  PHP_READLINE=no
+  test "$PHP_ENABLE_ALL" && PHP_READLINE=$PHP_ENABLE_ALL
 
 fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQSENDQUERYPREPARED 1
-EOF
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_READLINE in
+shared,*)
+  PHP_READLINE=`echo "$PHP_READLINE"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_READLINE=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
 
 else
-  echo "$ac_t""no" 1>&6
+    php_with_readline=no
 fi
 
-  echo $ac_n "checking for PQputCopyData in -lpq""... $ac_c" 1>&6
-echo "configure:76204: checking for PQputCopyData in -lpq" >&5
-ac_lib_var=`echo pq'_'PQputCopyData | sed 'y%./+-%__p_%'`
+if test "$PHP_READLINE" && test "$PHP_READLINE" != "no"; then
+  for i in $PHP_READLINE /usr/local /usr; do
+    test -f $i/include/readline/readline.h && READLINE_DIR=$i && break
+  done
+
+  if test -z "$READLINE_DIR"; then
+    { echo "configure: error: Please reinstall readline - I cannot find readline.h" 1>&2; exit 1; }
+  fi
+
+  
+  if test "$READLINE_DIR/include" != "/usr/include"; then
+    
+  if test -z "$READLINE_DIR/include" || echo "$READLINE_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$READLINE_DIR/include
+  else
+    
+    ep_dir="`echo $READLINE_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$READLINE_DIR/include\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+
+  PHP_READLINE_LIBS=""
+  echo $ac_n "checking for tgetent in -lncurses""... $ac_c" 1>&6
+echo "configure:80941: checking for tgetent in -lncurses" >&5
+ac_lib_var=`echo ncurses'_'tgetent | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
+LIBS="-lncurses  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 76212 "configure"
+#line 80949 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char PQputCopyData();
+char tgetent();
 
 int main() {
-PQputCopyData()
+tgetent()
 ; return 0; }
 EOF
-if { (eval echo configure:76223: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:80960: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -76234,78 +80971,56 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQPUTCOPYDATA 1
-EOF
-
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-  echo $ac_n "checking for PQputCopyEnd in -lpq""... $ac_c" 1>&6
-echo "configure:76247: checking for PQputCopyEnd in -lpq" >&5
-ac_lib_var=`echo pq'_'PQputCopyEnd | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 76255 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQputCopyEnd();
+  
+    
+  
+  case ncurses in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        READLINE_SHARED_LIBADD="-lncurses $READLINE_SHARED_LIBADD" 
+    else
+      
+  
+  case ncurses in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lncurses $LIBS" 
+   ;;
+  esac
 
-int main() {
-PQputCopyEnd()
-; return 0; }
-EOF
-if { (eval echo configure:76266: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQPUTCOPYEND 1
-EOF
+    fi
+   ;;
+  esac
+
 
+    PHP_READLINE_LIBS="$PHP_READLINE_LIBS -lncurses"
+  
 else
   echo "$ac_t""no" 1>&6
-fi
 
-  echo $ac_n "checking for PQgetCopyData in -lpq""... $ac_c" 1>&6
-echo "configure:76290: checking for PQgetCopyData in -lpq" >&5
-ac_lib_var=`echo pq'_'PQgetCopyData | sed 'y%./+-%__p_%'`
+    echo $ac_n "checking for tgetent in -ltermcap""... $ac_c" 1>&6
+echo "configure:81005: checking for tgetent in -ltermcap" >&5
+ac_lib_var=`echo termcap'_'tgetent | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
+LIBS="-ltermcap  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 76298 "configure"
+#line 81013 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char PQgetCopyData();
+char tgetent();
 
 int main() {
-PQgetCopyData()
+tgetent()
 ; return 0; }
 EOF
-if { (eval echo configure:76309: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:81024: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -76320,35 +81035,158 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQGETCOPYDATA 1
-EOF
+  
+      
+  
+  case termcap in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        READLINE_SHARED_LIBADD="-ltermcap $READLINE_SHARED_LIBADD" 
+    else
+      
+  
+  case termcap in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-ltermcap $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
 
+
+      PHP_READLINE_LIBS="$PHP_READLINE_LIBS -ltermcap"
+    
 else
   echo "$ac_t""no" 1>&6
 fi
 
-  echo $ac_n "checking for PQfreemem in -lpq""... $ac_c" 1>&6
-echo "configure:76333: checking for PQfreemem in -lpq" >&5
-ac_lib_var=`echo pq'_'PQfreemem | sed 'y%./+-%__p_%'`
+  
+fi
+
+
+  
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    -L$READLINE_DIR/$PHP_LIBDIR $PHP_READLINE_LIBS
+  "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for readline in -lreadline""... $ac_c" 1>&6
+echo "configure:81171: checking for readline in -lreadline" >&5
+ac_lib_var=`echo readline'_'readline | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
+LIBS="-lreadline  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 76341 "configure"
+#line 81179 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char PQfreemem();
+char readline();
 
 int main() {
-PQfreemem()
+readline()
 ; return 0; }
 EOF
-if { (eval echo configure:76352: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:81190: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -76363,35 +81201,240 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQFREEMEM 1
-EOF
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+    
+
+  if test "$ext_shared" = "yes"; then
+    READLINE_SHARED_LIBADD="-lreadline $READLINE_SHARED_LIBADD"
+    if test -n "$READLINE_DIR/$PHP_LIBDIR"; then
+      
+  if test "$READLINE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$READLINE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$READLINE_DIR/$PHP_LIBDIR" || echo "$READLINE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$READLINE_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $READLINE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$READLINE_DIR/$PHP_LIBDIR\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        READLINE_SHARED_LIBADD="-L$ai_p $READLINE_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && READLINE_SHARED_LIBADD="$ld_runpath_switch$ai_p $READLINE_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    fi
+  else
+    
+
+  if test -n "$READLINE_DIR/$PHP_LIBDIR"; then
+    
+  if test "$READLINE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$READLINE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$READLINE_DIR/$PHP_LIBDIR" || echo "$READLINE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$READLINE_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $READLINE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$READLINE_DIR/$PHP_LIBDIR\"`"
+  fi
+
+    
+      
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+    
+  fi
+
+  fi
+  
+  
+  case readline in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lreadline $LIBS" 
+   ;;
+  esac
+
+
+
 
+  fi
+
+
+  
+  
 else
   echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_readline_readline
+    
+    { echo "configure: error: readline library not found" 1>&2; exit 1; }
+  
+  
 fi
 
-  echo $ac_n "checking for PQsetErrorVerbosity in -lpq""... $ac_c" 1>&6
-echo "configure:76376: checking for PQsetErrorVerbosity in -lpq" >&5
-ac_lib_var=`echo pq'_'PQsetErrorVerbosity | sed 'y%./+-%__p_%'`
+
+  
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    -L$READLINE_DIR/$PHP_LIBDIR $PHP_READLINE_LIBS
+  "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for rl_pending_input in -lreadline""... $ac_c" 1>&6
+echo "configure:81419: checking for rl_pending_input in -lreadline" >&5
+ac_lib_var=`echo readline'_'rl_pending_input | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
+LIBS="-lreadline  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 76384 "configure"
+#line 81427 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char PQsetErrorVerbosity();
+char rl_pending_input();
 
 int main() {
-PQsetErrorVerbosity()
+rl_pending_input()
 ; return 0; }
 EOF
-if { (eval echo configure:76395: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:81438: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -76406,35 +81449,142 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQSETERRORVERBOSITY 1
-EOF
-
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+  
 else
   echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_readline_rl_pending_input
+    
+    { echo "configure: error: invalid readline installation detected. Try --with-libedit instead." 1>&2; exit 1; }
+  
+  
 fi
 
-  echo $ac_n "checking for PQftable in -lpq""... $ac_c" 1>&6
-echo "configure:76419: checking for PQftable in -lpq" >&5
-ac_lib_var=`echo pq'_'PQftable | sed 'y%./+-%__p_%'`
+
+  
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    -L$READLINE_DIR/$PHP_LIBDIR $PHP_READLINE_LIBS
+  "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for rl_callback_read_char in -lreadline""... $ac_c" 1>&6
+echo "configure:81569: checking for rl_callback_read_char in -lreadline" >&5
+ac_lib_var=`echo readline'_'rl_callback_read_char | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
+LIBS="-lreadline  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 76427 "configure"
+#line 81577 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char PQftable();
+char rl_callback_read_char();
 
 int main() {
-PQftable()
+rl_callback_read_char()
 ; return 0; }
 EOF
-if { (eval echo configure:76438: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:81588: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -76449,121 +81599,95 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQFTABLE 1
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+    cat >> confdefs.h <<\EOF
+#define HAVE_RL_CALLBACK_READ_CHAR 1
 EOF
 
+  
+  
 else
   echo "$ac_t""no" 1>&6
-fi
-
-  echo $ac_n "checking for PQescapeStringConn in -lpq""... $ac_c" 1>&6
-echo "configure:76462: checking for PQescapeStringConn in -lpq" >&5
-ac_lib_var=`echo pq'_'PQescapeStringConn | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 76470 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQescapeStringConn();
 
-int main() {
-PQescapeStringConn()
-; return 0; }
-EOF
-if { (eval echo configure:76481: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_readline_rl_callback_read_char
+    
+  
 fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+
   cat >> confdefs.h <<\EOF
-#define HAVE_PQESCAPE_CONN 1
+#define HAVE_LIBREADLINE 1
 EOF
 
-else
-  echo "$ac_t""no" 1>&6
-fi
 
-  echo $ac_n "checking for PQescapeByteaConn in -lpq""... $ac_c" 1>&6
-echo "configure:76505: checking for PQescapeByteaConn in -lpq" >&5
-ac_lib_var=`echo pq'_'PQescapeByteaConn | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 76513 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQescapeByteaConn();
+elif test "$PHP_LIBEDIT" != "no"; then
 
-int main() {
-PQescapeByteaConn()
-; return 0; }
-EOF
-if { (eval echo configure:76524: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  for i in $PHP_LIBEDIT /usr/local /usr; do
+    test -f $i/include/editline/readline.h && LIBEDIT_DIR=$i && break
+  done
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQESCAPE_BYTEA_CONN 1
-EOF
+  if test -z "$LIBEDIT_DIR"; then
+    { echo "configure: error: Please reinstall libedit - I cannot find readline.h" 1>&2; exit 1; }
+  fi
 
-else
-  echo "$ac_t""no" 1>&6
-fi
+  
+  if test "$LIBEDIT_DIR/include" != "/usr/include"; then
+    
+  if test -z "$LIBEDIT_DIR/include" || echo "$LIBEDIT_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$LIBEDIT_DIR/include
+  else
+    
+    ep_dir="`echo $LIBEDIT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$LIBEDIT_DIR/include\"`"
+  fi
 
-  echo $ac_n "checking for pg_encoding_to_char in -lpq""... $ac_c" 1>&6
-echo "configure:76548: checking for pg_encoding_to_char in -lpq" >&5
-ac_lib_var=`echo pq'_'pg_encoding_to_char | sed 'y%./+-%__p_%'`
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+
+  echo $ac_n "checking for tgetent in -lncurses""... $ac_c" 1>&6
+echo "configure:81672: checking for tgetent in -lncurses" >&5
+ac_lib_var=`echo ncurses'_'tgetent | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
+LIBS="-lncurses  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 76556 "configure"
+#line 81680 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char pg_encoding_to_char();
+char tgetent();
 
 int main() {
-pg_encoding_to_char()
+tgetent()
 ; return 0; }
 EOF
-if { (eval echo configure:76567: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:81691: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -76578,35 +81702,55 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PGSQL_WITH_MULTIBYTE_SUPPORT 1
-EOF
+  
+    
+  
+  case ncurses in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        READLINE_SHARED_LIBADD="-lncurses $READLINE_SHARED_LIBADD" 
+    else
+      
+  
+  case ncurses in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lncurses $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
 
+  
 else
   echo "$ac_t""no" 1>&6
-fi
 
-  echo $ac_n "checking for lo_create in -lpq""... $ac_c" 1>&6
-echo "configure:76591: checking for lo_create in -lpq" >&5
-ac_lib_var=`echo pq'_'lo_create | sed 'y%./+-%__p_%'`
+    echo $ac_n "checking for tgetent in -ltermcap""... $ac_c" 1>&6
+echo "configure:81735: checking for tgetent in -ltermcap" >&5
+ac_lib_var=`echo termcap'_'tgetent | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
+LIBS="-ltermcap  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 76599 "configure"
+#line 81743 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char lo_create();
+char tgetent();
 
 int main() {
-lo_create()
+tgetent()
 ; return 0; }
 EOF
-if { (eval echo configure:76610: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:81754: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -76621,35 +81765,157 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PG_LO_CREATE 1
-EOF
+  
+      
+  
+  case termcap in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        READLINE_SHARED_LIBADD="-ltermcap $READLINE_SHARED_LIBADD" 
+    else
+      
+  
+  case termcap in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-ltermcap $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
 
+    
 else
   echo "$ac_t""no" 1>&6
 fi
 
-  echo $ac_n "checking for lo_import_with_oid in -lpq""... $ac_c" 1>&6
-echo "configure:76634: checking for lo_import_with_oid in -lpq" >&5
-ac_lib_var=`echo pq'_'lo_import_with_oid | sed 'y%./+-%__p_%'`
+  
+fi
+
+
+  
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    -L$READLINE_DIR/$PHP_LIBDIR 
+  "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for readline in -ledit""... $ac_c" 1>&6
+echo "configure:81900: checking for readline in -ledit" >&5
+ac_lib_var=`echo edit'_'readline | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
+LIBS="-ledit  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 76642 "configure"
+#line 81908 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char lo_import_with_oid();
+char readline();
 
 int main() {
-lo_import_with_oid()
+readline()
 ; return 0; }
 EOF
-if { (eval echo configure:76653: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:81919: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -76664,39 +81930,32 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PG_LO_IMPORT_WITH_OID 1
-EOF
-
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-  LIBS=$old_LIBS
-  LDFLAGS=$old_LDFLAGS
-
   
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+    
 
   if test "$ext_shared" = "yes"; then
-    PGSQL_SHARED_LIBADD="-lpq $PGSQL_SHARED_LIBADD"
-    if test -n "$PGSQL_LIBDIR"; then
+    READLINE_SHARED_LIBADD="-ledit $READLINE_SHARED_LIBADD"
+    if test -n "$LIBEDIT_DIR/$PHP_LIBDIR"; then
       
-  if test "$PGSQL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PGSQL_LIBDIR" != "/usr/lib"; then
+  if test "$LIBEDIT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LIBEDIT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$PGSQL_LIBDIR" || echo "$PGSQL_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PGSQL_LIBDIR
+  if test -z "$LIBEDIT_DIR/$PHP_LIBDIR" || echo "$LIBEDIT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$LIBEDIT_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $PGSQL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $LIBEDIT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PGSQL_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$LIBEDIT_DIR/$PHP_LIBDIR\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        PGSQL_SHARED_LIBADD="-L$ai_p $PGSQL_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && PGSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PGSQL_SHARED_LIBADD"
+        READLINE_SHARED_LIBADD="-L$ai_p $READLINE_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && READLINE_SHARED_LIBADD="$ld_runpath_switch$ai_p $READLINE_SHARED_LIBADD"
       else
         
   
@@ -76722,18 +81981,18 @@ fi
   else
     
 
-  if test -n "$PGSQL_LIBDIR"; then
+  if test -n "$LIBEDIT_DIR/$PHP_LIBDIR"; then
     
-  if test "$PGSQL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PGSQL_LIBDIR" != "/usr/lib"; then
+  if test "$LIBEDIT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LIBEDIT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$PGSQL_LIBDIR" || echo "$PGSQL_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PGSQL_LIBDIR
+  if test -z "$LIBEDIT_DIR/$PHP_LIBDIR" || echo "$LIBEDIT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$LIBEDIT_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $PGSQL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $LIBEDIT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PGSQL_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$LIBEDIT_DIR/$PHP_LIBDIR\"`"
   fi
 
     
@@ -76759,10 +82018,10 @@ fi
   fi
   
   
-  case pq in
+  case edit in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lpq $LIBS" 
+      LIBS="-ledit $LIBS" 
    ;;
   esac
 
@@ -76771,57 +82030,98 @@ fi
 
   fi
 
-
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PGSQL_SHARED_LIBADD"
-
-
   
-  if test "$PGSQL_INCLUDE" != "/usr/include"; then
-    
-  if test -z "$PGSQL_INCLUDE" || echo "$PGSQL_INCLUDE" | grep '^/' >/dev/null ; then
-    ai_p=$PGSQL_INCLUDE
-  else
-    
-    ep_dir="`echo $PGSQL_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PGSQL_INCLUDE\"`"
-  fi
+  
+else
+  echo "$ac_t""no" 1>&6
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_edit_readline
     
+    { echo "configure: error: edit library required by readline not found" 1>&2; exit 1; }
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
+fi
 
-  fi
 
+  cat >> confdefs.h <<\EOF
+#define HAVE_LIBEDIT 1
+EOF
+
+fi
+
+if test "$PHP_READLINE" != "no" || test "$PHP_LIBEDIT" != "no"; then
+  for ac_func in rl_completion_matches
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:82060: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 82065 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
+
+; return 0; }
+EOF
+if { (eval echo configure:82088: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=no"
+fi
+rm -f conftest*
+fi
+
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
 
   
-  ext_builddir=ext/pgsql
-  ext_srcdir=$abs_srcdir/ext/pgsql
+  ext_builddir=ext/readline
+  ext_srcdir=$abs_srcdir/ext/readline
 
   ac_extra=
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_PGSQL_SHARED=no
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" != "cli"; then
+    PHP_READLINE_SHARED=no
     
   
-  case ext/pgsql in
+  case ext/readline in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -76836,7 +82136,7 @@ fi
 
 
   old_IFS=$IFS
-  for ac_src in pgsql.c; do
+  for ac_src in readline.c; do
   
       IFS=.
       set $ac_src
@@ -76859,18 +82159,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC pgsql"
+    EXT_STATIC="$EXT_STATIC readline"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC pgsql"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC readline"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_PGSQL_SHARED=yes
+      PHP_READLINE_SHARED=yes
       
-  case ext/pgsql in
+  case ext/readline in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -76885,14 +82185,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in pgsql.c; do
+  for ac_src in readline.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_pgsql="$shared_objects_pgsql $ac_bdir$ac_obj.lo"
+      shared_objects_readline="$shared_objects_readline $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -76915,31 +82215,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppgsql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) $(PHPPGSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppgsql.so '$ext_builddir'/phppgsql.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpreadline.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) $(PHPREADLINE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpreadline.so '$ext_builddir'/phpreadline.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPGSQL, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPREADLINE, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) $(PHPPGSQL_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) $(PHPREADLINE_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppgsql.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpreadline.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppgsql.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpreadline.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pgsql"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_readline"
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phppgsql.$suffix: $ext_builddir/phppgsql.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phppgsql.$suffix \$(phplibdir)
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpreadline.$suffix: $ext_builddir/phpreadline.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpreadline.$suffix \$(phplibdir)
 
-$ext_builddir/phppgsql.$suffix: \$(shared_objects_pgsql) \$(PHPPGSQL_SHARED_DEPENDENCIES)
+$ext_builddir/phpreadline.$suffix: \$(shared_objects_readline) \$(PHPREADLINE_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -76952,31 +82252,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pgsql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) $(PGSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pgsql.so '$ext_builddir'/pgsql.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/readline.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) $(READLINE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/readline.so '$ext_builddir'/readline.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PGSQL, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(READLINE, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) $(PGSQL_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) $(READLINE_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pgsql.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/readline.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pgsql.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/readline.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pgsql"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_readline"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/pgsql.$suffix: $ext_builddir/pgsql.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/pgsql.$suffix \$(phplibdir)
+\$(phplibdir)/readline.$suffix: $ext_builddir/readline.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/readline.$suffix \$(phplibdir)
 
-$ext_builddir/pgsql.$suffix: \$(shared_objects_pgsql) \$(PGSQL_SHARED_DEPENDENCIES)
+$ext_builddir/readline.$suffix: \$(shared_objects_readline) \$(READLINE_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -76984,22 +82284,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_PGSQL 1
+#define COMPILE_DL_READLINE 1
 EOF
 
     fi
   fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_PGSQL_SHARED=no
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" = "cli"; then
+    PHP_READLINE_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/pgsql in
+  case ext/readline in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -77014,7 +82314,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in pgsql.c; do
+  for ac_src in readline.c; do
   
       IFS=.
       set $ac_src
@@ -77037,15 +82337,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC pgsql"
+        EXT_STATIC="$EXT_STATIC readline"
         ;;
       *)
         
   
-  case ext/pgsql in
+  case ext/readline in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -77060,7 +82360,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in pgsql.c; do
+  for ac_src in readline.c; do
   
       IFS=.
       set $ac_src
@@ -77085,7 +82385,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC pgsql"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC readline"
   fi
   
   
@@ -77094,30 +82394,31 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=pgsql
+    PHP_PECL_EXTENSION=readline
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
-fi
-
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST READLINE_SHARED_LIBADD"
 
+fi
 
 
 
-php_enable_phar=yes
+php_with_recode=no
 
-echo $ac_n "checking for phar archive support""... $ac_c" 1>&6
-echo "configure:77113: checking for phar archive support" >&5
-# Check whether --enable-phar or --disable-phar was given.
-if test "${enable_phar+set}" = set; then
-  enableval="$enable_phar"
-  PHP_PHAR=$enableval
+echo $ac_n "checking for recode support""... $ac_c" 1>&6
+echo "configure:82414: checking for recode support" >&5
+# Check whether --with-recode or --without-recode was given.
+if test "${with_recode+set}" = set; then
+  withval="$with_recode"
+  PHP_RECODE=$withval
 else
   
-  PHP_PHAR=yes
-  test "$PHP_ENABLE_ALL" && PHP_PHAR=$PHP_ENABLE_ALL
+  PHP_RECODE=no
+  test "$PHP_ENABLE_ALL" && PHP_RECODE=$PHP_ENABLE_ALL
 
 fi
 
@@ -77125,12 +82426,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_PHAR in
+case $PHP_RECODE in
 shared,*)
-  PHP_PHAR=`echo "$PHP_PHAR"|$SED 's/^shared,//'`
+  PHP_RECODE=`echo "$PHP_RECODE"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_PHAR=yes
+  PHP_RECODE=yes
   ;;
 no)
   ext_output=no
@@ -77149,21 +82450,503 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
-if test "$PHP_PHAR" != "no"; then
+if test "$PHP_RECODE" != "no"; then
+  RECODE_LIST="$PHP_RECODE /usr/local /usr /opt"
+
+  for i in $RECODE_LIST; do
+    if test -f $i/include/recode.h; then
+      RECODE_DIR=$i
+      RECODE_INC=include
+      RECODE_LIB=$PHP_LIBDIR
+    fi
+    if test -f $i/include/recode/recode.h; then
+      RECODE_DIR=$i
+      RECODE_INC=include/recode
+      RECODE_LIB=$PHP_LIBDIR/recode
+    fi
+    if test -f $i/recode/include/recode.h; then
+      RECODE_DIR=$i/recode
+      RECODE_INC=include
+      RECODE_LIB=$PHP_LIBDIR
+    fi
+    test -n "$RECODE_DIR" && break
+  done
+
+  if test -z "$RECODE_DIR"; then
+    { echo "configure: error: Can not find recode.h anywhere under $RECODE_LIST." 1>&2; exit 1; }
+  fi
+
+  
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    -L$RECODE_DIR/$RECODE_LIB
+  "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for recode_format_table in -lrecode""... $ac_c" 1>&6
+echo "configure:82578: checking for recode_format_table in -lrecode" >&5
+ac_lib_var=`echo recode'_'recode_format_table | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lrecode  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 82586 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char recode_format_table();
+
+int main() {
+recode_format_table()
+; return 0; }
+EOF
+if { (eval echo configure:82597: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+    
+
+  if test "$ext_shared" = "yes"; then
+    RECODE_SHARED_LIBADD="-lrecode $RECODE_SHARED_LIBADD"
+    if test -n "$RECODE_DIR/$RECODE_LIB"; then
+      
+  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/$PHP_LIBDIR" && test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
+    
+  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
+    ai_p=$RECODE_DIR/$RECODE_LIB
+  else
+    
+    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        RECODE_SHARED_LIBADD="-L$ai_p $RECODE_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && RECODE_SHARED_LIBADD="$ld_runpath_switch$ai_p $RECODE_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    fi
+  else
+    
+
+  if test -n "$RECODE_DIR/$RECODE_LIB"; then
+    
+  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/$PHP_LIBDIR" && test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
+    
+  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
+    ai_p=$RECODE_DIR/$RECODE_LIB
+  else
+    
+    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
+  fi
+
+    
+      
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+    
+  fi
+
+  fi
+  
+  
+  case recode in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lrecode $LIBS" 
+   ;;
+  esac
+
+
+
+
+  fi
+
+
+  
+  
+else
+  echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_recode_recode_format_table
+    
+    old_LDFLAGS=$LDFLAGS
+    old_LIBS=$LIBS
+    LDFLAGS="$LDFLAGS -L$RECODE_DIR/$RECODE_LIB"
+    LIBS="$LIBS -lrecode"
+    cat > conftest.$ac_ext <<EOF
+#line 82727 "configure"
+#include "confdefs.h"
+
+char *program_name;
+    
+int main() {
+
+recode_format_table();
+    
+; return 0; }
+EOF
+if { (eval echo configure:82738: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  
+      
+
+  if test "$ext_shared" = "yes"; then
+    RECODE_SHARED_LIBADD="-lrecode $RECODE_SHARED_LIBADD"
+    if test -n "$RECODE_DIR/$RECODE_LIB"; then
+      
+  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/$PHP_LIBDIR" && test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
+    
+  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
+    ai_p=$RECODE_DIR/$RECODE_LIB
+  else
+    
+    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        RECODE_SHARED_LIBADD="-L$ai_p $RECODE_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && RECODE_SHARED_LIBADD="$ld_runpath_switch$ai_p $RECODE_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    fi
+  else
+    
+
+  if test -n "$RECODE_DIR/$RECODE_LIB"; then
+    
+  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/$PHP_LIBDIR" && test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
+    
+  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
+    ai_p=$RECODE_DIR/$RECODE_LIB
+  else
+    
+    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
+  fi
+
+    
+      
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+    
+  fi
+
+  fi
+  
+  
+  case recode in
+  c|c_r|pthread*) ;;
+  *) 
+      DLIBS="-lrecode $DLIBS" 
+   ;;
+  esac
+
+
+
+
+  fi
+
+
+      cat >> confdefs.h <<\EOF
+#define HAVE_BROKEN_RECODE 1
+EOF
+
+    
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  
+      { echo "configure: error: I cannot link librecode (-L$RECODE_DIR/$RECODE_LIB -lrecode). Is it installed?" 1>&2; exit 1; }
+    
+fi
+rm -f conftest*
+    LIBS=$old_LIBS
+    LDFLAGS=$old_LDFLAGS
+  
+  
+fi
+
+
+  cat >> confdefs.h <<\EOF
+#define HAVE_LIBRECODE 1
+EOF
+
+  
+  if test "$RECODE_DIR/$RECODE_INC" != "/usr/include"; then
+    
+  if test -z "$RECODE_DIR/$RECODE_INC" || echo "$RECODE_DIR/$RECODE_INC" | grep '^/' >/dev/null ; then
+    ai_p=$RECODE_DIR/$RECODE_INC
+  else
+    
+    ep_dir="`echo $RECODE_DIR/$RECODE_INC|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_INC\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST RECODE_SHARED_LIBADD"
+
+  for ac_hdr in stdbool.h
+do
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:82901: checking for $ac_hdr" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 82906 "configure"
+#include "confdefs.h"
+#include <$ac_hdr>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:82911: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_hdr 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
   
-  ext_builddir=ext/phar
-  ext_srcdir=$abs_srcdir/ext/phar
+  ext_builddir=ext/recode
+  ext_srcdir=$abs_srcdir/ext/recode
 
   ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_PHAR_SHARED=no
+    PHP_RECODE_SHARED=no
     
   
-  case ext/phar in
+  case ext/recode in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/phar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/phar/"; ac_bdir="ext/phar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -77178,7 +82961,7 @@ if test "$PHP_PHAR" != "no"; then
 
 
   old_IFS=$IFS
-  for ac_src in util.c tar.c zip.c stream.c func_interceptors.c dirstream.c phar.c phar_object.c phar_path_check.c; do
+  for ac_src in recode.c; do
   
       IFS=.
       set $ac_src
@@ -77201,18 +82984,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC phar"
+    EXT_STATIC="$EXT_STATIC recode"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC phar"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC recode"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_PHAR_SHARED=yes
+      PHP_RECODE_SHARED=yes
       
-  case ext/phar in
+  case ext/recode in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/phar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/phar/"; ac_bdir="ext/phar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -77227,14 +83010,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in util.c tar.c zip.c stream.c func_interceptors.c dirstream.c phar.c phar_object.c phar_path_check.c; do
+  for ac_src in recode.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_phar="$shared_objects_phar $ac_bdir$ac_obj.lo"
+      shared_objects_recode="$shared_objects_recode $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -77257,31 +83040,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpphar.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) $(PHPPHAR_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpphar.so '$ext_builddir'/phpphar.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phprecode.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) $(PHPRECODE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phprecode.so '$ext_builddir'/phprecode.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPHAR, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPRECODE, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) $(PHPPHAR_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) $(PHPRECODE_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpphar.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phprecode.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpphar.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phprecode.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_phar"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_recode"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpphar.$suffix: $ext_builddir/phpphar.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpphar.$suffix \$(phplibdir)
+\$(phplibdir)/phprecode.$suffix: $ext_builddir/phprecode.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phprecode.$suffix \$(phplibdir)
 
-$ext_builddir/phpphar.$suffix: \$(shared_objects_phar) \$(PHPPHAR_SHARED_DEPENDENCIES)
+$ext_builddir/phprecode.$suffix: \$(shared_objects_recode) \$(PHPRECODE_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -77294,31 +83077,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phar.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) $(PHAR_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phar.so '$ext_builddir'/phar.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/recode.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) $(RECODE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/recode.so '$ext_builddir'/recode.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHAR, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(RECODE, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) $(PHAR_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) $(RECODE_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phar.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/recode.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phar.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/recode.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_phar"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_recode"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phar.$suffix: $ext_builddir/phar.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phar.$suffix \$(phplibdir)
+\$(phplibdir)/recode.$suffix: $ext_builddir/recode.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/recode.$suffix \$(phplibdir)
 
-$ext_builddir/phar.$suffix: \$(shared_objects_phar) \$(PHAR_SHARED_DEPENDENCIES)
+$ext_builddir/recode.$suffix: \$(shared_objects_recode) \$(RECODE_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -77326,22 +83109,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_PHAR 1
+#define COMPILE_DL_RECODE 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_PHAR_SHARED=no
+    PHP_RECODE_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/phar in
+  case ext/recode in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/phar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/phar/"; ac_bdir="ext/phar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -77356,7 +83139,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in util.c tar.c zip.c stream.c func_interceptors.c dirstream.c phar.c phar_object.c phar_path_check.c; do
+  for ac_src in recode.c; do
   
       IFS=.
       set $ac_src
@@ -77379,15 +83162,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC phar"
+        EXT_STATIC="$EXT_STATIC recode"
         ;;
       *)
         
   
-  case ext/phar in
+  case ext/recode in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/phar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/phar/"; ac_bdir="ext/phar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -77402,7 +83185,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in util.c tar.c zip.c stream.c func_interceptors.c dirstream.c phar.c phar_object.c phar_path_check.c; do
+  for ac_src in recode.c; do
   
       IFS=.
       set $ac_src
@@ -77427,7 +83210,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC phar"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC recode"
   fi
   
   
@@ -77436,147 +83219,33 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=phar
+    PHP_PECL_EXTENSION=recode
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
-  echo $ac_n "checking for phar openssl support""... $ac_c" 1>&6
-echo "configure:77447: checking for phar openssl support" >&5
-  if test "$PHP_HASH_SHARED" != "yes"; then
-    if test "$PHP_HASH" != "no"; then
-      cat >> confdefs.h <<\EOF
-#define PHAR_HASH_OK 1
-EOF
-
-    fi
-  else
-    echo "configure: warning: Phar: sha256/sha512 signature support disabled if ext/hash is built shared" 1>&2
-  fi
-  if test "$PHP_OPENSSL_SHARED" = "yes"; then
-    echo "$ac_t""no (shared openssl)" 1>&6
-  else
-    if test "$PHP_OPENSSL" = "yes"; then
-      echo "$ac_t""yes" 1>&6
-      cat >> confdefs.h <<\EOF
-#define PHAR_HAVE_OPENSSL 1
-EOF
-
-    else
-      echo "$ac_t""no" 1>&6
-    fi
-  fi
-  
-  am_i_shared=$PHP_PHAR_SHARED
-  is_it_shared=$PHP_HASH_SHARED
-  is_it_enabled=$PHP_HASH
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension phar to build statically, but it
-depends on extension hash, which you've configured to build shared.
-You either need to build phar shared or build hash statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension phar, which depends on extension hash,
-but you've either not enabled hash, or have disabled it.
-" 1>&2; exit 1; }
-  fi
-  
-  
-  am_i_shared=$PHP_PHAR_SHARED
-  is_it_shared=$PHP_SPL_SHARED
-  is_it_enabled=$PHP_SPL
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension phar to build statically, but it
-depends on extension spl, which you've configured to build shared.
-You either need to build phar shared or build spl statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension phar, which depends on extension spl,
-but you've either not enabled spl, or have disabled it.
-" 1>&2; exit 1; }
-  fi
-  
-  
-  src=$ext_srcdir/Makefile.frag
-  ac_srcdir=$ext_srcdir
-  ac_builddir=$ext_builddir
-  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments
-
-fi
-
-
-
-php_enable_posix=yes
-
-echo $ac_n "checking whether to enable POSIX-like functions""... $ac_c" 1>&6
-echo "configure:77522: checking whether to enable POSIX-like functions" >&5
-# Check whether --enable-posix or --disable-posix was given.
-if test "${enable_posix+set}" = set; then
-  enableval="$enable_posix"
-  PHP_POSIX=$enableval
-else
-  
-  PHP_POSIX=yes
-  test "$PHP_ENABLE_ALL" && PHP_POSIX=$PHP_ENABLE_ALL
-
 fi
 
 
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_POSIX in
-shared,*)
-  PHP_POSIX=`echo "$PHP_POSIX"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_POSIX=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test "$PHP_POSIX" = "yes"; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_POSIX 1
+cat >> confdefs.h <<\EOF
+#define HAVE_REFLECTION 1
 EOF
 
-  
-  ext_builddir=ext/posix
-  ext_srcdir=$abs_srcdir/ext/posix
+
+  ext_builddir=ext/reflection
+  ext_srcdir=$abs_srcdir/ext/reflection
 
   ac_extra=
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_POSIX_SHARED=no
+  if test "no" != "shared" && test "no" != "yes" && test "" != "cli"; then
+    PHP_REFLECTION_SHARED=no
     
   
-  case ext/posix in
+  case ext/reflection in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/reflection"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/reflection/"; ac_bdir="ext/reflection/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -77591,7 +83260,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in posix.c; do
+  for ac_src in php_reflection.c; do
   
       IFS=.
       set $ac_src
@@ -77614,18 +83283,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC posix"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC posix"
+    EXT_STATIC="$EXT_STATIC reflection"
+    if test "no" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC reflection"
     fi
   else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_POSIX_SHARED=yes
+    if test "no" = "shared" || test "no" = "yes"; then
+      PHP_REFLECTION_SHARED=yes
       
-  case ext/posix in
+  case ext/reflection in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/reflection"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/reflection/"; ac_bdir="ext/reflection/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -77640,14 +83309,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in posix.c; do
+  for ac_src in php_reflection.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_posix="$shared_objects_posix $ac_bdir$ac_obj.lo"
+      shared_objects_reflection="$shared_objects_reflection $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -77670,31 +83339,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpposix.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) $(PHPPOSIX_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpposix.so '$ext_builddir'/phpposix.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpreflection.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) $(PHPREFLECTION_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpreflection.so '$ext_builddir'/phpreflection.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPOSIX, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPREFLECTION, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) $(PHPPOSIX_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) $(PHPREFLECTION_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpposix.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpreflection.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpposix.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpreflection.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_posix"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_reflection"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpposix.$suffix: $ext_builddir/phpposix.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpposix.$suffix \$(phplibdir)
+\$(phplibdir)/phpreflection.$suffix: $ext_builddir/phpreflection.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpreflection.$suffix \$(phplibdir)
 
-$ext_builddir/phpposix.$suffix: \$(shared_objects_posix) \$(PHPPOSIX_SHARED_DEPENDENCIES)
+$ext_builddir/phpreflection.$suffix: \$(shared_objects_reflection) \$(PHPREFLECTION_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -77707,31 +83376,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/posix.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) $(POSIX_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/posix.so '$ext_builddir'/posix.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/reflection.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) $(REFLECTION_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/reflection.so '$ext_builddir'/reflection.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(POSIX, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(REFLECTION, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) $(POSIX_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) $(REFLECTION_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/posix.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/reflection.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/posix.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/reflection.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_posix"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_reflection"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/posix.$suffix: $ext_builddir/posix.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/posix.$suffix \$(phplibdir)
+\$(phplibdir)/reflection.$suffix: $ext_builddir/reflection.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/reflection.$suffix \$(phplibdir)
 
-$ext_builddir/posix.$suffix: \$(shared_objects_posix) \$(POSIX_SHARED_DEPENDENCIES)
+$ext_builddir/reflection.$suffix: \$(shared_objects_reflection) \$(REFLECTION_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -77739,22 +83408,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_POSIX 1
+#define COMPILE_DL_REFLECTION 1
 EOF
 
     fi
   fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_POSIX_SHARED=no
+  if test "no" != "shared" && test "no" != "yes" && test "" = "cli"; then
+    PHP_REFLECTION_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/posix in
+  case ext/reflection in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/reflection"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/reflection/"; ac_bdir="ext/reflection/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -77769,7 +83438,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in posix.c; do
+  for ac_src in php_reflection.c; do
   
       IFS=.
       set $ac_src
@@ -77792,15 +83461,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC posix"
+        EXT_STATIC="$EXT_STATIC reflection"
         ;;
       *)
         
   
-  case ext/posix in
+  case ext/reflection in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/reflection"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/reflection/"; ac_bdir="ext/reflection/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -77815,7 +83484,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in posix.c; do
+  for ac_src in php_reflection.c; do
   
       IFS=.
       set $ac_src
@@ -77840,7 +83509,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC posix"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC reflection"
   fi
   
   
@@ -77849,257 +83518,338 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=posix
+    PHP_PECL_EXTENSION=reflection
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
 
-  for ac_hdr in sys/mkdev.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:77864: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 77869 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:77874: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
+
+
+php_enable_session=yes
+
+echo $ac_n "checking whether to enable PHP sessions""... $ac_c" 1>&6
+echo "configure:83534: checking whether to enable PHP sessions" >&5
+# Check whether --enable-session or --disable-session was given.
+if test "${enable_session+set}" = set; then
+  enableval="$enable_session"
+  PHP_SESSION=$enableval
 else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
+  
+  PHP_SESSION=yes
+  test "$PHP_ENABLE_ALL" && PHP_SESSION=$PHP_ENABLE_ALL
+
 fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_SESSION in
+shared,*)
+  PHP_SESSION=`echo "$PHP_SESSION"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_SESSION=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+
+php_with_mm=no
+
+echo $ac_n "checking for mm support""... $ac_c" 1>&6
+echo "configure:83578: checking for mm support" >&5
+# Check whether --with-mm or --without-mm was given.
+if test "${with_mm+set}" = set; then
+  withval="$with_mm"
+  PHP_MM=$withval
 else
-  echo "$ac_t""no" 1>&6
+  
+  PHP_MM=no
+  
+
 fi
-done
 
 
-  for ac_func in seteuid setegid setsid getsid setpgid getpgid ctermid mkfifo mknod getrlimit getlogin getgroups makedev initgroups getpwuid_r getgrgid_r
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:77904: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+ext_output=$PHP_MM
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_SESSION" != "no"; then
+  
+  echo $ac_n "checking whether pwrite works""... $ac_c" 1>&6
+echo "configure:83600: checking whether pwrite works" >&5
+if eval "test \"`echo '$''{'ac_cv_pwrite'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
+  
+    
+  if test "$cross_compiling" = yes; then
+  
+    ac_cv_pwrite=no
+  
+else
   cat > conftest.$ac_ext <<EOF
-#line 77909 "configure"
+#line 83612 "configure"
 #include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
 
-int main() {
+#include <sys/types.h>
+#include <sys/stat.h>
+#include <fcntl.h>
+#include <unistd.h>
+#include <errno.h>
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
+    main() {
+    int fd = open("conftest_in", O_WRONLY|O_CREAT, 0600);
 
-; return 0; }
-EOF
-if { (eval echo configure:77932: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
+    if (fd < 0) exit(1);
+    if (pwrite(fd, "text", 4, 0) != 4) exit(1);
+    /* Linux glibc breakage until 2.2.5 */
+    if (pwrite(fd, "text", 4, -1) != -1 || errno != EINVAL) exit(1);
+    exit(0);
+    }
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
+  
 EOF
- 
+if { (eval echo configure:83633: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+    ac_cv_pwrite=yes
+  
 else
-  echo "$ac_t""no" 1>&6
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  
+    ac_cv_pwrite=no
+  
+fi
+rm -fr conftest*
 fi
-done
 
 
-  echo $ac_n "checking for working ttyname_r() implementation""... $ac_c" 1>&6
-echo "configure:77958: checking for working ttyname_r() implementation" >&5
+    if test "$ac_cv_pwrite" = "no"; then
+      
   if test "$cross_compiling" = yes; then
   
-    echo "$ac_t""no, cannot detect working ttyname_r() when cross compiling. posix_ttyname() will be thread-unsafe" 1>&6
+    ac_cv_pwrite=no
   
 else
   cat > conftest.$ac_ext <<EOF
-#line 77965 "configure"
+#line 83658 "configure"
 #include "confdefs.h"
 
+#include <sys/types.h>
+#include <sys/stat.h>
+#include <fcntl.h>
 #include <unistd.h>
+#include <errno.h>
+ssize_t pwrite(int, void *, size_t, off64_t);
+    main() {
+    int fd = open("conftest_in", O_WRONLY|O_CREAT, 0600);
 
-int main(int argc, char *argv[])
-{
-	char buf[64];
+    if (fd < 0) exit(1);
+    if (pwrite(fd, "text", 4, 0) != 4) exit(1);
+    /* Linux glibc breakage until 2.2.5 */
+    if (pwrite(fd, "text", 4, -1) != -1 || errno != EINVAL) exit(1);
+    exit(0);
+    }
 
-	return ttyname_r(0, buf, 64) ? 1 : 0;
-}
   
 EOF
-if { (eval echo configure:77978: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:83679: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
-    echo "$ac_t""yes" 1>&6
-    cat >> confdefs.h <<\EOF
-#define HAVE_TTYNAME_R 1
-EOF
-
+    ac_cv_pwrite=yes
   
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -fr conftest*
   
-    echo "$ac_t""no, posix_ttyname() will be thread-unsafe" 1>&6
+    ac_cv_pwrite=no
   
 fi
 rm -fr conftest*
 fi
 
 
-  echo $ac_n "checking for utsname.domainname""... $ac_c" 1>&6
-echo "configure:78000: checking for utsname.domainname" >&5
-if eval "test \"`echo '$''{'ac_cv_have_utsname_domainname'+set}'`\" = set"; then
+      if test "$ac_cv_pwrite" = "yes"; then
+        ac_cv_pwrite=64
+      fi
+    fi
+  
+fi
+
+echo "$ac_t""$ac_cv_pwrite" 1>&6
+
+  if test "$ac_cv_pwrite" != "no"; then
+    cat >> confdefs.h <<\EOF
+#define HAVE_PWRITE 1
+EOF
+
+    if test "$ac_cv_pwrite" = "64"; then
+      cat >> confdefs.h <<\EOF
+#define PHP_PWRITE_64 1
+EOF
+
+    fi
+  fi  
+
+  
+  echo $ac_n "checking whether pread works""... $ac_c" 1>&6
+echo "configure:83720: checking whether pread works" >&5
+if eval "test \"`echo '$''{'ac_cv_pread'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
-    cat > conftest.$ac_ext <<EOF
-#line 78006 "configure"
+    
+  echo test > conftest_in
+  if test "$cross_compiling" = yes; then
+  
+    ac_cv_pread=no
+  
+else
+  cat > conftest.$ac_ext <<EOF
+#line 83733 "configure"
 #include "confdefs.h"
 
-      #define _GNU_SOURCE
-      #include <sys/utsname.h>
-    
-int main() {
+#include <sys/types.h>
+#include <sys/stat.h>
+#include <fcntl.h>
+#include <unistd.h>
+#include <errno.h>
 
-      return sizeof(((struct utsname *)0)->domainname);
-    
-; return 0; }
+    main() {
+    char buf[3]; 
+    int fd = open("conftest_in", O_RDONLY);
+    if (fd < 0) exit(1);
+    if (pread(fd, buf, 2, 0) != 2) exit(1);
+    /* Linux glibc breakage until 2.2.5 */
+    if (pread(fd, buf, 2, -1) != -1 || errno != EINVAL) exit(1);
+    exit(0);
+    }
+  
 EOF
-if { (eval echo configure:78018: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
+if { (eval echo configure:83753: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+    ac_cv_pread=yes
   
-      ac_cv_have_utsname_domainname=yes
-    
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
+  rm -fr conftest*
   
-      ac_cv_have_utsname_domainname=no
-    
-fi
-rm -f conftest*
+    ac_cv_pread=no
   
 fi
-
-echo "$ac_t""$ac_cv_have_utsname_domainname" 1>&6
-  if test "$ac_cv_have_utsname_domainname" = yes; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_UTSNAME_DOMAINNAME 1
-EOF
-
-  fi
+rm -fr conftest*
 fi
 
+  rm -f conftest_in
 
+    if test "$ac_cv_pread" = "no"; then
+      
+  echo test > conftest_in
+  if test "$cross_compiling" = yes; then
+  
+    ac_cv_pread=no
+  
+else
+  cat > conftest.$ac_ext <<EOF
+#line 83780 "configure"
+#include "confdefs.h"
 
-php_with_pspell=no
-
-echo $ac_n "checking for PSPELL support""... $ac_c" 1>&6
-echo "configure:78049: checking for PSPELL support" >&5
-# Check whether --with-pspell or --without-pspell was given.
-if test "${with_pspell+set}" = set; then
-  withval="$with_pspell"
-  PHP_PSPELL=$withval
+#include <sys/types.h>
+#include <sys/stat.h>
+#include <fcntl.h>
+#include <unistd.h>
+#include <errno.h>
+ssize_t pread(int, void *, size_t, off64_t);
+    main() {
+    char buf[3]; 
+    int fd = open("conftest_in", O_RDONLY);
+    if (fd < 0) exit(1);
+    if (pread(fd, buf, 2, 0) != 2) exit(1);
+    /* Linux glibc breakage until 2.2.5 */
+    if (pread(fd, buf, 2, -1) != -1 || errno != EINVAL) exit(1);
+    exit(0);
+    }
+  
+EOF
+if { (eval echo configure:83800: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+    ac_cv_pread=yes
+  
 else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  
+    ac_cv_pread=no
   
-  PHP_PSPELL=no
-  test "$PHP_ENABLE_ALL" && PHP_PSPELL=$PHP_ENABLE_ALL
-
+fi
+rm -fr conftest*
 fi
 
+  rm -f conftest_in
 
+      if test "$ac_cv_pread" = "yes"; then
+        ac_cv_pread=64
+      fi
+    fi
+  
+fi
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_PSPELL in
-shared,*)
-  PHP_PSPELL=`echo "$PHP_PSPELL"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_PSPELL=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
+echo "$ac_t""$ac_cv_pread" 1>&6
 
+  if test "$ac_cv_pread" != "no"; then
+    cat >> confdefs.h <<\EOF
+#define HAVE_PREAD 1
+EOF
 
+    if test "$ac_cv_pread" = "64"; then
+      cat >> confdefs.h <<\EOF
+#define PHP_PREAD_64 1
+EOF
 
+    fi
+  fi  
 
-if test "$PHP_PSPELL" != "no"; then
-	
-  ext_builddir=ext/pspell
-  ext_srcdir=$abs_srcdir/ext/pspell
+  
+  ext_builddir=ext/session
+  ext_srcdir=$abs_srcdir/ext/session
 
   ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_PSPELL_SHARED=no
+    PHP_SESSION_SHARED=no
     
   
-  case ext/pspell in
+  case ext/session in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -78114,7 +83864,7 @@ if test "$PHP_PSPELL" != "no"; then
 
 
   old_IFS=$IFS
-  for ac_src in pspell.c; do
+  for ac_src in session.c mod_files.c mod_mm.c mod_user.c; do
   
       IFS=.
       set $ac_src
@@ -78137,18 +83887,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC pspell"
+    EXT_STATIC="$EXT_STATIC session"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC pspell"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC session"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_PSPELL_SHARED=yes
+      PHP_SESSION_SHARED=yes
       
-  case ext/pspell in
+  case ext/session in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -78163,14 +83913,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in pspell.c; do
+  for ac_src in session.c mod_files.c mod_mm.c mod_user.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_pspell="$shared_objects_pspell $ac_bdir$ac_obj.lo"
+      shared_objects_session="$shared_objects_session $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -78193,31 +83943,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppspell.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) $(PHPPSPELL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppspell.so '$ext_builddir'/phppspell.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsession.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) $(PHPSESSION_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsession.so '$ext_builddir'/phpsession.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPSPELL, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSESSION, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) $(PHPPSPELL_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) $(PHPSESSION_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppspell.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsession.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppspell.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsession.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pspell"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_session"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phppspell.$suffix: $ext_builddir/phppspell.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phppspell.$suffix \$(phplibdir)
+\$(phplibdir)/phpsession.$suffix: $ext_builddir/phpsession.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsession.$suffix \$(phplibdir)
 
-$ext_builddir/phppspell.$suffix: \$(shared_objects_pspell) \$(PHPPSPELL_SHARED_DEPENDENCIES)
+$ext_builddir/phpsession.$suffix: \$(shared_objects_session) \$(PHPSESSION_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -78230,31 +83980,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pspell.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) $(PSPELL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pspell.so '$ext_builddir'/pspell.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/session.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) $(SESSION_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/session.so '$ext_builddir'/session.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PSPELL, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SESSION, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) $(PSPELL_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) $(SESSION_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pspell.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/session.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pspell.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/session.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pspell"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_session"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/pspell.$suffix: $ext_builddir/pspell.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/pspell.$suffix \$(phplibdir)
+\$(phplibdir)/session.$suffix: $ext_builddir/session.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/session.$suffix \$(phplibdir)
 
-$ext_builddir/pspell.$suffix: \$(shared_objects_pspell) \$(PSPELL_SHARED_DEPENDENCIES)
+$ext_builddir/session.$suffix: \$(shared_objects_session) \$(SESSION_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -78262,22 +84012,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_PSPELL 1
+#define COMPILE_DL_SESSION 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_PSPELL_SHARED=no
+    PHP_SESSION_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/pspell in
+  case ext/session in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -78292,7 +84042,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in pspell.c; do
+  for ac_src in session.c mod_files.c mod_mm.c mod_user.c; do
   
       IFS=.
       set $ac_src
@@ -78315,15 +84065,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC pspell"
+        EXT_STATIC="$EXT_STATIC session"
         ;;
       *)
         
   
-  case ext/pspell in
+  case ext/session in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -78338,7 +84088,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in pspell.c; do
+  for ac_src in session.c mod_files.c mod_mm.c mod_user.c; do
   
       IFS=.
       set $ac_src
@@ -78363,7 +84113,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC pspell"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC session"
   fi
   
   
@@ -78372,289 +84122,110 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=pspell
+    PHP_PECL_EXTENSION=session
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
-	if test "$PHP_PSPELL" != "yes"; then
-	    PSPELL_SEARCH_DIRS=$PHP_PSPELL
-	else
-	    PSPELL_SEARCH_DIRS="/usr/local /usr"
-	fi
-	for i in $PSPELL_SEARCH_DIRS; do
-		if test -f $i/include/pspell/pspell.h; then
-			PSPELL_DIR=$i
-			PSPELL_INCDIR=$i/include/pspell
-		elif test -f $i/include/pspell.h; then
-			PSPELL_DIR=$i
-			PSPELL_INCDIR=$i/include
-		fi
-	done
-
-	if test -z "$PSPELL_DIR"; then
-		{ echo "configure: error: Cannot find pspell" 1>&2; exit 1; }
-	fi
-
-	PSPELL_LIBDIR=$PSPELL_DIR/$PHP_LIBDIR
-
-	
-
-  if test "$ext_shared" = "yes"; then
-    PSPELL_SHARED_LIBADD="-lpspell $PSPELL_SHARED_LIBADD"
-    if test -n "$PSPELL_LIBDIR"; then
-      
-  if test "$PSPELL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PSPELL_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PSPELL_LIBDIR
-  else
-    
-    ep_dir="`echo $PSPELL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PSPELL_LIBDIR\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        PSPELL_SHARED_LIBADD="-L$ai_p $PSPELL_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && PSPELL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PSPELL_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-      fi
-    
-  fi
-
-    fi
-  else
-    
-
-  if test -n "$PSPELL_LIBDIR"; then
-    
-  if test "$PSPELL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PSPELL_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PSPELL_LIBDIR
-  else
-    
-    ep_dir="`echo $PSPELL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PSPELL_LIBDIR\"`"
-  fi
-
-    
-      
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
+  am_i_shared=$PHP_SESSION_SHARED
+  is_it_shared=$PHP_HASH_SHARED
+  is_it_enabled=$PHP_HASH
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension session to build statically, but it
+depends on extension hash, which you've configured to build shared.
+You either need to build session shared or build hash statically for the
+build to be successful.
+" 1>&2; exit 1; }
   fi
-
-
-    
-  fi
-
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension session, which depends on extension hash,
+but you've either not enabled hash, or have disabled it.
+" 1>&2; exit 1; }
   fi
   
   
-  case pspell in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lpspell $LIBS" 
-   ;;
-  esac
-
-
-
-
+  am_i_shared=$PHP_SESSION_SHARED
+  is_it_shared=$PHP_SPL_SHARED
+  is_it_enabled=$PHP_SPL
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension session to build statically, but it
+depends on extension spl, which you've configured to build shared.
+You either need to build session shared or build spl statically for the
+build to be successful.
+" 1>&2; exit 1; }
   fi
-
-
-
-		
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-		-L$PSPELL_LIBDIR
-	"
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension session, which depends on extension spl,
+but you've either not enabled spl, or have disabled it.
+" 1>&2; exit 1; }
   fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
+  PHP_VAR_SUBST="$PHP_VAR_SUBST SESSION_SHARED_LIBADD"
 
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
   
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+    header_path=ext/session
+    for header_file in php_session.h mod_files.h mod_user.h; do
+      hp_hf="$header_path/$header_file"
+      
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  fi
-
-
-      fi
+  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INSTALLHEADERS$unique=set"
     
+        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
+      
   fi
 
-    ;;
-    esac
-  done
-
-  echo $ac_n "checking for new_aspell_config in -laspell""... $ac_c" 1>&6
-echo "configure:78599: checking for new_aspell_config in -laspell" >&5
-ac_lib_var=`echo aspell'_'new_aspell_config | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-laspell  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 78607 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char new_aspell_config();
+    done 
+  
 
-int main() {
-new_aspell_config()
-; return 0; }
+  cat >> confdefs.h <<\EOF
+#define HAVE_PHP_SESSION 1
 EOF
-if { (eval echo configure:78618: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
 fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+
+if test "$PHP_MM" != "no"; then
+  for i in $PHP_MM /usr/local /usr; do
+    test -f "$i/include/mm.h" && MM_DIR=$i && break
+  done
+
+  if test -z "$MM_DIR" ; then
+    { echo "configure: error: cannot find mm library" 1>&2; exit 1; }
+  fi
+  
   
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-		
 
   if test "$ext_shared" = "yes"; then
-    PSPELL_SHARED_LIBADD="-laspell $PSPELL_SHARED_LIBADD"
-    if test -n "$PSPELL_LIBDIR"; then
+    SESSION_SHARED_LIBADD="-lmm $SESSION_SHARED_LIBADD"
+    if test -n "$MM_DIR/$PHP_LIBDIR"; then
       
-  if test "$PSPELL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PSPELL_LIBDIR" != "/usr/lib"; then
+  if test "$MM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$MM_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PSPELL_LIBDIR
+  if test -z "$MM_DIR/$PHP_LIBDIR" || echo "$MM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$MM_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $PSPELL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $MM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PSPELL_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$MM_DIR/$PHP_LIBDIR\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        PSPELL_SHARED_LIBADD="-L$ai_p $PSPELL_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && PSPELL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PSPELL_SHARED_LIBADD"
+        SESSION_SHARED_LIBADD="-L$ai_p $SESSION_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && SESSION_SHARED_LIBADD="$ld_runpath_switch$ai_p $SESSION_SHARED_LIBADD"
       else
         
   
@@ -78680,18 +84251,18 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
   else
     
 
-  if test -n "$PSPELL_LIBDIR"; then
+  if test -n "$MM_DIR/$PHP_LIBDIR"; then
     
-  if test "$PSPELL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PSPELL_LIBDIR" != "/usr/lib"; then
+  if test "$MM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$MM_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PSPELL_LIBDIR
+  if test -z "$MM_DIR/$PHP_LIBDIR" || echo "$MM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$MM_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $PSPELL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $MM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PSPELL_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$MM_DIR/$PHP_LIBDIR\"`"
   fi
 
     
@@ -78717,10 +84288,10 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
   fi
   
   
-  case aspell in
+  case mm in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-laspell $LIBS" 
+      LIBS="-lmm $LIBS" 
    ;;
   esac
 
@@ -78730,30 +84301,17 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
   fi
 
 
-	
-  
-else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_aspell_new_aspell_config
-    
   
-fi
-
-
-	
-  if test "$PSPELL_INCDIR" != "/usr/include"; then
+  if test "$MM_DIR/include" != "/usr/include"; then
     
-  if test -z "$PSPELL_INCDIR" || echo "$PSPELL_INCDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PSPELL_INCDIR
+  if test -z "$MM_DIR/include" || echo "$MM_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$MM_DIR/include
   else
     
-    ep_dir="`echo $PSPELL_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $MM_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PSPELL_INCDIR\"`"
+    ai_p="$ep_realdir/`basename \"$MM_DIR/include\"`"
   fi
 
     
@@ -78774,29 +84332,43 @@ fi
 
   fi
 
-	
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PSPELL_SHARED_LIBADD"
+  
+  
+    for header_file in ext/session/mod_mm.h; do
+      
+  
+  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INSTALLHEADERS$unique=set"
+    
+        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
+      
+  fi
 
-	cat >> confdefs.h <<\EOF
-#define HAVE_PSPELL 1
+    done 
+  
+
+  cat >> confdefs.h <<\EOF
+#define HAVE_LIBMM 1
 EOF
 
 fi
 
 
+php_enable_shmop=no
 
-php_with_libedit=no
-
-echo $ac_n "checking for libedit readline replacement""... $ac_c" 1>&6
-echo "configure:78792: checking for libedit readline replacement" >&5
-# Check whether --with-libedit or --without-libedit was given.
-if test "${with_libedit+set}" = set; then
-  withval="$with_libedit"
-  PHP_LIBEDIT=$withval
+echo $ac_n "checking whether to enable shmop support""... $ac_c" 1>&6
+echo "configure:84364: checking whether to enable shmop support" >&5
+# Check whether --enable-shmop or --disable-shmop was given.
+if test "${enable_shmop+set}" = set; then
+  enableval="$enable_shmop"
+  PHP_SHMOP=$enableval
 else
   
-  PHP_LIBEDIT=no
-  test "$PHP_ENABLE_ALL" && PHP_LIBEDIT=$PHP_ENABLE_ALL
+  PHP_SHMOP=no
+  test "$PHP_ENABLE_ALL" && PHP_SHMOP=$PHP_ENABLE_ALL
 
 fi
 
@@ -78804,12 +84376,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_LIBEDIT in
+case $PHP_SHMOP in
 shared,*)
-  PHP_LIBEDIT=`echo "$PHP_LIBEDIT"|$SED 's/^shared,//'`
+  PHP_SHMOP=`echo "$PHP_SHMOP"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_LIBEDIT=yes
+  PHP_SHMOP=yes
   ;;
 no)
   ext_output=no
@@ -78828,243 +84400,416 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
-if test "$PHP_LIBEDIT" = "no"; then
+if test "$PHP_SHMOP" != "no"; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_SHMOP 1
+EOF
+
   
-php_with_readline=no
+  ext_builddir=ext/shmop
+  ext_srcdir=$abs_srcdir/ext/shmop
 
-echo $ac_n "checking for readline support""... $ac_c" 1>&6
-echo "configure:78837: checking for readline support" >&5
-# Check whether --with-readline or --without-readline was given.
-if test "${with_readline+set}" = set; then
-  withval="$with_readline"
-  PHP_READLINE=$withval
-else
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_SHMOP_SHARED=no
+    
+  
+  case ext/shmop in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
   
-  PHP_READLINE=no
-  test "$PHP_ENABLE_ALL" && PHP_READLINE=$PHP_ENABLE_ALL
 
-fi
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
 
+  old_IFS=$IFS
+  for ac_src in shmop.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_READLINE in
-shared,*)
-  PHP_READLINE=`echo "$PHP_READLINE"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_READLINE=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
 
+    EXT_STATIC="$EXT_STATIC shmop"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC shmop"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_SHMOP_SHARED=yes
+      
+  case ext/shmop in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-echo "$ac_t""$ext_output" 1>&6
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
 
 
+  old_IFS=$IFS
+  for ac_src in shmop.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_shmop="$shared_objects_shmop $ac_bdir$ac_obj.lo"
 
-else
-    php_with_readline=no
-fi
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-if test "$PHP_READLINE" && test "$PHP_READLINE" != "no"; then
-  for i in $PHP_READLINE /usr/local /usr; do
-    test -f $i/include/readline/readline.h && READLINE_DIR=$i && break
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
   done
 
-  if test -z "$READLINE_DIR"; then
-    { echo "configure: error: Please reinstall readline - I cannot find readline.h" 1>&2; exit 1; }
-  fi
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpshmop.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) $(PHPSHMOP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpshmop.so '$ext_builddir'/phpshmop.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSHMOP, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) $(PHPSHMOP_SHARED_LIBADD)'
+      ;;
+  esac
 
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpshmop.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpshmop.$suffix"
+  fi
   
-  if test "$READLINE_DIR/include" != "/usr/include"; then
-    
-  if test -z "$READLINE_DIR/include" || echo "$READLINE_DIR/include" | grep '^/' >/dev/null ; then
-    ai_p=$READLINE_DIR/include
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_shmop"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpshmop.$suffix: $ext_builddir/phpshmop.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpshmop.$suffix \$(phplibdir)
+
+$ext_builddir/phpshmop.$suffix: \$(shared_objects_shmop) \$(PHPSHMOP_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/shmop.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) $(SHMOP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/shmop.so '$ext_builddir'/shmop.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SHMOP, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) $(SHMOP_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/shmop.$suffix"
   else
-    
-    ep_dir="`echo $READLINE_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$READLINE_DIR/include\"`"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/shmop.$suffix"
   fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_shmop"
 
-    
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/shmop.$suffix: $ext_builddir/shmop.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/shmop.$suffix \$(phplibdir)
+
+$ext_builddir/shmop.$suffix: \$(shared_objects_shmop) \$(SHMOP_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_SHMOP 1
+EOF
+
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_SHMOP_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/shmop in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
 
-  fi
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
 
-  PHP_READLINE_LIBS=""
-  echo $ac_n "checking for tgetent in -lncurses""... $ac_c" 1>&6
-echo "configure:78923: checking for tgetent in -lncurses" >&5
-ac_lib_var=`echo ncurses'_'tgetent | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lncurses  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 78931 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char tgetent();
+  old_IFS=$IFS
+  for ac_src in shmop.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-int main() {
-tgetent()
-; return 0; }
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:78942: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  done
+
+
+        EXT_STATIC="$EXT_STATIC shmop"
+        ;;
+      *)
+        
+  
+  case ext/shmop in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in shmop.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC shmop"
+  fi
   
-    
   
-  case ncurses in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        READLINE_SHARED_LIBADD="-lncurses $READLINE_SHARED_LIBADD" 
-    else
-      
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
   
-  case ncurses in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lncurses $LIBS" 
-   ;;
-  esac
 
 
-    fi
-   ;;
-  esac
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=shmop
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
+  fi
 
-    PHP_READLINE_LIBS="$PHP_READLINE_LIBS -lncurses"
-  
-else
-  echo "$ac_t""no" 1>&6
+fi
 
-    echo $ac_n "checking for tgetent in -ltermcap""... $ac_c" 1>&6
-echo "configure:78987: checking for tgetent in -ltermcap" >&5
-ac_lib_var=`echo termcap'_'tgetent | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-ltermcap  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 78995 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char tgetent();
 
-int main() {
-tgetent()
-; return 0; }
-EOF
-if { (eval echo configure:79006: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+
+php_enable_simplexml=yes
+
+echo $ac_n "checking whether to enable SimpleXML support""... $ac_c" 1>&6
+echo "configure:84708: checking whether to enable SimpleXML support" >&5
+# Check whether --enable-simplexml or --disable-simplexml was given.
+if test "${enable_simplexml+set}" = set; then
+  enableval="$enable_simplexml"
+  PHP_SIMPLEXML=$enableval
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  
+  PHP_SIMPLEXML=yes
+  test "$PHP_ENABLE_ALL" && PHP_SIMPLEXML=$PHP_ENABLE_ALL
 
 fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_SIMPLEXML in
+shared,*)
+  PHP_SIMPLEXML=`echo "$PHP_SIMPLEXML"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_SIMPLEXML=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test -z "$PHP_LIBXML_DIR"; then
   
-      
+php_with_libxml_dir=no
+
+echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
+echo "configure:84753: checking libxml2 install dir" >&5
+# Check whether --with-libxml-dir or --without-libxml-dir was given.
+if test "${with_libxml_dir+set}" = set; then
+  withval="$with_libxml_dir"
+  PHP_LIBXML_DIR=$withval
+else
   
-  case termcap in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        READLINE_SHARED_LIBADD="-ltermcap $READLINE_SHARED_LIBADD" 
-    else
-      
+  PHP_LIBXML_DIR=no
   
-  case termcap in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-ltermcap $LIBS" 
-   ;;
-  esac
 
+fi
 
-    fi
-   ;;
-  esac
+
+ext_output=$PHP_LIBXML_DIR
+echo "$ac_t""$ext_output" 1>&6
 
 
-      PHP_READLINE_LIBS="$PHP_READLINE_LIBS -ltermcap"
-    
-else
-  echo "$ac_t""no" 1>&6
-fi
 
-  
 fi
 
+if test "$PHP_SIMPLEXML" != "no"; then
+
+  if test "$PHP_LIBXML" = "no"; then   
+    { echo "configure: error: SimpleXML extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }                
+  fi
 
   
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-    -L$READLINE_DIR/$PHP_LIBDIR $PHP_READLINE_LIBS
-  "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
+echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
+echo "configure:84781: checking for xml2-config path" >&5
+if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
   
-  for ac_i in $ac_stuff; do
+  for i in $PHP_LIBXML_DIR /usr/local /usr; do
+    if test -x "$i/bin/xml2-config"; then
+      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
+      break
+    fi
+  done
+
+fi
+
+echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6
+
+  if test -x "$ac_cv_php_xml2_config_path"; then
+    XML2_CONFIG="$ac_cv_php_xml2_config_path"
+    libxml_full_version=`$XML2_CONFIG --version`
+    ac_IFS=$IFS
+    IFS="."
+    set $libxml_full_version
+    IFS=$ac_IFS
+    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
+    if test "$LIBXML_VERSION" -ge "2006011"; then
+      LIBXML_LIBS=`$XML2_CONFIG --libs`
+      LIBXML_INCS=`$XML2_CONFIG --cflags`
+      
+  for ac_i in $LIBXML_LIBS; do
     case $ac_i in
     -pthread)
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
+        SIMPLEXML_SHARED_LIBADD="$SIMPLEXML_SHARED_LIBADD -pthread"
       else
         
   
@@ -79086,7 +84831,7 @@ fi
   c|c_r|pthread*) ;;
   *) 
     if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
+        SIMPLEXML_SHARED_LIBADD="$SIMPLEXML_SHARED_LIBADD -l$ac_ii" 
     else
       
   
@@ -79121,8 +84866,8 @@ fi
 
     
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+        SIMPLEXML_SHARED_LIBADD="-L$ai_p $SIMPLEXML_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && SIMPLEXML_SHARED_LIBADD="$ld_runpath_switch$ai_p $SIMPLEXML_SHARED_LIBADD"
       else
         
   
@@ -79148,486 +84893,608 @@ fi
     esac
   done
 
-  echo $ac_n "checking for readline in -lreadline""... $ac_c" 1>&6
-echo "configure:79153: checking for readline in -lreadline" >&5
-ac_lib_var=`echo readline'_'readline | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+      
+  for ac_i in $LIBXML_INCS; do
+    case $ac_i in
+    -I*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/include"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+    ;;
+    esac
+  done
+
+
+            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
+echo "configure:84939: checking whether libxml build works" >&5
+if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  ac_save_LIBS="$LIBS"
-LIBS="-lreadline  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 79161 "configure"
+  
+        
+  old_LIBS=$LIBS
+  LIBS="
+          $SIMPLEXML_SHARED_LIBADD
+         $LIBS"
+  if test "$cross_compiling" = yes; then
+  
+    LIBS=$old_LIBS
+  
+else
+  cat > conftest.$ac_ext <<EOF
+#line 84955 "configure"
 #include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char readline();
 
-int main() {
-readline()
-; return 0; }
+    
+    char xmlInitParser();
+    int main() {
+      xmlInitParser();
+      return 0;
+    }
+  
 EOF
-if { (eval echo configure:79172: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+if { (eval echo configure:84966: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+    LIBS=$old_LIBS
+    
+          php_cv_libxml_build_works=yes
+        
+  
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
+  rm -fr conftest*
+  
+    LIBS=$old_LIBS
+    
+          echo "$ac_t""no" 1>&6
+          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
+        
+  
+fi
+rm -fr conftest*
 fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
+
+      
 fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-    
 
-  if test "$ext_shared" = "yes"; then
-    READLINE_SHARED_LIBADD="-lreadline $READLINE_SHARED_LIBADD"
-    if test -n "$READLINE_DIR/$PHP_LIBDIR"; then
+echo "$ac_t""$php_cv_libxml_build_works" 1>&6
+      if test "$php_cv_libxml_build_works" = "yes"; then
+        cat >> confdefs.h <<\EOF
+#define HAVE_LIBXML 1
+EOF
+
+      fi
       
-  if test "$READLINE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$READLINE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$READLINE_DIR/$PHP_LIBDIR" || echo "$READLINE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$READLINE_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $READLINE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    cat >> confdefs.h <<\EOF
+#define HAVE_SIMPLEXML 1
+EOF
+
     
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$READLINE_DIR/$PHP_LIBDIR\"`"
-  fi
+  ext_builddir=ext/simplexml
+  ext_srcdir=$abs_srcdir/ext/simplexml
+
+  ac_extra=
 
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_SIMPLEXML_SHARED=no
     
-      if test "$ext_shared" = "yes"; then
-        READLINE_SHARED_LIBADD="-L$ai_p $READLINE_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && READLINE_SHARED_LIBADD="$ld_runpath_switch$ai_p $READLINE_SHARED_LIBADD"
-      else
-        
   
+  case ext/simplexml in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/simplexml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/simplexml/"; ac_bdir="ext/simplexml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in simplexml.c sxe.c; do
   
-  fi
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-      fi
-    
-  fi
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
+
+    EXT_STATIC="$EXT_STATIC simplexml"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC simplexml"
     fi
   else
-    
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_SIMPLEXML_SHARED=yes
+      
+  case ext/simplexml in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/simplexml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/simplexml/"; ac_bdir="ext/simplexml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in simplexml.c sxe.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_simplexml="$shared_objects_simplexml $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsimplexml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) $(PHPSIMPLEXML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsimplexml.so '$ext_builddir'/phpsimplexml.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSIMPLEXML, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) $(PHPSIMPLEXML_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsimplexml.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsimplexml.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_simplexml"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpsimplexml.$suffix: $ext_builddir/phpsimplexml.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsimplexml.$suffix \$(phplibdir)
+
+$ext_builddir/phpsimplexml.$suffix: \$(shared_objects_simplexml) \$(PHPSIMPLEXML_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/simplexml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) $(SIMPLEXML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/simplexml.so '$ext_builddir'/simplexml.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SIMPLEXML, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) $(SIMPLEXML_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/simplexml.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/simplexml.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_simplexml"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/simplexml.$suffix: $ext_builddir/simplexml.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/simplexml.$suffix \$(phplibdir)
+
+$ext_builddir/simplexml.$suffix: \$(shared_objects_simplexml) \$(SIMPLEXML_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_SIMPLEXML 1
+EOF
 
-  if test -n "$READLINE_DIR/$PHP_LIBDIR"; then
-    
-  if test "$READLINE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$READLINE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$READLINE_DIR/$PHP_LIBDIR" || echo "$READLINE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$READLINE_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $READLINE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$READLINE_DIR/$PHP_LIBDIR\"`"
+    fi
   fi
 
-    
-      
-  
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_SIMPLEXML_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  case ext/simplexml in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/simplexml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/simplexml/"; ac_bdir="ext/simplexml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  fi
 
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-    
-  fi
 
-  fi
-  
+  old_IFS=$IFS
+  for ac_src in simplexml.c sxe.c; do
   
-  case readline in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lreadline $LIBS" 
-   ;;
-  esac
-
-
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-  fi
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
 
+        EXT_STATIC="$EXT_STATIC simplexml"
+        ;;
+      *)
+        
   
-  
-else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_readline_readline
-    
-    { echo "configure: error: readline library not found" 1>&2; exit 1; }
+  case ext/simplexml in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/simplexml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/simplexml/"; ac_bdir="ext/simplexml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
   
-fi
 
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-  
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-    -L$READLINE_DIR/$PHP_LIBDIR $PHP_READLINE_LIBS
-  "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
+  old_IFS=$IFS
+  for ac_src in simplexml.c sxe.c; do
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-    fi
-   ;;
-  esac
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC simplexml"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=simplexml
     
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
   fi
 
     
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
+  PHP_VAR_SUBST="$PHP_VAR_SUBST SIMPLEXML_SHARED_LIBADD"
+
   
+    else
+      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
+    fi
+else 
+    { echo "configure: error: xml2-config not found. Please check your libxml2 installation." 1>&2; exit 1; }
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  fi
+
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  am_i_shared=$PHP_SIMPLEXML_SHARED
+  is_it_shared=$PHP_LIBXML_SHARED
+  is_it_enabled=$PHP_LIBXML
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension simplexml to build statically, but it
+depends on extension libxml, which you've configured to build shared.
+You either need to build simplexml shared or build libxml statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension simplexml, which depends on extension libxml,
+but you've either not enabled libxml, or have disabled it.
+" 1>&2; exit 1; }
+  fi
   
+  
+  am_i_shared=$PHP_SIMPLEXML_SHARED
+  is_it_shared=$PHP_SPL_SHARED
+  is_it_enabled=$PHP_SPL
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension simplexml to build statically, but it
+depends on extension spl, which you've configured to build shared.
+You either need to build simplexml shared or build spl statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension simplexml, which depends on extension spl,
+but you've either not enabled spl, or have disabled it.
+" 1>&2; exit 1; }
   fi
+  
+fi
 
 
-      fi
-    
-  fi
 
-    ;;
-    esac
-  done
+php_with_snmp=no
 
-  echo $ac_n "checking for rl_pending_input in -lreadline""... $ac_c" 1>&6
-echo "configure:79401: checking for rl_pending_input in -lreadline" >&5
-ac_lib_var=`echo readline'_'rl_pending_input | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo $ac_n "checking for SNMP support""... $ac_c" 1>&6
+echo "configure:85354: checking for SNMP support" >&5
+# Check whether --with-snmp or --without-snmp was given.
+if test "${with_snmp+set}" = set; then
+  withval="$with_snmp"
+  PHP_SNMP=$withval
 else
-  ac_save_LIBS="$LIBS"
-LIBS="-lreadline  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 79409 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char rl_pending_input();
+  
+  PHP_SNMP=no
+  test "$PHP_ENABLE_ALL" && PHP_SNMP=$PHP_ENABLE_ALL
 
-int main() {
-rl_pending_input()
-; return 0; }
-EOF
-if { (eval echo configure:79420: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
 fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-  
-else
-  echo "$ac_t""no" 1>&6
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_readline_rl_pending_input
-    
-    { echo "configure: error: invalid readline installation detected. Try --with-libedit instead." 1>&2; exit 1; }
-  
-  
-fi
 
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_SNMP in
+shared,*)
+  PHP_SNMP=`echo "$PHP_SNMP"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_SNMP=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
-  
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-    -L$READLINE_DIR/$PHP_LIBDIR $PHP_READLINE_LIBS
-  "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
 
+echo "$ac_t""$ext_output" 1>&6
 
-    fi
-   ;;
-  esac
 
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
 
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+
+php_with_openssl_dir=no
+
+echo $ac_n "checking OpenSSL dir for SNMP""... $ac_c" 1>&6
+echo "configure:85398: checking OpenSSL dir for SNMP" >&5
+# Check whether --with-openssl-dir or --without-openssl-dir was given.
+if test "${with_openssl_dir+set}" = set; then
+  withval="$with_openssl_dir"
+  PHP_OPENSSL_DIR=$withval
+else
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  PHP_OPENSSL_DIR=no
   
-  fi
 
+fi
 
-      fi
-    
-  fi
 
-    ;;
-    esac
-  done
+ext_output=$PHP_OPENSSL_DIR
+echo "$ac_t""$ext_output" 1>&6
 
-  echo $ac_n "checking for rl_callback_read_char in -lreadline""... $ac_c" 1>&6
-echo "configure:79551: checking for rl_callback_read_char in -lreadline" >&5
-ac_lib_var=`echo readline'_'rl_callback_read_char | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lreadline  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 79559 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char rl_callback_read_char();
 
-int main() {
-rl_callback_read_char()
-; return 0; }
-EOF
-if { (eval echo configure:79570: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-    cat >> confdefs.h <<\EOF
-#define HAVE_RL_CALLBACK_READ_CHAR 1
-EOF
 
+
+php_enable_ucd_snmp_hack=no
+
+echo $ac_n "checking whether to enable UCD SNMP hack""... $ac_c" 1>&6
+echo "configure:85421: checking whether to enable UCD SNMP hack" >&5
+# Check whether --enable-ucd-snmp-hack or --disable-ucd-snmp-hack was given.
+if test "${enable_ucd_snmp_hack+set}" = set; then
+  enableval="$enable_ucd_snmp_hack"
+  PHP_UCD_SNMP_HACK=$enableval
+else
   
+  PHP_UCD_SNMP_HACK=no
   
-else
-  echo "$ac_t""no" 1>&6
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_readline_rl_callback_read_char
-    
-  
 fi
 
 
-  cat >> confdefs.h <<\EOF
-#define HAVE_LIBREADLINE 1
-EOF
+ext_output=$PHP_UCD_SNMP_HACK
+echo "$ac_t""$ext_output" 1>&6
 
 
-elif test "$PHP_LIBEDIT" != "no"; then
 
-  for i in $PHP_LIBEDIT /usr/local /usr; do
-    test -f $i/include/editline/readline.h && LIBEDIT_DIR=$i && break
+
+if test "$PHP_SNMP" != "no"; then
+
+        if test "$PHP_SNMP" = "yes"; then
+    # Extract the first word of "net-snmp-config", so it can be a program name with args.
+set dummy net-snmp-config; ac_word=$2
+echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
+echo "configure:85446: checking for $ac_word" >&5
+if eval "test \"`echo '$''{'ac_cv_path_SNMP_CONFIG'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  case "$SNMP_CONFIG" in
+  /*)
+  ac_cv_path_SNMP_CONFIG="$SNMP_CONFIG" # Let the user override the test with a path.
+  ;;
+  ?:/*)			 
+  ac_cv_path_SNMP_CONFIG="$SNMP_CONFIG" # Let the user override the test with a dos path.
+  ;;
+  *)
+  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
+  ac_dummy="/usr/local/bin:$PATH"
+  for ac_dir in $ac_dummy; do 
+    test -z "$ac_dir" && ac_dir=.
+    if test -f $ac_dir/$ac_word; then
+      ac_cv_path_SNMP_CONFIG="$ac_dir/$ac_word"
+      break
+    fi
   done
+  IFS="$ac_save_ifs"
+  ;;
+esac
+fi
+SNMP_CONFIG="$ac_cv_path_SNMP_CONFIG"
+if test -n "$SNMP_CONFIG"; then
+  echo "$ac_t""$SNMP_CONFIG" 1>&6
+else
+  echo "$ac_t""no" 1>&6
+fi
 
-  if test -z "$LIBEDIT_DIR"; then
-    { echo "configure: error: Please reinstall libedit - I cannot find readline.h" 1>&2; exit 1; }
+  else
+    SNMP_CONFIG="$PHP_SNMP/bin/net-snmp-config"
   fi
 
-  
-  if test "$LIBEDIT_DIR/include" != "/usr/include"; then
+  if test -x "$SNMP_CONFIG"; then
+    SNMP_LIBS=`$SNMP_CONFIG --netsnmp-libs`
+    SNMP_LIBS="$SNMP_LIBS `$SNMP_CONFIG --external-libs`"
+    SNMP_PREFIX=`$SNMP_CONFIG --prefix`
+
+    if test -n "$SNMP_LIBS" && test -n "$SNMP_PREFIX"; then
+      
+  if test "${SNMP_PREFIX}/include" != "/usr/include"; then
     
-  if test -z "$LIBEDIT_DIR/include" || echo "$LIBEDIT_DIR/include" | grep '^/' >/dev/null ; then
-    ai_p=$LIBEDIT_DIR/include
+  if test -z "${SNMP_PREFIX}/include" || echo "${SNMP_PREFIX}/include" | grep '^/' >/dev/null ; then
+    ai_p=${SNMP_PREFIX}/include
   else
     
-    ep_dir="`echo $LIBEDIT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $SNMP_PREFIX/include|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$LIBEDIT_DIR/include\"`"
+    ai_p="$ep_realdir/`basename \"${SNMP_PREFIX}/include\"`"
   fi
 
     
@@ -79648,152 +85515,12 @@ elif test "$PHP_LIBEDIT" != "no"; then
 
   fi
 
-
-  echo $ac_n "checking for tgetent in -lncurses""... $ac_c" 1>&6
-echo "configure:79654: checking for tgetent in -lncurses" >&5
-ac_lib_var=`echo ncurses'_'tgetent | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lncurses  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 79662 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char tgetent();
-
-int main() {
-tgetent()
-; return 0; }
-EOF
-if { (eval echo configure:79673: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    
-  
-  case ncurses in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        READLINE_SHARED_LIBADD="-lncurses $READLINE_SHARED_LIBADD" 
-    else
-      
-  
-  case ncurses in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lncurses $LIBS" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-  
-else
-  echo "$ac_t""no" 1>&6
-
-    echo $ac_n "checking for tgetent in -ltermcap""... $ac_c" 1>&6
-echo "configure:79717: checking for tgetent in -ltermcap" >&5
-ac_lib_var=`echo termcap'_'tgetent | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-ltermcap  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 79725 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char tgetent();
-
-int main() {
-tgetent()
-; return 0; }
-EOF
-if { (eval echo configure:79736: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-      
-  
-  case termcap in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        READLINE_SHARED_LIBADD="-ltermcap $READLINE_SHARED_LIBADD" 
-    else
       
-  
-  case termcap in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-ltermcap $LIBS" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-  
-fi
-
-
-  
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-    -L$READLINE_DIR/$PHP_LIBDIR 
-  "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
+  for ac_i in $SNMP_LIBS; do
     case $ac_i in
     -pthread)
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
+        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -pthread"
       else
         
   
@@ -79815,7 +85542,7 @@ fi
   c|c_r|pthread*) ;;
   *) 
     if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
+        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -l$ac_ii" 
     else
       
   
@@ -79850,8 +85577,8 @@ fi
 
     
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+        SNMP_SHARED_LIBADD="-L$ai_p $SNMP_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && SNMP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SNMP_SHARED_LIBADD"
       else
         
   
@@ -79877,212 +85604,74 @@ fi
     esac
   done
 
-  echo $ac_n "checking for readline in -ledit""... $ac_c" 1>&6
-echo "configure:79882: checking for readline in -ledit" >&5
-ac_lib_var=`echo edit'_'readline | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-ledit  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 79890 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char readline();
-
-int main() {
-readline()
-; return 0; }
+      cat >> confdefs.h <<\EOF
+#define HAVE_NET_SNMP 1
 EOF
-if { (eval echo configure:79901: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-    
-
-  if test "$ext_shared" = "yes"; then
-    READLINE_SHARED_LIBADD="-ledit $READLINE_SHARED_LIBADD"
-    if test -n "$LIBEDIT_DIR/$PHP_LIBDIR"; then
-      
-  if test "$LIBEDIT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LIBEDIT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$LIBEDIT_DIR/$PHP_LIBDIR" || echo "$LIBEDIT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$LIBEDIT_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $LIBEDIT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$LIBEDIT_DIR/$PHP_LIBDIR\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        READLINE_SHARED_LIBADD="-L$ai_p $READLINE_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && READLINE_SHARED_LIBADD="$ld_runpath_switch$ai_p $READLINE_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-      fi
-    
-  fi
 
+      SNMP_LIBNAME=netsnmp
+    else
+      { echo "configure: error: Could not find the required paths. Please check your net-snmp installation." 1>&2; exit 1; }
     fi
-  else
-    
-
-  if test -n "$LIBEDIT_DIR/$PHP_LIBDIR"; then
-    
-  if test "$LIBEDIT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LIBEDIT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$LIBEDIT_DIR/$PHP_LIBDIR" || echo "$LIBEDIT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$LIBEDIT_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $LIBEDIT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$LIBEDIT_DIR/$PHP_LIBDIR\"`"
-  fi
-
-    
-      
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-    
-  fi
-
-  fi
-  
-  
-  case edit in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-ledit $LIBS" 
-   ;;
-  esac
-
-
-
-
-  fi
-
-  
-  
-  
-else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_edit_readline
-    
-    { echo "configure: error: edit library required by readline not found" 1>&2; exit 1; }
-  
-  
-fi
-
+  else 
 
-  cat >> confdefs.h <<\EOF
-#define HAVE_LIBEDIT 1
-EOF
+            
+    if test "$PHP_SNMP" = "yes"; then
+      for i in /usr/include /usr/local/include; do
+        test -f $i/snmp.h                       && SNMP_INCDIR=$i
+        test -f $i/ucd-snmp/snmp.h              && SNMP_INCDIR=$i/ucd-snmp
+        test -f $i/snmp/snmp.h                  && SNMP_INCDIR=$i/snmp
+        test -f $i/snmp/include/ucd-snmp/snmp.h && SNMP_INCDIR=$i/snmp/include/ucd-snmp
+      done
+      for i in /usr/$PHP_LIBDIR /usr/snmp/lib /usr/local/$PHP_LIBDIR /usr/local/lib /usr/local/snmp/lib; do
+        test -f $i/libsnmp.a || test -f $i/libsnmp.$SHLIB_SUFFIX_NAME && SNMP_LIBDIR=$i
+      done
+    else
+      SNMP_INCDIR=$PHP_SNMP/include
+      test -d $PHP_SNMP/include/ucd-snmp && SNMP_INCDIR=$PHP_SNMP/include/ucd-snmp
+      SNMP_LIBDIR=$PHP_SNMP/lib
+    fi
 
-fi
+    if test -z "$SNMP_INCDIR"; then
+      { echo "configure: error: snmp.h not found. Check your SNMP installation." 1>&2; exit 1; }
+    elif test -z "$SNMP_LIBDIR"; then
+      { echo "configure: error: libsnmp not found. Check your SNMP installation." 1>&2; exit 1; }
+    fi
 
-if test "$PHP_READLINE" != "no" || test "$PHP_LIBEDIT" != "no"; then
-  for ac_func in rl_completion_matches
+    old_CPPFLAGS=$CPPFLAGS
+    CPPFLAGS=-I$SNMP_INCDIR
+    for ac_hdr in default_store.h
 do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:80042: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:85647: checking for $ac_hdr" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 80047 "configure"
+#line 85652 "configure"
 #include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
+#include <$ac_hdr>
 EOF
-if { (eval echo configure:80070: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:85657: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
   rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
+  eval "ac_cv_header_$ac_safe=yes"
 else
+  echo "$ac_err" >&5
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
+  eval "ac_cv_header_$ac_safe=no"
 fi
 rm -f conftest*
 fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
   cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
+#define $ac_tr_hdr 1
 EOF
  
 else
@@ -80090,379 +85679,510 @@ else
 fi
 done
 
-  
-  ext_builddir=ext/readline
-  ext_srcdir=$abs_srcdir/ext/readline
-
-  ac_extra=
+    if test "$ac_cv_header_default_store_h" = "yes"; then
+      echo $ac_n "checking for OpenSSL support in SNMP libraries""... $ac_c" 1>&6
+echo "configure:85685: checking for OpenSSL support in SNMP libraries" >&5
+      cat > conftest.$ac_ext <<EOF
+#line 85687 "configure"
+#include "confdefs.h"
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" != "cli"; then
-    PHP_READLINE_SHARED=no
-    
-  
-  case ext/readline in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+#include <ucd-snmp-config.h>
+#if USE_OPENSSL
+        yes
+#endif
+      
+EOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "yes" >/dev/null 2>&1; then
+  rm -rf conftest*
   
+        SNMP_SSL=yes
+      
+else
+  rm -rf conftest*
   
+        SNMP_SSL=no
+      
+fi
+rm -f conftest*
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in readline.c; do
+    fi
+    CPPFLAGS=$old_CPPFLAGS
+    echo "$ac_t""$SNMP_SSL" 1>&6
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+    if test "$SNMP_SSL" = "yes"; then
+      if test "$PHP_OPENSSL_DIR" != "no"; then
+        PHP_OPENSSL=$PHP_OPENSSL_DIR
+      fi
       
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+      if test "$PHP_OPENSSL" = "no"; then
+        { echo "configure: error: The UCD-SNMP in this system is built with SSL support. 
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+        Add --with-openssl-dir=DIR to your configure line." 1>&2; exit 1; }
+      else
+        
+  found_openssl=no
+  unset OPENSSL_INCDIR
+  unset OPENSSL_LIBDIR
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
+    test -z "$PHP_OPENSSL" && PHP_OPENSSL=no
+  test -z "$PHP_IMAP_SSL" && PHP_IMAP_SSL=no
+
+    if test "$PHP_OPENSSL" != "no"; then
+    PHP_OPENSSL_DIR=$PHP_OPENSSL
+  elif test "$PHP_IMAP_SSL" != "no"; then
+    PHP_OPENSSL_DIR=$PHP_IMAP_SSL
+  fi
+
+    if test -z "$PKG_CONFIG"; then
+    # Extract the first word of "pkg-config", so it can be a program name with args.
+set dummy pkg-config; ac_word=$2
+echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
+echo "configure:85742: checking for $ac_word" >&5
+if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  case "$PKG_CONFIG" in
+  /*)
+  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
+  ;;
+  ?:/*)			 
+  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
+  ;;
+  *)
+  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
+  ac_dummy="$PATH"
+  for ac_dir in $ac_dummy; do 
+    test -z "$ac_dir" && ac_dir=.
+    if test -f $ac_dir/$ac_word; then
+      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
+      break
+    fi
   done
+  IFS="$ac_save_ifs"
+  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
+  ;;
+esac
+fi
+PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
+if test -n "$PKG_CONFIG"; then
+  echo "$ac_t""$PKG_CONFIG" 1>&6
+else
+  echo "$ac_t""no" 1>&6
+fi
 
+  fi
 
-    EXT_STATIC="$EXT_STATIC readline"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC readline"
+    if test "$PHP_OPENSSL_DIR" = "yes" && test -x "$PKG_CONFIG" && $PKG_CONFIG --exists openssl; then
+    if $PKG_CONFIG --atleast-version=0.9.6 openssl; then
+      found_openssl=yes
+      OPENSSL_LIBS=`$PKG_CONFIG --libs openssl`
+      OPENSSL_INCS=`$PKG_CONFIG --cflags-only-I openssl`
+      OPENSSL_INCDIR=`$PKG_CONFIG --variable=includedir openssl`
+    else
+      { echo "configure: error: OpenSSL version 0.9.6 or greater required." 1>&2; exit 1; }
     fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_READLINE_SHARED=yes
+
+    if test -n "$OPENSSL_LIBS" && test -n "$OPENSSL_INCS"; then
       
-  case ext/readline in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+  for ac_i in $OPENSSL_LIBS; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -pthread"
+      else
+        
   
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
-
-
-  old_IFS=$IFS
-  for ac_src in readline.c; do
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -l$ac_ii" 
+    else
       
-      shared_objects_readline="$shared_objects_readline $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpreadline.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) $(PHPREADLINE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpreadline.so '$ext_builddir'/phpreadline.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPREADLINE, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) $(PHPREADLINE_SHARED_LIBADD)'
-      ;;
+    fi
+   ;;
   esac
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpreadline.$suffix"
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpreadline.$suffix"
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_readline"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpreadline.$suffix: $ext_builddir/phpreadline.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpreadline.$suffix \$(phplibdir)
 
-$ext_builddir/phpreadline.$suffix: \$(shared_objects_readline) \$(PHPREADLINE_SHARED_DEPENDENCIES)
-	$link_cmd
+    
+      if test "$ext_shared" = "yes"; then
+        SNMP_SHARED_LIBADD="-L$ai_p $SNMP_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && SNMP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SNMP_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-EOF
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
+      fi
+    
+  fi
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/readline.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) $(READLINE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/readline.so '$ext_builddir'/readline.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(READLINE, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) $(READLINE_SHARED_LIBADD)'
-      ;;
-  esac
+    ;;
+    esac
+  done
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/readline.$suffix"
+      
+  for ac_i in $OPENSSL_INCS; do
+    case $ac_i in
+    -I*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/include"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/readline.$suffix"
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_readline"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/readline.$suffix: $ext_builddir/readline.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/readline.$suffix \$(phplibdir)
 
-$ext_builddir/readline.$suffix: \$(shared_objects_readline) \$(READLINE_SHARED_DEPENDENCIES)
-	$link_cmd
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-EOF
+  fi
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_READLINE 1
-EOF
+    ;;
+    esac
+  done
 
     fi
   fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" = "cli"; then
-    PHP_READLINE_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
-  
-  case ext/readline in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
+    if test "$found_openssl" = "no"; then
   
+    if test "$PHP_OPENSSL_DIR" = "yes"; then
+      PHP_OPENSSL_DIR="/usr/local/ssl /usr/local /usr /usr/local/openssl"
+    fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+    for i in $PHP_OPENSSL_DIR; do
+      if test -r $i/include/openssl/evp.h; then
+        OPENSSL_INCDIR=$i/include
+      fi
+      if test -r $i/$PHP_LIBDIR/libssl.a -o -r $i/$PHP_LIBDIR/libssl.$SHLIB_SUFFIX_NAME; then
+        OPENSSL_LIBDIR=$i/$PHP_LIBDIR
+      fi
+      test -n "$OPENSSL_INCDIR" && test -n "$OPENSSL_LIBDIR" && break
+    done
 
+    if test -z "$OPENSSL_INCDIR"; then
+      { echo "configure: error: Cannot find OpenSSL's <evp.h>" 1>&2; exit 1; }
+    fi
 
-  old_IFS=$IFS
-  for ac_src in readline.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+    if test -z "$OPENSSL_LIBDIR"; then
+      { echo "configure: error: Cannot find OpenSSL's libraries" 1>&2; exit 1; }
+    fi
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+    old_CPPFLAGS=$CPPFLAGS
+    CPPFLAGS=-I$OPENSSL_INCDIR
+    echo $ac_n "checking for OpenSSL version""... $ac_c" 1>&6
+echo "configure:85947: checking for OpenSSL version" >&5
+    cat > conftest.$ac_ext <<EOF
+#line 85949 "configure"
+#include "confdefs.h"
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+#include <openssl/opensslv.h>
+#if OPENSSL_VERSION_NUMBER >= 0x0090600fL
+  yes
+#endif
+    
 EOF
-  done
-
-
-        EXT_STATIC="$EXT_STATIC readline"
-        ;;
-      *)
-        
-  
-  case ext/readline in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "yes" >/dev/null 2>&1; then
+  rm -rf conftest*
   
+      echo "$ac_t"">= 0.9.6" 1>&6
+    
+else
+  rm -rf conftest*
   
+      { echo "configure: error: OpenSSL version 0.9.6 or greater required." 1>&2; exit 1; }
+    
+fi
+rm -f conftest*
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+    CPPFLAGS=$old_CPPFLAGS
 
+    
+  if test "$OPENSSL_INCDIR" != "/usr/include"; then
+    
+  if test -z "$OPENSSL_INCDIR" || echo "$OPENSSL_INCDIR" | grep '^/' >/dev/null ; then
+    ai_p=$OPENSSL_INCDIR
+  else
+    
+    ep_dir="`echo $OPENSSL_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$OPENSSL_INCDIR\"`"
+  fi
 
-  old_IFS=$IFS
-  for ac_src in readline.c; do
+    
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC readline"
   fi
+
   
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+      -L$OPENSSL_LIBDIR
+    "
   
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  save_ext_shared=$ext_shared
+  ext_shared=yes
   
-
-
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=readline
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
-
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
   fi
 
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST READLINE_SHARED_LIBADD"
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-fi
 
+    fi
+   ;;
+  esac
 
 
-php_with_recode=no
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
 
-echo $ac_n "checking for recode support""... $ac_c" 1>&6
-echo "configure:80396: checking for recode support" >&5
-# Check whether --with-recode or --without-recode was given.
-if test "${with_recode+set}" = set; then
-  withval="$with_recode"
-  PHP_RECODE=$withval
-else
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
-  PHP_RECODE=no
-  test "$PHP_ENABLE_ALL" && PHP_RECODE=$PHP_ENABLE_ALL
-
-fi
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
 
+      fi
+    
+  fi
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_RECODE in
-shared,*)
-  PHP_RECODE=`echo "$PHP_RECODE"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_RECODE=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
+    ;;
+    esac
+  done
 
+  echo $ac_n "checking for CRYPTO_free in -lcrypto""... $ac_c" 1>&6
+echo "configure:86104: checking for CRYPTO_free in -lcrypto" >&5
+ac_lib_var=`echo crypto'_'CRYPTO_free | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lcrypto  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 86112 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char CRYPTO_free();
 
+int main() {
+CRYPTO_free()
+; return 0; }
+EOF
+if { (eval echo configure:86123: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-echo "$ac_t""$ext_output" 1>&6
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+      
+  
+  case crypto in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SNMP_SHARED_LIBADD="-lcrypto $SNMP_SHARED_LIBADD" 
+    else
+      
+  
+  case crypto in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lcrypto $LIBS" 
+   ;;
+  esac
 
 
+    fi
+   ;;
+  esac
 
 
-if test "$PHP_RECODE" != "no"; then
-  RECODE_LIST="$PHP_RECODE /usr/local /usr /opt"
+    
+  
+else
+  echo "$ac_t""no" 1>&6
 
-  for i in $RECODE_LIST; do
-    if test -f $i/include/recode.h; then
-      RECODE_DIR=$i
-      RECODE_INC=include
-      RECODE_LIB=$PHP_LIBDIR
-    fi
-    if test -f $i/include/recode/recode.h; then
-      RECODE_DIR=$i
-      RECODE_INC=include/recode
-      RECODE_LIB=$PHP_LIBDIR/recode
-    fi
-    if test -f $i/recode/include/recode.h; then
-      RECODE_DIR=$i/recode
-      RECODE_INC=include
-      RECODE_LIB=$PHP_LIBDIR
-    fi
-    test -n "$RECODE_DIR" && break
-  done
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_crypto_CRYPTO_free
+    
+      { echo "configure: error: libcrypto not found!" 1>&2; exit 1; }
+    
+  
+fi
 
-  if test -z "$RECODE_DIR"; then
-    { echo "configure: error: Can not find recode.h anywhere under $RECODE_LIST." 1>&2; exit 1; }
-  fi
 
-  
+    old_LIBS=$LIBS
+    LIBS="$LIBS -lcrypto"
+    
   save_old_LDFLAGS=$LDFLAGS
   ac_stuff="
-    -L$RECODE_DIR/$RECODE_LIB
-  "
+      -L$OPENSSL_LIBDIR
+    "
   
   save_ext_shared=$ext_shared
   ext_shared=yes
@@ -80555,27 +86275,27 @@ if test "$PHP_RECODE" != "no"; then
     esac
   done
 
-  echo $ac_n "checking for recode_format_table in -lrecode""... $ac_c" 1>&6
-echo "configure:80560: checking for recode_format_table in -lrecode" >&5
-ac_lib_var=`echo recode'_'recode_format_table | sed 'y%./+-%__p_%'`
+  echo $ac_n "checking for SSL_CTX_set_ssl_version in -lssl""... $ac_c" 1>&6
+echo "configure:86280: checking for SSL_CTX_set_ssl_version in -lssl" >&5
+ac_lib_var=`echo ssl'_'SSL_CTX_set_ssl_version | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lrecode  $LIBS"
+LIBS="-lssl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 80568 "configure"
+#line 86288 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char recode_format_table();
+char SSL_CTX_set_ssl_version();
 
 int main() {
-recode_format_table()
+SSL_CTX_set_ssl_version()
 ; return 0; }
 EOF
-if { (eval echo configure:80579: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:86299: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -80594,28 +86314,214 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
     
+      found_openssl=yes
+    
+  
+else
+  echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_ssl_SSL_CTX_set_ssl_version
+    
+      { echo "configure: error: libssl not found!" 1>&2; exit 1; }
+    
+  
+fi
+
+    LIBS=$old_LIBS
+    
+  
+  case ssl in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SNMP_SHARED_LIBADD="-lssl $SNMP_SHARED_LIBADD" 
+    else
+      
+  
+  case ssl in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lssl $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+
+    
+  if test "$OPENSSL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$OPENSSL_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$OPENSSL_LIBDIR" || echo "$OPENSSL_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$OPENSSL_LIBDIR
+  else
+    
+    ep_dir="`echo $OPENSSL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$OPENSSL_LIBDIR\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        SNMP_SHARED_LIBADD="-L$ai_p $SNMP_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && SNMP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SNMP_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+  fi
+
+  if test "$found_openssl" = "yes"; then
+    OPENSSL_INCDIR_OPT=-I$OPENSSL_INCDIR
+  
+
+:
+else 
+          { echo "configure: error: SNMP: OpenSSL check failed. Please check config.log for more information." 1>&2; exit 1; }
+        
+  fi
+
+      fi
+    fi
+
+    echo $ac_n "checking for kstat_read in -lkstat""... $ac_c" 1>&6
+echo "configure:86412: checking for kstat_read in -lkstat" >&5
+ac_lib_var=`echo kstat'_'kstat_read | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lkstat  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 86420 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char kstat_read();
+
+int main() {
+kstat_read()
+; return 0; }
+EOF
+if { (eval echo configure:86431: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+   
+  
+  case kstat in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SNMP_SHARED_LIBADD="-lkstat $SNMP_SHARED_LIBADD" 
+    else
+      
+  
+  case kstat in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lkstat $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+    
+  if test "$SNMP_INCDIR" != "/usr/include"; then
+    
+  if test -z "$SNMP_INCDIR" || echo "$SNMP_INCDIR" | grep '^/' >/dev/null ; then
+    ai_p=$SNMP_INCDIR
+  else
+    
+    ep_dir="`echo $SNMP_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$SNMP_INCDIR\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
     
 
   if test "$ext_shared" = "yes"; then
-    RECODE_SHARED_LIBADD="-lrecode $RECODE_SHARED_LIBADD"
-    if test -n "$RECODE_DIR/$RECODE_LIB"; then
+    SNMP_SHARED_LIBADD="-lsnmp $SNMP_SHARED_LIBADD"
+    if test -n "$SNMP_LIBDIR"; then
       
-  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/$PHP_LIBDIR" && test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
+  if test "$SNMP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SNMP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
-    ai_p=$RECODE_DIR/$RECODE_LIB
+  if test -z "$SNMP_LIBDIR" || echo "$SNMP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$SNMP_LIBDIR
   else
     
-    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $SNMP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
+    ai_p="$ep_realdir/`basename \"$SNMP_LIBDIR\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        RECODE_SHARED_LIBADD="-L$ai_p $RECODE_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && RECODE_SHARED_LIBADD="$ld_runpath_switch$ai_p $RECODE_SHARED_LIBADD"
+        SNMP_SHARED_LIBADD="-L$ai_p $SNMP_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && SNMP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SNMP_SHARED_LIBADD"
       else
         
   
@@ -80641,18 +86547,18 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
   else
     
 
-  if test -n "$RECODE_DIR/$RECODE_LIB"; then
+  if test -n "$SNMP_LIBDIR"; then
     
-  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/$PHP_LIBDIR" && test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
+  if test "$SNMP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SNMP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
-    ai_p=$RECODE_DIR/$RECODE_LIB
+  if test -z "$SNMP_LIBDIR" || echo "$SNMP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$SNMP_LIBDIR
   else
     
-    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $SNMP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
+    ai_p="$ep_realdir/`basename \"$SNMP_LIBDIR\"`"
   fi
 
     
@@ -80678,10 +86584,10 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
   fi
   
   
-  case recode in
+  case snmp in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lrecode $LIBS" 
+      LIBS="-lsnmp $LIBS" 
    ;;
   esac
 
@@ -80691,56 +86597,81 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
   fi
 
 
-  
-  
-else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_recode_recode_format_table
-    
-    old_LDFLAGS=$LDFLAGS
-    old_LIBS=$LIBS
-    LDFLAGS="$LDFLAGS -L$RECODE_DIR/$RECODE_LIB"
-    LIBS="$LIBS -lrecode"
-    cat > conftest.$ac_ext <<EOF
-#line 80709 "configure"
-#include "confdefs.h"
+    SNMP_LIBNAME=snmp
+  fi
 
-char *program_name;
     
-int main() {
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    $SNMP_SHARED_LIBADD
+  "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-recode_format_table();
-    
-; return 0; }
-EOF
-if { (eval echo configure:80720: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
       
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-  if test "$ext_shared" = "yes"; then
-    RECODE_SHARED_LIBADD="-lrecode $RECODE_SHARED_LIBADD"
-    if test -n "$RECODE_DIR/$RECODE_LIB"; then
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
       
-  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/$PHP_LIBDIR" && test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
     
-  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
-    ai_p=$RECODE_DIR/$RECODE_LIB
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
     
-    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        RECODE_SHARED_LIBADD="-L$ai_p $RECODE_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && RECODE_SHARED_LIBADD="$ld_runpath_switch$ai_p $RECODE_SHARED_LIBADD"
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
       else
         
   
@@ -80762,26 +86693,140 @@ if { (eval echo configure:80720: \"$ac_l
     
   fi
 
-    fi
-  else
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for snmp_parse_oid in -l$SNMP_LIBNAME""... $ac_c" 1>&6
+echo "configure:86702: checking for snmp_parse_oid in -l$SNMP_LIBNAME" >&5
+ac_lib_var=`echo $SNMP_LIBNAME'_'snmp_parse_oid | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-l$SNMP_LIBNAME  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 86710 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char snmp_parse_oid();
+
+int main() {
+snmp_parse_oid()
+; return 0; }
+EOF
+if { (eval echo configure:86721: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
     
+    cat >> confdefs.h <<\EOF
+#define HAVE_SNMP_PARSE_OID 1
+EOF
 
-  if test -n "$RECODE_DIR/$RECODE_LIB"; then
+  
+  
+else
+  echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_$SNMP_LIBNAME_snmp_parse_oid
     
-  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/$PHP_LIBDIR" && test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
+  
+fi
+
+
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    $SNMP_SHARED_LIBADD
+  "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
     
-  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
-    ai_p=$RECODE_DIR/$RECODE_LIB
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
     
-    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
 
     
-      
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
@@ -80797,138 +86842,93 @@ if { (eval echo configure:80720: \"$ac_l
   fi
 
 
+      fi
     
   fi
 
-  fi
-  
-  
-  case recode in
-  c|c_r|pthread*) ;;
-  *) 
-      DLIBS="-lrecode $DLIBS" 
-   ;;
-  esac
-
-
-
-
-  fi
+    ;;
+    esac
+  done
 
+  echo $ac_n "checking for init_snmp in -l$SNMP_LIBNAME""... $ac_c" 1>&6
+echo "configure:86855: checking for init_snmp in -l$SNMP_LIBNAME" >&5
+ac_lib_var=`echo $SNMP_LIBNAME'_'init_snmp | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-l$SNMP_LIBNAME  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 86863 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char init_snmp();
 
-      cat >> confdefs.h <<\EOF
-#define HAVE_BROKEN_RECODE 1
+int main() {
+init_snmp()
+; return 0; }
 EOF
-
-    
+if { (eval echo configure:86874: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  
-      { echo "configure: error: I cannot link librecode (-L$RECODE_DIR/$RECODE_LIB -lrecode). Is it installed?" 1>&2; exit 1; }
-    
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
 rm -f conftest*
-    LIBS=$old_LIBS
-    LDFLAGS=$old_LDFLAGS
-  
-  
-fi
-
+LIBS="$ac_save_LIBS"
 
-  cat >> confdefs.h <<\EOF
-#define HAVE_LIBRECODE 1
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+    cat >> confdefs.h <<\EOF
+#define HAVE_SNMP 1
 EOF
 
   
-  if test "$RECODE_DIR/$RECODE_INC" != "/usr/include"; then
-    
-  if test -z "$RECODE_DIR/$RECODE_INC" || echo "$RECODE_DIR/$RECODE_INC" | grep '^/' >/dev/null ; then
-    ai_p=$RECODE_DIR/$RECODE_INC
-  else
-    
-    ep_dir="`echo $RECODE_DIR/$RECODE_INC|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_INC\"`"
-  fi
+  
+else
+  echo "$ac_t""no" 1>&6
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_$SNMP_LIBNAME_init_snmp
     
+    { echo "configure: error: SNMP sanity check failed. Please check config.log for more information." 1>&2; exit 1; }
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
+fi
 
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST RECODE_SHARED_LIBADD"
 
-  for ac_hdr in stdbool.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:80883: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 80888 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:80893: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
+  if test "$PHP_UCD_SNMP_HACK" = "yes" ; then
+    cat >> confdefs.h <<\EOF
+#define UCD_SNMP_HACK 1
 EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
 
+  fi
   
-  ext_builddir=ext/recode
-  ext_srcdir=$abs_srcdir/ext/recode
+  
+  ext_builddir=ext/snmp
+  ext_srcdir=$abs_srcdir/ext/snmp
 
   ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_RECODE_SHARED=no
+    PHP_SNMP_SHARED=no
     
   
-  case ext/recode in
+  case ext/snmp in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -80943,7 +86943,7 @@ done
 
 
   old_IFS=$IFS
-  for ac_src in recode.c; do
+  for ac_src in snmp.c; do
   
       IFS=.
       set $ac_src
@@ -80966,18 +86966,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC recode"
+    EXT_STATIC="$EXT_STATIC snmp"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC recode"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC snmp"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_RECODE_SHARED=yes
+      PHP_SNMP_SHARED=yes
       
-  case ext/recode in
+  case ext/snmp in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -80992,14 +86992,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in recode.c; do
+  for ac_src in snmp.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_recode="$shared_objects_recode $ac_bdir$ac_obj.lo"
+      shared_objects_snmp="$shared_objects_snmp $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -81022,31 +87022,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phprecode.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) $(PHPRECODE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phprecode.so '$ext_builddir'/phprecode.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsnmp.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) $(PHPSNMP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsnmp.so '$ext_builddir'/phpsnmp.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPRECODE, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSNMP, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) $(PHPRECODE_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) $(PHPSNMP_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phprecode.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsnmp.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phprecode.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsnmp.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_recode"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_snmp"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phprecode.$suffix: $ext_builddir/phprecode.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phprecode.$suffix \$(phplibdir)
+\$(phplibdir)/phpsnmp.$suffix: $ext_builddir/phpsnmp.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsnmp.$suffix \$(phplibdir)
 
-$ext_builddir/phprecode.$suffix: \$(shared_objects_recode) \$(PHPRECODE_SHARED_DEPENDENCIES)
+$ext_builddir/phpsnmp.$suffix: \$(shared_objects_snmp) \$(PHPSNMP_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -81059,31 +87059,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/recode.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) $(RECODE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/recode.so '$ext_builddir'/recode.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/snmp.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) $(SNMP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/snmp.so '$ext_builddir'/snmp.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(RECODE, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SNMP, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) $(RECODE_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) $(SNMP_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/recode.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/snmp.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/recode.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/snmp.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_recode"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_snmp"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/recode.$suffix: $ext_builddir/recode.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/recode.$suffix \$(phplibdir)
+\$(phplibdir)/snmp.$suffix: $ext_builddir/snmp.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/snmp.$suffix \$(phplibdir)
 
-$ext_builddir/recode.$suffix: \$(shared_objects_recode) \$(RECODE_SHARED_DEPENDENCIES)
+$ext_builddir/snmp.$suffix: \$(shared_objects_snmp) \$(SNMP_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -81091,22 +87091,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_RECODE 1
+#define COMPILE_DL_SNMP 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_RECODE_SHARED=no
+    PHP_SNMP_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/recode in
+  case ext/snmp in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -81121,7 +87121,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in recode.c; do
+  for ac_src in snmp.c; do
   
       IFS=.
       set $ac_src
@@ -81144,15 +87144,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC recode"
+        EXT_STATIC="$EXT_STATIC snmp"
         ;;
       *)
         
   
-  case ext/recode in
+  case ext/snmp in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -81167,7 +87167,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in recode.c; do
+  for ac_src in snmp.c; do
   
       IFS=.
       set $ac_src
@@ -81190,44 +87190,344 @@ EOF
   done
 
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC recode"
-  fi
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC snmp"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=snmp
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST SNMP_SHARED_LIBADD"
+
+fi
+
+
+
+php_enable_soap=no
+
+echo $ac_n "checking whether to enable SOAP support""... $ac_c" 1>&6
+echo "configure:87221: checking whether to enable SOAP support" >&5
+# Check whether --enable-soap or --disable-soap was given.
+if test "${enable_soap+set}" = set; then
+  enableval="$enable_soap"
+  PHP_SOAP=$enableval
+else
+  
+  PHP_SOAP=no
+  test "$PHP_ENABLE_ALL" && PHP_SOAP=$PHP_ENABLE_ALL
+
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_SOAP in
+shared,*)
+  PHP_SOAP=`echo "$PHP_SOAP"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_SOAP=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test -z "$PHP_LIBXML_DIR"; then
+  
+php_with_libxml_dir=no
+
+echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
+echo "configure:87266: checking libxml2 install dir" >&5
+# Check whether --with-libxml-dir or --without-libxml-dir was given.
+if test "${with_libxml_dir+set}" = set; then
+  withval="$with_libxml_dir"
+  PHP_LIBXML_DIR=$withval
+else
+  
+  PHP_LIBXML_DIR=no
+  
+
+fi
+
+
+ext_output=$PHP_LIBXML_DIR
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+fi
+
+if test "$PHP_SOAP" != "no"; then
+
+  if test "$PHP_LIBXML" = "no"; then   
+    { echo "configure: error: SOAP extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }                
+  fi
+
+  
+echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
+echo "configure:87294: checking for xml2-config path" >&5
+if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+  for i in $PHP_LIBXML_DIR /usr/local /usr; do
+    if test -x "$i/bin/xml2-config"; then
+      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
+      break
+    fi
+  done
+
+fi
+
+echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6
+
+  if test -x "$ac_cv_php_xml2_config_path"; then
+    XML2_CONFIG="$ac_cv_php_xml2_config_path"
+    libxml_full_version=`$XML2_CONFIG --version`
+    ac_IFS=$IFS
+    IFS="."
+    set $libxml_full_version
+    IFS=$ac_IFS
+    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
+    if test "$LIBXML_VERSION" -ge "2006011"; then
+      LIBXML_LIBS=`$XML2_CONFIG --libs`
+      LIBXML_INCS=`$XML2_CONFIG --cflags`
+      
+  for ac_i in $LIBXML_LIBS; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        SOAP_SHARED_LIBADD="$SOAP_SHARED_LIBADD -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SOAP_SHARED_LIBADD="$SOAP_SHARED_LIBADD -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        SOAP_SHARED_LIBADD="-L$ai_p $SOAP_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && SOAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SOAP_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+      
+  for ac_i in $LIBXML_INCS; do
+    case $ac_i in
+    -I*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/include"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+    ;;
+    esac
+  done
+
+
+            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
+echo "configure:87452: checking whether libxml build works" >&5
+if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+        
+  old_LIBS=$LIBS
+  LIBS="
+          $SOAP_SHARED_LIBADD
+         $LIBS"
+  if test "$cross_compiling" = yes; then
+  
+    LIBS=$old_LIBS
+  
+else
+  cat > conftest.$ac_ext <<EOF
+#line 87468 "configure"
+#include "confdefs.h"
+
+    
+    char xmlInitParser();
+    int main() {
+      xmlInitParser();
+      return 0;
+    }
   
+EOF
+if { (eval echo configure:87479: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
   
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
+    LIBS=$old_LIBS
+    
+          php_cv_libxml_build_works=yes
+        
   
-
-
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=recode
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  
+    LIBS=$old_LIBS
     
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+          echo "$ac_t""no" 1>&6
+          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
+        
+  
+fi
+rm -fr conftest*
+fi
 
-  fi
 
+      
 fi
 
-
-cat >> confdefs.h <<\EOF
-#define HAVE_REFLECTION 1
+echo "$ac_t""$php_cv_libxml_build_works" 1>&6
+      if test "$php_cv_libxml_build_works" = "yes"; then
+        cat >> confdefs.h <<\EOF
+#define HAVE_LIBXML 1
 EOF
 
+      fi
+      
+    cat >> confdefs.h <<\EOF
+#define HAVE_SOAP 1
+EOF
 
-  ext_builddir=ext/reflection
-  ext_srcdir=$abs_srcdir/ext/reflection
+    
+  ext_builddir=ext/soap
+  ext_srcdir=$abs_srcdir/ext/soap
 
   ac_extra=
 
-  if test "no" != "shared" && test "no" != "yes" && test "" != "cli"; then
-    PHP_REFLECTION_SHARED=no
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_SOAP_SHARED=no
     
   
-  case ext/reflection in
+  case ext/soap in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/reflection"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/reflection/"; ac_bdir="ext/reflection/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/soap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/soap/"; ac_bdir="ext/soap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -81242,7 +87542,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_reflection.c; do
+  for ac_src in soap.c php_encoding.c php_http.c php_packet_soap.c php_schema.c php_sdl.c php_xml.c; do
   
       IFS=.
       set $ac_src
@@ -81265,18 +87565,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC reflection"
-    if test "no" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC reflection"
+    EXT_STATIC="$EXT_STATIC soap"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC soap"
     fi
   else
-    if test "no" = "shared" || test "no" = "yes"; then
-      PHP_REFLECTION_SHARED=yes
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_SOAP_SHARED=yes
       
-  case ext/reflection in
+  case ext/soap in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/reflection"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/reflection/"; ac_bdir="ext/reflection/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/soap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/soap/"; ac_bdir="ext/soap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -81291,14 +87591,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_reflection.c; do
+  for ac_src in soap.c php_encoding.c php_http.c php_packet_soap.c php_schema.c php_sdl.c php_xml.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_reflection="$shared_objects_reflection $ac_bdir$ac_obj.lo"
+      shared_objects_soap="$shared_objects_soap $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -81321,31 +87621,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpreflection.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) $(PHPREFLECTION_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpreflection.so '$ext_builddir'/phpreflection.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsoap.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) $(PHPSOAP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsoap.so '$ext_builddir'/phpsoap.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPREFLECTION, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSOAP, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) $(PHPREFLECTION_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) $(PHPSOAP_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpreflection.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsoap.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpreflection.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsoap.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_reflection"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_soap"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpreflection.$suffix: $ext_builddir/phpreflection.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpreflection.$suffix \$(phplibdir)
+\$(phplibdir)/phpsoap.$suffix: $ext_builddir/phpsoap.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsoap.$suffix \$(phplibdir)
 
-$ext_builddir/phpreflection.$suffix: \$(shared_objects_reflection) \$(PHPREFLECTION_SHARED_DEPENDENCIES)
+$ext_builddir/phpsoap.$suffix: \$(shared_objects_soap) \$(PHPSOAP_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -81358,31 +87658,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/reflection.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) $(REFLECTION_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/reflection.so '$ext_builddir'/reflection.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/soap.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) $(SOAP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/soap.so '$ext_builddir'/soap.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(REFLECTION, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SOAP, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) $(REFLECTION_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) $(SOAP_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/reflection.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/soap.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/reflection.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/soap.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_reflection"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_soap"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/reflection.$suffix: $ext_builddir/reflection.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/reflection.$suffix \$(phplibdir)
+\$(phplibdir)/soap.$suffix: $ext_builddir/soap.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/soap.$suffix \$(phplibdir)
 
-$ext_builddir/reflection.$suffix: \$(shared_objects_reflection) \$(REFLECTION_SHARED_DEPENDENCIES)
+$ext_builddir/soap.$suffix: \$(shared_objects_soap) \$(SOAP_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -81390,22 +87690,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_REFLECTION 1
+#define COMPILE_DL_SOAP 1
 EOF
 
     fi
   fi
 
-  if test "no" != "shared" && test "no" != "yes" && test "" = "cli"; then
-    PHP_REFLECTION_SHARED=no
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_SOAP_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/reflection in
+  case ext/soap in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/reflection"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/reflection/"; ac_bdir="ext/reflection/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/soap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/soap/"; ac_bdir="ext/soap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -81420,7 +87720,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_reflection.c; do
+  for ac_src in soap.c php_encoding.c php_http.c php_packet_soap.c php_schema.c php_sdl.c php_xml.c; do
   
       IFS=.
       set $ac_src
@@ -81443,15 +87743,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC reflection"
+        EXT_STATIC="$EXT_STATIC soap"
         ;;
       *)
         
   
-  case ext/reflection in
+  case ext/soap in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/reflection"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/reflection/"; ac_bdir="ext/reflection/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/soap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/soap/"; ac_bdir="ext/soap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -81466,7 +87766,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_reflection.c; do
+  for ac_src in soap.c php_encoding.c php_http.c php_packet_soap.c php_schema.c php_sdl.c php_xml.c; do
   
       IFS=.
       set $ac_src
@@ -81491,7 +87791,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC reflection"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC soap"
   fi
   
   
@@ -81500,27 +87800,40 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=reflection
+    PHP_PECL_EXTENSION=soap
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST SOAP_SHARED_LIBADD"
+
+  
+    else
+      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
+    fi
+else 
+    { echo "configure: error: xml2-config not found. Please check your libxml2 installation." 1>&2; exit 1; }
+  
+  fi
+
+fi
 
 
 
-php_enable_session=yes
+php_enable_sockets=no
 
-echo $ac_n "checking whether to enable PHP sessions""... $ac_c" 1>&6
-echo "configure:81516: checking whether to enable PHP sessions" >&5
-# Check whether --enable-session or --disable-session was given.
-if test "${enable_session+set}" = set; then
-  enableval="$enable_session"
-  PHP_SESSION=$enableval
+echo $ac_n "checking whether to enable sockets support""... $ac_c" 1>&6
+echo "configure:87829: checking whether to enable sockets support" >&5
+# Check whether --enable-sockets or --disable-sockets was given.
+if test "${enable_sockets+set}" = set; then
+  enableval="$enable_sockets"
+  PHP_SOCKETS=$enableval
 else
   
-  PHP_SESSION=yes
-  test "$PHP_ENABLE_ALL" && PHP_SESSION=$PHP_ENABLE_ALL
+  PHP_SOCKETS=no
+  test "$PHP_ENABLE_ALL" && PHP_SOCKETS=$PHP_ENABLE_ALL
 
 fi
 
@@ -81528,12 +87841,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_SESSION in
+case $PHP_SOCKETS in
 shared,*)
-  PHP_SESSION=`echo "$PHP_SESSION"|$SED 's/^shared,//'`
+  PHP_SOCKETS=`echo "$PHP_SOCKETS"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_SESSION=yes
+  PHP_SOCKETS=yes
   ;;
 no)
   ext_output=no
@@ -81552,286 +87865,545 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
-
-php_with_mm=no
-
-echo $ac_n "checking for mm support""... $ac_c" 1>&6
-echo "configure:81560: checking for mm support" >&5
-# Check whether --with-mm or --without-mm was given.
-if test "${with_mm+set}" = set; then
-  withval="$with_mm"
-  PHP_MM=$withval
+if test "$PHP_SOCKETS" != "no"; then
+    echo $ac_n "checking for struct cmsghdr""... $ac_c" 1>&6
+echo "configure:87871: checking for struct cmsghdr" >&5
+if eval "test \"`echo '$''{'ac_cv_cmsghdr'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
   
-  PHP_MM=no
-  
+    cat > conftest.$ac_ext <<EOF
+#line 87877 "configure"
+#include "confdefs.h"
 
+#include <sys/types.h>
+#include <sys/socket.h>
+int main() {
+struct cmsghdr s; s
+; return 0; }
+EOF
+if { (eval echo configure:87886: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
+  ac_cv_cmsghdr=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  ac_cv_cmsghdr=no
+fi
+rm -f conftest*
+  
 fi
 
+echo "$ac_t""$ac_cv_cmsghdr" 1>&6
 
-ext_output=$PHP_MM
-echo "$ac_t""$ext_output" 1>&6
+  if test "$ac_cv_cmsghdr" = yes; then
+    cat >> confdefs.h <<\EOF
+#define HAVE_CMSGHDR 1
+EOF
+
+  fi 
 
+  for ac_func in hstrerror socketpair
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:87911: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 87916 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
 
+int main() {
 
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
 
-if test "$PHP_SESSION" != "no"; then
-  
-  echo $ac_n "checking whether pwrite works""... $ac_c" 1>&6
-echo "configure:81582: checking whether pwrite works" >&5
-if eval "test \"`echo '$''{'ac_cv_pwrite'+set}'`\" = set"; then
+; return 0; }
+EOF
+if { (eval echo configure:87939: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=no"
+fi
+rm -f conftest*
+fi
+
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
+  for ac_hdr in netdb.h netinet/tcp.h sys/un.h errno.h
+do
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:87967: checking for $ac_hdr" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  
-    
-  if test "$cross_compiling" = yes; then
-  
-    ac_cv_pwrite=no
-  
+  cat > conftest.$ac_ext <<EOF
+#line 87972 "configure"
+#include "confdefs.h"
+#include <$ac_hdr>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:87977: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_hdr 1
+EOF
+ 
 else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
   cat > conftest.$ac_ext <<EOF
-#line 81594 "configure"
+#line 88004 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
-#include <sys/stat.h>
-#include <fcntl.h>
-#include <unistd.h>
-#include <errno.h>
+#include <sys/socket.h>
+  
+int main() {
+static struct msghdr tp; int n = (int) tp.msg_flags; return n
+; return 0; }
+EOF
+if { (eval echo configure:88014: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  :
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  cat >> confdefs.h <<\EOF
+#define MISSING_MSGHDR_MSGFLAGS 1
+EOF
+
+  
+fi
+rm -f conftest*
+  cat >> confdefs.h <<\EOF
+#define HAVE_SOCKETS 1
+EOF
+
+
+  
+  ext_builddir=ext/sockets
+  ext_srcdir=$abs_srcdir/ext/sockets
+
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_SOCKETS_SHARED=no
+    
+  
+  case ext/sockets in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in sockets.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+    EXT_STATIC="$EXT_STATIC sockets"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC sockets"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_SOCKETS_SHARED=yes
+      
+  case ext/sockets in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in sockets.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_sockets="$shared_objects_sockets $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsockets.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) $(PHPSOCKETS_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsockets.so '$ext_builddir'/phpsockets.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSOCKETS, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) $(PHPSOCKETS_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsockets.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsockets.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sockets"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpsockets.$suffix: $ext_builddir/phpsockets.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsockets.$suffix \$(phplibdir)
+
+$ext_builddir/phpsockets.$suffix: \$(shared_objects_sockets) \$(PHPSOCKETS_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sockets.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) $(SOCKETS_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sockets.so '$ext_builddir'/sockets.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SOCKETS, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) $(SOCKETS_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sockets.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sockets.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sockets"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/sockets.$suffix: $ext_builddir/sockets.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/sockets.$suffix \$(phplibdir)
 
-    main() {
-    int fd = open("conftest_in", O_WRONLY|O_CREAT, 0600);
+$ext_builddir/sockets.$suffix: \$(shared_objects_sockets) \$(SOCKETS_SHARED_DEPENDENCIES)
+	$link_cmd
 
-    if (fd < 0) exit(1);
-    if (pwrite(fd, "text", 4, 0) != 4) exit(1);
-    /* Linux glibc breakage until 2.2.5 */
-    if (pwrite(fd, "text", 4, -1) != -1 || errno != EINVAL) exit(1);
-    exit(0);
-    }
+EOF
 
-  
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_SOCKETS 1
 EOF
-if { (eval echo configure:81615: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-    ac_cv_pwrite=yes
-  
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  
-    ac_cv_pwrite=no
-  
-fi
-rm -fr conftest*
-fi
 
+    fi
+  fi
 
-    if test "$ac_cv_pwrite" = "no"; then
-      
-  if test "$cross_compiling" = yes; then
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_SOCKETS_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/sockets in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-    ac_cv_pwrite=no
   
-else
-  cat > conftest.$ac_ext <<EOF
-#line 81640 "configure"
-#include "confdefs.h"
 
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <fcntl.h>
-#include <unistd.h>
-#include <errno.h>
-ssize_t pwrite(int, void *, size_t, off64_t);
-    main() {
-    int fd = open("conftest_in", O_WRONLY|O_CREAT, 0600);
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-    if (fd < 0) exit(1);
-    if (pwrite(fd, "text", 4, 0) != 4) exit(1);
-    /* Linux glibc breakage until 2.2.5 */
-    if (pwrite(fd, "text", 4, -1) != -1 || errno != EINVAL) exit(1);
-    exit(0);
-    }
 
+  old_IFS=$IFS
+  for ac_src in sockets.c; do
   
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:81661: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-    ac_cv_pwrite=yes
+  done
+
+
+        EXT_STATIC="$EXT_STATIC sockets"
+        ;;
+      *)
+        
   
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
+  case ext/sockets in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-    ac_cv_pwrite=no
   
-fi
-rm -fr conftest*
-fi
 
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-      if test "$ac_cv_pwrite" = "yes"; then
-        ac_cv_pwrite=64
-      fi
-    fi
-  
-fi
 
-echo "$ac_t""$ac_cv_pwrite" 1>&6
+  old_IFS=$IFS
+  for ac_src in sockets.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
-  if test "$ac_cv_pwrite" != "no"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_PWRITE 1
-EOF
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-    if test "$ac_cv_pwrite" = "64"; then
-      cat >> confdefs.h <<\EOF
-#define PHP_PWRITE_64 1
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
 
-    fi
-  fi  
 
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC sockets"
+  fi
   
-  echo $ac_n "checking whether pread works""... $ac_c" 1>&6
-echo "configure:81702: checking whether pread works" >&5
-if eval "test \"`echo '$''{'ac_cv_pread'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-    
-  echo test > conftest_in
-  if test "$cross_compiling" = yes; then
   
-    ac_cv_pread=no
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
   
-else
-  cat > conftest.$ac_ext <<EOF
-#line 81715 "configure"
-#include "confdefs.h"
 
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <fcntl.h>
-#include <unistd.h>
-#include <errno.h>
 
-    main() {
-    char buf[3]; 
-    int fd = open("conftest_in", O_RDONLY);
-    if (fd < 0) exit(1);
-    if (pread(fd, buf, 2, 0) != 2) exit(1);
-    /* Linux glibc breakage until 2.2.5 */
-    if (pread(fd, buf, 2, -1) != -1 || errno != EINVAL) exit(1);
-    exit(0);
-    }
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=sockets
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
   
-EOF
-if { (eval echo configure:81735: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
   
-    ac_cv_pread=yes
+    header_path=ext/sockets/
+    for header_file in php_sockets.h; do
+      hp_hf="$header_path/$header_file"
+      
   
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
+  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-    ac_cv_pread=no
+  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INSTALLHEADERS$unique=set"
+    
+        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
+      
+  fi
+
+    done 
   
-fi
-rm -fr conftest*
+
 fi
 
-  rm -f conftest_in
 
-    if test "$ac_cv_pread" = "no"; then
-      
-  echo test > conftest_in
+  echo $ac_n "checking whether zend_object_value is packed""... $ac_c" 1>&6
+echo "configure:88348: checking whether zend_object_value is packed" >&5
+  old_CPPFLAGS=$CPPFLAGS
+  CPPFLAGS="$INCLUDES -I$abs_srcdir $CPPFLAGS"
   if test "$cross_compiling" = yes; then
   
-    ac_cv_pread=no
+    ac_result=0
+    echo "$ac_t""no" 1>&6
   
 else
   cat > conftest.$ac_ext <<EOF
-#line 81762 "configure"
+#line 88358 "configure"
 #include "confdefs.h"
 
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <fcntl.h>
-#include <unistd.h>
-#include <errno.h>
-ssize_t pread(int, void *, size_t, off64_t);
-    main() {
-    char buf[3]; 
-    int fd = open("conftest_in", O_RDONLY);
-    if (fd < 0) exit(1);
-    if (pread(fd, buf, 2, 0) != 2) exit(1);
-    /* Linux glibc breakage until 2.2.5 */
-    if (pread(fd, buf, 2, -1) != -1 || errno != EINVAL) exit(1);
-    exit(0);
-    }
+#include "Zend/zend_types.h"
+int main(int argc, char **argv) {
+	return ((sizeof(zend_object_handle) + sizeof(zend_object_handlers*)) == sizeof(zend_object_value)) ? 0 : 1;
+}
   
 EOF
-if { (eval echo configure:81782: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:88367: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
-    ac_cv_pread=yes
+    ac_result=1
+    echo "$ac_t""yes" 1>&6
   
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -fr conftest*
   
-    ac_cv_pread=no
+    ac_result=0
+    echo "$ac_t""no" 1>&6
   
 fi
 rm -fr conftest*
 fi
 
-  rm -f conftest_in
-
-      if test "$ac_cv_pread" = "yes"; then
-        ac_cv_pread=64
-      fi
-    fi
-  
-fi
-
-echo "$ac_t""$ac_cv_pread" 1>&6
-
-  if test "$ac_cv_pread" != "no"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_PREAD 1
+  CPPFLAGS=$old_CPPFLAGS
+  cat >> confdefs.h <<EOF
+#define HAVE_PACKED_OBJECT_VALUE $ac_result
 EOF
 
-    if test "$ac_cv_pread" = "64"; then
-      cat >> confdefs.h <<\EOF
-#define PHP_PREAD_64 1
+  cat >> confdefs.h <<\EOF
+#define HAVE_SPL 1
 EOF
-
-    fi
-  fi  
-
+ 
   
-  ext_builddir=ext/session
-  ext_srcdir=$abs_srcdir/ext/session
+  ext_builddir=ext/spl
+  ext_srcdir=$abs_srcdir/ext/spl
 
   ac_extra=
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_SESSION_SHARED=no
+  if test "no" != "shared" && test "no" != "yes" && test "" != "cli"; then
+    PHP_SPL_SHARED=no
     
   
-  case ext/session in
+  case ext/spl in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/spl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/spl/"; ac_bdir="ext/spl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -81846,7 +88418,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in session.c mod_files.c mod_mm.c mod_user.c; do
+  for ac_src in php_spl.c spl_functions.c spl_engine.c spl_iterators.c spl_array.c spl_directory.c spl_exceptions.c spl_observer.c spl_dllist.c spl_heap.c spl_fixedarray.c; do
   
       IFS=.
       set $ac_src
@@ -81869,18 +88441,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC session"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC session"
+    EXT_STATIC="$EXT_STATIC spl"
+    if test "no" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC spl"
     fi
   else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_SESSION_SHARED=yes
+    if test "no" = "shared" || test "no" = "yes"; then
+      PHP_SPL_SHARED=yes
       
-  case ext/session in
+  case ext/spl in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/spl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/spl/"; ac_bdir="ext/spl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -81895,14 +88467,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in session.c mod_files.c mod_mm.c mod_user.c; do
+  for ac_src in php_spl.c spl_functions.c spl_engine.c spl_iterators.c spl_array.c spl_directory.c spl_exceptions.c spl_observer.c spl_dllist.c spl_heap.c spl_fixedarray.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_session="$shared_objects_session $ac_bdir$ac_obj.lo"
+      shared_objects_spl="$shared_objects_spl $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -81925,31 +88497,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsession.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) $(PHPSESSION_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsession.so '$ext_builddir'/phpsession.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpspl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) $(PHPSPL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpspl.so '$ext_builddir'/phpspl.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSESSION, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSPL, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) $(PHPSESSION_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) $(PHPSPL_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsession.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpspl.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsession.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpspl.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_session"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_spl"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpsession.$suffix: $ext_builddir/phpsession.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsession.$suffix \$(phplibdir)
+\$(phplibdir)/phpspl.$suffix: $ext_builddir/phpspl.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpspl.$suffix \$(phplibdir)
 
-$ext_builddir/phpsession.$suffix: \$(shared_objects_session) \$(PHPSESSION_SHARED_DEPENDENCIES)
+$ext_builddir/phpspl.$suffix: \$(shared_objects_spl) \$(PHPSPL_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -81962,31 +88534,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/session.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) $(SESSION_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/session.so '$ext_builddir'/session.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/spl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) $(SPL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/spl.so '$ext_builddir'/spl.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SESSION, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SPL, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) $(SESSION_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) $(SPL_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/session.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/spl.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/session.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/spl.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_session"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_spl"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/session.$suffix: $ext_builddir/session.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/session.$suffix \$(phplibdir)
+\$(phplibdir)/spl.$suffix: $ext_builddir/spl.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/spl.$suffix \$(phplibdir)
 
-$ext_builddir/session.$suffix: \$(shared_objects_session) \$(SESSION_SHARED_DEPENDENCIES)
+$ext_builddir/spl.$suffix: \$(shared_objects_spl) \$(SPL_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -81994,22 +88566,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_SESSION 1
+#define COMPILE_DL_SPL 1
 EOF
 
     fi
   fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_SESSION_SHARED=no
+  if test "no" != "shared" && test "no" != "yes" && test "" = "cli"; then
+    PHP_SPL_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/session in
+  case ext/spl in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/spl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/spl/"; ac_bdir="ext/spl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -82024,7 +88596,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in session.c mod_files.c mod_mm.c mod_user.c; do
+  for ac_src in php_spl.c spl_functions.c spl_engine.c spl_iterators.c spl_array.c spl_directory.c spl_exceptions.c spl_observer.c spl_dllist.c spl_heap.c spl_fixedarray.c; do
   
       IFS=.
       set $ac_src
@@ -82047,15 +88619,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC session"
+        EXT_STATIC="$EXT_STATIC spl"
         ;;
       *)
         
   
-  case ext/session in
+  case ext/spl in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/spl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/spl/"; ac_bdir="ext/spl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -82070,7 +88642,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in session.c mod_files.c mod_mm.c mod_user.c; do
+  for ac_src in php_spl.c spl_functions.c spl_engine.c spl_iterators.c spl_array.c spl_directory.c spl_exceptions.c spl_observer.c spl_dllist.c spl_heap.c spl_fixedarray.c; do
   
       IFS=.
       set $ac_src
@@ -82079,135 +88651,366 @@ EOF
       
       PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC spl"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=spl
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
+  
+  
+    header_path=ext/spl
+    for header_file in php_spl.h spl_array.h spl_directory.h spl_engine.h spl_exceptions.h spl_functions.h spl_iterators.h spl_observer.h spl_dllist.h spl_heap.h spl_fixedarray.h; do
+      hp_hf="$header_path/$header_file"
+      
+  
+  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INSTALLHEADERS$unique=set"
+    
+        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
+      
+  fi
+
+    done 
+  
+
+  
+  am_i_shared=$PHP_SPL_SHARED
+  is_it_shared=$PHP_PCRE_SHARED
+  is_it_enabled=$PHP_PCRE
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension spl to build statically, but it
+depends on extension pcre, which you've configured to build shared.
+You either need to build spl shared or build pcre statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension spl, which depends on extension pcre,
+but you've either not enabled pcre, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+
+
+
+php_with_sqlite=yes
+
+echo $ac_n "checking for sqlite support""... $ac_c" 1>&6
+echo "configure:88731: checking for sqlite support" >&5
+# Check whether --with-sqlite or --without-sqlite was given.
+if test "${with_sqlite+set}" = set; then
+  withval="$with_sqlite"
+  PHP_SQLITE=$withval
+else
+  
+  PHP_SQLITE=yes
+  test "$PHP_ENABLE_ALL" && PHP_SQLITE=$PHP_ENABLE_ALL
+
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_SQLITE in
+shared,*)
+  PHP_SQLITE=`echo "$PHP_SQLITE"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_SQLITE=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+
+php_enable_sqlite_utf8=no
+
+echo $ac_n "checking whether to enable UTF-8 support in sqlite (default: ISO-8859-1)""... $ac_c" 1>&6
+echo "configure:88775: checking whether to enable UTF-8 support in sqlite (default: ISO-8859-1)" >&5
+# Check whether --enable-sqlite-utf8 or --disable-sqlite-utf8 was given.
+if test "${enable_sqlite_utf8+set}" = set; then
+  enableval="$enable_sqlite_utf8"
+  PHP_SQLITE_UTF8=$enableval
+else
+  
+  PHP_SQLITE_UTF8=no
+  
+
+fi
+
+
+ext_output=$PHP_SQLITE_UTF8
+echo "$ac_t""$ext_output" 1>&6
+
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
 
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC session"
-  fi
-  
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
 
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=session
+
+
+
+if test "$PHP_SQLITE" != "no"; then
+  if test "$PHP_PDO" != "no"; then
     
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+  echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
+echo "configure:88803: checking for PDO includes" >&5
+if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+    echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
+echo "configure:88809: checking for PDO includes" >&5
+    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
+      pdo_inc_path=$abs_srcdir/ext
+    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
+      pdo_inc_path=$abs_srcdir/ext
+    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
+      pdo_inc_path=$prefix/include/php/ext
+    fi
+  
+fi
 
+echo "$ac_t""$pdo_inc_path" 1>&6
+  if test -n "$pdo_inc_path"; then
+:
+  else
+echo "configure: warning: Cannot find php_pdo_driver.h." 1>&2
   fi
 
+    if test -n "$pdo_inc_path"; then
+      cat >> confdefs.h <<\EOF
+#define PHP_SQLITE2_HAVE_PDO 1
+EOF
+
+      pdo_inc_path="-I$pdo_inc_path"
+    fi
+  fi  
+
+  if test "$PHP_SQLITE" != "yes"; then
+    SEARCH_PATH="/usr/local /usr"
+    SEARCH_FOR="/include/sqlite.h"
+    if test -r $PHP_SQLITE/; then # path given as parameter
+      SQLITE_DIR=$PHP_SQLITE
+    else # search default path list
+      echo $ac_n "checking for sqlite files in default path""... $ac_c" 1>&6
+echo "configure:88843: checking for sqlite files in default path" >&5
+      for i in $SEARCH_PATH ; do
+        if test -r $i/$SEARCH_FOR; then
+          SQLITE_DIR=$i
+          echo "$ac_t""found in $i" 1>&6
+        fi
+      done
+    fi
   
-  am_i_shared=$PHP_SESSION_SHARED
-  is_it_shared=$PHP_HASH_SHARED
-  is_it_enabled=$PHP_HASH
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension session to build statically, but it
-depends on extension hash, which you've configured to build shared.
-You either need to build session shared or build hash statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension session, which depends on extension hash,
-but you've either not enabled hash, or have disabled it.
-" 1>&2; exit 1; }
-  fi
+    if test -z "$SQLITE_DIR"; then
+      echo "$ac_t""not found" 1>&6
+      { echo "configure: error: Please reinstall the sqlite distribution from http://www.sqlite.org" 1>&2; exit 1; }
+    fi
+
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+      -L$SQLITE_DIR/$PHP_LIBDIR -lm
+    "
   
+  save_ext_shared=$ext_shared
+  ext_shared=yes
   
-  am_i_shared=$PHP_SESSION_SHARED
-  is_it_shared=$PHP_SPL_SHARED
-  is_it_enabled=$PHP_SPL
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension session to build statically, but it
-depends on extension spl, which you've configured to build shared.
-You either need to build session shared or build spl statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension session, which depends on extension spl,
-but you've either not enabled spl, or have disabled it.
-" 1>&2; exit 1; }
-  fi
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
   
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST SESSION_SHARED_LIBADD"
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
   
-    header_path=ext/session
-    for header_file in php_session.h mod_files.h mod_user.h; do
-      hp_hf="$header_path/$header_file"
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
       
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
-  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INSTALLHEADERS$unique=set"
+    eval "LIBPATH$unique=set"
     
-        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
-      
-  fi
-
-    done 
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
+  fi
 
-  cat >> confdefs.h <<\EOF
-#define HAVE_PHP_SESSION 1
-EOF
 
-fi
+      fi
+    
+  fi
 
-if test "$PHP_MM" != "no"; then
-  for i in $PHP_MM /usr/local /usr; do
-    test -f "$i/include/mm.h" && MM_DIR=$i && break
+    ;;
+    esac
   done
 
-  if test -z "$MM_DIR" ; then
-    { echo "configure: error: cannot find mm library" 1>&2; exit 1; }
-  fi
-  
+  echo $ac_n "checking for sqlite_open in -lsqlite""... $ac_c" 1>&6
+echo "configure:88955: checking for sqlite_open in -lsqlite" >&5
+ac_lib_var=`echo sqlite'_'sqlite_open | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lsqlite  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 88963 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char sqlite_open();
+
+int main() {
+sqlite_open()
+; return 0; }
+EOF
+if { (eval echo configure:88974: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
   
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+      
 
   if test "$ext_shared" = "yes"; then
-    SESSION_SHARED_LIBADD="-lmm $SESSION_SHARED_LIBADD"
-    if test -n "$MM_DIR/$PHP_LIBDIR"; then
+    SQLITE_SHARED_LIBADD="-lsqlite $SQLITE_SHARED_LIBADD"
+    if test -n "$SQLITE_DIR/$PHP_LIBDIR"; then
       
-  if test "$MM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$MM_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  if test "$SQLITE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SQLITE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$MM_DIR/$PHP_LIBDIR" || echo "$MM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$MM_DIR/$PHP_LIBDIR
+  if test -z "$SQLITE_DIR/$PHP_LIBDIR" || echo "$SQLITE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$SQLITE_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $MM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $SQLITE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$MM_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$SQLITE_DIR/$PHP_LIBDIR\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        SESSION_SHARED_LIBADD="-L$ai_p $SESSION_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && SESSION_SHARED_LIBADD="$ld_runpath_switch$ai_p $SESSION_SHARED_LIBADD"
+        SQLITE_SHARED_LIBADD="-L$ai_p $SQLITE_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && SQLITE_SHARED_LIBADD="$ld_runpath_switch$ai_p $SQLITE_SHARED_LIBADD"
       else
         
   
@@ -82233,18 +89036,18 @@ if test "$PHP_MM" != "no"; then
   else
     
 
-  if test -n "$MM_DIR/$PHP_LIBDIR"; then
+  if test -n "$SQLITE_DIR/$PHP_LIBDIR"; then
     
-  if test "$MM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$MM_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  if test "$SQLITE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SQLITE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$MM_DIR/$PHP_LIBDIR" || echo "$MM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$MM_DIR/$PHP_LIBDIR
+  if test -z "$SQLITE_DIR/$PHP_LIBDIR" || echo "$SQLITE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$SQLITE_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $MM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $SQLITE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$MM_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$SQLITE_DIR/$PHP_LIBDIR\"`"
   fi
 
     
@@ -82270,10 +89073,10 @@ if test "$PHP_MM" != "no"; then
   fi
   
   
-  case mm in
+  case sqlite in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lmm $LIBS" 
+      LIBS="-lsqlite $LIBS" 
    ;;
   esac
 
@@ -82283,17 +89086,17 @@ if test "$PHP_MM" != "no"; then
   fi
 
 
-  
-  if test "$MM_DIR/include" != "/usr/include"; then
+      
+  if test "$SQLITE_DIR/include" != "/usr/include"; then
     
-  if test -z "$MM_DIR/include" || echo "$MM_DIR/include" | grep '^/' >/dev/null ; then
-    ai_p=$MM_DIR/include
+  if test -z "$SQLITE_DIR/include" || echo "$SQLITE_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$SQLITE_DIR/include
   else
     
-    ep_dir="`echo $MM_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $SQLITE_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$MM_DIR/include\"`"
+    ai_p="$ep_realdir/`basename \"$SQLITE_DIR/include\"`"
   fi
 
     
@@ -82314,93 +89117,121 @@ if test "$PHP_MM" != "no"; then
 
   fi
 
-  
-  
-    for header_file in ext/session/mod_mm.h; do
-      
-  
-  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INSTALLHEADERS$unique=set"
     
-        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
-      
-  fi
-
-    done 
   
+else
+  echo "$ac_t""no" 1>&6
 
-  cat >> confdefs.h <<\EOF
-#define HAVE_LIBMM 1
-EOF
-
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_sqlite_sqlite_open
+    
+      { echo "configure: error: wrong sqlite lib version or lib not found" 1>&2; exit 1; }
+    
+  
 fi
 
+    SQLITE_MODULE_TYPE=external
+    PHP_SQLITE_CFLAGS=$pdo_inc_path
+    sqlite_extra_sources="libsqlite/src/encode.c"
+  else
+    # use bundled library
+    
+  # we only support certain lemon versions
+  lemon_version_list="1.0"
 
-php_enable_shmop=no
+  # Extract the first word of "lemon", so it can be a program name with args.
+set dummy lemon; ac_word=$2
+echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
+echo "configure:89147: checking for $ac_word" >&5
+if eval "test \"`echo '$''{'ac_cv_prog_LEMON'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test -n "$LEMON"; then
+  ac_cv_prog_LEMON="$LEMON" # Let the user override the test.
+else
+  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
+  ac_dummy="$PATH"
+  for ac_dir in $ac_dummy; do
+    test -z "$ac_dir" && ac_dir=.
+    if test -f $ac_dir/$ac_word; then
+      ac_cv_prog_LEMON="lemon"
+      break
+    fi
+  done
+  IFS="$ac_save_ifs"
+fi
+fi
+LEMON="$ac_cv_prog_LEMON"
+if test -n "$LEMON"; then
+  echo "$ac_t""$LEMON" 1>&6
+else
+  echo "$ac_t""no" 1>&6
+fi
 
-echo $ac_n "checking whether to enable shmop support""... $ac_c" 1>&6
-echo "configure:82346: checking whether to enable shmop support" >&5
-# Check whether --enable-shmop or --disable-shmop was given.
-if test "${enable_shmop+set}" = set; then
-  enableval="$enable_shmop"
-  PHP_SHMOP=$enableval
+  if test "$LEMON"; then
+    echo $ac_n "checking for lemon version""... $ac_c" 1>&6
+echo "configure:89175: checking for lemon version" >&5
+if eval "test \"`echo '$''{'php_cv_lemon_version'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
   
-  PHP_SHMOP=no
-  test "$PHP_ENABLE_ALL" && PHP_SHMOP=$PHP_ENABLE_ALL
-
+      lemon_version=`$LEMON -x 2>/dev/null | $SED -e 's/^.* //'`
+      php_cv_lemon_version=invalid
+      for lemon_check_version in $lemon_version_list; do
+        if test "$lemon_version" = "$lemon_check_version"; then
+          php_cv_lemon_version="$lemon_check_version (ok)"
+        fi
+      done
+    
 fi
 
+echo "$ac_t""$php_cv_lemon_version" 1>&6
+  else
+    lemon_version=none
+  fi
+  case $php_cv_lemon_version in
+    ""|invalid)
+      lemon_msg="lemon versions supported for regeneration of libsqlite parsers: $lemon_version_list (found: $lemon_version)."
+      echo "configure: warning: $lemon_msg" 1>&2
+      LEMON="exit 0;"
+      ;;
+  esac
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST LEMON"
 
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_SHMOP in
-shared,*)
-  PHP_SHMOP=`echo "$PHP_SHMOP"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_SHMOP=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test "$PHP_SHMOP" != "no"; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_SHMOP 1
-EOF
-
+    SQLITE_MODULE_TYPE=builtin
+    PHP_SQLITE_CFLAGS="-I@ext_srcdir@/libsqlite/src -I@ext_builddir@/libsqlite/src $pdo_inc_path"
+    sqlite_extra_sources="libsqlite/src/opcodes.c \
+        libsqlite/src/parse.c libsqlite/src/encode.c \
+        libsqlite/src/auth.c libsqlite/src/btree.c libsqlite/src/build.c \
+        libsqlite/src/delete.c libsqlite/src/expr.c libsqlite/src/func.c \
+        libsqlite/src/hash.c libsqlite/src/insert.c libsqlite/src/main.c \
+        libsqlite/src/os.c libsqlite/src/pager.c \
+        libsqlite/src/printf.c libsqlite/src/random.c \
+        libsqlite/src/select.c libsqlite/src/table.c libsqlite/src/tokenize.c \
+        libsqlite/src/update.c libsqlite/src/util.c libsqlite/src/vdbe.c \
+        libsqlite/src/attach.c libsqlite/src/btree_rb.c libsqlite/src/pragma.c \
+        libsqlite/src/vacuum.c libsqlite/src/copy.c \
+        libsqlite/src/vdbeaux.c libsqlite/src/date.c \
+        libsqlite/src/where.c libsqlite/src/trigger.c"
+  fi
+        sqlite_sources="sqlite.c sess_sqlite.c pdo_sqlite2.c $sqlite_extra_sources" 
   
-  ext_builddir=ext/shmop
-  ext_srcdir=$abs_srcdir/ext/shmop
+  ext_builddir=ext/sqlite
+  ext_srcdir=$abs_srcdir/ext/sqlite
 
-  ac_extra=
+  ac_extra=`echo "$PHP_SQLITE_CFLAGS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_SHMOP_SHARED=no
+    PHP_SQLITE_SHARED=no
     
   
-  case ext/shmop in
+  case ext/sqlite in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sqlite/"; ac_bdir="ext/sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -82415,7 +89246,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in shmop.c; do
+  for ac_src in $sqlite_sources; do
   
       IFS=.
       set $ac_src
@@ -82438,18 +89269,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC shmop"
+    EXT_STATIC="$EXT_STATIC sqlite"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC shmop"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC sqlite"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_SHMOP_SHARED=yes
+      PHP_SQLITE_SHARED=yes
       
-  case ext/shmop in
+  case ext/sqlite in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sqlite/"; ac_bdir="ext/sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -82464,14 +89295,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in shmop.c; do
+  for ac_src in $sqlite_sources; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_shmop="$shared_objects_shmop $ac_bdir$ac_obj.lo"
+      shared_objects_sqlite="$shared_objects_sqlite $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -82494,31 +89325,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpshmop.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) $(PHPSHMOP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpshmop.so '$ext_builddir'/phpshmop.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) $(PHPSQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsqlite.so '$ext_builddir'/phpsqlite.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSHMOP, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSQLITE, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) $(PHPSHMOP_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) $(PHPSQLITE_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpshmop.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsqlite.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpshmop.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsqlite.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_shmop"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sqlite"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpshmop.$suffix: $ext_builddir/phpshmop.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpshmop.$suffix \$(phplibdir)
+\$(phplibdir)/phpsqlite.$suffix: $ext_builddir/phpsqlite.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsqlite.$suffix \$(phplibdir)
 
-$ext_builddir/phpshmop.$suffix: \$(shared_objects_shmop) \$(PHPSHMOP_SHARED_DEPENDENCIES)
+$ext_builddir/phpsqlite.$suffix: \$(shared_objects_sqlite) \$(PHPSQLITE_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -82531,31 +89362,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/shmop.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) $(SHMOP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/shmop.so '$ext_builddir'/shmop.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) $(SQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sqlite.so '$ext_builddir'/sqlite.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SHMOP, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SQLITE, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) $(SHMOP_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) $(SQLITE_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/shmop.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sqlite.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/shmop.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sqlite.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_shmop"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sqlite"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/shmop.$suffix: $ext_builddir/shmop.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/shmop.$suffix \$(phplibdir)
+\$(phplibdir)/sqlite.$suffix: $ext_builddir/sqlite.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/sqlite.$suffix \$(phplibdir)
 
-$ext_builddir/shmop.$suffix: \$(shared_objects_shmop) \$(SHMOP_SHARED_DEPENDENCIES)
+$ext_builddir/sqlite.$suffix: \$(shared_objects_sqlite) \$(SQLITE_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -82563,22 +89394,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_SHMOP 1
+#define COMPILE_DL_SQLITE 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_SHMOP_SHARED=no
+    PHP_SQLITE_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/shmop in
+  case ext/sqlite in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sqlite/"; ac_bdir="ext/sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -82593,7 +89424,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in shmop.c; do
+  for ac_src in $sqlite_sources; do
   
       IFS=.
       set $ac_src
@@ -82616,15 +89447,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC shmop"
+        EXT_STATIC="$EXT_STATIC sqlite"
         ;;
       *)
         
   
-  case ext/shmop in
+  case ext/sqlite in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sqlite/"; ac_bdir="ext/sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -82639,7 +89470,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in shmop.c; do
+  for ac_src in $sqlite_sources; do
   
       IFS=.
       set $ac_src
@@ -82664,7 +89495,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC shmop"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC sqlite"
   fi
   
   
@@ -82673,554 +89504,841 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=shmop
+    PHP_PECL_EXTENSION=sqlite
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
-fi
+  
+  am_i_shared=$PHP_SQLITE_SHARED
+  is_it_shared=$PHP_SPL_SHARED
+  is_it_enabled=$PHP_SPL
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension sqlite to build statically, but it
+depends on extension spl, which you've configured to build shared.
+You either need to build sqlite shared or build spl statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension sqlite, which depends on extension spl,
+but you've either not enabled spl, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+  
+  am_i_shared=$PHP_SQLITE_SHARED
+  is_it_shared=$PHP_PDO_SHARED
+  is_it_enabled=$PHP_PDO
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension sqlite to build statically, but it
+depends on extension pdo, which you've configured to build shared.
+You either need to build sqlite shared or build pdo statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension sqlite, which depends on extension pdo,
+but you've either not enabled pdo, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+
+  
+  src=$ext_srcdir/Makefile.frag
+  ac_srcdir=$ext_srcdir
+  ac_builddir=$ext_builddir
+  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments
 
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST SQLITE_SHARED_LIBADD"
 
+  
+  
+    for header_file in $ext_builddir/libsqlite/src/sqlite.h; do
+      
+  
+  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INSTALLHEADERS$unique=set"
+    
+        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
+      
+  fi
 
-php_enable_simplexml=yes
+    done 
+  
 
-echo $ac_n "checking whether to enable SimpleXML support""... $ac_c" 1>&6
-echo "configure:82690: checking whether to enable SimpleXML support" >&5
-# Check whether --enable-simplexml or --disable-simplexml was given.
-if test "${enable_simplexml+set}" = set; then
-  enableval="$enable_simplexml"
-  PHP_SIMPLEXML=$enableval
-else
   
-  PHP_SIMPLEXML=yes
-  test "$PHP_ENABLE_ALL" && PHP_SIMPLEXML=$PHP_ENABLE_ALL
+  if test "$SQLITE_MODULE_TYPE" = "builtin"; then
+    
+  
+    $php_shtool mkdir -p $ext_builddir/libsqlite/src
+  
 
+    echo $ac_n "checking size of char *""... $ac_c" 1>&6
+echo "configure:89588: checking size of char *" >&5
+if eval "test \"`echo '$''{'ac_cv_sizeof_char_p'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_sizeof_char_p=4
+else
+  cat > conftest.$ac_ext <<EOF
+#line 89596 "configure"
+#include "confdefs.h"
+#include <stdio.h>
+#include <sys/types.h>
+main()
+{
+  FILE *f=fopen("conftestval", "w");
+  if (!f) exit(1);
+  fprintf(f, "%d\n", sizeof(char *));
+  exit(0);
+}
+EOF
+if { (eval echo configure:89608: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_sizeof_char_p=`cat conftestval`
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_sizeof_char_p=0
+fi
+rm -fr conftest*
 fi
 
+fi
+echo "$ac_t""$ac_cv_sizeof_char_p" 1>&6
+cat >> confdefs.h <<EOF
+#define SIZEOF_CHAR_P $ac_cv_sizeof_char_p
+EOF
 
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_SIMPLEXML in
-shared,*)
-  PHP_SIMPLEXML=`echo "$PHP_SIMPLEXML"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_SIMPLEXML=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
+    cat >> confdefs.h <<\EOF
+#define SQLITE_PTR_SZ SIZEOF_CHAR_P
+EOF
 
+                if test "$PHP_SQLITE_UTF8" = "yes"; then
+      SQLITE_ENCODING="UTF8"
+      cat >> confdefs.h <<\EOF
+#define SQLITE_UTF8 1
+EOF
 
+    else
+      SQLITE_ENCODING="ISO8859"
+    fi
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST SQLITE_ENCODING"
 
-echo "$ac_t""$ext_output" 1>&6
 
+    SQLITE_VERSION=`cat $ext_srcdir/libsqlite/VERSION`
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST SQLITE_VERSION"
 
 
+    sed -e s/--VERS--/$SQLITE_VERSION/ -e s/--ENCODING--/$SQLITE_ENCODING/ $ext_srcdir/libsqlite/src/sqlite.h.in > $ext_builddir/libsqlite/src/sqlite.h
 
-if test -z "$PHP_LIBXML_DIR"; then
+    if test "$ext_shared" = "no" || test "$ext_srcdir" != "$abs_srcdir"; then
+      echo '#include <php_config.h>' > $ext_builddir/libsqlite/src/config.h
+    else
+      echo "#include \"$abs_builddir/config.h\"" > $ext_builddir/libsqlite/src/config.h
+    fi
+    
+    cat >> $ext_builddir/libsqlite/src/config.h <<EOF
+#if ZTS
+# define THREADSAFE 1
+#endif
+#if !ZEND_DEBUG
+# define NDEBUG
+#endif
+EOF
+  fi
   
-php_with_libxml_dir=no
+  for ac_func in usleep nanosleep
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:89670: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 89675 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
 
-echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
-echo "configure:82735: checking libxml2 install dir" >&5
-# Check whether --with-libxml-dir or --without-libxml-dir was given.
-if test "${with_libxml_dir+set}" = set; then
-  withval="$with_libxml_dir"
-  PHP_LIBXML_DIR=$withval
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
+
+; return 0; }
+EOF
+if { (eval echo configure:89698: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=no"
+fi
+rm -f conftest*
+fi
+
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
+  for ac_hdr in time.h
+do
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:89726: checking for $ac_hdr" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 89731 "configure"
+#include "confdefs.h"
+#include <$ac_hdr>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:89736: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_hdr 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
+fi
+
+
+
+echo $ac_n "checking whether flush should be called explicitly after a buffered io""... $ac_c" 1>&6
+echo "configure:89767: checking whether flush should be called explicitly after a buffered io" >&5
+if eval "test \"`echo '$''{'ac_cv_flush_io'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
   
-  PHP_LIBXML_DIR=no
+if test "$cross_compiling" = yes; then
+  
+  ac_cv_flush_io=no
+
+else
+  cat > conftest.$ac_ext <<EOF
+#line 89778 "configure"
+#include "confdefs.h"
+
+#include <stdio.h>
+#include <stdlib.h>
+
+int main(int argc, char **argv)
+{
+	char *filename = tmpnam(NULL);
+	char buffer[64];
+	int result = 0;
+	
+	FILE *fp = fopen(filename, "wb");
+	if (NULL == fp)
+		return 0;
+	fputs("line 1\n", fp);
+	fputs("line 2\n", fp);
+	fclose(fp);
+	
+	fp = fopen(filename, "rb+");
+	if (NULL == fp)
+		return 0;
+	fgets(buffer, sizeof(buffer), fp);
+	fputs("line 3\n", fp);
+	rewind(fp);
+	fgets(buffer, sizeof(buffer), fp);
+	if (0 != strcmp(buffer, "line 1\n"))
+		result = 1;
+	fgets(buffer, sizeof(buffer), fp);
+	if (0 != strcmp(buffer, "line 3\n"))
+		result = 1;
+	fclose(fp);
+	unlink(filename);
+
+	exit(result);
+}
+
+EOF
+if { (eval echo configure:89816: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+  ac_cv_flush_io=no
+
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
   
+  ac_cv_flush_io=yes
 
 fi
+rm -fr conftest*
+fi
 
+fi
 
-ext_output=$PHP_LIBXML_DIR
-echo "$ac_t""$ext_output" 1>&6
+echo "$ac_t""$ac_cv_flush_io" 1>&6
+if test "$ac_cv_flush_io" = "yes"; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_FLUSHIO 1
+EOF
 
+fi
 
+if test "$ac_cv_func_crypt" = "no"; then
+  echo $ac_n "checking for crypt in -lcrypt""... $ac_c" 1>&6
+echo "configure:89844: checking for crypt in -lcrypt" >&5
+ac_lib_var=`echo crypt'_'crypt | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lcrypt  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 89852 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char crypt();
 
+int main() {
+crypt()
+; return 0; }
+EOF
+if { (eval echo configure:89863: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-if test "$PHP_SIMPLEXML" != "no"; then
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LIBS="-lcrypt $LIBS -lcrypt"
+    cat >> confdefs.h <<\EOF
+#define HAVE_CRYPT 1
+EOF
 
-  if test "$PHP_LIBXML" = "no"; then   
-    { echo "configure: error: SimpleXML extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }                
-  fi
+  
+else
+  echo "$ac_t""no" 1>&6
+fi
 
+fi
   
-echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
-echo "configure:82763: checking for xml2-config path" >&5
-if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
+echo $ac_n "checking for standard DES crypt""... $ac_c" 1>&6
+echo "configure:89892: checking for standard DES crypt" >&5
+if eval "test \"`echo '$''{'ac_cv_crypt_des'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
-  for i in $PHP_LIBXML_DIR /usr/local /usr; do
-    if test -x "$i/bin/xml2-config"; then
-      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
-      break
-    fi
-  done
+  if test "$cross_compiling" = yes; then
+  
+  ac_cv_crypt_des=yes
 
-fi
+else
+  cat > conftest.$ac_ext <<EOF
+#line 89903 "configure"
+#include "confdefs.h"
 
-echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6
+#if HAVE_UNISTD_H
+#include <unistd.h>
+#endif
 
-  if test -x "$ac_cv_php_xml2_config_path"; then
-    XML2_CONFIG="$ac_cv_php_xml2_config_path"
-    libxml_full_version=`$XML2_CONFIG --version`
-    ac_IFS=$IFS
-    IFS="."
-    set $libxml_full_version
-    IFS=$ac_IFS
-    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
-    if test "$LIBXML_VERSION" -ge "2006011"; then
-      LIBXML_LIBS=`$XML2_CONFIG --libs`
-      LIBXML_INCS=`$XML2_CONFIG --cflags`
-      
-  for ac_i in $LIBXML_LIBS; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        SIMPLEXML_SHARED_LIBADD="$SIMPLEXML_SHARED_LIBADD -pthread"
-      else
-        
+#if HAVE_CRYPT_H
+#include <crypt.h>
+#endif
+
+main() {
+#if HAVE_CRYPT
+    exit (strcmp((char *)crypt("rasmuslerdorf","rl"),"rl.3StKT.4T8M"));
+#else
+	exit(0);
+#endif
+}
+EOF
+if { (eval echo configure:89922: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
   
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  ac_cv_crypt_des=yes
+
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
   
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
+  ac_cv_crypt_des=no
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
+fi
+rm -fr conftest*
+fi
+
+fi
+
+echo "$ac_t""$ac_cv_crypt_des" 1>&6
+
+echo $ac_n "checking for extended DES crypt""... $ac_c" 1>&6
+echo "configure:89943: checking for extended DES crypt" >&5
+if eval "test \"`echo '$''{'ac_cv_crypt_ext_des'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SIMPLEXML_SHARED_LIBADD="$SIMPLEXML_SHARED_LIBADD -l$ac_ii" 
-    else
-      
+  if test "$cross_compiling" = yes; then
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
+  ac_cv_crypt_ext_des=no
+
+else
+  cat > conftest.$ac_ext <<EOF
+#line 89954 "configure"
+#include "confdefs.h"
+
+#if HAVE_UNISTD_H
+#include <unistd.h>
+#endif
+
+#if HAVE_CRYPT_H
+#include <crypt.h>
+#endif
+
+main() {
+#if HAVE_CRYPT
+  exit (strcmp((char *)crypt("rasmuslerdorf","_J9..rasm"),"_J9..rasmBYk8r9AiWNc"));
+#else
+  exit(0);
+#endif
+}
+EOF
+if { (eval echo configure:89973: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+  ac_cv_crypt_ext_des=yes
 
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  
+  ac_cv_crypt_ext_des=no
 
-    fi
-   ;;
-  esac
+fi
+rm -fr conftest*
+fi
 
+fi
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
+echo "$ac_t""$ac_cv_crypt_ext_des" 1>&6
 
-    
-      if test "$ext_shared" = "yes"; then
-        SIMPLEXML_SHARED_LIBADD="-L$ai_p $SIMPLEXML_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && SIMPLEXML_SHARED_LIBADD="$ld_runpath_switch$ai_p $SIMPLEXML_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+echo $ac_n "checking for MD5 crypt""... $ac_c" 1>&6
+echo "configure:89994: checking for MD5 crypt" >&5
+if eval "test \"`echo '$''{'ac_cv_crypt_md5'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+if test "$cross_compiling" = yes; then
   
-  fi
+  ac_cv_crypt_md5=no
 
+else
+  cat > conftest.$ac_ext <<EOF
+#line 90005 "configure"
+#include "confdefs.h"
 
-      fi
-    
-  fi
+#if HAVE_UNISTD_H
+#include <unistd.h>
+#endif
 
-    ;;
-    esac
-  done
+#if HAVE_CRYPT_H
+#include <crypt.h>
+#endif
 
-      
-  for ac_i in $LIBXML_INCS; do
-    case $ac_i in
-    -I*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/include"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
+main() {
+#if HAVE_CRYPT
+    char salt[15], answer[40];
 
-    
+    salt[0]='$'; salt[1]='1'; salt[2]='$'; 
+    salt[3]='r'; salt[4]='a'; salt[5]='s';
+    salt[6]='m'; salt[7]='u'; salt[8]='s';
+    salt[9]='l'; salt[10]='e'; salt[11]='$';
+    salt[12]='\0';
+    strcpy(answer,salt);
+    strcat(answer,"rISCgZzpwk3UhDidwXvin0");
+    exit (strcmp((char *)crypt("rasmuslerdorf",salt),answer));
+#else
+	exit(0);
+#endif
+}
+EOF
+if { (eval echo configure:90033: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  ac_cv_crypt_md5=yes
+
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
+  ac_cv_crypt_md5=no
 
-  fi
+fi
+rm -fr conftest*
+fi
 
-    ;;
-    esac
-  done
+fi
 
+echo "$ac_t""$ac_cv_crypt_md5" 1>&6
 
-            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
-echo "configure:82921: checking whether libxml build works" >&5
-if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
+echo $ac_n "checking for Blowfish crypt""... $ac_c" 1>&6
+echo "configure:90054: checking for Blowfish crypt" >&5
+if eval "test \"`echo '$''{'ac_cv_crypt_blowfish'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
-        
-  old_LIBS=$LIBS
-  LIBS="
-          $SIMPLEXML_SHARED_LIBADD
-         $LIBS"
-  if test "$cross_compiling" = yes; then
-  
-    LIBS=$old_LIBS
+if test "$cross_compiling" = yes; then
   
+  ac_cv_crypt_blowfish=no
+
 else
   cat > conftest.$ac_ext <<EOF
-#line 82937 "configure"
+#line 90065 "configure"
 #include "confdefs.h"
 
+#if HAVE_UNISTD_H
+#include <unistd.h>
+#endif
+
+#if HAVE_CRYPT_H
+#include <crypt.h>
+#endif
+
+main() {
+#if HAVE_CRYPT
+    char salt[30], answer[70];
     
-    char xmlInitParser();
-    int main() {
-      xmlInitParser();
-      return 0;
-    }
-  
+    salt[0]='$'; salt[1]='2'; salt[2]='a'; salt[3]='$'; salt[4]='0'; salt[5]='7'; salt[6]='$'; salt[7]='\0';
+    strcat(salt,"rasmuslerd............");
+    strcpy(answer,salt);
+    strcpy(&answer[29],"nIdrcHdxcUxWomQX9j6kvERCFjTg7Ra");
+    exit (strcmp((char *)crypt("rasmuslerdorf",salt),answer));
+#else
+	exit(0);
+#endif
+}
 EOF
-if { (eval echo configure:82948: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:90090: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
-    LIBS=$old_LIBS
-    
-          php_cv_libxml_build_works=yes
-        
-  
+  ac_cv_crypt_blowfish=yes
+
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -fr conftest*
   
-    LIBS=$old_LIBS
-    
-          echo "$ac_t""no" 1>&6
-          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
-        
-  
+  ac_cv_crypt_blowfish=no
+
 fi
 rm -fr conftest*
 fi
 
-
-      
 fi
 
-echo "$ac_t""$php_cv_libxml_build_works" 1>&6
-      if test "$php_cv_libxml_build_works" = "yes"; then
-        cat >> confdefs.h <<\EOF
-#define HAVE_LIBXML 1
-EOF
+echo "$ac_t""$ac_cv_crypt_blowfish" 1>&6
 
-      fi
-      
-    cat >> confdefs.h <<\EOF
-#define HAVE_SIMPLEXML 1
-EOF
+echo $ac_n "checking for SHA512 crypt""... $ac_c" 1>&6
+echo "configure:90111: checking for SHA512 crypt" >&5
+if eval "test \"`echo '$''{'ac_cv_crypt_SHA512'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+if test "$cross_compiling" = yes; then
+  
+  ac_cv_crypt_SHA512=no
 
-    
-  ext_builddir=ext/simplexml
-  ext_srcdir=$abs_srcdir/ext/simplexml
+else
+  cat > conftest.$ac_ext <<EOF
+#line 90122 "configure"
+#include "confdefs.h"
 
-  ac_extra=
+#if HAVE_UNISTD_H
+#include <unistd.h>
+#endif
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_SIMPLEXML_SHARED=no
+#if HAVE_CRYPT_H
+#include <crypt.h>
+#endif
+
+main() {
+#if HAVE_CRYPT
+    char salt[30], answer[80];
     
+    salt[0]='$'; salt[1]='6'; salt[2]='$'; salt[3]='$'; salt[4]='b'; salt[5]='a'; salt[6]='r'; salt[7]='\0';
+    strcpy(answer, salt);
+    strcpy(&answer[29],"$6$$QMXjqd7rHQZPQ1yHsXkQqC1FBzDiVfTHXL.LaeDAeVV.IzMaV9VU4MQ8kPuZa2SOP1A0RPm772EaFYjpEJtdu.");
+    exit (strcmp((char *)crypt("foo",salt),answer));
+#else
+	exit(0);
+#endif
+}
+EOF
+if { (eval echo configure:90146: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
   
-  case ext/simplexml in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/simplexml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/simplexml/"; ac_bdir="ext/simplexml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
+  ac_cv_crypt_SHA512=yes
 
-  old_IFS=$IFS
-  for ac_src in simplexml.c sxe.c; do
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+  ac_cv_crypt_SHA512=no
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+fi
+rm -fr conftest*
+fi
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+fi
 
+echo "$ac_t""$ac_cv_crypt_SHA512" 1>&6
 
-    EXT_STATIC="$EXT_STATIC simplexml"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC simplexml"
-    fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_SIMPLEXML_SHARED=yes
-      
-  case ext/simplexml in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/simplexml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/simplexml/"; ac_bdir="ext/simplexml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+echo $ac_n "checking for SHA256 crypt""... $ac_c" 1>&6
+echo "configure:90167: checking for SHA256 crypt" >&5
+if eval "test \"`echo '$''{'ac_cv_crypt_SHA256'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
   
+if test "$cross_compiling" = yes; then
   
+  ac_cv_crypt_SHA256=no
 
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
-
+else
+  cat > conftest.$ac_ext <<EOF
+#line 90178 "configure"
+#include "confdefs.h"
 
-  old_IFS=$IFS
-  for ac_src in simplexml.c sxe.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_simplexml="$shared_objects_simplexml $ac_bdir$ac_obj.lo"
+#if HAVE_UNISTD_H
+#include <unistd.h>
+#endif
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+#if HAVE_CRYPT_H
+#include <crypt.h>
+#endif
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+main() {
+#if HAVE_CRYPT
+    char salt[30], answer[80];
+    salt[0]='$'; salt[1]='5'; salt[2]='$'; salt[3]='$'; salt[4]='s'; salt[5]='a'; salt[6]='l'; salt[7]='t';  salt[8]='s'; salt[9]='t'; salt[10]='r'; salt[11]='i'; salt[12]='n'; salt[13]='g'; salt[14]='\0';    
+    strcat(salt,"");
+    strcpy(answer, salt);
+    strcpy(&answer[29], "$5$saltstring$5B8vYYiY.CVt1RlTTf8KbXBH3hsxY/GNooZaBBGWEc5");
+    exit (strcmp((char *)crypt("foo",salt),answer));
+#else
+	exit(0);
+#endif
+}
 EOF
-  done
-
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsimplexml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) $(PHPSIMPLEXML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsimplexml.so '$ext_builddir'/phpsimplexml.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSIMPLEXML, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) $(PHPSIMPLEXML_SHARED_LIBADD)'
-      ;;
-  esac
+if { (eval echo configure:90202: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+  ac_cv_crypt_SHA256=yes
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsimplexml.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsimplexml.$suffix"
-  fi
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_simplexml"
+  ac_cv_crypt_SHA256=no
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpsimplexml.$suffix: $ext_builddir/phpsimplexml.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsimplexml.$suffix \$(phplibdir)
+fi
+rm -fr conftest*
+fi
 
-$ext_builddir/phpsimplexml.$suffix: \$(shared_objects_simplexml) \$(PHPSIMPLEXML_SHARED_DEPENDENCIES)
-	$link_cmd
+fi
 
-EOF
+echo "$ac_t""$ac_cv_crypt_SHA256" 1>&6
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/simplexml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) $(SIMPLEXML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/simplexml.so '$ext_builddir'/simplexml.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SIMPLEXML, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) $(SIMPLEXML_SHARED_LIBADD)'
-      ;;
-  esac
+if test "$ac_cv_crypt_blowfish" = "no" || test "$ac_cv_crypt_des" = "no" || test "$ac_cv_crypt_ext_des" = "no" || test "x$php_crypt_r" = "x0"; then
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/simplexml.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/simplexml.$suffix"
-  fi
+        echo $ac_n "checking whether the compiler supports __alignof__""... $ac_c" 1>&6
+echo "configure:90226: checking whether the compiler supports __alignof__" >&5
+if eval "test \"`echo '$''{'ac_cv_alignof_exists'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_simplexml"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/simplexml.$suffix: $ext_builddir/simplexml.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/simplexml.$suffix \$(phplibdir)
+  cat > conftest.$ac_ext <<EOF
+#line 90232 "configure"
+#include "confdefs.h"
 
-$ext_builddir/simplexml.$suffix: \$(shared_objects_simplexml) \$(SIMPLEXML_SHARED_DEPENDENCIES)
-	$link_cmd
+  
+int main() {
 
+    int align = __alignof__(int);
+  
+; return 0; }
 EOF
+if { (eval echo configure:90242: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
+  
+    ac_cv_alignof_exists=yes
+  
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  
+    ac_cv_alignof_exists=no
+  
+fi
+rm -f conftest*
+fi
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_SIMPLEXML 1
+echo "$ac_t""$ac_cv_alignof_exists" 1>&6
+  if test "$ac_cv_alignof_exists" = "yes"; then
+    cat >> confdefs.h <<\EOF
+#define HAVE_ALIGNOF 1
 EOF
 
-    fi
   fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_SIMPLEXML_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
+        echo $ac_n "checking whether the compiler supports aligned attribute""... $ac_c" 1>&6
+echo "configure:90267: checking whether the compiler supports aligned attribute" >&5
+if eval "test \"`echo '$''{'ac_cv_attribute_aligned'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
   
-  case ext/simplexml in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/simplexml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/simplexml/"; ac_bdir="ext/simplexml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+  cat > conftest.$ac_ext <<EOF
+#line 90273 "configure"
+#include "confdefs.h"
+
+  
+int main() {
+
+    unsigned char test[32] __attribute__ ((__aligned__ (__alignof__ (int))));
   
+; return 0; }
+EOF
+if { (eval echo configure:90283: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
+  
+    ac_cv_attribute_aligned=yes
+  
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  
+    ac_cv_attribute_aligned=no
   
+fi
+rm -f conftest*
+fi
+
+echo "$ac_t""$ac_cv_attribute_aligned" 1>&6
+  if test "$ac_cv_attribute_aligned" = "yes"; then
+    cat >> confdefs.h <<\EOF
+#define HAVE_ATTRIBUTE_ALIGNED 1
+EOF
+
+  fi
+    
+
+  cat >> confdefs.h <<EOF
+#define PHP_USE_PHP_CRYPT_R 1
+EOF
+
+  cat >> confdefs.h <<EOF
+#define PHP_STD_DES_CRYPT 1
+EOF
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+  cat >> confdefs.h <<EOF
+#define PHP_BLOWFISH_CRYPT 1
+EOF
 
+  cat >> confdefs.h <<EOF
+#define PHP_EXT_DES_CRYPT 1
+EOF
 
-  old_IFS=$IFS
-  for ac_src in simplexml.c sxe.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+  cat >> confdefs.h <<EOF
+#define PHP_MD5_CRYPT 1
+EOF
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+  cat >> confdefs.h <<EOF
+#define PHP_SHA512_CRYPT 1
+EOF
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+  cat >> confdefs.h <<EOF
+#define PHP_SHA256_CRYPT 1
 EOF
-  done
 
 
-        EXT_STATIC="$EXT_STATIC simplexml"
-        ;;
-      *)
-        
   
-  case ext/simplexml in
+  
+  case ext/standard in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/simplexml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/simplexml/"; ac_bdir="ext/simplexml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -83235,20 +90353,20 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in simplexml.c sxe.c; do
+  for ac_src in crypt_freesec.c crypt_blowfish.c crypt_sha512.c crypt_sha256.c php_crypt_r.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
       case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
       esac
 
     cat >>Makefile.objects<<EOF
@@ -83258,850 +90376,572 @@ EOF
   done
 
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC simplexml"
+else
+  if test "$ac_cv_crypt_des" = "yes"; then
+    ac_result=1
+    ac_crypt_des=1
+  else
+    ac_result=0
+    ac_crypt_des=0
   fi
-  
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
-
+  cat >> confdefs.h <<EOF
+#define PHP_STD_DES_CRYPT $ac_result
+EOF
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=simplexml
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
+  if test "$ac_cv_crypt_blowfish" = "yes"; then
+    ac_result=1
+    ac_crypt_blowfish=1
+  else
+    ac_result=0
+    ac_crypt_blowfish=0
   fi
+  cat >> confdefs.h <<EOF
+#define PHP_BLOWFISH_CRYPT $ac_result
+EOF
 
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST SIMPLEXML_SHARED_LIBADD"
 
-  
-    else
-      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
-    fi
-else 
-    { echo "configure: error: xml2-config not found. Please check your libxml2 installation." 1>&2; exit 1; }
-  
+  if test "$ac_cv_crypt_ext_des" = "yes"; then
+    ac_result=1
+    ac_crypt_edes=1
+  else
+    ac_result=0
+    ac_crypt_edes=0
   fi
+  cat >> confdefs.h <<EOF
+#define PHP_EXT_DES_CRYPT $ac_result
+EOF
 
-  
-  am_i_shared=$PHP_SIMPLEXML_SHARED
-  is_it_shared=$PHP_LIBXML_SHARED
-  is_it_enabled=$PHP_LIBXML
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension simplexml to build statically, but it
-depends on extension libxml, which you've configured to build shared.
-You either need to build simplexml shared or build libxml statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension simplexml, which depends on extension libxml,
-but you've either not enabled libxml, or have disabled it.
-" 1>&2; exit 1; }
+
+  if test "$ac_cv_crypt_md5" = "yes"; then
+    ac_result=1
+    ac_crypt_md5=1
+  else
+    ac_result=0
+    ac_crypt_md5=0
   fi
+  cat >> confdefs.h <<EOF
+#define PHP_MD5_CRYPT $ac_result
+EOF
   
   
-  am_i_shared=$PHP_SIMPLEXML_SHARED
-  is_it_shared=$PHP_SPL_SHARED
-  is_it_enabled=$PHP_SPL
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension simplexml to build statically, but it
-depends on extension spl, which you've configured to build shared.
-You either need to build simplexml shared or build spl statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension simplexml, which depends on extension spl,
-but you've either not enabled spl, or have disabled it.
-" 1>&2; exit 1; }
+  if test "$ac_cv_crypt_sha512" = "yes"; then
+    ac_result=1
+    ac_crypt_sha512=1
+  else
+    ac_result=0
+    ac_crypt_sha512=0
   fi
-  
-fi
+  cat >> confdefs.h <<EOF
+#define PHP_SHA512_CRYPT $ac_result
+EOF
 
 
+  if test "$ac_cv_crypt_sha256" = "yes"; then
+    ac_result=1
+    ac_crypt_sha256=1
+  else
+    ac_result=0
+    ac_crypt_sha256=0
+  fi
+  cat >> confdefs.h <<EOF
+#define PHP_SHA256_CRYPT $ac_result
+EOF
 
-php_with_snmp=no
 
-echo $ac_n "checking for SNMP support""... $ac_c" 1>&6
-echo "configure:83336: checking for SNMP support" >&5
-# Check whether --with-snmp or --without-snmp was given.
-if test "${with_snmp+set}" = set; then
-  withval="$with_snmp"
-  PHP_SNMP=$withval
-else
-  
-  PHP_SNMP=no
-  test "$PHP_ENABLE_ALL" && PHP_SNMP=$PHP_ENABLE_ALL
+  cat >> confdefs.h <<EOF
+#define PHP_USE_PHP_CRYPT_R 0
+EOF
 
 fi
 
+for ac_func in getcwd getwd asinh acosh atanh log1p hypot glob strfmon nice fpclass isinf isnan mempcpy strpncpy
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:90462: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 90467 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
 
+int main() {
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_SNMP in
-shared,*)
-  PHP_SNMP=`echo "$PHP_SNMP"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_SNMP=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-
-php_with_openssl_dir=no
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
 
-echo $ac_n "checking OpenSSL dir for SNMP""... $ac_c" 1>&6
-echo "configure:83380: checking OpenSSL dir for SNMP" >&5
-# Check whether --with-openssl-dir or --without-openssl-dir was given.
-if test "${with_openssl_dir+set}" = set; then
-  withval="$with_openssl_dir"
-  PHP_OPENSSL_DIR=$withval
+; return 0; }
+EOF
+if { (eval echo configure:90490: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
 else
-  
-  PHP_OPENSSL_DIR=no
-  
-
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=no"
+fi
+rm -f conftest*
 fi
 
-
-ext_output=$PHP_OPENSSL_DIR
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-
-php_enable_ucd_snmp_hack=no
-
-echo $ac_n "checking whether to enable UCD SNMP hack""... $ac_c" 1>&6
-echo "configure:83403: checking whether to enable UCD SNMP hack" >&5
-# Check whether --enable-ucd-snmp-hack or --disable-ucd-snmp-hack was given.
-if test "${enable_ucd_snmp_hack+set}" = set; then
-  enableval="$enable_ucd_snmp_hack"
-  PHP_UCD_SNMP_HACK=$enableval
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
+EOF
+ 
 else
-  
-  PHP_UCD_SNMP_HACK=no
-  
-
+  echo "$ac_t""no" 1>&6
 fi
+done
 
-
-ext_output=$PHP_UCD_SNMP_HACK
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test "$PHP_SNMP" != "no"; then
-
-        if test "$PHP_SNMP" = "yes"; then
-    # Extract the first word of "net-snmp-config", so it can be a program name with args.
-set dummy net-snmp-config; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:83428: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_path_SNMP_CONFIG'+set}'`\" = set"; then
+echo $ac_n "checking for working fnmatch""... $ac_c" 1>&6
+echo "configure:90515: checking for working fnmatch" >&5
+if eval "test \"`echo '$''{'ac_cv_func_fnmatch_works'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  case "$SNMP_CONFIG" in
-  /*)
-  ac_cv_path_SNMP_CONFIG="$SNMP_CONFIG" # Let the user override the test with a path.
-  ;;
-  ?:/*)			 
-  ac_cv_path_SNMP_CONFIG="$SNMP_CONFIG" # Let the user override the test with a dos path.
-  ;;
-  *)
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="/usr/local/bin:$PATH"
-  for ac_dir in $ac_dummy; do 
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_path_SNMP_CONFIG="$ac_dir/$ac_word"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
-  ;;
-esac
-fi
-SNMP_CONFIG="$ac_cv_path_SNMP_CONFIG"
-if test -n "$SNMP_CONFIG"; then
-  echo "$ac_t""$SNMP_CONFIG" 1>&6
+  # Some versions of Solaris or SCO have a broken fnmatch function.
+# So we run a test program.  If we are cross-compiling, take no chance.
+# Thanks to John Oleynick and Franc,ois Pinard for this test.
+if test "$cross_compiling" = yes; then
+  ac_cv_func_fnmatch_works=no
 else
-  echo "$ac_t""no" 1>&6
+  cat > conftest.$ac_ext <<EOF
+#line 90526 "configure"
+#include "confdefs.h"
+main() { exit (fnmatch ("a*", "abc", 0) != 0); }
+EOF
+if { (eval echo configure:90530: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_func_fnmatch_works=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_func_fnmatch_works=no
+fi
+rm -fr conftest*
 fi
 
-  else
-    SNMP_CONFIG="$PHP_SNMP/bin/net-snmp-config"
-  fi
-
-  if test -x "$SNMP_CONFIG"; then
-    SNMP_LIBS=`$SNMP_CONFIG --netsnmp-libs`
-    SNMP_LIBS="$SNMP_LIBS `$SNMP_CONFIG --external-libs`"
-    SNMP_PREFIX=`$SNMP_CONFIG --prefix`
-
-    if test -n "$SNMP_LIBS" && test -n "$SNMP_PREFIX"; then
-      
-  if test "${SNMP_PREFIX}/include" != "/usr/include"; then
-    
-  if test -z "${SNMP_PREFIX}/include" || echo "${SNMP_PREFIX}/include" | grep '^/' >/dev/null ; then
-    ai_p=${SNMP_PREFIX}/include
-  else
-    
-    ep_dir="`echo $SNMP_PREFIX/include|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"${SNMP_PREFIX}/include\"`"
-  fi
-
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
-
-      
-  for ac_i in $SNMP_LIBS; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        SNMP_SHARED_LIBADD="-L$ai_p $SNMP_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && SNMP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SNMP_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-      fi
-    
-  fi
-
-    ;;
-    esac
-  done
+fi
 
-      cat >> confdefs.h <<\EOF
-#define HAVE_NET_SNMP 1
+echo "$ac_t""$ac_cv_func_fnmatch_works" 1>&6
+if test $ac_cv_func_fnmatch_works = yes; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_FNMATCH 1
 EOF
 
-      SNMP_LIBNAME=netsnmp
-    else
-      { echo "configure: error: Could not find the required paths. Please check your net-snmp installation." 1>&2; exit 1; }
-    fi
-  else 
-
-            
-    if test "$PHP_SNMP" = "yes"; then
-      for i in /usr/include /usr/local/include; do
-        test -f $i/snmp.h                       && SNMP_INCDIR=$i
-        test -f $i/ucd-snmp/snmp.h              && SNMP_INCDIR=$i/ucd-snmp
-        test -f $i/snmp/snmp.h                  && SNMP_INCDIR=$i/snmp
-        test -f $i/snmp/include/ucd-snmp/snmp.h && SNMP_INCDIR=$i/snmp/include/ucd-snmp
-      done
-      for i in /usr/$PHP_LIBDIR /usr/snmp/lib /usr/local/$PHP_LIBDIR /usr/local/lib /usr/local/snmp/lib; do
-        test -f $i/libsnmp.a || test -f $i/libsnmp.$SHLIB_SUFFIX_NAME && SNMP_LIBDIR=$i
-      done
-    else
-      SNMP_INCDIR=$PHP_SNMP/include
-      test -d $PHP_SNMP/include/ucd-snmp && SNMP_INCDIR=$PHP_SNMP/include/ucd-snmp
-      SNMP_LIBDIR=$PHP_SNMP/lib
-    fi
-
-    if test -z "$SNMP_INCDIR"; then
-      { echo "configure: error: snmp.h not found. Check your SNMP installation." 1>&2; exit 1; }
-    elif test -z "$SNMP_LIBDIR"; then
-      { echo "configure: error: libsnmp not found. Check your SNMP installation." 1>&2; exit 1; }
-    fi
+fi
+	
 
-    old_CPPFLAGS=$CPPFLAGS
-    CPPFLAGS=-I$SNMP_INCDIR
-    for ac_hdr in default_store.h
+
+for ac_func in fork CreateProcess
 do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:83629: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:90557: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 83634 "configure"
+#line 90562 "configure"
 #include "confdefs.h"
-#include <$ac_hdr>
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
+
+; return 0; }
 EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:83639: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
+if { (eval echo configure:90585: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
+  eval "ac_cv_func_$ac_func=yes"
 else
-  echo "$ac_err" >&5
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
+  eval "ac_cv_func_$ac_func=no"
 fi
 rm -f conftest*
 fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
   cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
+#define $ac_tr_func 1
 EOF
  
+  php_can_support_proc_open=yes
+  break
+
 else
   echo "$ac_t""no" 1>&6
+php_can_support_proc_open=no
+
 fi
 done
 
-    if test "$ac_cv_header_default_store_h" = "yes"; then
-      echo $ac_n "checking for OpenSSL support in SNMP libraries""... $ac_c" 1>&6
-echo "configure:83667: checking for OpenSSL support in SNMP libraries" >&5
-      cat > conftest.$ac_ext <<EOF
-#line 83669 "configure"
+echo $ac_n "checking if your OS can spawn processes with inherited handles""... $ac_c" 1>&6
+echo "configure:90615: checking if your OS can spawn processes with inherited handles" >&5
+if test "$php_can_support_proc_open" = "yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define PHP_CAN_SUPPORT_PROC_OPEN 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+if test "$PHP_SAPI" = "cgi" || test "$PHP_SAPI" = "cli" || test "$PHP_SAPI" = "embed"; then
+  cat >> confdefs.h <<\EOF
+#define ENABLE_CHROOT_FUNC 1
+EOF
+
+fi
+
+
+  unset ac_cv_func_res_nsearch
+  unset ac_cv_func___res_nsearch
+  unset found
+  
+  echo $ac_n "checking for res_nsearch""... $ac_c" 1>&6
+echo "configure:90639: checking for res_nsearch" >&5
+if eval "test \"`echo '$''{'ac_cv_func_res_nsearch'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 90644 "configure"
 #include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char res_nsearch(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char res_nsearch();
 
-#include <ucd-snmp-config.h>
-#if USE_OPENSSL
-        yes
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_res_nsearch) || defined (__stub___res_nsearch)
+choke me
+#else
+res_nsearch();
 #endif
-      
+
+; return 0; }
 EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "yes" >/dev/null 2>&1; then
+if { (eval echo configure:90667: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  
-        SNMP_SSL=yes
-      
+  eval "ac_cv_func_res_nsearch=yes"
 else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
   rm -rf conftest*
-  
-        SNMP_SSL=no
-      
+  eval "ac_cv_func_res_nsearch=no"
 fi
 rm -f conftest*
+fi
 
-    fi
-    CPPFLAGS=$old_CPPFLAGS
-    echo "$ac_t""$SNMP_SSL" 1>&6
-  
-    if test "$SNMP_SSL" = "yes"; then
-      if test "$PHP_OPENSSL_DIR" != "no"; then
-        PHP_OPENSSL=$PHP_OPENSSL_DIR
-      fi
-      
-      if test "$PHP_OPENSSL" = "no"; then
-        { echo "configure: error: The UCD-SNMP in this system is built with SSL support. 
-
-        Add --with-openssl-dir=DIR to your configure line." 1>&2; exit 1; }
-      else
-        
-  found_openssl=no
-  unset OPENSSL_INCDIR
-  unset OPENSSL_LIBDIR
+if eval "test \"`echo '$ac_cv_func_'res_nsearch`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+ echo $ac_n "checking for __res_nsearch""... $ac_c" 1>&6
+echo "configure:90685: checking for __res_nsearch" >&5
+if eval "test \"`echo '$''{'ac_cv_func___res_nsearch'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 90690 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char __res_nsearch(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __res_nsearch();
 
-    test -z "$PHP_OPENSSL" && PHP_OPENSSL=no
-  test -z "$PHP_IMAP_SSL" && PHP_IMAP_SSL=no
+int main() {
 
-    if test "$PHP_OPENSSL" != "no"; then
-    PHP_OPENSSL_DIR=$PHP_OPENSSL
-  elif test "$PHP_IMAP_SSL" != "no"; then
-    PHP_OPENSSL_DIR=$PHP_IMAP_SSL
-  fi
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub___res_nsearch) || defined (__stub_____res_nsearch)
+choke me
+#else
+__res_nsearch();
+#endif
 
-    if test -z "$PKG_CONFIG"; then
-    # Extract the first word of "pkg-config", so it can be a program name with args.
-set dummy pkg-config; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:83724: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+; return 0; }
+EOF
+if { (eval echo configure:90713: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func___res_nsearch=yes"
 else
-  case "$PKG_CONFIG" in
-  /*)
-  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
-  ;;
-  ?:/*)			 
-  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
-  ;;
-  *)
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do 
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
-  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
-  ;;
-esac
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func___res_nsearch=no"
 fi
-PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
-if test -n "$PKG_CONFIG"; then
-  echo "$ac_t""$PKG_CONFIG" 1>&6
+rm -f conftest*
+fi
+
+if eval "test \"`echo '$ac_cv_func_'__res_nsearch`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
 else
   echo "$ac_t""no" 1>&6
+found=no
+fi
+ 
 fi
 
-  fi
-
-    if test "$PHP_OPENSSL_DIR" = "yes" && test -x "$PKG_CONFIG" && $PKG_CONFIG --exists openssl; then
-    if $PKG_CONFIG --atleast-version=0.9.6 openssl; then
-      found_openssl=yes
-      OPENSSL_LIBS=`$PKG_CONFIG --libs openssl`
-      OPENSSL_INCS=`$PKG_CONFIG --cflags-only-I openssl`
-      OPENSSL_INCDIR=`$PKG_CONFIG --variable=includedir openssl`
-    else
-      { echo "configure: error: OpenSSL version 0.9.6 or greater required." 1>&2; exit 1; }
-    fi
-
-    if test -n "$OPENSSL_LIBS" && test -n "$OPENSSL_INCS"; then
-      
-  for ac_i in $OPENSSL_LIBS; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        SNMP_SHARED_LIBADD="-L$ai_p $SNMP_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && SNMP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SNMP_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-      fi
-    
-  fi
-
-    ;;
-    esac
-  done
 
-      
-  for ac_i in $OPENSSL_INCS; do
-    case $ac_i in
-    -I*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/include"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
+  case $found in
+  yes) 
+    cat >> confdefs.h <<\EOF
+#define HAVE_RES_NSEARCH 1
+EOF
 
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+    ac_cv_func_res_nsearch=yes
+  ;;
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
-
-    ;;
-    esac
-  done
-
-    fi
-  fi
-
-    if test "$found_openssl" = "no"; then
+    *) 
   
-    if test "$PHP_OPENSSL_DIR" = "yes"; then
-      PHP_OPENSSL_DIR="/usr/local/ssl /usr/local /usr /usr/local/openssl"
-    fi
-
-    for i in $PHP_OPENSSL_DIR; do
-      if test -r $i/include/openssl/evp.h; then
-        OPENSSL_INCDIR=$i/include
-      fi
-      if test -r $i/$PHP_LIBDIR/libssl.a -o -r $i/$PHP_LIBDIR/libssl.$SHLIB_SUFFIX_NAME; then
-        OPENSSL_LIBDIR=$i/$PHP_LIBDIR
-      fi
-      test -n "$OPENSSL_INCDIR" && test -n "$OPENSSL_LIBDIR" && break
-    done
+  unset ac_cv_lib_resolv_res_nsearch
+  unset ac_cv_lib_resolv___res_nsearch
+  unset found
+  echo $ac_n "checking for res_nsearch in -lresolv""... $ac_c" 1>&6
+echo "configure:90751: checking for res_nsearch in -lresolv" >&5
+ac_lib_var=`echo resolv'_'res_nsearch | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lresolv  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 90759 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char res_nsearch();
 
-    if test -z "$OPENSSL_INCDIR"; then
-      { echo "configure: error: Cannot find OpenSSL's <evp.h>" 1>&2; exit 1; }
-    fi
+int main() {
+res_nsearch()
+; return 0; }
+EOF
+if { (eval echo configure:90770: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-    if test -z "$OPENSSL_LIBDIR"; then
-      { echo "configure: error: Cannot find OpenSSL's libraries" 1>&2; exit 1; }
-    fi
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-    old_CPPFLAGS=$CPPFLAGS
-    CPPFLAGS=-I$OPENSSL_INCDIR
-    echo $ac_n "checking for OpenSSL version""... $ac_c" 1>&6
-echo "configure:83929: checking for OpenSSL version" >&5
-    cat > conftest.$ac_ext <<EOF
-#line 83931 "configure"
+    echo $ac_n "checking for __res_nsearch in -lresolv""... $ac_c" 1>&6
+echo "configure:90790: checking for __res_nsearch in -lresolv" >&5
+ac_lib_var=`echo resolv'_'__res_nsearch | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lresolv  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 90798 "configure"
 #include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __res_nsearch();
 
-#include <openssl/opensslv.h>
-#if OPENSSL_VERSION_NUMBER >= 0x0090600fL
-  yes
-#endif
-    
+int main() {
+__res_nsearch()
+; return 0; }
 EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "yes" >/dev/null 2>&1; then
+if { (eval echo configure:90809: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  
-      echo "$ac_t"">= 0.9.6" 1>&6
-    
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
   rm -rf conftest*
-  
-      { echo "configure: error: OpenSSL version 0.9.6 or greater required." 1>&2; exit 1; }
-    
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
 rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-    CPPFLAGS=$old_CPPFLAGS
-
-    
-  if test "$OPENSSL_INCDIR" != "/usr/include"; then
-    
-  if test -z "$OPENSSL_INCDIR" || echo "$OPENSSL_INCDIR" | grep '^/' >/dev/null ; then
-    ai_p=$OPENSSL_INCDIR
-  else
-    
-    ep_dir="`echo $OPENSSL_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$OPENSSL_INCDIR\"`"
-  fi
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
 
-    
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
+fi
+
+
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lresolv"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 90841 "configure"
+#include "confdefs.h"
+main() { return (0); }
+EOF
+if { (eval echo configure:90845: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
 
+    LIBS=$ac_libs
   fi
 
-  
+  if test "$found" = "yes"; then
     
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-      -L$OPENSSL_LIBDIR
-    "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
   
-  case $ac_ii in
+  case resolv in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="$LIBS -l$ac_ii" 
+      LIBS="-lresolv $LIBS" 
    ;;
   esac
 
 
-    fi
-   ;;
-  esac
+    cat >> confdefs.h <<\EOF
+#define HAVE_RES_NSEARCH 1
+EOF
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBRESOLV 1
+EOF
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+    ac_cv_func_res_nsearch=yes
   else
     
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  fi
-
+  unset ac_cv_lib_bind_res_nsearch
+  unset ac_cv_lib_bind___res_nsearch
+  unset found
+  echo $ac_n "checking for res_nsearch in -lbind""... $ac_c" 1>&6
+echo "configure:90887: checking for res_nsearch in -lbind" >&5
+ac_lib_var=`echo bind'_'res_nsearch | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lbind  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 90895 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char res_nsearch();
 
-      fi
-    
-  fi
+int main() {
+res_nsearch()
+; return 0; }
+EOF
+if { (eval echo configure:90906: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-    ;;
-    esac
-  done
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-  echo $ac_n "checking for CRYPTO_free in -lcrypto""... $ac_c" 1>&6
-echo "configure:84086: checking for CRYPTO_free in -lcrypto" >&5
-ac_lib_var=`echo crypto'_'CRYPTO_free | sed 'y%./+-%__p_%'`
+    echo $ac_n "checking for __res_nsearch in -lbind""... $ac_c" 1>&6
+echo "configure:90926: checking for __res_nsearch in -lbind" >&5
+ac_lib_var=`echo bind'_'__res_nsearch | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lcrypto  $LIBS"
+LIBS="-lbind  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 84094 "configure"
+#line 90934 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char CRYPTO_free();
+char __res_nsearch();
 
 int main() {
-CRYPTO_free()
+__res_nsearch()
 ; return 0; }
 EOF
-if { (eval echo configure:84105: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:90945: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -84116,168 +90956,352 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
+
   
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
+fi
+
+
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lbind"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 90977 "configure"
+#include "confdefs.h"
+main() { return (0); }
+EOF
+if { (eval echo configure:90981: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
+
+    LIBS=$ac_libs
+  fi
+
+  if test "$found" = "yes"; then
     
-      
-  
-  case crypto in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SNMP_SHARED_LIBADD="-lcrypto $SNMP_SHARED_LIBADD" 
-    else
-      
   
-  case crypto in
+  case bind in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lcrypto $LIBS" 
+      LIBS="-lbind $LIBS" 
    ;;
   esac
 
 
-    fi
-   ;;
-  esac
+    cat >> confdefs.h <<\EOF
+#define HAVE_RES_NSEARCH 1
+EOF
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBBIND 1
+EOF
 
+    ac_cv_func_res_nsearch=yes
+  else
     
   
+  unset ac_cv_lib_socket_res_nsearch
+  unset ac_cv_lib_socket___res_nsearch
+  unset found
+  echo $ac_n "checking for res_nsearch in -lsocket""... $ac_c" 1>&6
+echo "configure:91023: checking for res_nsearch in -lsocket" >&5
+ac_lib_var=`echo socket'_'res_nsearch | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lsocket  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 91031 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char res_nsearch();
+
+int main() {
+res_nsearch()
+; return 0; }
+EOF
+if { (eval echo configure:91042: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
 else
   echo "$ac_t""no" 1>&6
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_crypto_CRYPTO_free
-    
-      { echo "configure: error: libcrypto not found!" 1>&2; exit 1; }
-    
-  
+    echo $ac_n "checking for __res_nsearch in -lsocket""... $ac_c" 1>&6
+echo "configure:91062: checking for __res_nsearch in -lsocket" >&5
+ac_lib_var=`echo socket'_'__res_nsearch | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lsocket  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 91070 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __res_nsearch();
+
+int main() {
+__res_nsearch()
+; return 0; }
+EOF
+if { (eval echo configure:91081: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
 
-    old_LIBS=$LIBS
-    LIBS="$LIBS -lcrypto"
-    
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-      -L$OPENSSL_LIBDIR
-    "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+fi
+
+
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lsocket"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 91113 "configure"
+#include "confdefs.h"
+main() { return (0); }
+EOF
+if { (eval echo configure:91117: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
+
+    LIBS=$ac_libs
   fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
+  if test "$found" = "yes"; then
+    
   
-  case $ac_ii in
+  case socket in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="$LIBS -l$ac_ii" 
+      LIBS="-lsocket $LIBS" 
    ;;
   esac
 
 
-    fi
-   ;;
-  esac
+    cat >> confdefs.h <<\EOF
+#define HAVE_RES_NSEARCH 1
+EOF
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBSOCKET 1
+EOF
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+    ac_cv_func_res_nsearch=yes
   else
     
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  :
+
   fi
+  
 
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
+  fi
   
+
+  fi
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+ ;;
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  esac
+
+
+  unset ac_cv_func_dns_search
+  unset ac_cv_func___dns_search
+  unset found
   
-  fi
+  echo $ac_n "checking for dns_search""... $ac_c" 1>&6
+echo "configure:91174: checking for dns_search" >&5
+if eval "test \"`echo '$''{'ac_cv_func_dns_search'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 91179 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char dns_search(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char dns_search();
 
+int main() {
 
-      fi
-    
-  fi
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_dns_search) || defined (__stub___dns_search)
+choke me
+#else
+dns_search();
+#endif
 
-    ;;
-    esac
-  done
+; return 0; }
+EOF
+if { (eval echo configure:91202: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_dns_search=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_dns_search=no"
+fi
+rm -f conftest*
+fi
 
-  echo $ac_n "checking for SSL_CTX_set_ssl_version in -lssl""... $ac_c" 1>&6
-echo "configure:84262: checking for SSL_CTX_set_ssl_version in -lssl" >&5
-ac_lib_var=`echo ssl'_'SSL_CTX_set_ssl_version | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$ac_cv_func_'dns_search`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+ echo $ac_n "checking for __dns_search""... $ac_c" 1>&6
+echo "configure:91220: checking for __dns_search" >&5
+if eval "test \"`echo '$''{'ac_cv_func___dns_search'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 91225 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char __dns_search(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __dns_search();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub___dns_search) || defined (__stub_____dns_search)
+choke me
+#else
+__dns_search();
+#endif
+
+; return 0; }
+EOF
+if { (eval echo configure:91248: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func___dns_search=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func___dns_search=no"
+fi
+rm -f conftest*
+fi
+
+if eval "test \"`echo '$ac_cv_func_'__dns_search`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
+ 
+fi
+
+
+  case $found in
+  yes) 
+    cat >> confdefs.h <<\EOF
+#define HAVE_DNS_SEARCH 1
+EOF
+
+    ac_cv_func_dns_search=yes
+  ;;
+  
+    *) 
+  
+  unset ac_cv_lib_resolv_dns_search
+  unset ac_cv_lib_resolv___dns_search
+  unset found
+  echo $ac_n "checking for dns_search in -lresolv""... $ac_c" 1>&6
+echo "configure:91286: checking for dns_search in -lresolv" >&5
+ac_lib_var=`echo resolv'_'dns_search | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lssl  $LIBS"
+LIBS="-lresolv  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 84270 "configure"
+#line 91294 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char SSL_CTX_set_ssl_version();
+char dns_search();
 
 int main() {
-SSL_CTX_set_ssl_version()
+dns_search()
 ; return 0; }
 EOF
-if { (eval echo configure:84281: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:91305: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -84292,124 +91316,31 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-      found_openssl=yes
-    
-  
+  found=yes
 else
   echo "$ac_t""no" 1>&6
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_ssl_SSL_CTX_set_ssl_version
-    
-      { echo "configure: error: libssl not found!" 1>&2; exit 1; }
-    
-  
-fi
-
-    LIBS=$old_LIBS
-    
-  
-  case ssl in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SNMP_SHARED_LIBADD="-lssl $SNMP_SHARED_LIBADD" 
-    else
-      
-  
-  case ssl in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lssl $LIBS" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-
-    
-  if test "$OPENSSL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$OPENSSL_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$OPENSSL_LIBDIR" || echo "$OPENSSL_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$OPENSSL_LIBDIR
-  else
-    
-    ep_dir="`echo $OPENSSL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$OPENSSL_LIBDIR\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        SNMP_SHARED_LIBADD="-L$ai_p $SNMP_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && SNMP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SNMP_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-      fi
-    
-  fi
-
-  fi
-
-  if test "$found_openssl" = "yes"; then
-    OPENSSL_INCDIR_OPT=-I$OPENSSL_INCDIR
-  
-
-:
-else 
-          { echo "configure: error: SNMP: OpenSSL check failed. Please check config.log for more information." 1>&2; exit 1; }
-        
-  fi
-
-      fi
-    fi
-
-    echo $ac_n "checking for kstat_read in -lkstat""... $ac_c" 1>&6
-echo "configure:84394: checking for kstat_read in -lkstat" >&5
-ac_lib_var=`echo kstat'_'kstat_read | sed 'y%./+-%__p_%'`
+    echo $ac_n "checking for __dns_search in -lresolv""... $ac_c" 1>&6
+echo "configure:91325: checking for __dns_search in -lresolv" >&5
+ac_lib_var=`echo resolv'_'__dns_search | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lkstat  $LIBS"
+LIBS="-lresolv  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 84402 "configure"
+#line 91333 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char kstat_read();
+char __dns_search();
 
 int main() {
-kstat_read()
+__dns_search()
 ; return 0; }
 EOF
-if { (eval echo configure:84413: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:91344: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -84424,282 +91355,89 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-   
-  
-  case kstat in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SNMP_SHARED_LIBADD="-lkstat $SNMP_SHARED_LIBADD" 
-    else
-      
-  
-  case kstat in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lkstat $LIBS" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
- 
+  found=yes
 else
   echo "$ac_t""no" 1>&6
+found=no
 fi
 
-    
-  if test "$SNMP_INCDIR" != "/usr/include"; then
-    
-  if test -z "$SNMP_INCDIR" || echo "$SNMP_INCDIR" | grep '^/' >/dev/null ; then
-    ai_p=$SNMP_INCDIR
-  else
-    
-    ep_dir="`echo $SNMP_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$SNMP_INCDIR\"`"
-  fi
-
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
-
-    
-
-  if test "$ext_shared" = "yes"; then
-    SNMP_SHARED_LIBADD="-lsnmp $SNMP_SHARED_LIBADD"
-    if test -n "$SNMP_LIBDIR"; then
-      
-  if test "$SNMP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SNMP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$SNMP_LIBDIR" || echo "$SNMP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$SNMP_LIBDIR
-  else
-    
-    ep_dir="`echo $SNMP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$SNMP_LIBDIR\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        SNMP_SHARED_LIBADD="-L$ai_p $SNMP_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && SNMP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SNMP_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-      fi
-    
-  fi
-
-    fi
-  else
-    
-
-  if test -n "$SNMP_LIBDIR"; then
-    
-  if test "$SNMP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SNMP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$SNMP_LIBDIR" || echo "$SNMP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$SNMP_LIBDIR
-  else
-    
-    ep_dir="`echo $SNMP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$SNMP_LIBDIR\"`"
-  fi
-
-    
-      
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-    
-  fi
-
-  fi
   
-  
-  case snmp in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsnmp $LIBS" 
-   ;;
-  esac
-
-
-
+fi
 
-  fi
 
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lresolv"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 91376 "configure"
+#include "confdefs.h"
+main() { return (0); }
+EOF
+if { (eval echo configure:91380: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
 
-    SNMP_LIBNAME=snmp
+    LIBS=$ac_libs
   fi
 
+  if test "$found" = "yes"; then
     
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-    $SNMP_SHARED_LIBADD
-  "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
   
-  case $ac_ii in
+  case resolv in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="$LIBS -l$ac_ii" 
+      LIBS="-lresolv $LIBS" 
    ;;
   esac
 
 
-    fi
-   ;;
-  esac
+    cat >> confdefs.h <<\EOF
+#define HAVE_DNS_SEARCH 1
+EOF
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBRESOLV 1
+EOF
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+    ac_cv_func_dns_search=yes
   else
     
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  fi
-
-
-      fi
-    
-  fi
-
-    ;;
-    esac
-  done
-
-  echo $ac_n "checking for snmp_parse_oid in -l$SNMP_LIBNAME""... $ac_c" 1>&6
-echo "configure:84684: checking for snmp_parse_oid in -l$SNMP_LIBNAME" >&5
-ac_lib_var=`echo $SNMP_LIBNAME'_'snmp_parse_oid | sed 'y%./+-%__p_%'`
+  unset ac_cv_lib_bind_dns_search
+  unset ac_cv_lib_bind___dns_search
+  unset found
+  echo $ac_n "checking for dns_search in -lbind""... $ac_c" 1>&6
+echo "configure:91422: checking for dns_search in -lbind" >&5
+ac_lib_var=`echo bind'_'dns_search | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-l$SNMP_LIBNAME  $LIBS"
+LIBS="-lbind  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 84692 "configure"
+#line 91430 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char snmp_parse_oid();
+char dns_search();
 
 int main() {
-snmp_parse_oid()
+dns_search()
 ; return 0; }
 EOF
-if { (eval echo configure:84703: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:91441: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -84708,151 +91446,37 @@ else
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=no"
 fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-    cat >> confdefs.h <<\EOF
-#define HAVE_SNMP_PARSE_OID 1
-EOF
-
-  
-  
-else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_$SNMP_LIBNAME_snmp_parse_oid
-    
-  
-fi
-
-
-    
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-    $SNMP_SHARED_LIBADD
-  "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-      fi
-    
-  fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-    ;;
-    esac
-  done
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-  echo $ac_n "checking for init_snmp in -l$SNMP_LIBNAME""... $ac_c" 1>&6
-echo "configure:84837: checking for init_snmp in -l$SNMP_LIBNAME" >&5
-ac_lib_var=`echo $SNMP_LIBNAME'_'init_snmp | sed 'y%./+-%__p_%'`
+    echo $ac_n "checking for __dns_search in -lbind""... $ac_c" 1>&6
+echo "configure:91461: checking for __dns_search in -lbind" >&5
+ac_lib_var=`echo bind'_'__dns_search | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-l$SNMP_LIBNAME  $LIBS"
+LIBS="-lbind  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 84845 "configure"
+#line 91469 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char init_snmp();
+char __dns_search();
 
 int main() {
-init_snmp()
+__dns_search()
 ; return 0; }
 EOF
-if { (eval echo configure:84856: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:91480: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -84867,2353 +91491,2361 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-    cat >> confdefs.h <<\EOF
-#define HAVE_SNMP 1
-EOF
-
-  
-  
+  found=yes
 else
   echo "$ac_t""no" 1>&6
+found=no
+fi
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_$SNMP_LIBNAME_init_snmp
-    
-    { echo "configure: error: SNMP sanity check failed. Please check config.log for more information." 1>&2; exit 1; }
-  
   
 fi
 
 
-  if test "$PHP_UCD_SNMP_HACK" = "yes" ; then
-    cat >> confdefs.h <<\EOF
-#define UCD_SNMP_HACK 1
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lbind"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 91512 "configure"
+#include "confdefs.h"
+main() { return (0); }
 EOF
+if { (eval echo configure:91516: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
 
+    LIBS=$ac_libs
   fi
-  
-  
-  ext_builddir=ext/snmp
-  ext_srcdir=$abs_srcdir/ext/snmp
-
-  ac_extra=
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_SNMP_SHARED=no
+  if test "$found" = "yes"; then
     
   
-  case ext/snmp in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in snmp.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-    EXT_STATIC="$EXT_STATIC snmp"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC snmp"
-    fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_SNMP_SHARED=yes
-      
-  case ext/snmp in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  case bind in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lbind $LIBS" 
+   ;;
   esac
-  
-  
-
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
-
-
-  old_IFS=$IFS
-  for ac_src in snmp.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_snmp="$shared_objects_snmp $ac_bdir$ac_obj.lo"
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+    cat >> confdefs.h <<\EOF
+#define HAVE_DNS_SEARCH 1
 EOF
-  done
-
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsnmp.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) $(PHPSNMP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsnmp.so '$ext_builddir'/phpsnmp.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSNMP, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) $(PHPSNMP_SHARED_LIBADD)'
-      ;;
-  esac
-
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsnmp.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsnmp.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_snmp"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpsnmp.$suffix: $ext_builddir/phpsnmp.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsnmp.$suffix \$(phplibdir)
-
-$ext_builddir/phpsnmp.$suffix: \$(shared_objects_snmp) \$(PHPSNMP_SHARED_DEPENDENCIES)
-	$link_cmd
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBBIND 1
 EOF
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/snmp.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) $(SNMP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/snmp.so '$ext_builddir'/snmp.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SNMP, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) $(SNMP_SHARED_LIBADD)'
-      ;;
-  esac
-
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/snmp.$suffix"
+    ac_cv_func_dns_search=yes
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/snmp.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_snmp"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/snmp.$suffix: $ext_builddir/snmp.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/snmp.$suffix \$(phplibdir)
-
-$ext_builddir/snmp.$suffix: \$(shared_objects_snmp) \$(SNMP_SHARED_DEPENDENCIES)
-	$link_cmd
-
-EOF
-
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_SNMP 1
-EOF
-
-    fi
-  fi
-
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_SNMP_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
-  
-  case ext/snmp in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in snmp.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-        EXT_STATIC="$EXT_STATIC snmp"
-        ;;
-      *)
-        
-  
-  case ext/snmp in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in snmp.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC snmp"
-  fi
-  
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
-
-
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=snmp
     
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
-
-  fi
-
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST SNMP_SHARED_LIBADD"
+  unset ac_cv_lib_socket_dns_search
+  unset ac_cv_lib_socket___dns_search
+  unset found
+  echo $ac_n "checking for dns_search in -lsocket""... $ac_c" 1>&6
+echo "configure:91558: checking for dns_search in -lsocket" >&5
+ac_lib_var=`echo socket'_'dns_search | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lsocket  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 91566 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char dns_search();
 
+int main() {
+dns_search()
+; return 0; }
+EOF
+if { (eval echo configure:91577: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-
-php_enable_soap=no
-
-echo $ac_n "checking whether to enable SOAP support""... $ac_c" 1>&6
-echo "configure:85203: checking whether to enable SOAP support" >&5
-# Check whether --enable-soap or --disable-soap was given.
-if test "${enable_soap+set}" = set; then
-  enableval="$enable_soap"
-  PHP_SOAP=$enableval
+    echo $ac_n "checking for __dns_search in -lsocket""... $ac_c" 1>&6
+echo "configure:91597: checking for __dns_search in -lsocket" >&5
+ac_lib_var=`echo socket'_'__dns_search | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
-  
-  PHP_SOAP=no
-  test "$PHP_ENABLE_ALL" && PHP_SOAP=$PHP_ENABLE_ALL
+  ac_save_LIBS="$LIBS"
+LIBS="-lsocket  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 91605 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __dns_search();
 
+int main() {
+__dns_search()
+; return 0; }
+EOF
+if { (eval echo configure:91616: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_SOAP in
-shared,*)
-  PHP_SOAP=`echo "$PHP_SOAP"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_SOAP=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test -z "$PHP_LIBXML_DIR"; then
-  
-php_with_libxml_dir=no
-
-echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
-echo "configure:85248: checking libxml2 install dir" >&5
-# Check whether --with-libxml-dir or --without-libxml-dir was given.
-if test "${with_libxml_dir+set}" = set; then
-  withval="$with_libxml_dir"
-  PHP_LIBXML_DIR=$withval
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
 else
-  
-  PHP_LIBXML_DIR=no
-  
-
+  echo "$ac_t""no" 1>&6
+found=no
 fi
 
-
-ext_output=$PHP_LIBXML_DIR
-echo "$ac_t""$ext_output" 1>&6
-
-
-
+  
 fi
 
-if test "$PHP_SOAP" != "no"; then
-
-  if test "$PHP_LIBXML" = "no"; then   
-    { echo "configure: error: SOAP extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }                
-  fi
 
-  
-echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
-echo "configure:85276: checking for xml2-config path" >&5
-if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lsocket"
+    if test "$cross_compiling" = yes; then
+  found=no
 else
-  
-  for i in $PHP_LIBXML_DIR /usr/local /usr; do
-    if test -x "$i/bin/xml2-config"; then
-      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
-      break
-    fi
-  done
-
+  cat > conftest.$ac_ext <<EOF
+#line 91648 "configure"
+#include "confdefs.h"
+main() { return (0); }
+EOF
+if { (eval echo configure:91652: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
 fi
 
-echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6
-
-  if test -x "$ac_cv_php_xml2_config_path"; then
-    XML2_CONFIG="$ac_cv_php_xml2_config_path"
-    libxml_full_version=`$XML2_CONFIG --version`
-    ac_IFS=$IFS
-    IFS="."
-    set $libxml_full_version
-    IFS=$ac_IFS
-    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
-    if test "$LIBXML_VERSION" -ge "2006011"; then
-      LIBXML_LIBS=`$XML2_CONFIG --libs`
-      LIBXML_INCS=`$XML2_CONFIG --cflags`
-      
-  for ac_i in $LIBXML_LIBS; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        SOAP_SHARED_LIBADD="$SOAP_SHARED_LIBADD -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+    LIBS=$ac_libs
   fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SOAP_SHARED_LIBADD="$SOAP_SHARED_LIBADD -l$ac_ii" 
-    else
-      
+  if test "$found" = "yes"; then
+    
   
-  case $ac_ii in
+  case socket in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="$LIBS -l$ac_ii" 
+      LIBS="-lsocket $LIBS" 
    ;;
   esac
 
 
-    fi
-   ;;
-  esac
+    cat >> confdefs.h <<\EOF
+#define HAVE_DNS_SEARCH 1
+EOF
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBSOCKET 1
+EOF
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+    ac_cv_func_dns_search=yes
   else
     
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
+  :
 
-    
-      if test "$ext_shared" = "yes"; then
-        SOAP_SHARED_LIBADD="-L$ai_p $SOAP_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && SOAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SOAP_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
   fi
+  
 
-
-      fi
-    
   fi
+  
 
-    ;;
-    esac
-  done
-
-      
-  for ac_i in $LIBXML_INCS; do
-    case $ac_i in
-    -I*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/include"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
-
-    
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+ ;;
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
+  esac
 
-  fi
 
-    ;;
-    esac
-  done
+  unset ac_cv_func_dn_expand
+  unset ac_cv_func___dn_expand
+  unset found
+  
+  echo $ac_n "checking for dn_expand""... $ac_c" 1>&6
+echo "configure:91709: checking for dn_expand" >&5
+if eval "test \"`echo '$''{'ac_cv_func_dn_expand'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 91714 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char dn_expand(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char dn_expand();
 
+int main() {
 
-            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
-echo "configure:85434: checking whether libxml build works" >&5
-if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_dn_expand) || defined (__stub___dn_expand)
+choke me
+#else
+dn_expand();
+#endif
+
+; return 0; }
+EOF
+if { (eval echo configure:91737: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_dn_expand=yes"
 else
-  
-        
-  old_LIBS=$LIBS
-  LIBS="
-          $SOAP_SHARED_LIBADD
-         $LIBS"
-  if test "$cross_compiling" = yes; then
-  
-    LIBS=$old_LIBS
-  
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_dn_expand=no"
+fi
+rm -f conftest*
+fi
+
+if eval "test \"`echo '$ac_cv_func_'dn_expand`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+ echo $ac_n "checking for __dn_expand""... $ac_c" 1>&6
+echo "configure:91755: checking for __dn_expand" >&5
+if eval "test \"`echo '$''{'ac_cv_func___dn_expand'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 85450 "configure"
+#line 91760 "configure"
 #include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char __dn_expand(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __dn_expand();
 
-    
-    char xmlInitParser();
-    int main() {
-      xmlInitParser();
-      return 0;
-    }
-  
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub___dn_expand) || defined (__stub_____dn_expand)
+choke me
+#else
+__dn_expand();
+#endif
+
+; return 0; }
 EOF
-if { (eval echo configure:85461: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-    LIBS=$old_LIBS
-    
-          php_cv_libxml_build_works=yes
-        
-  
+if { (eval echo configure:91783: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func___dn_expand=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  
-    LIBS=$old_LIBS
-    
-          echo "$ac_t""no" 1>&6
-          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
-        
-  
+  rm -rf conftest*
+  eval "ac_cv_func___dn_expand=no"
 fi
-rm -fr conftest*
+rm -f conftest*
 fi
 
-
-      
+if eval "test \"`echo '$ac_cv_func_'__dn_expand`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
+ 
 fi
 
-echo "$ac_t""$php_cv_libxml_build_works" 1>&6
-      if test "$php_cv_libxml_build_works" = "yes"; then
-        cat >> confdefs.h <<\EOF
-#define HAVE_LIBXML 1
-EOF
 
-      fi
-      
+  case $found in
+  yes) 
     cat >> confdefs.h <<\EOF
-#define HAVE_SOAP 1
+#define HAVE_DN_EXPAND 1
 EOF
 
-    
-  ext_builddir=ext/soap
-  ext_srcdir=$abs_srcdir/ext/soap
-
-  ac_extra=
-
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_SOAP_SHARED=no
-    
-  
-  case ext/soap in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/soap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/soap/"; ac_bdir="ext/soap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+    ac_cv_func_dn_expand=yes
+  ;;
   
+    *) 
   
+  unset ac_cv_lib_resolv_dn_expand
+  unset ac_cv_lib_resolv___dn_expand
+  unset found
+  echo $ac_n "checking for dn_expand in -lresolv""... $ac_c" 1>&6
+echo "configure:91821: checking for dn_expand in -lresolv" >&5
+ac_lib_var=`echo resolv'_'dn_expand | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lresolv  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 91829 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char dn_expand();
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
+int main() {
+dn_expand()
+; return 0; }
+EOF
+if { (eval echo configure:91840: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-  old_IFS=$IFS
-  for ac_src in soap.c php_encoding.c php_http.c php_packet_soap.c php_schema.c php_sdl.c php_xml.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+    echo $ac_n "checking for __dn_expand in -lresolv""... $ac_c" 1>&6
+echo "configure:91860: checking for __dn_expand in -lresolv" >&5
+ac_lib_var=`echo resolv'_'__dn_expand | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lresolv  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 91868 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __dn_expand();
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+int main() {
+__dn_expand()
+; return 0; }
 EOF
-  done
+if { (eval echo configure:91879: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
 
-    EXT_STATIC="$EXT_STATIC soap"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC soap"
-    fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_SOAP_SHARED=yes
-      
-  case ext/soap in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/soap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/soap/"; ac_bdir="ext/soap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
   
+fi
 
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
 
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lresolv"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 91911 "configure"
+#include "confdefs.h"
+main() { return (0); }
+EOF
+if { (eval echo configure:91915: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
+
+    LIBS=$ac_libs
+  fi
 
-  old_IFS=$IFS
-  for ac_src in soap.c php_encoding.c php_http.c php_packet_soap.c php_schema.c php_sdl.c php_xml.c; do
+  if test "$found" = "yes"; then
+    
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_soap="$shared_objects_soap $ac_bdir$ac_obj.lo"
+  case resolv in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lresolv $LIBS" 
+   ;;
+  esac
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+    cat >> confdefs.h <<\EOF
+#define HAVE_DN_EXPAND 1
 EOF
-  done
-
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsoap.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) $(PHPSOAP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsoap.so '$ext_builddir'/phpsoap.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSOAP, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) $(PHPSOAP_SHARED_LIBADD)'
-      ;;
-  esac
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBRESOLV 1
+EOF
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsoap.$suffix"
+    ac_cv_func_dn_expand=yes
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsoap.$suffix"
-  fi
+    
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_soap"
+  unset ac_cv_lib_bind_dn_expand
+  unset ac_cv_lib_bind___dn_expand
+  unset found
+  echo $ac_n "checking for dn_expand in -lbind""... $ac_c" 1>&6
+echo "configure:91957: checking for dn_expand in -lbind" >&5
+ac_lib_var=`echo bind'_'dn_expand | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lbind  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 91965 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char dn_expand();
+
+int main() {
+dn_expand()
+; return 0; }
+EOF
+if { (eval echo configure:91976: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpsoap.$suffix: $ext_builddir/phpsoap.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsoap.$suffix \$(phplibdir)
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-$ext_builddir/phpsoap.$suffix: \$(shared_objects_soap) \$(PHPSOAP_SHARED_DEPENDENCIES)
-	$link_cmd
+    echo $ac_n "checking for __dn_expand in -lbind""... $ac_c" 1>&6
+echo "configure:91996: checking for __dn_expand in -lbind" >&5
+ac_lib_var=`echo bind'_'__dn_expand | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lbind  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 92004 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __dn_expand();
 
+int main() {
+__dn_expand()
+; return 0; }
 EOF
+if { (eval echo configure:92015: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/soap.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) $(SOAP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/soap.so '$ext_builddir'/soap.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SOAP, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) $(SOAP_SHARED_LIBADD)'
-      ;;
-  esac
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/soap.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/soap.$suffix"
-  fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_soap"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/soap.$suffix: $ext_builddir/soap.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/soap.$suffix \$(phplibdir)
-
-$ext_builddir/soap.$suffix: \$(shared_objects_soap) \$(SOAP_SHARED_DEPENDENCIES)
-	$link_cmd
+fi
 
-EOF
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_SOAP 1
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lbind"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 92047 "configure"
+#include "confdefs.h"
+main() { return (0); }
 EOF
+if { (eval echo configure:92051: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
 
-    fi
+    LIBS=$ac_libs
   fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_SOAP_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
+  if test "$found" = "yes"; then
+    
   
-  case ext/soap in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/soap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/soap/"; ac_bdir="ext/soap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  case bind in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lbind $LIBS" 
+   ;;
   esac
-  
-  
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_DN_EXPAND 1
+EOF
 
-  old_IFS=$IFS
-  for ac_src in soap.c php_encoding.c php_http.c php_packet_soap.c php_schema.c php_sdl.c php_xml.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBBIND 1
+EOF
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+    ac_cv_func_dn_expand=yes
+  else
+    
+  
+  unset ac_cv_lib_socket_dn_expand
+  unset ac_cv_lib_socket___dn_expand
+  unset found
+  echo $ac_n "checking for dn_expand in -lsocket""... $ac_c" 1>&6
+echo "configure:92093: checking for dn_expand in -lsocket" >&5
+ac_lib_var=`echo socket'_'dn_expand | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lsocket  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 92101 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char dn_expand();
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+int main() {
+dn_expand()
+; return 0; }
 EOF
-  done
+if { (eval echo configure:92112: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-        EXT_STATIC="$EXT_STATIC soap"
-        ;;
-      *)
-        
-  
-  case ext/soap in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/soap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/soap/"; ac_bdir="ext/soap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
+    echo $ac_n "checking for __dn_expand in -lsocket""... $ac_c" 1>&6
+echo "configure:92132: checking for __dn_expand in -lsocket" >&5
+ac_lib_var=`echo socket'_'__dn_expand | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lsocket  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 92140 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __dn_expand();
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+int main() {
+__dn_expand()
+; return 0; }
+EOF
+if { (eval echo configure:92151: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
 
-  old_IFS=$IFS
-  for ac_src in soap.c php_encoding.c php_http.c php_packet_soap.c php_schema.c php_sdl.c php_xml.c; do
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+fi
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lsocket"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 92183 "configure"
+#include "confdefs.h"
+main() { return (0); }
 EOF
-  done
-
+if { (eval echo configure:92187: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC soap"
+    LIBS=$ac_libs
   fi
+
+  if test "$found" = "yes"; then
+    
   
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
+  case socket in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsocket $LIBS" 
+   ;;
+  esac
 
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=soap
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+    cat >> confdefs.h <<\EOF
+#define HAVE_DN_EXPAND 1
+EOF
 
-  fi
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBSOCKET 1
+EOF
 
+    ac_cv_func_dn_expand=yes
+  else
     
-  PHP_VAR_SUBST="$PHP_VAR_SUBST SOAP_SHARED_LIBADD"
+  :
 
+  fi
   
-    else
-      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
-    fi
-else 
-    { echo "configure: error: xml2-config not found. Please check your libxml2 installation." 1>&2; exit 1; }
+
+  fi
   
+
   fi
+  
+ ;;
+  
+  esac
 
-fi
 
+  unset ac_cv_func_dn_skipname
+  unset ac_cv_func___dn_skipname
+  unset found
+  
+  echo $ac_n "checking for dn_skipname""... $ac_c" 1>&6
+echo "configure:92244: checking for dn_skipname" >&5
+if eval "test \"`echo '$''{'ac_cv_func_dn_skipname'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 92249 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char dn_skipname(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char dn_skipname();
 
+int main() {
 
-php_enable_sockets=no
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_dn_skipname) || defined (__stub___dn_skipname)
+choke me
+#else
+dn_skipname();
+#endif
 
-echo $ac_n "checking whether to enable sockets support""... $ac_c" 1>&6
-echo "configure:85811: checking whether to enable sockets support" >&5
-# Check whether --enable-sockets or --disable-sockets was given.
-if test "${enable_sockets+set}" = set; then
-  enableval="$enable_sockets"
-  PHP_SOCKETS=$enableval
+; return 0; }
+EOF
+if { (eval echo configure:92272: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_dn_skipname=yes"
 else
-  
-  PHP_SOCKETS=no
-  test "$PHP_ENABLE_ALL" && PHP_SOCKETS=$PHP_ENABLE_ALL
-
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_dn_skipname=no"
+fi
+rm -f conftest*
 fi
 
+if eval "test \"`echo '$ac_cv_func_'dn_skipname`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+ echo $ac_n "checking for __dn_skipname""... $ac_c" 1>&6
+echo "configure:92290: checking for __dn_skipname" >&5
+if eval "test \"`echo '$''{'ac_cv_func___dn_skipname'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 92295 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char __dn_skipname(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __dn_skipname();
+
+int main() {
 
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub___dn_skipname) || defined (__stub_____dn_skipname)
+choke me
+#else
+__dn_skipname();
+#endif
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_SOCKETS in
-shared,*)
-  PHP_SOCKETS=`echo "$PHP_SOCKETS"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_SOCKETS=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
+; return 0; }
+EOF
+if { (eval echo configure:92318: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func___dn_skipname=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func___dn_skipname=no"
+fi
+rm -f conftest*
+fi
 
+if eval "test \"`echo '$ac_cv_func_'__dn_skipname`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
+ 
+fi
 
 
-echo "$ac_t""$ext_output" 1>&6
+  case $found in
+  yes) 
+    cat >> confdefs.h <<\EOF
+#define HAVE_DN_SKIPNAME 1
+EOF
 
+    ac_cv_func_dn_skipname=yes
+  ;;
+  
+    *) 
+  
+  unset ac_cv_lib_resolv_dn_skipname
+  unset ac_cv_lib_resolv___dn_skipname
+  unset found
+  echo $ac_n "checking for dn_skipname in -lresolv""... $ac_c" 1>&6
+echo "configure:92356: checking for dn_skipname in -lresolv" >&5
+ac_lib_var=`echo resolv'_'dn_skipname | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lresolv  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 92364 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char dn_skipname();
 
+int main() {
+dn_skipname()
+; return 0; }
+EOF
+if { (eval echo configure:92375: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-if test "$PHP_SOCKETS" != "no"; then
-    echo $ac_n "checking for struct cmsghdr""... $ac_c" 1>&6
-echo "configure:85853: checking for struct cmsghdr" >&5
-if eval "test \"`echo '$''{'ac_cv_cmsghdr'+set}'`\" = set"; then
+    echo $ac_n "checking for __dn_skipname in -lresolv""... $ac_c" 1>&6
+echo "configure:92395: checking for __dn_skipname in -lresolv" >&5
+ac_lib_var=`echo resolv'_'__dn_skipname | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  
-    cat > conftest.$ac_ext <<EOF
-#line 85859 "configure"
+  ac_save_LIBS="$LIBS"
+LIBS="-lresolv  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 92403 "configure"
 #include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __dn_skipname();
 
-#include <sys/types.h>
-#include <sys/socket.h>
 int main() {
-struct cmsghdr s; s
+__dn_skipname()
 ; return 0; }
 EOF
-if { (eval echo configure:85868: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:92414: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  ac_cv_cmsghdr=yes
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  ac_cv_cmsghdr=no
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
 rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
+
   
 fi
 
-echo "$ac_t""$ac_cv_cmsghdr" 1>&6
 
-  if test "$ac_cv_cmsghdr" = yes; then
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lresolv"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 92446 "configure"
+#include "confdefs.h"
+main() { return (0); }
+EOF
+if { (eval echo configure:92450: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
+
+    LIBS=$ac_libs
+  fi
+
+  if test "$found" = "yes"; then
+    
+  
+  case resolv in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lresolv $LIBS" 
+   ;;
+  esac
+
+
     cat >> confdefs.h <<\EOF
-#define HAVE_CMSGHDR 1
+#define HAVE_DN_SKIPNAME 1
 EOF
 
-  fi 
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBRESOLV 1
+EOF
 
-  for ac_func in hstrerror socketpair
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:85893: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+    ac_cv_func_dn_skipname=yes
+  else
+    
+  
+  unset ac_cv_lib_bind_dn_skipname
+  unset ac_cv_lib_bind___dn_skipname
+  unset found
+  echo $ac_n "checking for dn_skipname in -lbind""... $ac_c" 1>&6
+echo "configure:92492: checking for dn_skipname in -lbind" >&5
+ac_lib_var=`echo bind'_'dn_skipname | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 85898 "configure"
+  ac_save_LIBS="$LIBS"
+LIBS="-lbind  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 92500 "configure"
 #include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char $ac_func();
+char dn_skipname();
 
 int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
+dn_skipname()
 ; return 0; }
 EOF
-if { (eval echo configure:85921: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:92511: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
 rm -f conftest*
-fi
+LIBS="$ac_save_LIBS"
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
+  found=yes
 else
   echo "$ac_t""no" 1>&6
-fi
-done
 
-  for ac_hdr in netdb.h netinet/tcp.h sys/un.h errno.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:85949: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+    echo $ac_n "checking for __dn_skipname in -lbind""... $ac_c" 1>&6
+echo "configure:92531: checking for __dn_skipname in -lbind" >&5
+ac_lib_var=`echo bind'_'__dn_skipname | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 85954 "configure"
+  ac_save_LIBS="$LIBS"
+LIBS="-lbind  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 92539 "configure"
 #include "confdefs.h"
-#include <$ac_hdr>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __dn_skipname();
+
+int main() {
+__dn_skipname()
+; return 0; }
 EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:85959: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
+if { (eval echo configure:92550: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
-  echo "$ac_err" >&5
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
 rm -f conftest*
+LIBS="$ac_save_LIBS"
+
 fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
+  found=yes
 else
   echo "$ac_t""no" 1>&6
+found=no
+fi
+
+  
 fi
-done
 
+
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lbind"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
   cat > conftest.$ac_ext <<EOF
-#line 85986 "configure"
+#line 92582 "configure"
 #include "confdefs.h"
-
-#include <sys/types.h>
-#include <sys/socket.h>
-  
-int main() {
-static struct msghdr tp; int n = (int) tp.msg_flags; return n
-; return 0; }
+main() { return (0); }
 EOF
-if { (eval echo configure:85996: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  :
+if { (eval echo configure:92586: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  cat >> confdefs.h <<\EOF
-#define MISSING_MSGHDR_MSGFLAGS 1
-EOF
-
-  
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
 fi
-rm -f conftest*
-  cat >> confdefs.h <<\EOF
-#define HAVE_SOCKETS 1
-EOF
-
-
-  
-  ext_builddir=ext/sockets
-  ext_srcdir=$abs_srcdir/ext/sockets
 
-  ac_extra=
+    LIBS=$ac_libs
+  fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_SOCKETS_SHARED=no
+  if test "$found" = "yes"; then
     
   
-  case ext/sockets in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  case bind in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lbind $LIBS" 
+   ;;
   esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in sockets.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+    cat >> confdefs.h <<\EOF
+#define HAVE_DN_SKIPNAME 1
 EOF
-  done
-
-
-    EXT_STATIC="$EXT_STATIC sockets"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC sockets"
-    fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_SOCKETS_SHARED=yes
-      
-  case ext/sockets in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
 
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
-
-
-  old_IFS=$IFS
-  for ac_src in sockets.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_sockets="$shared_objects_sockets $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBBIND 1
 EOF
-  done
 
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsockets.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) $(PHPSOCKETS_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsockets.so '$ext_builddir'/phpsockets.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSOCKETS, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) $(PHPSOCKETS_SHARED_LIBADD)'
-      ;;
-  esac
-
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsockets.$suffix"
+    ac_cv_func_dn_skipname=yes
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsockets.$suffix"
-  fi
+    
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sockets"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpsockets.$suffix: $ext_builddir/phpsockets.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsockets.$suffix \$(phplibdir)
-
-$ext_builddir/phpsockets.$suffix: \$(shared_objects_sockets) \$(PHPSOCKETS_SHARED_DEPENDENCIES)
-	$link_cmd
+  unset ac_cv_lib_socket_dn_skipname
+  unset ac_cv_lib_socket___dn_skipname
+  unset found
+  echo $ac_n "checking for dn_skipname in -lsocket""... $ac_c" 1>&6
+echo "configure:92628: checking for dn_skipname in -lsocket" >&5
+ac_lib_var=`echo socket'_'dn_skipname | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lsocket  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 92636 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char dn_skipname();
 
+int main() {
+dn_skipname()
+; return 0; }
 EOF
+if { (eval echo configure:92647: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sockets.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) $(SOCKETS_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sockets.so '$ext_builddir'/sockets.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SOCKETS, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) $(SOCKETS_SHARED_LIBADD)'
-      ;;
-  esac
-
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sockets.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sockets.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sockets"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/sockets.$suffix: $ext_builddir/sockets.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/sockets.$suffix \$(phplibdir)
-
-$ext_builddir/sockets.$suffix: \$(shared_objects_sockets) \$(SOCKETS_SHARED_DEPENDENCIES)
-	$link_cmd
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-EOF
+    echo $ac_n "checking for __dn_skipname in -lsocket""... $ac_c" 1>&6
+echo "configure:92667: checking for __dn_skipname in -lsocket" >&5
+ac_lib_var=`echo socket'_'__dn_skipname | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lsocket  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 92675 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __dn_skipname();
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_SOCKETS 1
+int main() {
+__dn_skipname()
+; return 0; }
 EOF
+if { (eval echo configure:92686: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-    fi
-  fi
-
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_SOCKETS_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
-  
-  case ext/sockets in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
 
-  old_IFS=$IFS
-  for ac_src in sockets.c; do
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+fi
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lsocket"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 92718 "configure"
+#include "confdefs.h"
+main() { return (0); }
 EOF
-  done
-
-
-        EXT_STATIC="$EXT_STATIC sockets"
-        ;;
-      *)
-        
-  
-  case ext/sockets in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+if { (eval echo configure:92722: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
 
+    LIBS=$ac_libs
+  fi
 
-  old_IFS=$IFS
-  for ac_src in sockets.c; do
+  if test "$found" = "yes"; then
+    
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+  case socket in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsocket $LIBS" 
+   ;;
+  esac
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+    cat >> confdefs.h <<\EOF
+#define HAVE_DN_SKIPNAME 1
 EOF
-  done
-
-
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC sockets"
-  fi
-  
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBSOCKET 1
+EOF
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=sockets
+    ac_cv_func_dn_skipname=yes
+  else
     
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+  :
 
   fi
-
   
+
+  fi
   
-    header_path=ext/sockets/
-    for header_file in php_sockets.h; do
-      hp_hf="$header_path/$header_file"
-      
+
+  fi
   
-  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
+ ;;
   
-  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INSTALLHEADERS$unique=set"
-    
-        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
-      
-  fi
+  esac
 
-    done 
-  
 
-fi
 
 
-  echo $ac_n "checking whether zend_object_value is packed""... $ac_c" 1>&6
-echo "configure:86330: checking whether zend_object_value is packed" >&5
-  old_CPPFLAGS=$CPPFLAGS
-  CPPFLAGS="$INCLUDES -I$abs_srcdir $CPPFLAGS"
-  if test "$cross_compiling" = yes; then
-  
-    ac_result=0
-    echo "$ac_t""no" 1>&6
+  unset ac_cv_func_res_search
+  unset ac_cv_func___res_search
+  unset found
   
+  echo $ac_n "checking for res_search""... $ac_c" 1>&6
+echo "configure:92781: checking for res_search" >&5
+if eval "test \"`echo '$''{'ac_cv_func_res_search'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 86340 "configure"
+#line 92786 "configure"
 #include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char res_search(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char res_search();
 
-#include "Zend/zend_types.h"
-int main(int argc, char **argv) {
-	return ((sizeof(zend_object_handle) + sizeof(zend_object_handlers*)) == sizeof(zend_object_value)) ? 0 : 1;
-}
-  
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_res_search) || defined (__stub___res_search)
+choke me
+#else
+res_search();
+#endif
+
+; return 0; }
 EOF
-if { (eval echo configure:86349: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-    ac_result=1
-    echo "$ac_t""yes" 1>&6
-  
+if { (eval echo configure:92809: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_res_search=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  
-    ac_result=0
-    echo "$ac_t""no" 1>&6
-  
+  rm -rf conftest*
+  eval "ac_cv_func_res_search=no"
 fi
-rm -fr conftest*
+rm -f conftest*
 fi
 
-  CPPFLAGS=$old_CPPFLAGS
-  cat >> confdefs.h <<EOF
-#define HAVE_PACKED_OBJECT_VALUE $ac_result
-EOF
+if eval "test \"`echo '$ac_cv_func_'res_search`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+ echo $ac_n "checking for __res_search""... $ac_c" 1>&6
+echo "configure:92827: checking for __res_search" >&5
+if eval "test \"`echo '$''{'ac_cv_func___res_search'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 92832 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char __res_search(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __res_search();
 
-  cat >> confdefs.h <<\EOF
-#define HAVE_SPL 1
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub___res_search) || defined (__stub_____res_search)
+choke me
+#else
+__res_search();
+#endif
+
+; return 0; }
 EOF
+if { (eval echo configure:92855: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func___res_search=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func___res_search=no"
+fi
+rm -f conftest*
+fi
+
+if eval "test \"`echo '$ac_cv_func_'__res_search`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
  
-  
-  ext_builddir=ext/spl
-  ext_srcdir=$abs_srcdir/ext/spl
+fi
 
-  ac_extra=
 
-  if test "no" != "shared" && test "no" != "yes" && test "" != "cli"; then
-    PHP_SPL_SHARED=no
-    
-  
-  case ext/spl in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/spl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/spl/"; ac_bdir="ext/spl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+  case $found in
+  yes) 
+    cat >> confdefs.h <<\EOF
+#define HAVE_RES_SEARCH 1
+EOF
+
+    ac_cv_func_res_search=yes
+  ;;
   
+    *) 
   
+  unset ac_cv_lib_resolv_res_search
+  unset ac_cv_lib_resolv___res_search
+  unset found
+  echo $ac_n "checking for res_search in -lresolv""... $ac_c" 1>&6
+echo "configure:92893: checking for res_search in -lresolv" >&5
+ac_lib_var=`echo resolv'_'res_search | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lresolv  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 92901 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char res_search();
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
+int main() {
+res_search()
+; return 0; }
+EOF
+if { (eval echo configure:92912: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-  old_IFS=$IFS
-  for ac_src in php_spl.c spl_functions.c spl_engine.c spl_iterators.c spl_array.c spl_directory.c spl_exceptions.c spl_observer.c spl_dllist.c spl_heap.c spl_fixedarray.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+    echo $ac_n "checking for __res_search in -lresolv""... $ac_c" 1>&6
+echo "configure:92932: checking for __res_search in -lresolv" >&5
+ac_lib_var=`echo resolv'_'__res_search | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lresolv  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 92940 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __res_search();
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+int main() {
+__res_search()
+; return 0; }
 EOF
-  done
+if { (eval echo configure:92951: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
 
-    EXT_STATIC="$EXT_STATIC spl"
-    if test "no" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC spl"
-    fi
-  else
-    if test "no" = "shared" || test "no" = "yes"; then
-      PHP_SPL_SHARED=yes
-      
-  case ext/spl in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/spl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/spl/"; ac_bdir="ext/spl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
   
+fi
 
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
 
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lresolv"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 92983 "configure"
+#include "confdefs.h"
+main() { return (0); }
+EOF
+if { (eval echo configure:92987: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
+
+    LIBS=$ac_libs
+  fi
 
-  old_IFS=$IFS
-  for ac_src in php_spl.c spl_functions.c spl_engine.c spl_iterators.c spl_array.c spl_directory.c spl_exceptions.c spl_observer.c spl_dllist.c spl_heap.c spl_fixedarray.c; do
+  if test "$found" = "yes"; then
+    
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_spl="$shared_objects_spl $ac_bdir$ac_obj.lo"
+  case resolv in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lresolv $LIBS" 
+   ;;
+  esac
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+    cat >> confdefs.h <<\EOF
+#define HAVE_RES_SEARCH 1
 EOF
-  done
-
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpspl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) $(PHPSPL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpspl.so '$ext_builddir'/phpspl.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSPL, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) $(PHPSPL_SHARED_LIBADD)'
-      ;;
-  esac
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBRESOLV 1
+EOF
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpspl.$suffix"
+    ac_cv_func_res_search=yes
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpspl.$suffix"
-  fi
+    
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_spl"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpspl.$suffix: $ext_builddir/phpspl.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpspl.$suffix \$(phplibdir)
-
-$ext_builddir/phpspl.$suffix: \$(shared_objects_spl) \$(PHPSPL_SHARED_DEPENDENCIES)
-	$link_cmd
+  unset ac_cv_lib_bind_res_search
+  unset ac_cv_lib_bind___res_search
+  unset found
+  echo $ac_n "checking for res_search in -lbind""... $ac_c" 1>&6
+echo "configure:93029: checking for res_search in -lbind" >&5
+ac_lib_var=`echo bind'_'res_search | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lbind  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 93037 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char res_search();
 
+int main() {
+res_search()
+; return 0; }
 EOF
+if { (eval echo configure:93048: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/spl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) $(SPL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/spl.so '$ext_builddir'/spl.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SPL, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) $(SPL_SHARED_LIBADD)'
-      ;;
-  esac
+    echo $ac_n "checking for __res_search in -lbind""... $ac_c" 1>&6
+echo "configure:93068: checking for __res_search in -lbind" >&5
+ac_lib_var=`echo bind'_'__res_search | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lbind  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 93076 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __res_search();
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/spl.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/spl.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_spl"
+int main() {
+__res_search()
+; return 0; }
+EOF
+if { (eval echo configure:93087: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/spl.$suffix: $ext_builddir/spl.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/spl.$suffix \$(phplibdir)
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
 
-$ext_builddir/spl.$suffix: \$(shared_objects_spl) \$(SPL_SHARED_DEPENDENCIES)
-	$link_cmd
+  
+fi
 
-EOF
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_SPL 1
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lbind"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 93119 "configure"
+#include "confdefs.h"
+main() { return (0); }
 EOF
+if { (eval echo configure:93123: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
 
-    fi
+    LIBS=$ac_libs
   fi
 
-  if test "no" != "shared" && test "no" != "yes" && test "" = "cli"; then
-    PHP_SPL_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
+  if test "$found" = "yes"; then
+    
   
-  case ext/spl in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/spl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/spl/"; ac_bdir="ext/spl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  case bind in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lbind $LIBS" 
+   ;;
   esac
-  
-  
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_RES_SEARCH 1
+EOF
 
-  old_IFS=$IFS
-  for ac_src in php_spl.c spl_functions.c spl_engine.c spl_iterators.c spl_array.c spl_directory.c spl_exceptions.c spl_observer.c spl_dllist.c spl_heap.c spl_fixedarray.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBBIND 1
+EOF
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+    ac_cv_func_res_search=yes
+  else
+    
+  
+  unset ac_cv_lib_socket_res_search
+  unset ac_cv_lib_socket___res_search
+  unset found
+  echo $ac_n "checking for res_search in -lsocket""... $ac_c" 1>&6
+echo "configure:93165: checking for res_search in -lsocket" >&5
+ac_lib_var=`echo socket'_'res_search | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lsocket  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 93173 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char res_search();
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+int main() {
+res_search()
+; return 0; }
 EOF
-  done
+if { (eval echo configure:93184: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-        EXT_STATIC="$EXT_STATIC spl"
-        ;;
-      *)
-        
-  
-  case ext/spl in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/spl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/spl/"; ac_bdir="ext/spl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
+    echo $ac_n "checking for __res_search in -lsocket""... $ac_c" 1>&6
+echo "configure:93204: checking for __res_search in -lsocket" >&5
+ac_lib_var=`echo socket'_'__res_search | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lsocket  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 93212 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __res_search();
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+int main() {
+__res_search()
+; return 0; }
+EOF
+if { (eval echo configure:93223: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
 
-  old_IFS=$IFS
-  for ac_src in php_spl.c spl_functions.c spl_engine.c spl_iterators.c spl_array.c spl_directory.c spl_exceptions.c spl_observer.c spl_dllist.c spl_heap.c spl_fixedarray.c; do
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+fi
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lsocket"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 93255 "configure"
+#include "confdefs.h"
+main() { return (0); }
 EOF
-  done
-
+if { (eval echo configure:93259: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC spl"
+    LIBS=$ac_libs
   fi
+
+  if test "$found" = "yes"; then
+    
   
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
+  case socket in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsocket $LIBS" 
+   ;;
+  esac
 
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=spl
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+    cat >> confdefs.h <<\EOF
+#define HAVE_RES_SEARCH 1
+EOF
 
-  fi
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBSOCKET 1
+EOF
 
-  
-  
-    header_path=ext/spl
-    for header_file in php_spl.h spl_array.h spl_directory.h spl_engine.h spl_exceptions.h spl_functions.h spl_iterators.h spl_observer.h spl_dllist.h spl_heap.h spl_fixedarray.h; do
-      hp_hf="$header_path/$header_file"
-      
-  
-  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INSTALLHEADERS$unique=set"
+    ac_cv_func_res_search=yes
+  else
     
-        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
-      
-  fi
+  :
 
-    done 
+  fi
   
 
-  
-  am_i_shared=$PHP_SPL_SHARED
-  is_it_shared=$PHP_PCRE_SHARED
-  is_it_enabled=$PHP_PCRE
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension spl to build statically, but it
-depends on extension pcre, which you've configured to build shared.
-You either need to build spl shared or build pcre statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension spl, which depends on extension pcre,
-but you've either not enabled pcre, or have disabled it.
-" 1>&2; exit 1; }
   fi
   
 
+  fi
+  
+ ;;
+  
+  esac
 
 
-php_with_sqlite=yes
-
-echo $ac_n "checking for sqlite support""... $ac_c" 1>&6
-echo "configure:86713: checking for sqlite support" >&5
-# Check whether --with-sqlite or --without-sqlite was given.
-if test "${with_sqlite+set}" = set; then
-  withval="$with_sqlite"
-  PHP_SQLITE=$withval
+echo $ac_n "checking whether atof() accepts NAN""... $ac_c" 1>&6
+echo "configure:93312: checking whether atof() accepts NAN" >&5
+if eval "test \"`echo '$''{'ac_cv_atof_accept_nan'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
   
-  PHP_SQLITE=yes
-  test "$PHP_ENABLE_ALL" && PHP_SQLITE=$PHP_ENABLE_ALL
-
-fi
-
+if test "$cross_compiling" = yes; then
+  
+  ac_cv_atof_accept_nan=no
 
+else
+  cat > conftest.$ac_ext <<EOF
+#line 93323 "configure"
+#include "confdefs.h"
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_SQLITE in
-shared,*)
-  PHP_SQLITE=`echo "$PHP_SQLITE"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_SQLITE=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
+#include <math.h>
+#include <stdlib.h>
 
+#ifdef HAVE_ISNAN
+#define zend_isnan(a) isnan(a)
+#elif defined(HAVE_FPCLASS)
+#define zend_isnan(a) ((fpclass(a) == FP_SNAN) || (fpclass(a) == FP_QNAN))
+#else
+#define zend_isnan(a) 0
+#endif
 
+int main(int argc, char** argv)
+{
+	return zend_isnan(atof("NAN")) ? 0 : 1;
+}
 
-echo "$ac_t""$ext_output" 1>&6
+EOF
+if { (eval echo configure:93343: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+  ac_cv_atof_accept_nan=yes
 
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  
+  ac_cv_atof_accept_nan=no
 
+fi
+rm -fr conftest*
+fi
 
+fi
 
+echo "$ac_t""$ac_cv_atof_accept_nan" 1>&6
+if test "$ac_cv_atof_accept_nan" = "yes"; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_ATOF_ACCEPTS_NAN 1
+EOF
 
-php_enable_sqlite_utf8=no
+fi
 
-echo $ac_n "checking whether to enable UTF-8 support in sqlite (default: ISO-8859-1)""... $ac_c" 1>&6
-echo "configure:86757: checking whether to enable UTF-8 support in sqlite (default: ISO-8859-1)" >&5
-# Check whether --enable-sqlite-utf8 or --disable-sqlite-utf8 was given.
-if test "${enable_sqlite_utf8+set}" = set; then
-  enableval="$enable_sqlite_utf8"
-  PHP_SQLITE_UTF8=$enableval
+echo $ac_n "checking whether atof() accepts INF""... $ac_c" 1>&6
+echo "configure:93370: checking whether atof() accepts INF" >&5
+if eval "test \"`echo '$''{'ac_cv_atof_accept_inf'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
   
-  PHP_SQLITE_UTF8=no
+if test "$cross_compiling" = yes; then
   
+  ac_cv_atof_accept_inf=no
 
-fi
-
+else
+  cat > conftest.$ac_ext <<EOF
+#line 93381 "configure"
+#include "confdefs.h"
 
-ext_output=$PHP_SQLITE_UTF8
-echo "$ac_t""$ext_output" 1>&6
+#include <math.h>
+#include <stdlib.h>
 
+#ifdef HAVE_ISINF
+#define zend_isinf(a) isinf(a)
+#elif defined(INFINITY)
+/* Might not work, but is required by ISO C99 */
+#define zend_isinf(a) (((a)==INFINITY)?1:0)
+#elif defined(HAVE_FPCLASS)
+#define zend_isinf(a) ((fpclass(a) == FP_PINF) || (fpclass(a) == FP_NINF))
+#else
+#define zend_isinf(a) 0
+#endif
 
+int main(int argc, char** argv)
+{
+	return zend_isinf(atof("INF")) && zend_isinf(atof("-INF")) ? 0 : 1;
+}
 
+EOF
+if { (eval echo configure:93404: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+  ac_cv_atof_accept_inf=yes
 
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  
+  ac_cv_atof_accept_inf=no
 
+fi
+rm -fr conftest*
+fi
 
+fi
 
+echo "$ac_t""$ac_cv_atof_accept_inf" 1>&6
+if test "$ac_cv_atof_accept_inf" = "yes"; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_ATOF_ACCEPTS_INF 1
+EOF
 
+fi
 
-if test "$PHP_SQLITE" != "no"; then
-  if test "$PHP_PDO" != "no"; then
-    
-  echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:86785: checking for PDO includes" >&5
-if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
+echo $ac_n "checking whether HUGE_VAL == INF""... $ac_c" 1>&6
+echo "configure:93431: checking whether HUGE_VAL == INF" >&5
+if eval "test \"`echo '$''{'ac_cv_huge_val_inf'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
-    echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:86791: checking for PDO includes" >&5
-    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
-      pdo_inc_path=$abs_srcdir/ext
-    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
-      pdo_inc_path=$abs_srcdir/ext
-    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
-      pdo_inc_path=$prefix/include/php/ext
-    fi
+if test "$cross_compiling" = yes; then
   
-fi
-
-echo "$ac_t""$pdo_inc_path" 1>&6
-  if test -n "$pdo_inc_path"; then
-:
-  else
-echo "configure: warning: Cannot find php_pdo_driver.h." 1>&2
-  fi
+  ac_cv_huge_val_inf=yes
 
-    if test -n "$pdo_inc_path"; then
-      cat >> confdefs.h <<\EOF
-#define PHP_SQLITE2_HAVE_PDO 1
-EOF
+else
+  cat > conftest.$ac_ext <<EOF
+#line 93442 "configure"
+#include "confdefs.h"
 
-      pdo_inc_path="-I$pdo_inc_path"
-    fi
-  fi  
+#include <math.h>
+#include <stdlib.h>
 
-  if test "$PHP_SQLITE" != "yes"; then
-    SEARCH_PATH="/usr/local /usr"
-    SEARCH_FOR="/include/sqlite.h"
-    if test -r $PHP_SQLITE/; then # path given as parameter
-      SQLITE_DIR=$PHP_SQLITE
-    else # search default path list
-      echo $ac_n "checking for sqlite files in default path""... $ac_c" 1>&6
-echo "configure:86825: checking for sqlite files in default path" >&5
-      for i in $SEARCH_PATH ; do
-        if test -r $i/$SEARCH_FOR; then
-          SQLITE_DIR=$i
-          echo "$ac_t""found in $i" 1>&6
-        fi
-      done
-    fi
-  
-    if test -z "$SQLITE_DIR"; then
-      echo "$ac_t""not found" 1>&6
-      { echo "configure: error: Please reinstall the sqlite distribution from http://www.sqlite.org" 1>&2; exit 1; }
-    fi
+#ifdef HAVE_ISINF
+#define zend_isinf(a) isinf(a)
+#elif defined(INFINITY)
+/* Might not work, but is required by ISO C99 */
+#define zend_isinf(a) (((a)==INFINITY)?1:0)
+#elif defined(HAVE_FPCLASS)
+#define zend_isinf(a) ((fpclass(a) == FP_PINF) || (fpclass(a) == FP_NINF))
+#else
+#define zend_isinf(a) 0
+#endif
 
-    
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-      -L$SQLITE_DIR/$PHP_LIBDIR -lm
-    "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
+int main(int argc, char** argv)
+{
+	return zend_isinf(HUGE_VAL) ? 0 : 1;
+}
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
+EOF
+if { (eval echo configure:93465: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
+  ac_cv_huge_val_inf=yes
 
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  
+  ac_cv_huge_val_inf=no
 
-    fi
-   ;;
-  esac
+fi
+rm -fr conftest*
+fi
 
+fi
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
+echo "$ac_t""$ac_cv_huge_val_inf" 1>&6
+if test "$ac_cv_huge_val_inf" = "yes"; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_HUGE_VAL_INF 1
+EOF
 
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
+fi
+
+echo $ac_n "checking whether HUGE_VAL + -HUGEVAL == NAN""... $ac_c" 1>&6
+echo "configure:93492: checking whether HUGE_VAL + -HUGEVAL == NAN" >&5
+if eval "test \"`echo '$''{'ac_cv_huge_val_nan'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
   
+if test "$cross_compiling" = yes; then
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  ac_cv_huge_val_nan=yes
+
+else
+  cat > conftest.$ac_ext <<EOF
+#line 93503 "configure"
+#include "confdefs.h"
+
+#include <math.h>
+#include <stdlib.h>
+
+#ifdef HAVE_ISNAN
+#define zend_isnan(a) isnan(a)
+#elif defined(HAVE_FPCLASS)
+#define zend_isnan(a) ((fpclass(a) == FP_SNAN) || (fpclass(a) == FP_QNAN))
+#else
+#define zend_isnan(a) 0
+#endif
+
+int main(int argc, char** argv)
+{
+#if defined(__sparc__) && !(__GNUC__ >= 3)
+	/* prevent bug #27830 */
+	return 1;
+#else
+	return zend_isnan(HUGE_VAL + -HUGE_VAL) ? 0 : 1;
+#endif
+}
+
+EOF
+if { (eval echo configure:93528: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  ac_cv_huge_val_nan=yes
+
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
   
-  fi
+  ac_cv_huge_val_nan=no
 
+fi
+rm -fr conftest*
+fi
 
-      fi
-    
-  fi
+fi
 
-    ;;
-    esac
-  done
+echo "$ac_t""$ac_cv_huge_val_nan" 1>&6
+if test "$ac_cv_huge_val_nan" = "yes"; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_HUGE_VAL_NAN 1
+EOF
 
-  echo $ac_n "checking for sqlite_open in -lsqlite""... $ac_c" 1>&6
-echo "configure:86937: checking for sqlite_open in -lsqlite" >&5
-ac_lib_var=`echo sqlite'_'sqlite_open | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+fi
+
+echo $ac_n "checking whether strptime() declaration fails""... $ac_c" 1>&6
+echo "configure:93555: checking whether strptime() declaration fails" >&5
+if eval "test \"`echo '$''{'ac_cv_strptime_decl_fails'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsqlite  $LIBS"
+  
 cat > conftest.$ac_ext <<EOF
-#line 86945 "configure"
+#line 93561 "configure"
 #include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char sqlite_open();
+
+#include <time.h>
 
 int main() {
-sqlite_open()
+
+#ifndef HAVE_STRPTIME
+#error no strptime() on this platform
+#else
+/* use invalid strptime() declaration to see if it fails to compile */
+int strptime(const char *s, const char *format, struct tm *tm);
+#endif
+
 ; return 0; }
 EOF
-if { (eval echo configure:86956: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:93577: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+  
+  ac_cv_strptime_decl_fails=no
+
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
+  
+  ac_cv_strptime_decl_fails=yes
+
 fi
 rm -f conftest*
-LIBS="$ac_save_LIBS"
-
 fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-      
-
-  if test "$ext_shared" = "yes"; then
-    SQLITE_SHARED_LIBADD="-lsqlite $SQLITE_SHARED_LIBADD"
-    if test -n "$SQLITE_DIR/$PHP_LIBDIR"; then
-      
-  if test "$SQLITE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SQLITE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$SQLITE_DIR/$PHP_LIBDIR" || echo "$SQLITE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$SQLITE_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $SQLITE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$SQLITE_DIR/$PHP_LIBDIR\"`"
-  fi
 
-    
-      if test "$ext_shared" = "yes"; then
-        SQLITE_SHARED_LIBADD="-L$ai_p $SQLITE_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && SQLITE_SHARED_LIBADD="$ld_runpath_switch$ai_p $SQLITE_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
+echo "$ac_t""$ac_cv_strptime_decl_fails" 1>&6
+if test "$ac_cv_strptime_decl_fails" = "yes"; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_STRPTIME_DECL_FAILS 1
+EOF
 
+fi
 
-      fi
-    
-  fi
+for ac_hdr in wchar.h
+do
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:93605: checking for $ac_hdr" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 93610 "configure"
+#include "confdefs.h"
+#include <$ac_hdr>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:93615: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_hdr 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
 
-    fi
-  else
-    
+for ac_func in mblen
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:93644: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 93649 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
 
-  if test -n "$SQLITE_DIR/$PHP_LIBDIR"; then
-    
-  if test "$SQLITE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SQLITE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$SQLITE_DIR/$PHP_LIBDIR" || echo "$SQLITE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$SQLITE_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $SQLITE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$SQLITE_DIR/$PHP_LIBDIR\"`"
-  fi
+int main() {
 
-    
-      
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
 
+; return 0; }
+EOF
+if { (eval echo configure:93672: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=no"
+fi
+rm -f conftest*
+fi
 
-    
-  fi
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
 
-  fi
-  
-  
-  case sqlite in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsqlite $LIBS" 
-   ;;
-  esac
+for ac_func in mbrlen mbsinit
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:93699: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 93704 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
 
+int main() {
 
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
 
+; return 0; }
+EOF
+if { (eval echo configure:93727: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=no"
+fi
+rm -f conftest*
+fi
 
-  fi
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
 
+echo $ac_n "checking for mbstate_t""... $ac_c" 1>&6
+echo "configure:93752: checking for mbstate_t" >&5
+if eval "test \"`echo '$''{'ac_cv_type_mbstate_t'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+cat > conftest.$ac_ext <<EOF
+#line 93758 "configure"
+#include "confdefs.h"
 
-      
-  if test "$SQLITE_DIR/include" != "/usr/include"; then
-    
-  if test -z "$SQLITE_DIR/include" || echo "$SQLITE_DIR/include" | grep '^/' >/dev/null ; then
-    ai_p=$SQLITE_DIR/include
-  else
-    
-    ep_dir="`echo $SQLITE_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$SQLITE_DIR/include\"`"
-  fi
+#ifdef HAVE_WCHAR_H
+# include <wchar.h>
+#endif
 
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
+int main() {
 
-  fi
+int __tmp__() { mbstate_t a; }
 
-    
+; return 0; }
+EOF
+if { (eval echo configure:93771: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
   
-else
-  echo "$ac_t""no" 1>&6
+  ac_cv_type_mbstate_t=yes
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_sqlite_sqlite_open
-    
-      { echo "configure: error: wrong sqlite lib version or lib not found" 1>&2; exit 1; }
-    
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
   
+  ac_cv_type_mbstate_t=no
+
+fi
+rm -f conftest*
 fi
 
-    SQLITE_MODULE_TYPE=external
-    PHP_SQLITE_CFLAGS=$pdo_inc_path
-    sqlite_extra_sources="libsqlite/src/encode.c"
-  else
-    # use bundled library
-    
-  # we only support certain lemon versions
-  lemon_version_list="1.0"
+echo "$ac_t""$ac_cv_type_mbstate_t" 1>&6
+if test "$ac_cv_type_mbstate_t" = "yes"; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_MBSTATE_T 1
+EOF
 
-  # Extract the first word of "lemon", so it can be a program name with args.
-set dummy lemon; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:87129: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_LEMON'+set}'`\" = set"; then
+fi
+
+for ac_hdr in atomic.h
+do
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:93799: checking for $ac_hdr" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  if test -n "$LEMON"; then
-  ac_cv_prog_LEMON="$LEMON" # Let the user override the test.
+  cat > conftest.$ac_ext <<EOF
+#line 93804 "configure"
+#include "confdefs.h"
+#include <$ac_hdr>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:93809: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
 else
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_prog_LEMON="lemon"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
-fi
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
 fi
-LEMON="$ac_cv_prog_LEMON"
-if test -n "$LEMON"; then
-  echo "$ac_t""$LEMON" 1>&6
-else
-  echo "$ac_t""no" 1>&6
+rm -f conftest*
 fi
-
-  if test "$LEMON"; then
-    echo $ac_n "checking for lemon version""... $ac_c" 1>&6
-echo "configure:87157: checking for lemon version" >&5
-if eval "test \"`echo '$''{'php_cv_lemon_version'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-      lemon_version=`$LEMON -x 2>/dev/null | $SED -e 's/^.* //'`
-      php_cv_lemon_version=invalid
-      for lemon_check_version in $lemon_version_list; do
-        if test "$lemon_version" = "$lemon_check_version"; then
-          php_cv_lemon_version="$lemon_check_version (ok)"
-        fi
-      done
-    
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_hdr 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
 fi
+done
 
-echo "$ac_t""$php_cv_lemon_version" 1>&6
-  else
-    lemon_version=none
-  fi
-  case $php_cv_lemon_version in
-    ""|invalid)
-      lemon_msg="lemon versions supported for regeneration of libsqlite parsers: $lemon_version_list (found: $lemon_version)."
-      echo "configure: warning: $lemon_msg" 1>&2
-      LEMON="exit 0;"
-      ;;
-  esac
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST LEMON"
 
 
-    SQLITE_MODULE_TYPE=builtin
-    PHP_SQLITE_CFLAGS="-I@ext_srcdir@/libsqlite/src -I@ext_builddir@/libsqlite/src $pdo_inc_path"
-    sqlite_extra_sources="libsqlite/src/opcodes.c \
-        libsqlite/src/parse.c libsqlite/src/encode.c \
-        libsqlite/src/auth.c libsqlite/src/btree.c libsqlite/src/build.c \
-        libsqlite/src/delete.c libsqlite/src/expr.c libsqlite/src/func.c \
-        libsqlite/src/hash.c libsqlite/src/insert.c libsqlite/src/main.c \
-        libsqlite/src/os.c libsqlite/src/pager.c \
-        libsqlite/src/printf.c libsqlite/src/random.c \
-        libsqlite/src/select.c libsqlite/src/table.c libsqlite/src/tokenize.c \
-        libsqlite/src/update.c libsqlite/src/util.c libsqlite/src/vdbe.c \
-        libsqlite/src/attach.c libsqlite/src/btree_rb.c libsqlite/src/pragma.c \
-        libsqlite/src/vacuum.c libsqlite/src/copy.c \
-        libsqlite/src/vdbeaux.c libsqlite/src/date.c \
-        libsqlite/src/where.c libsqlite/src/trigger.c"
-  fi
-        sqlite_sources="sqlite.c sess_sqlite.c pdo_sqlite2.c $sqlite_extra_sources" 
-  
-  ext_builddir=ext/sqlite
-  ext_srcdir=$abs_srcdir/ext/sqlite
+  ext_builddir=ext/standard
+  ext_srcdir=$abs_srcdir/ext/standard
 
-  ac_extra=`echo "$PHP_SQLITE_CFLAGS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
+  ac_extra=
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_SQLITE_SHARED=no
+  if test "" != "shared" && test "" != "yes" && test "" != "cli"; then
+    PHP_STANDARD_SHARED=no
     
   
-  case ext/sqlite in
+  case ext/standard in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sqlite/"; ac_bdir="ext/sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -87228,7 +93860,17 @@ echo "$ac_t""$php_cv_lemon_version" 1>&6
 
 
   old_IFS=$IFS
-  for ac_src in $sqlite_sources; do
+  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
+                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
+                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
+                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
+                            microtime.c pack.c pageinfo.c quot_print.c rand.c \
+                            soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
+                            var.c versioning.c assert.c strnatcmp.c levenshtein.c \
+                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
+                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
+                            var_unserializer.c ftok.c sha1.c user_filters.c uuencode.c \
+                            filters.c proc_open.c streamsfuncs.c http.c; do
   
       IFS=.
       set $ac_src
@@ -87251,18 +93893,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC sqlite"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC sqlite"
+    EXT_STATIC="$EXT_STATIC standard"
+    if test "" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC standard"
     fi
   else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_SQLITE_SHARED=yes
+    if test "" = "shared" || test "" = "yes"; then
+      PHP_STANDARD_SHARED=yes
       
-  case ext/sqlite in
+  case ext/standard in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sqlite/"; ac_bdir="ext/sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -87277,14 +93919,24 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in $sqlite_sources; do
+  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
+                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
+                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
+                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
+                            microtime.c pack.c pageinfo.c quot_print.c rand.c \
+                            soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
+                            var.c versioning.c assert.c strnatcmp.c levenshtein.c \
+                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
+                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
+                            var_unserializer.c ftok.c sha1.c user_filters.c uuencode.c \
+                            filters.c proc_open.c streamsfuncs.c http.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_sqlite="$shared_objects_sqlite $ac_bdir$ac_obj.lo"
+      shared_objects_standard="$shared_objects_standard $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -87307,31 +93959,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) $(PHPSQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsqlite.so '$ext_builddir'/phpsqlite.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpstandard.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) $(PHPSTANDARD_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpstandard.so '$ext_builddir'/phpstandard.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSQLITE, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSTANDARD, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) $(PHPSQLITE_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) $(PHPSTANDARD_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsqlite.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpstandard.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsqlite.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpstandard.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sqlite"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_standard"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpsqlite.$suffix: $ext_builddir/phpsqlite.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsqlite.$suffix \$(phplibdir)
+\$(phplibdir)/phpstandard.$suffix: $ext_builddir/phpstandard.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpstandard.$suffix \$(phplibdir)
 
-$ext_builddir/phpsqlite.$suffix: \$(shared_objects_sqlite) \$(PHPSQLITE_SHARED_DEPENDENCIES)
+$ext_builddir/phpstandard.$suffix: \$(shared_objects_standard) \$(PHPSTANDARD_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -87344,31 +93996,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) $(SQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sqlite.so '$ext_builddir'/sqlite.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/standard.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) $(STANDARD_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/standard.so '$ext_builddir'/standard.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SQLITE, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(STANDARD, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) $(SQLITE_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) $(STANDARD_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sqlite.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/standard.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sqlite.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/standard.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sqlite"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_standard"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/sqlite.$suffix: $ext_builddir/sqlite.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/sqlite.$suffix \$(phplibdir)
+\$(phplibdir)/standard.$suffix: $ext_builddir/standard.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/standard.$suffix \$(phplibdir)
 
-$ext_builddir/sqlite.$suffix: \$(shared_objects_sqlite) \$(SQLITE_SHARED_DEPENDENCIES)
+$ext_builddir/standard.$suffix: \$(shared_objects_standard) \$(STANDARD_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -87376,22 +94028,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_SQLITE 1
+#define COMPILE_DL_STANDARD 1
 EOF
 
     fi
   fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_SQLITE_SHARED=no
+  if test "" != "shared" && test "" != "yes" && test "" = "cli"; then
+    PHP_STANDARD_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/sqlite in
+  case ext/standard in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sqlite/"; ac_bdir="ext/sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -87406,7 +94058,17 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in $sqlite_sources; do
+  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
+                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
+                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
+                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
+                            microtime.c pack.c pageinfo.c quot_print.c rand.c \
+                            soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
+                            var.c versioning.c assert.c strnatcmp.c levenshtein.c \
+                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
+                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
+                            var_unserializer.c ftok.c sha1.c user_filters.c uuencode.c \
+                            filters.c proc_open.c streamsfuncs.c http.c; do
   
       IFS=.
       set $ac_src
@@ -87420,906 +94082,407 @@ EOF
         *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
         *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
         *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-        EXT_STATIC="$EXT_STATIC sqlite"
-        ;;
-      *)
-        
-  
-  case ext/sqlite in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sqlite/"; ac_bdir="ext/sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in $sqlite_sources; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC sqlite"
-  fi
-  
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
-
-
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=sqlite
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
-
-  fi
-
-  
-  am_i_shared=$PHP_SQLITE_SHARED
-  is_it_shared=$PHP_SPL_SHARED
-  is_it_enabled=$PHP_SPL
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension sqlite to build statically, but it
-depends on extension spl, which you've configured to build shared.
-You either need to build sqlite shared or build spl statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension sqlite, which depends on extension spl,
-but you've either not enabled spl, or have disabled it.
-" 1>&2; exit 1; }
-  fi
-  
-  
-  am_i_shared=$PHP_SQLITE_SHARED
-  is_it_shared=$PHP_PDO_SHARED
-  is_it_enabled=$PHP_PDO
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension sqlite to build statically, but it
-depends on extension pdo, which you've configured to build shared.
-You either need to build sqlite shared or build pdo statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension sqlite, which depends on extension pdo,
-but you've either not enabled pdo, or have disabled it.
-" 1>&2; exit 1; }
-  fi
-  
-
-  
-  src=$ext_srcdir/Makefile.frag
-  ac_srcdir=$ext_srcdir
-  ac_builddir=$ext_builddir
-  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments
-
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST SQLITE_SHARED_LIBADD"
-
-  
-  
-    for header_file in $ext_builddir/libsqlite/src/sqlite.h; do
-      
-  
-  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INSTALLHEADERS$unique=set"
-    
-        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
-      
-  fi
-
-    done 
-  
-
-  
-  if test "$SQLITE_MODULE_TYPE" = "builtin"; then
-    
-  
-    $php_shtool mkdir -p $ext_builddir/libsqlite/src
-  
-
-    echo $ac_n "checking size of char *""... $ac_c" 1>&6
-echo "configure:87570: checking size of char *" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_char_p'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  ac_cv_sizeof_char_p=4
-else
-  cat > conftest.$ac_ext <<EOF
-#line 87578 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-int main()
-{
-  FILE *f=fopen("conftestval", "w");
-  if (!f) return(1);
-  fprintf(f, "%d\n", sizeof(char *));
-  return(0);
-}
-EOF
-if { (eval echo configure:87589: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_sizeof_char_p=`cat conftestval`
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_sizeof_char_p=0
-fi
-rm -fr conftest*
-fi
-
-fi
-echo "$ac_t""$ac_cv_sizeof_char_p" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_CHAR_P $ac_cv_sizeof_char_p
-EOF
-
-
-    cat >> confdefs.h <<\EOF
-#define SQLITE_PTR_SZ SIZEOF_CHAR_P
-EOF
-
-                if test "$PHP_SQLITE_UTF8" = "yes"; then
-      SQLITE_ENCODING="UTF8"
-      cat >> confdefs.h <<\EOF
-#define SQLITE_UTF8 1
-EOF
-
-    else
-      SQLITE_ENCODING="ISO8859"
-    fi
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST SQLITE_ENCODING"
-
-
-    SQLITE_VERSION=`cat $ext_srcdir/libsqlite/VERSION`
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST SQLITE_VERSION"
-
-
-    sed -e s/--VERS--/$SQLITE_VERSION/ -e s/--ENCODING--/$SQLITE_ENCODING/ $ext_srcdir/libsqlite/src/sqlite.h.in > $ext_builddir/libsqlite/src/sqlite.h
-
-    if test "$ext_shared" = "no" || test "$ext_srcdir" != "$abs_srcdir"; then
-      echo '#include <php_config.h>' > $ext_builddir/libsqlite/src/config.h
-    else
-      echo "#include \"$abs_builddir/config.h\"" > $ext_builddir/libsqlite/src/config.h
-    fi
-    
-    cat >> $ext_builddir/libsqlite/src/config.h <<EOF
-#if ZTS
-# define THREADSAFE 1
-#endif
-#if !ZEND_DEBUG
-# define NDEBUG
-#endif
-EOF
-  fi
-  
-  for ac_func in usleep nanosleep
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:87651: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 87656 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
-; return 0; }
-EOF
-if { (eval echo configure:87679: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-  for ac_hdr in time.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:87707: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 87712 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:87717: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
-
-fi
-
-
-
-echo $ac_n "checking whether flush should be called explicitly after a buffered io""... $ac_c" 1>&6
-echo "configure:87748: checking whether flush should be called explicitly after a buffered io" >&5
-if eval "test \"`echo '$''{'ac_cv_flush_io'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  
-  ac_cv_flush_io=no
-
-else
-  cat > conftest.$ac_ext <<EOF
-#line 87759 "configure"
-#include "confdefs.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-
-int main(int argc, char **argv)
-{
-	char *filename = tmpnam(NULL);
-	char buffer[64];
-	int result = 0;
-	
-	FILE *fp = fopen(filename, "wb");
-	if (NULL == fp)
-		return 0;
-	fputs("line 1\n", fp);
-	fputs("line 2\n", fp);
-	fclose(fp);
-	
-	fp = fopen(filename, "rb+");
-	if (NULL == fp)
-		return 0;
-	fgets(buffer, sizeof(buffer), fp);
-	fputs("line 3\n", fp);
-	rewind(fp);
-	fgets(buffer, sizeof(buffer), fp);
-	if (0 != strcmp(buffer, "line 1\n"))
-		result = 1;
-	fgets(buffer, sizeof(buffer), fp);
-	if (0 != strcmp(buffer, "line 3\n"))
-		result = 1;
-	fclose(fp);
-	unlink(filename);
-
-	exit(result);
-}
+      esac
 
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:87797: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-  ac_cv_flush_io=no
-
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  
-  ac_cv_flush_io=yes
+  done
 
-fi
-rm -fr conftest*
-fi
 
-fi
+        EXT_STATIC="$EXT_STATIC standard"
+        ;;
+      *)
+        
+  
+  case ext/standard in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-echo "$ac_t""$ac_cv_flush_io" 1>&6
-if test "$ac_cv_flush_io" = "yes"; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_FLUSHIO 1
-EOF
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-fi
 
-if test "$ac_cv_func_crypt" = "no"; then
-  echo $ac_n "checking for crypt in -lcrypt""... $ac_c" 1>&6
-echo "configure:87825: checking for crypt in -lcrypt" >&5
-ac_lib_var=`echo crypt'_'crypt | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lcrypt  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 87833 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char crypt();
+  old_IFS=$IFS
+  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
+                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
+                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
+                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
+                            microtime.c pack.c pageinfo.c quot_print.c rand.c \
+                            soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
+                            var.c versioning.c assert.c strnatcmp.c levenshtein.c \
+                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
+                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
+                            var_unserializer.c ftok.c sha1.c user_filters.c uuencode.c \
+                            filters.c proc_open.c streamsfuncs.c http.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
-int main() {
-crypt()
-; return 0; }
-EOF
-if { (eval echo configure:87844: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LIBS="-lcrypt $LIBS -lcrypt"
-    cat >> confdefs.h <<\EOF
-#define HAVE_CRYPT 1
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
 
-  
-else
-  echo "$ac_t""no" 1>&6
-fi
 
-fi
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC standard"
+  fi
   
-echo $ac_n "checking for standard DES crypt""... $ac_c" 1>&6
-echo "configure:87873: checking for standard DES crypt" >&5
-if eval "test \"`echo '$''{'ac_cv_crypt_des'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
   
-  if test "$cross_compiling" = yes; then
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
   
-  ac_cv_crypt_des=yes
-
-else
-  cat > conftest.$ac_ext <<EOF
-#line 87884 "configure"
-#include "confdefs.h"
 
-#if HAVE_UNISTD_H
-#include <unistd.h>
-#endif
 
-#if HAVE_CRYPT_H
-#include <crypt.h>
-#endif
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=standard
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
-main() {
-#if HAVE_CRYPT
-    exit (strcmp((char *)crypt("rasmuslerdorf","rl"),"rl.3StKT.4T8M"));
-#else
-	exit(0);
-#endif
-}
-EOF
-if { (eval echo configure:87903: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-  ac_cv_crypt_des=yes
+  fi
 
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  
-  ac_cv_crypt_des=no
 
-fi
-rm -fr conftest*
-fi
 
-fi
+  src=$ext_srcdir/Makefile.frag
+  ac_srcdir=$ext_srcdir
+  ac_builddir=$ext_builddir
+  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments
 
-echo "$ac_t""$ac_cv_crypt_des" 1>&6
 
-echo $ac_n "checking for extended DES crypt""... $ac_c" 1>&6
-echo "configure:87924: checking for extended DES crypt" >&5
-if eval "test \"`echo '$''{'ac_cv_crypt_ext_des'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
   
-  if test "$cross_compiling" = yes; then
+    for header_file in ext/standard/; do
+      
   
-  ac_cv_crypt_ext_des=no
+  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INSTALLHEADERS$unique=set"
+    
+        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
+      
+  fi
 
-else
-  cat > conftest.$ac_ext <<EOF
-#line 87935 "configure"
-#include "confdefs.h"
+    done 
+  
 
-#if HAVE_UNISTD_H
-#include <unistd.h>
-#endif
 
-#if HAVE_CRYPT_H
-#include <crypt.h>
-#endif
 
-main() {
-#if HAVE_CRYPT
-  exit (strcmp((char *)crypt("rasmuslerdorf","_J9..rasm"),"_J9..rasmBYk8r9AiWNc"));
-#else
-  exit(0);
-#endif
-}
-EOF
-if { (eval echo configure:87954: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-  ac_cv_crypt_ext_des=yes
 
+php_with_sybase_ct=no
+
+echo $ac_n "checking for Sybase-CT support""... $ac_c" 1>&6
+echo "configure:94199: checking for Sybase-CT support" >&5
+# Check whether --with-sybase-ct or --without-sybase-ct was given.
+if test "${with_sybase_ct+set}" = set; then
+  withval="$with_sybase_ct"
+  PHP_SYBASE_CT=$withval
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
   
-  ac_cv_crypt_ext_des=no
+  PHP_SYBASE_CT=no
+  test "$PHP_ENABLE_ALL" && PHP_SYBASE_CT=$PHP_ENABLE_ALL
 
 fi
-rm -fr conftest*
-fi
 
-fi
 
-echo "$ac_t""$ac_cv_crypt_ext_des" 1>&6
 
-echo $ac_n "checking for MD5 crypt""... $ac_c" 1>&6
-echo "configure:87975: checking for MD5 crypt" >&5
-if eval "test \"`echo '$''{'ac_cv_crypt_md5'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  
-  ac_cv_crypt_md5=no
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_SYBASE_CT in
+shared,*)
+  PHP_SYBASE_CT=`echo "$PHP_SYBASE_CT"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_SYBASE_CT=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
-else
-  cat > conftest.$ac_ext <<EOF
-#line 87986 "configure"
-#include "confdefs.h"
 
-#if HAVE_UNISTD_H
-#include <unistd.h>
-#endif
 
-#if HAVE_CRYPT_H
-#include <crypt.h>
-#endif
+echo "$ac_t""$ext_output" 1>&6
 
-main() {
-#if HAVE_CRYPT
-    char salt[15], answer[40];
 
-    salt[0]='$'; salt[1]='1'; salt[2]='$'; 
-    salt[3]='r'; salt[4]='a'; salt[5]='s';
-    salt[6]='m'; salt[7]='u'; salt[8]='s';
-    salt[9]='l'; salt[10]='e'; salt[11]='$';
-    salt[12]='\0';
-    strcpy(answer,salt);
-    strcat(answer,"rISCgZzpwk3UhDidwXvin0");
-    exit (strcmp((char *)crypt("rasmuslerdorf",salt),answer));
-#else
-	exit(0);
-#endif
-}
-EOF
-if { (eval echo configure:88014: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-  ac_cv_crypt_md5=yes
 
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  
-  ac_cv_crypt_md5=no
 
-fi
-rm -fr conftest*
-fi
+if test "$PHP_SYBASE_CT" != "no"; then
 
-fi
+  if test "$PHP_SYBASE" && test "$PHP_SYBASE" != "no" && test "$ext_shared" = "no"; then
+    { echo "configure: error: You can not use both --with-sybase and --with-sybase-ct in same build!" 1>&2; exit 1; }
+  fi
 
-echo "$ac_t""$ac_cv_crypt_md5" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_SYBASE_CT 1
+EOF
 
-echo $ac_n "checking for Blowfish crypt""... $ac_c" 1>&6
-echo "configure:88035: checking for Blowfish crypt" >&5
-if eval "test \"`echo '$''{'ac_cv_crypt_blowfish'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
   
-  ac_cv_crypt_blowfish=no
-
-else
-  cat > conftest.$ac_ext <<EOF
-#line 88046 "configure"
-#include "confdefs.h"
-
-#if HAVE_UNISTD_H
-#include <unistd.h>
-#endif
+  ext_builddir=ext/sybase_ct
+  ext_srcdir=$abs_srcdir/ext/sybase_ct
 
-#if HAVE_CRYPT_H
-#include <crypt.h>
-#endif
+  ac_extra=
 
-main() {
-#if HAVE_CRYPT
-    char salt[30], answer[70];
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_SYBASE_CT_SHARED=no
     
-    salt[0]='$'; salt[1]='2'; salt[2]='a'; salt[3]='$'; salt[4]='0'; salt[5]='7'; salt[6]='$'; salt[7]='\0';
-    strcat(salt,"rasmuslerd............");
-    strcpy(answer,salt);
-    strcpy(&answer[29],"nIdrcHdxcUxWomQX9j6kvERCFjTg7Ra");
-    exit (strcmp((char *)crypt("rasmuslerdorf",salt),answer));
-#else
-	exit(0);
-#endif
-}
-EOF
-if { (eval echo configure:88071: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
   
-  ac_cv_crypt_blowfish=yes
-
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
+  case ext/sybase_ct in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
   
-  ac_cv_crypt_blowfish=no
-
-fi
-rm -fr conftest*
-fi
 
-fi
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-echo "$ac_t""$ac_cv_crypt_blowfish" 1>&6
 
-echo $ac_n "checking for SHA512 crypt""... $ac_c" 1>&6
-echo "configure:88092: checking for SHA512 crypt" >&5
-if eval "test \"`echo '$''{'ac_cv_crypt_SHA512'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
+  old_IFS=$IFS
+  for ac_src in php_sybase_ct.c; do
   
-  ac_cv_crypt_SHA512=no
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-else
-  cat > conftest.$ac_ext <<EOF
-#line 88103 "configure"
-#include "confdefs.h"
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-#if HAVE_UNISTD_H
-#include <unistd.h>
-#endif
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
-#if HAVE_CRYPT_H
-#include <crypt.h>
-#endif
 
-main() {
-#if HAVE_CRYPT
-    char salt[30], answer[80];
-    
-    salt[0]='$'; salt[1]='6'; salt[2]='$'; salt[3]='$'; salt[4]='b'; salt[5]='a'; salt[6]='r'; salt[7]='\0';
-    strcpy(answer, salt);
-    strcpy(&answer[29],"$6$$QMXjqd7rHQZPQ1yHsXkQqC1FBzDiVfTHXL.LaeDAeVV.IzMaV9VU4MQ8kPuZa2SOP1A0RPm772EaFYjpEJtdu.");
-    exit (strcmp((char *)crypt("foo",salt),answer));
-#else
-	exit(0);
-#endif
-}
-EOF
-if { (eval echo configure:88127: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
+    EXT_STATIC="$EXT_STATIC sybase_ct"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC sybase_ct"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_SYBASE_CT_SHARED=yes
+      
+  case ext/sybase_ct in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  ac_cv_crypt_SHA512=yes
-
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
   
-  ac_cv_crypt_SHA512=no
-
-fi
-rm -fr conftest*
-fi
 
-fi
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
 
-echo "$ac_t""$ac_cv_crypt_SHA512" 1>&6
 
-echo $ac_n "checking for SHA256 crypt""... $ac_c" 1>&6
-echo "configure:88148: checking for SHA256 crypt" >&5
-if eval "test \"`echo '$''{'ac_cv_crypt_SHA256'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
+  old_IFS=$IFS
+  for ac_src in php_sybase_ct.c; do
   
-  ac_cv_crypt_SHA256=no
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_sybase_ct="$shared_objects_sybase_ct $ac_bdir$ac_obj.lo"
 
-else
-  cat > conftest.$ac_ext <<EOF
-#line 88159 "configure"
-#include "confdefs.h"
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-#if HAVE_UNISTD_H
-#include <unistd.h>
-#endif
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
-#if HAVE_CRYPT_H
-#include <crypt.h>
-#endif
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
 
-main() {
-#if HAVE_CRYPT
-    char salt[30], answer[80];
-    salt[0]='$'; salt[1]='5'; salt[2]='$'; salt[3]='$'; salt[4]='s'; salt[5]='a'; salt[6]='l'; salt[7]='t';  salt[8]='s'; salt[9]='t'; salt[10]='r'; salt[11]='i'; salt[12]='n'; salt[13]='g'; salt[14]='\0';    
-    strcat(salt,"");
-    strcpy(answer, salt);
-    strcpy(&answer[29], "$5$saltstring$5B8vYYiY.CVt1RlTTf8KbXBH3hsxY/GNooZaBBGWEc5");
-    exit (strcmp((char *)crypt("foo",salt),answer));
-#else
-	exit(0);
-#endif
-}
-EOF
-if { (eval echo configure:88183: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-  ac_cv_crypt_SHA256=yes
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsybase_ct.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) $(PHPSYBASE_CT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsybase_ct.so '$ext_builddir'/phpsybase_ct.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSYBASE_CT, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) $(PHPSYBASE_CT_SHARED_LIBADD)'
+      ;;
+  esac
 
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsybase_ct.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsybase_ct.$suffix"
+  fi
   
-  ac_cv_crypt_SHA256=no
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sybase_ct"
 
-fi
-rm -fr conftest*
-fi
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpsybase_ct.$suffix: $ext_builddir/phpsybase_ct.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsybase_ct.$suffix \$(phplibdir)
 
-fi
+$ext_builddir/phpsybase_ct.$suffix: \$(shared_objects_sybase_ct) \$(PHPSYBASE_CT_SHARED_DEPENDENCIES)
+	$link_cmd
 
-echo "$ac_t""$ac_cv_crypt_SHA256" 1>&6
+EOF
 
+          ;;
+        *)
+          
+  install_modules="install-modules"
 
-if test "$ac_cv_crypt_blowfish" = "no" || test "$ac_cv_crypt_des" = "no" || test "$ac_cv_crypt_ext_des" = "no" || test "x$php_crypt_r" = "x0"; then
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sybase_ct.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) $(SYBASE_CT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sybase_ct.so '$ext_builddir'/sybase_ct.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SYBASE_CT, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) $(SYBASE_CT_SHARED_LIBADD)'
+      ;;
+  esac
 
-        echo $ac_n "checking whether the compiler supports __alignof__""... $ac_c" 1>&6
-echo "configure:88207: checking whether the compiler supports __alignof__" >&5
-if eval "test \"`echo '$''{'ac_cv_alignof_exists'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sybase_ct.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sybase_ct.$suffix"
+  fi
   
-  cat > conftest.$ac_ext <<EOF
-#line 88213 "configure"
-#include "confdefs.h"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sybase_ct"
 
-  
-int main() {
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/sybase_ct.$suffix: $ext_builddir/sybase_ct.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/sybase_ct.$suffix \$(phplibdir)
+
+$ext_builddir/sybase_ct.$suffix: \$(shared_objects_sybase_ct) \$(SYBASE_CT_SHARED_DEPENDENCIES)
+	$link_cmd
 
-    int align = __alignof__(int);
-  
-; return 0; }
 EOF
-if { (eval echo configure:88223: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  
-    ac_cv_alignof_exists=yes
-  
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  
-    ac_cv_alignof_exists=no
-  
-fi
-rm -f conftest*
-fi
 
-echo "$ac_t""$ac_cv_alignof_exists" 1>&6
-  if test "$ac_cv_alignof_exists" = "yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_ALIGNOF 1
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_SYBASE_CT 1
 EOF
 
+    fi
   fi
 
-        echo $ac_n "checking whether the compiler supports aligned attribute""... $ac_c" 1>&6
-echo "configure:88248: checking whether the compiler supports aligned attribute" >&5
-if eval "test \"`echo '$''{'ac_cv_attribute_aligned'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-  cat > conftest.$ac_ext <<EOF
-#line 88254 "configure"
-#include "confdefs.h"
-
-  
-int main() {
-
-    unsigned char test[32] __attribute__ ((__aligned__ (__alignof__ (int))));
-  
-; return 0; }
-EOF
-if { (eval echo configure:88264: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  
-    ac_cv_attribute_aligned=yes
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_SYBASE_CT_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
   
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
+  case ext/sybase_ct in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-    ac_cv_attribute_aligned=no
   
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$ac_cv_attribute_aligned" 1>&6
-  if test "$ac_cv_attribute_aligned" = "yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_ATTRIBUTE_ALIGNED 1
-EOF
-
-  fi
-    
 
-  cat >> confdefs.h <<EOF
-#define PHP_USE_PHP_CRYPT_R 1
-EOF
-
-  cat >> confdefs.h <<EOF
-#define PHP_STD_DES_CRYPT 1
-EOF
-
-  cat >> confdefs.h <<EOF
-#define PHP_BLOWFISH_CRYPT 1
-EOF
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-  cat >> confdefs.h <<EOF
-#define PHP_EXT_DES_CRYPT 1
-EOF
 
-  cat >> confdefs.h <<EOF
-#define PHP_MD5_CRYPT 1
-EOF
+  old_IFS=$IFS
+  for ac_src in php_sybase_ct.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-  cat >> confdefs.h <<EOF
-#define PHP_SHA512_CRYPT 1
-EOF
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-  cat >> confdefs.h <<EOF
-#define PHP_SHA256_CRYPT 1
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
 
 
+        EXT_STATIC="$EXT_STATIC sybase_ct"
+        ;;
+      *)
+        
   
-  
-  case ext/standard in
+  case ext/sybase_ct in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -88334,20 +94497,20 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in crypt_freesec.c crypt_blowfish.c crypt_sha512.c crypt_sha256.c php_crypt_r.c; do
+  for ac_src in php_sybase_ct.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
       case $ac_src in
-        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
       esac
 
     cat >>Makefile.objects<<EOF
@@ -88357,397 +94520,714 @@ EOF
   done
 
 
-else
-  if test "$ac_cv_crypt_des" = "yes"; then
-    ac_result=1
-    ac_crypt_des=1
-  else
-    ac_result=0
-    ac_crypt_des=0
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC sybase_ct"
   fi
-  cat >> confdefs.h <<EOF
-#define PHP_STD_DES_CRYPT $ac_result
-EOF
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
 
 
-  if test "$ac_cv_crypt_blowfish" = "yes"; then
-    ac_result=1
-    ac_crypt_blowfish=1
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=sybase_ct
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST SYBASE_CT_SHARED_LIBADD"
+
+  
+  if test "$PHP_SYBASE_CT" = "yes"; then
+    SYBASE_CT_INCDIR=/home/sybase/include
+    SYBASE_CT_LIBDIR=/home/sybase/lib
   else
-    ac_result=0
-    ac_crypt_blowfish=0
+    SYBASE_CT_INCDIR=$PHP_SYBASE_CT/include
+    SYBASE_CT_LIBDIR=$PHP_SYBASE_CT/lib
   fi
-  cat >> confdefs.h <<EOF
-#define PHP_BLOWFISH_CRYPT $ac_result
-EOF
 
+  if test -f $SYBASE_CT_INCDIR/ctpublic.h; then
+    
+  if test "$SYBASE_CT_INCDIR" != "/usr/include"; then
+    
+  if test -z "$SYBASE_CT_INCDIR" || echo "$SYBASE_CT_INCDIR" | grep '^/' >/dev/null ; then
+    ai_p=$SYBASE_CT_INCDIR
+  else
+    
+    ep_dir="`echo $SYBASE_CT_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$SYBASE_CT_INCDIR\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
 
-  if test "$ac_cv_crypt_ext_des" = "yes"; then
-    ac_result=1
-    ac_crypt_edes=1
   else
-    ac_result=0
-    ac_crypt_edes=0
+    { echo "configure: error: ctpublic.h missing!" 1>&2; exit 1; }
+  fi
+  
+  
+  if test "$SYBASE_CT_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SYBASE_CT_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$SYBASE_CT_LIBDIR" || echo "$SYBASE_CT_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$SYBASE_CT_LIBDIR
+  else
+    
+    ep_dir="`echo $SYBASE_CT_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$SYBASE_CT_LIBDIR\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-L$ai_p $SYBASE_CT_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && SYBASE_CT_SHARED_LIBADD="$ld_runpath_switch$ai_p $SYBASE_CT_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
   fi
-  cat >> confdefs.h <<EOF
-#define PHP_EXT_DES_CRYPT $ac_result
-EOF
 
 
-  if test "$ac_cv_crypt_md5" = "yes"; then
-    ac_result=1
-    ac_crypt_md5=1
+      fi
+    
+  fi
+
+  if test -f $SYBASE_CT_INCDIR/tds.h || test -f $SYBASE_CT_INCDIR/tds_sysdep_public.h; then
+    
+  
+  case ct in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lct $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case ct in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lct $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lct"
+  elif test -f $SYBASE_CT_INCDIR/libsybct64.so; then
+    
+  
+  case sybcs64 in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybcs64 $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case sybcs64 in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybcs64 $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    
+  
+  case sybct64 in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybct64 $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case sybct64 in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybct64 $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    
+  
+  case sybcomn64 in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybcomn64 $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case sybcomn64 in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybcomn64 $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    
+  
+  case sybintl64 in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybintl64 $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case sybintl64 in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybintl64 $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+
+    ac_solid_uname_s=`uname -s 2>/dev/null`
+    case $ac_solid_uname_s in
+      *OSF*)                            ;; # Tru64/DEC OSF does NOT use the SYB_LP64 define
+      *) CFLAGS="${CFLAGS} -DSYB_LP64"  ;; # 
+    esac
+    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lsybcs64 -lsybct64 -lsybcomn64 -lsybintl64"
+  
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff=" 
+      $SYBASE_CT_LIBS 
+    "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
-    ac_result=0
-    ac_crypt_md5=0
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
-  cat >> confdefs.h <<EOF
-#define PHP_MD5_CRYPT $ac_result
-EOF
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
   
-  if test "$ac_cv_crypt_sha512" = "yes"; then
-    ac_result=1
-    ac_crypt_sha512=1
-  else
-    ac_result=0
-    ac_crypt_sha512=0
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
   fi
-  cat >> confdefs.h <<EOF
-#define PHP_SHA512_CRYPT $ac_result
-EOF
 
 
-  if test "$ac_cv_crypt_sha256" = "yes"; then
-    ac_result=1
-    ac_crypt_sha256=1
-  else
-    ac_result=0
-    ac_crypt_sha256=0
+      fi
+    
   fi
-  cat >> confdefs.h <<EOF
-#define PHP_SHA256_CRYPT $ac_result
-EOF
-
-
-  cat >> confdefs.h <<EOF
-#define PHP_USE_PHP_CRYPT_R 0
-EOF
 
-fi
+    ;;
+    esac
+  done
 
-for ac_func in getcwd getwd asinh acosh atanh log1p hypot glob strfmon nice fpclass isinf isnan mempcpy strpncpy
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:88443: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "checking for netg_errstr in -lsybtcl64""... $ac_c" 1>&6
+echo "configure:94851: checking for netg_errstr in -lsybtcl64" >&5
+ac_lib_var=`echo sybtcl64'_'netg_errstr | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 88448 "configure"
+  ac_save_LIBS="$LIBS"
+LIBS="-lsybtcl64  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 94859 "configure"
 #include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char $ac_func();
+char netg_errstr();
 
 int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
+netg_errstr()
 ; return 0; }
 EOF
-if { (eval echo configure:88471: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:94870: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
 rm -f conftest*
-fi
+LIBS="$ac_save_LIBS"
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+      
+  
+  case sybtcl64 in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybtcl64 $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case sybtcl64 in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybtcl64 $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    
+  
 else
   echo "$ac_t""no" 1>&6
-fi
-done
 
-echo $ac_n "checking for working fnmatch""... $ac_c" 1>&6
-echo "configure:88496: checking for working fnmatch" >&5
-if eval "test \"`echo '$''{'ac_cv_func_fnmatch_works'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  # Some versions of Solaris or SCO have a broken fnmatch function.
-# So we run a test program.  If we are cross-compiling, take no chance.
-# Thanks to John Oleynick and Franc,ois Pinard for this test.
-if test "$cross_compiling" = yes; then
-  ac_cv_func_fnmatch_works=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 88507 "configure"
-#include "confdefs.h"
-main() { exit (fnmatch ("a*", "abc", 0) != 0); }
-EOF
-if { (eval echo configure:88511: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_func_fnmatch_works=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_func_fnmatch_works=no
-fi
-rm -fr conftest*
-fi
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_sybtcl64_netg_errstr
+     
+      
+  
+  case sybtcl64 in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybtcl64 $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case sybtcl64 in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybtcl64 $LIBS" 
+   ;;
+  esac
 
-fi
 
-echo "$ac_t""$ac_cv_func_fnmatch_works" 1>&6
-if test $ac_cv_func_fnmatch_works = yes; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_FNMATCH 1
-EOF
+    fi
+   ;;
+  esac
+
 
+    
+  
 fi
-	
 
+  
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="-L$SYBASE_CT_LIBDIR"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-for ac_func in fork CreateProcess
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:88538: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for insck__getVdate in -linsck64""... $ac_c" 1>&6
+echo "configure:95045: checking for insck__getVdate in -linsck64" >&5
+ac_lib_var=`echo insck64'_'insck__getVdate | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 88543 "configure"
+  ac_save_LIBS="$LIBS"
+LIBS="-linsck64  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 95053 "configure"
 #include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char $ac_func();
+char insck__getVdate();
 
 int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
+insck__getVdate()
 ; return 0; }
 EOF
-if { (eval echo configure:88566: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:95064: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
 rm -f conftest*
-fi
+LIBS="$ac_save_LIBS"
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-  php_can_support_proc_open=yes
-  break
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+  
+  case insck64 in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-linsck64 $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case insck64 in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-linsck64 $LIBS" 
+   ;;
+  esac
 
-else
-  echo "$ac_t""no" 1>&6
-php_can_support_proc_open=no
 
-fi
-done
+    fi
+   ;;
+  esac
 
-echo $ac_n "checking if your OS can spawn processes with inherited handles""... $ac_c" 1>&6
-echo "configure:88596: checking if your OS can spawn processes with inherited handles" >&5
-if test "$php_can_support_proc_open" = "yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define PHP_CAN_SUPPORT_PROC_OPEN 1
-EOF
 
+  
 else
   echo "$ac_t""no" 1>&6
-fi
-
-if test "$PHP_SAPI" = "cgi" || test "$PHP_SAPI" = "cli" || test "$PHP_SAPI" = "embed"; then
-  cat >> confdefs.h <<\EOF
-#define ENABLE_CHROOT_FUNC 1
-EOF
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_insck64_insck__getVdate
+    
+  
 fi
 
-
-  unset ac_cv_func_res_nsearch
-  unset ac_cv_func___res_nsearch
-  unset found
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="-L$SYBASE_CT_LIBDIR"
   
-  echo $ac_n "checking for res_nsearch""... $ac_c" 1>&6
-echo "configure:88620: checking for res_nsearch" >&5
-if eval "test \"`echo '$''{'ac_cv_func_res_nsearch'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 88625 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char res_nsearch(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char res_nsearch();
-
-int main() {
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_res_nsearch) || defined (__stub___res_nsearch)
-choke me
-#else
-res_nsearch();
-#endif
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-; return 0; }
-EOF
-if { (eval echo configure:88648: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_res_nsearch=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_res_nsearch=no"
-fi
-rm -f conftest*
-fi
 
-if eval "test \"`echo '$ac_cv_func_'res_nsearch`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
- echo $ac_n "checking for __res_nsearch""... $ac_c" 1>&6
-echo "configure:88666: checking for __res_nsearch" >&5
-if eval "test \"`echo '$''{'ac_cv_func___res_nsearch'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 88671 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char __res_nsearch(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __res_nsearch();
+    fi
+   ;;
+  esac
 
-int main() {
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub___res_nsearch) || defined (__stub_____res_nsearch)
-choke me
-#else
-__res_nsearch();
-#endif
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
 
-; return 0; }
-EOF
-if { (eval echo configure:88694: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func___res_nsearch=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func___res_nsearch=no"
-fi
-rm -f conftest*
-fi
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-if eval "test \"`echo '$ac_cv_func_'__res_nsearch`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
- 
-fi
 
+      fi
+    
+  fi
 
-  case $found in
-  yes) 
-    cat >> confdefs.h <<\EOF
-#define HAVE_RES_NSEARCH 1
-EOF
+    ;;
+    esac
+  done
 
-    ac_cv_func_res_nsearch=yes
-  ;;
-  
-    *) 
-  
-  unset ac_cv_lib_resolv_res_nsearch
-  unset ac_cv_lib_resolv___res_nsearch
-  unset found
-  echo $ac_n "checking for res_nsearch in -lresolv""... $ac_c" 1>&6
-echo "configure:88732: checking for res_nsearch in -lresolv" >&5
-ac_lib_var=`echo resolv'_'res_nsearch | sed 'y%./+-%__p_%'`
+  echo $ac_n "checking for bsd_tcp in -linsck64""... $ac_c" 1>&6
+echo "configure:95212: checking for bsd_tcp in -linsck64" >&5
+ac_lib_var=`echo insck64'_'bsd_tcp | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lresolv  $LIBS"
+LIBS="-linsck64  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 88740 "configure"
+#line 95220 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char res_nsearch();
+char bsd_tcp();
 
 int main() {
-res_nsearch()
+bsd_tcp()
 ; return 0; }
 EOF
-if { (eval echo configure:88751: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:95231: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -88762,167 +95242,257 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+  
+  case insck64 in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-linsck64 $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case insck64 in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-linsck64 $LIBS" 
+   ;;
+  esac
 
-    echo $ac_n "checking for __res_nsearch in -lresolv""... $ac_c" 1>&6
-echo "configure:88771: checking for __res_nsearch in -lresolv" >&5
-ac_lib_var=`echo resolv'_'__res_nsearch | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lresolv  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 88779 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __res_nsearch();
 
-int main() {
-__res_nsearch()
-; return 0; }
-EOF
-if { (eval echo configure:88790: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+    fi
+   ;;
+  esac
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
+
+  
 else
   echo "$ac_t""no" 1>&6
-found=no
-fi
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_insck64_bsd_tcp
+    
   
 fi
 
+  elif test -f $SYBASE_CT_INCDIR/libsybct.so; then
+    
+  
+  case sybcs in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybcs $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case sybcs in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybcs $LIBS" 
+   ;;
+  esac
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lresolv"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 88822 "configure"
-#include "confdefs.h"
-main() { return (0); }
-EOF
-if { (eval echo configure:88826: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
 
-    LIBS=$ac_libs
-  fi
+    fi
+   ;;
+  esac
+
 
-  if test "$found" = "yes"; then
     
   
-  case resolv in
+  case sybct in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lresolv $LIBS" 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybct $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case sybct in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybct $LIBS" 
    ;;
   esac
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_RES_NSEARCH 1
-EOF
+    fi
+   ;;
+  esac
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBRESOLV 1
-EOF
 
-    ac_cv_func_res_nsearch=yes
+    
+  
+  case sybcomn in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybcomn $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case sybcomn in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybcomn $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    
+  
+  case sybintl in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybintl $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case sybintl in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybintl $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+  
+    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lsybcs -lsybct -lsybcomn -lsybintl"
+  
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff=" 
+      $SYBASE_CT_LIBS 
+    "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
     
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
-  unset ac_cv_lib_bind_res_nsearch
-  unset ac_cv_lib_bind___res_nsearch
-  unset found
-  echo $ac_n "checking for res_nsearch in -lbind""... $ac_c" 1>&6
-echo "configure:88868: checking for res_nsearch in -lbind" >&5
-ac_lib_var=`echo bind'_'res_nsearch | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lbind  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 88876 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char res_nsearch();
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-int main() {
-res_nsearch()
-; return 0; }
-EOF
-if { (eval echo configure:88887: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
+      fi
+    
+  fi
 
-    echo $ac_n "checking for __res_nsearch in -lbind""... $ac_c" 1>&6
-echo "configure:88907: checking for __res_nsearch in -lbind" >&5
-ac_lib_var=`echo bind'_'__res_nsearch | sed 'y%./+-%__p_%'`
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for netg_errstr in -lsybtcl""... $ac_c" 1>&6
+echo "configure:95477: checking for netg_errstr in -lsybtcl" >&5
+ac_lib_var=`echo sybtcl'_'netg_errstr | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lbind  $LIBS"
+LIBS="-lsybtcl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 88915 "configure"
+#line 95485 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char __res_nsearch();
+char netg_errstr();
 
 int main() {
-__res_nsearch()
+netg_errstr()
 ; return 0; }
 EOF
-if { (eval echo configure:88926: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:95496: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -88937,89 +95507,186 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  found=yes
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+      
+  
+  case sybtcl in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybtcl $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case sybtcl in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybtcl $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    
+  
 else
   echo "$ac_t""no" 1>&6
-found=no
-fi
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_sybtcl_netg_errstr
+     
+      
   
-fi
+  case sybtcl in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybtcl $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case sybtcl in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybtcl $LIBS" 
+   ;;
+  esac
 
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lbind"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 88958 "configure"
-#include "confdefs.h"
-main() { return (0); }
-EOF
-if { (eval echo configure:88962: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
+    fi
+   ;;
+  esac
+
+
+    
+  
 fi
 
-    LIBS=$ac_libs
+  
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="-L$SYBASE_CT_LIBDIR"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
   fi
 
-  if test "$found" = "yes"; then
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
     
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  case bind in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lbind $LIBS" 
-   ;;
-  esac
+  fi
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_RES_NSEARCH 1
-EOF
+      fi
+    
+  fi
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBBIND 1
-EOF
+    ;;
+    esac
+  done
 
-    ac_cv_func_res_nsearch=yes
-  else
-    
-  
-  unset ac_cv_lib_socket_res_nsearch
-  unset ac_cv_lib_socket___res_nsearch
-  unset found
-  echo $ac_n "checking for res_nsearch in -lsocket""... $ac_c" 1>&6
-echo "configure:89004: checking for res_nsearch in -lsocket" >&5
-ac_lib_var=`echo socket'_'res_nsearch | sed 'y%./+-%__p_%'`
+  echo $ac_n "checking for insck__getVdate in -linsck""... $ac_c" 1>&6
+echo "configure:95671: checking for insck__getVdate in -linsck" >&5
+ac_lib_var=`echo insck'_'insck__getVdate | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lsocket  $LIBS"
+LIBS="-linsck  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 89012 "configure"
+#line 95679 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char res_nsearch();
+char insck__getVdate();
 
 int main() {
-res_nsearch()
+insck__getVdate()
 ; return 0; }
 EOF
-if { (eval echo configure:89023: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:95690: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -89034,31 +95701,159 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  found=yes
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+  
+  case insck in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case insck in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-linsck $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+  
 else
   echo "$ac_t""no" 1>&6
 
-    echo $ac_n "checking for __res_nsearch in -lsocket""... $ac_c" 1>&6
-echo "configure:89043: checking for __res_nsearch in -lsocket" >&5
-ac_lib_var=`echo socket'_'__res_nsearch | sed 'y%./+-%__p_%'`
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_insck_insck__getVdate
+    
+  
+fi
+
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="-L$SYBASE_CT_LIBDIR"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for bsd_tcp in -linsck""... $ac_c" 1>&6
+echo "configure:95838: checking for bsd_tcp in -linsck" >&5
+ac_lib_var=`echo insck'_'bsd_tcp | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lsocket  $LIBS"
+LIBS="-linsck  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 89051 "configure"
+#line 95846 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char __res_nsearch();
+char bsd_tcp();
 
 int main() {
-__res_nsearch()
+bsd_tcp()
 ; return 0; }
 EOF
-if { (eval echo configure:89062: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:95857: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -89073,255 +95868,257 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  found=yes
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+  
+  case insck in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case insck in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-linsck $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+  
 else
   echo "$ac_t""no" 1>&6
-found=no
-fi
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_insck_bsd_tcp
+    
   
 fi
 
+  else
+    
+  
+  case cs in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lcs $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case cs in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lcs $LIBS" 
+   ;;
+  esac
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lsocket"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 89094 "configure"
-#include "confdefs.h"
-main() { return (0); }
-EOF
-if { (eval echo configure:89098: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
 
-    LIBS=$ac_libs
-  fi
+    fi
+   ;;
+  esac
+
 
-  if test "$found" = "yes"; then
     
   
-  case socket in
+  case ct in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lsocket $LIBS" 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lct $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case ct in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lct $LIBS" 
    ;;
   esac
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_RES_NSEARCH 1
-EOF
+    fi
+   ;;
+  esac
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBSOCKET 1
-EOF
 
-    ac_cv_func_res_nsearch=yes
-  else
     
-  :
-
-  fi
   
-
-  fi
+  case comn in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lcomn $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
   
+  case comn in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lcomn $LIBS" 
+   ;;
+  esac
 
-  fi
-  
- ;;
-  
+
+    fi
+   ;;
   esac
 
 
-  unset ac_cv_func_dns_search
-  unset ac_cv_func___dns_search
-  unset found
+    
   
-  echo $ac_n "checking for dns_search""... $ac_c" 1>&6
-echo "configure:89155: checking for dns_search" >&5
-if eval "test \"`echo '$''{'ac_cv_func_dns_search'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 89160 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char dns_search(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char dns_search();
-
-int main() {
+  case intl in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lintl $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case intl in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lintl $LIBS" 
+   ;;
+  esac
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_dns_search) || defined (__stub___dns_search)
-choke me
-#else
-dns_search();
-#endif
 
-; return 0; }
-EOF
-if { (eval echo configure:89183: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_dns_search=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_dns_search=no"
-fi
-rm -f conftest*
-fi
+    fi
+   ;;
+  esac
 
-if eval "test \"`echo '$ac_cv_func_'dns_search`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
- echo $ac_n "checking for __dns_search""... $ac_c" 1>&6
-echo "configure:89201: checking for __dns_search" >&5
-if eval "test \"`echo '$''{'ac_cv_func___dns_search'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 89206 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char __dns_search(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __dns_search();
 
-int main() {
+  
+    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lcs -lct -lcomn -lintl"
+  
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff=" 
+      $SYBASE_CT_LIBS 
+    "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub___dns_search) || defined (__stub_____dns_search)
-choke me
-#else
-__dns_search();
-#endif
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-; return 0; }
-EOF
-if { (eval echo configure:89229: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func___dns_search=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func___dns_search=no"
-fi
-rm -f conftest*
-fi
 
-if eval "test \"`echo '$ac_cv_func_'__dns_search`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
- 
-fi
+    fi
+   ;;
+  esac
 
 
-  case $found in
-  yes) 
-    cat >> confdefs.h <<\EOF
-#define HAVE_DNS_SEARCH 1
-EOF
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
 
-    ac_cv_func_dns_search=yes
-  ;;
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
-    *) 
   
-  unset ac_cv_lib_resolv_dns_search
-  unset ac_cv_lib_resolv___dns_search
-  unset found
-  echo $ac_n "checking for dns_search in -lresolv""... $ac_c" 1>&6
-echo "configure:89267: checking for dns_search in -lresolv" >&5
-ac_lib_var=`echo resolv'_'dns_search | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lresolv  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 89275 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char dns_search();
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-int main() {
-dns_search()
-; return 0; }
-EOF
-if { (eval echo configure:89286: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
+      fi
+    
+  fi
 
-    echo $ac_n "checking for __dns_search in -lresolv""... $ac_c" 1>&6
-echo "configure:89306: checking for __dns_search in -lresolv" >&5
-ac_lib_var=`echo resolv'_'__dns_search | sed 'y%./+-%__p_%'`
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for netg_errstr in -ltcl""... $ac_c" 1>&6
+echo "configure:96103: checking for netg_errstr in -ltcl" >&5
+ac_lib_var=`echo tcl'_'netg_errstr | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lresolv  $LIBS"
+LIBS="-ltcl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 89314 "configure"
+#line 96111 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char __dns_search();
+char netg_errstr();
 
 int main() {
-__dns_search()
+netg_errstr()
 ; return 0; }
 EOF
-if { (eval echo configure:89325: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:96122: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -89336,128 +96133,186 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  found=yes
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+      
+  
+  case tcl in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-ltcl $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case tcl in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-ltcl $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    
+  
 else
   echo "$ac_t""no" 1>&6
-found=no
-fi
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_tcl_netg_errstr
+     
+      
   
-fi
+  case sybtcl in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybtcl $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case sybtcl in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybtcl $LIBS" 
+   ;;
+  esac
 
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lresolv"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 89357 "configure"
-#include "confdefs.h"
-main() { return (0); }
-EOF
-if { (eval echo configure:89361: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
+    fi
+   ;;
+  esac
+
+
+    
+  
 fi
 
-    LIBS=$ac_libs
+  
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="-L$SYBASE_CT_LIBDIR"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
   fi
 
-  if test "$found" = "yes"; then
-    
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
-  case resolv in
+  case $ac_ii in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lresolv $LIBS" 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
    ;;
   esac
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_DNS_SEARCH 1
-EOF
+    fi
+   ;;
+  esac
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBRESOLV 1
-EOF
 
-    ac_cv_func_dns_search=yes
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
     
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  unset ac_cv_lib_bind_dns_search
-  unset ac_cv_lib_bind___dns_search
-  unset found
-  echo $ac_n "checking for dns_search in -lbind""... $ac_c" 1>&6
-echo "configure:89403: checking for dns_search in -lbind" >&5
-ac_lib_var=`echo bind'_'dns_search | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lbind  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 89411 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char dns_search();
+  fi
 
-int main() {
-dns_search()
-; return 0; }
-EOF
-if { (eval echo configure:89422: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
+      fi
+    
+  fi
 
-    echo $ac_n "checking for __dns_search in -lbind""... $ac_c" 1>&6
-echo "configure:89442: checking for __dns_search in -lbind" >&5
-ac_lib_var=`echo bind'_'__dns_search | sed 'y%./+-%__p_%'`
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for insck__getVdate in -linsck""... $ac_c" 1>&6
+echo "configure:96297: checking for insck__getVdate in -linsck" >&5
+ac_lib_var=`echo insck'_'insck__getVdate | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lbind  $LIBS"
+LIBS="-linsck  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 89450 "configure"
+#line 96305 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char __dns_search();
+char insck__getVdate();
 
 int main() {
-__dns_search()
+insck__getVdate()
 ; return 0; }
 EOF
-if { (eval echo configure:89461: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:96316: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -89472,89 +96327,159 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
-
   
-fi
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+  
+  case insck in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case insck in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-linsck $LIBS" 
+   ;;
+  esac
 
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lbind"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 89493 "configure"
-#include "confdefs.h"
-main() { return (0); }
-EOF
-if { (eval echo configure:89497: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
+    fi
+   ;;
+  esac
+
+
+  
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
+  echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_insck_insck__getVdate
+    
+  
 fi
 
-    LIBS=$ac_libs
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="-L$SYBASE_CT_LIBDIR"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
   fi
 
-  if test "$found" = "yes"; then
-    
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
-  case bind in
+  case $ac_ii in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lbind $LIBS" 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
    ;;
   esac
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_DNS_SEARCH 1
-EOF
+    fi
+   ;;
+  esac
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBBIND 1
-EOF
 
-    ac_cv_func_dns_search=yes
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
     
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  unset ac_cv_lib_socket_dns_search
-  unset ac_cv_lib_socket___dns_search
-  unset found
-  echo $ac_n "checking for dns_search in -lsocket""... $ac_c" 1>&6
-echo "configure:89539: checking for dns_search in -lsocket" >&5
-ac_lib_var=`echo socket'_'dns_search | sed 'y%./+-%__p_%'`
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for bsd_tcp in -linsck""... $ac_c" 1>&6
+echo "configure:96464: checking for bsd_tcp in -linsck" >&5
+ac_lib_var=`echo insck'_'bsd_tcp | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lsocket  $LIBS"
+LIBS="-linsck  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 89547 "configure"
+#line 96472 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char dns_search();
+char bsd_tcp();
 
 int main() {
-dns_search()
+bsd_tcp()
 ; return 0; }
 EOF
-if { (eval echo configure:89558: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:96483: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -89569,1638 +96494,1474 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  found=yes
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+  
+  case insck in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case insck in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-linsck $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+  
 else
   echo "$ac_t""no" 1>&6
 
-    echo $ac_n "checking for __dns_search in -lsocket""... $ac_c" 1>&6
-echo "configure:89578: checking for __dns_search in -lsocket" >&5
-ac_lib_var=`echo socket'_'__dns_search | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_insck_bsd_tcp
+    
+  
+fi
+
+  fi
+fi
+
+
+
+php_enable_sysvmsg=no
+
+echo $ac_n "checking whether to enable System V IPC support""... $ac_c" 1>&6
+echo "configure:96543: checking whether to enable System V IPC support" >&5
+# Check whether --enable-sysvmsg or --disable-sysvmsg was given.
+if test "${enable_sysvmsg+set}" = set; then
+  enableval="$enable_sysvmsg"
+  PHP_SYSVMSG=$enableval
+else
+  
+  PHP_SYSVMSG=no
+  test "$PHP_ENABLE_ALL" && PHP_SYSVMSG=$PHP_ENABLE_ALL
+
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_SYSVMSG in
+shared,*)
+  PHP_SYSVMSG=`echo "$PHP_SYSVMSG"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_SYSVMSG=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_SYSVMSG" != "no"; then
+  ac_safe=`echo "sys/msg.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for sys/msg.h""... $ac_c" 1>&6
+echo "configure:96586: checking for sys/msg.h" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsocket  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 89586 "configure"
+  cat > conftest.$ac_ext <<EOF
+#line 96591 "configure"
 #include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __dns_search();
-
-int main() {
-__dns_search()
-; return 0; }
+#include <sys/msg.h>
 EOF
-if { (eval echo configure:89597: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:96596: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+  eval "ac_cv_header_$ac_safe=yes"
 else
+  echo "$ac_err" >&5
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
+  eval "ac_cv_header_$ac_safe=no"
 fi
 rm -f conftest*
-LIBS="$ac_save_LIBS"
-
 fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  found=yes
+  :
 else
   echo "$ac_t""no" 1>&6
-found=no
-fi
-
+{ echo "configure: error: Cannot enable System V IPC support, sys/msg.h is missing" 1>&2; exit 1; }
   
 fi
 
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lsocket"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 89629 "configure"
-#include "confdefs.h"
-main() { return (0); }
+  cat >> confdefs.h <<\EOF
+#define HAVE_SYSVMSG 1
 EOF
-if { (eval echo configure:89633: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
 
-    LIBS=$ac_libs
-  fi
+  
+  ext_builddir=ext/sysvmsg
+  ext_srcdir=$abs_srcdir/ext/sysvmsg
 
-  if test "$found" = "yes"; then
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_SYSVMSG_SHARED=no
     
   
-  case socket in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsocket $LIBS" 
-   ;;
+  case ext/sysvmsg in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_DNS_SEARCH 1
-EOF
+  old_IFS=$IFS
+  for ac_src in sysvmsg.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBSOCKET 1
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
 
-    ac_cv_func_dns_search=yes
+
+    EXT_STATIC="$EXT_STATIC sysvmsg"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC sysvmsg"
+    fi
   else
-    
-  :
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_SYSVMSG_SHARED=yes
+      
+  case ext/sysvmsg in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-  fi
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in sysvmsg.c; do
   
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_sysvmsg="$shared_objects_sysvmsg $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
 
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsysvmsg.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) $(PHPSYSVMSG_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsysvmsg.so '$ext_builddir'/phpsysvmsg.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSYSVMSG, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) $(PHPSYSVMSG_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsysvmsg.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsysvmsg.$suffix"
   fi
   
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvmsg"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpsysvmsg.$suffix: $ext_builddir/phpsysvmsg.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsysvmsg.$suffix \$(phplibdir)
+
+$ext_builddir/phpsysvmsg.$suffix: \$(shared_objects_sysvmsg) \$(PHPSYSVMSG_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sysvmsg.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) $(SYSVMSG_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sysvmsg.so '$ext_builddir'/sysvmsg.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SYSVMSG, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) $(SYSVMSG_SHARED_LIBADD)'
+      ;;
+  esac
 
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sysvmsg.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sysvmsg.$suffix"
   fi
   
- ;;
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvmsg"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/sysvmsg.$suffix: $ext_builddir/sysvmsg.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/sysvmsg.$suffix \$(phplibdir)
+
+$ext_builddir/sysvmsg.$suffix: \$(shared_objects_sysvmsg) \$(SYSVMSG_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_SYSVMSG 1
+EOF
+
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_SYSVMSG_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
   
+  case ext/sysvmsg in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
+  
+  
 
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-  unset ac_cv_func_dn_expand
-  unset ac_cv_func___dn_expand
-  unset found
-  
-  echo $ac_n "checking for dn_expand""... $ac_c" 1>&6
-echo "configure:89690: checking for dn_expand" >&5
-if eval "test \"`echo '$''{'ac_cv_func_dn_expand'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 89695 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char dn_expand(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char dn_expand();
 
-int main() {
+  old_IFS=$IFS
+  for ac_src in sysvmsg.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_dn_expand) || defined (__stub___dn_expand)
-choke me
-#else
-dn_expand();
-#endif
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-; return 0; }
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:89718: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_dn_expand=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_dn_expand=no"
-fi
-rm -f conftest*
-fi
+  done
 
-if eval "test \"`echo '$ac_cv_func_'dn_expand`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
- echo $ac_n "checking for __dn_expand""... $ac_c" 1>&6
-echo "configure:89736: checking for __dn_expand" >&5
-if eval "test \"`echo '$''{'ac_cv_func___dn_expand'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 89741 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char __dn_expand(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __dn_expand();
 
-int main() {
+        EXT_STATIC="$EXT_STATIC sysvmsg"
+        ;;
+      *)
+        
+  
+  case ext/sysvmsg in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub___dn_expand) || defined (__stub_____dn_expand)
-choke me
-#else
-__dn_expand();
-#endif
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-; return 0; }
-EOF
-if { (eval echo configure:89764: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func___dn_expand=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func___dn_expand=no"
-fi
-rm -f conftest*
-fi
 
-if eval "test \"`echo '$ac_cv_func_'__dn_expand`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
- 
-fi
+  old_IFS=$IFS
+  for ac_src in sysvmsg.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-  case $found in
-  yes) 
-    cat >> confdefs.h <<\EOF
-#define HAVE_DN_EXPAND 1
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
 
-    ac_cv_func_dn_expand=yes
-  ;;
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC sysvmsg"
+  fi
   
-    *) 
   
-  unset ac_cv_lib_resolv_dn_expand
-  unset ac_cv_lib_resolv___dn_expand
-  unset found
-  echo $ac_n "checking for dn_expand in -lresolv""... $ac_c" 1>&6
-echo "configure:89802: checking for dn_expand in -lresolv" >&5
-ac_lib_var=`echo resolv'_'dn_expand | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lresolv  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 89810 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char dn_expand();
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
 
-int main() {
-dn_expand()
-; return 0; }
-EOF
-if { (eval echo configure:89821: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=sysvmsg
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
-    echo $ac_n "checking for __dn_expand in -lresolv""... $ac_c" 1>&6
-echo "configure:89841: checking for __dn_expand in -lresolv" >&5
-ac_lib_var=`echo resolv'_'__dn_expand | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lresolv  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 89849 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __dn_expand();
+  fi
 
-int main() {
-__dn_expand()
-; return 0; }
-EOF
-if { (eval echo configure:89860: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
 fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
+
+
+php_enable_sysvsem=no
+
+echo $ac_n "checking whether to enable System V semaphore support""... $ac_c" 1>&6
+echo "configure:96923: checking whether to enable System V semaphore support" >&5
+# Check whether --enable-sysvsem or --disable-sysvsem was given.
+if test "${enable_sysvsem+set}" = set; then
+  enableval="$enable_sysvsem"
+  PHP_SYSVSEM=$enableval
 else
-  echo "$ac_t""no" 1>&6
-found=no
+  
+  PHP_SYSVSEM=no
+  test "$PHP_ENABLE_ALL" && PHP_SYSVSEM=$PHP_ENABLE_ALL
+
 fi
 
-  
-fi
 
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lresolv"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 89892 "configure"
-#include "confdefs.h"
-main() { return (0); }
-EOF
-if { (eval echo configure:89896: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_SYSVSEM in
+shared,*)
+  PHP_SYSVSEM=`echo "$PHP_SYSVSEM"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_SYSVSEM=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
 
-    LIBS=$ac_libs
-  fi
 
-  if test "$found" = "yes"; then
-    
-  
-  case resolv in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lresolv $LIBS" 
-   ;;
-  esac
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_DN_EXPAND 1
-EOF
+if test "$PHP_SYSVSEM" != "no"; then
+ 
+  ext_builddir=ext/sysvsem
+  ext_srcdir=$abs_srcdir/ext/sysvsem
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBRESOLV 1
-EOF
+  ac_extra=
 
-    ac_cv_func_dn_expand=yes
-  else
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_SYSVSEM_SHARED=no
     
   
-  unset ac_cv_lib_bind_dn_expand
-  unset ac_cv_lib_bind___dn_expand
-  unset found
-  echo $ac_n "checking for dn_expand in -lbind""... $ac_c" 1>&6
-echo "configure:89938: checking for dn_expand in -lbind" >&5
-ac_lib_var=`echo bind'_'dn_expand | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lbind  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 89946 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char dn_expand();
+  case ext/sysvsem in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-int main() {
-dn_expand()
-; return 0; }
-EOF
-if { (eval echo configure:89957: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
 
-    echo $ac_n "checking for __dn_expand in -lbind""... $ac_c" 1>&6
-echo "configure:89977: checking for __dn_expand in -lbind" >&5
-ac_lib_var=`echo bind'_'__dn_expand | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lbind  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 89985 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __dn_expand();
+  old_IFS=$IFS
+  for ac_src in sysvsem.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-int main() {
-__dn_expand()
-; return 0; }
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:89996: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  done
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
 
+    EXT_STATIC="$EXT_STATIC sysvsem"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC sysvsem"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_SYSVSEM_SHARED=yes
+      
+  case ext/sysvsem in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
   
-fi
-
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lbind"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 90028 "configure"
-#include "confdefs.h"
-main() { return (0); }
-EOF
-if { (eval echo configure:90032: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
 
-    LIBS=$ac_libs
-  fi
 
-  if test "$found" = "yes"; then
-    
+  old_IFS=$IFS
+  for ac_src in sysvsem.c; do
   
-  case bind in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lbind $LIBS" 
-   ;;
-  esac
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_sysvsem="$shared_objects_sysvsem $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_DN_EXPAND 1
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBBIND 1
-EOF
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
 
-    ac_cv_func_dn_expand=yes
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsysvsem.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) $(PHPSYSVSEM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsysvsem.so '$ext_builddir'/phpsysvsem.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSYSVSEM, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) $(PHPSYSVSEM_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsysvsem.$suffix"
   else
-    
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsysvsem.$suffix"
+  fi
   
-  unset ac_cv_lib_socket_dn_expand
-  unset ac_cv_lib_socket___dn_expand
-  unset found
-  echo $ac_n "checking for dn_expand in -lsocket""... $ac_c" 1>&6
-echo "configure:90074: checking for dn_expand in -lsocket" >&5
-ac_lib_var=`echo socket'_'dn_expand | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsocket  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 90082 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char dn_expand();
-
-int main() {
-dn_expand()
-; return 0; }
-EOF
-if { (eval echo configure:90093: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvsem"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpsysvsem.$suffix: $ext_builddir/phpsysvsem.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsysvsem.$suffix \$(phplibdir)
 
-    echo $ac_n "checking for __dn_expand in -lsocket""... $ac_c" 1>&6
-echo "configure:90113: checking for __dn_expand in -lsocket" >&5
-ac_lib_var=`echo socket'_'__dn_expand | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsocket  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 90121 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __dn_expand();
+$ext_builddir/phpsysvsem.$suffix: \$(shared_objects_sysvsem) \$(PHPSYSVSEM_SHARED_DEPENDENCIES)
+	$link_cmd
 
-int main() {
-__dn_expand()
-; return 0; }
 EOF
-if { (eval echo configure:90132: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sysvsem.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) $(SYSVSEM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sysvsem.so '$ext_builddir'/sysvsem.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SYSVSEM, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) $(SYSVSEM_SHARED_LIBADD)'
+      ;;
+  esac
 
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sysvsem.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sysvsem.$suffix"
+  fi
   
-fi
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvsem"
 
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/sysvsem.$suffix: $ext_builddir/sysvsem.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/sysvsem.$suffix \$(phplibdir)
+
+$ext_builddir/sysvsem.$suffix: \$(shared_objects_sysvsem) \$(SYSVSEM_SHARED_DEPENDENCIES)
+	$link_cmd
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lsocket"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 90164 "configure"
-#include "confdefs.h"
-main() { return (0); }
 EOF
-if { (eval echo configure:90168: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
 
-    LIBS=$ac_libs
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_SYSVSEM 1
+EOF
+
+    fi
   fi
 
-  if test "$found" = "yes"; then
-    
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_SYSVSEM_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
   
-  case socket in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsocket $LIBS" 
-   ;;
+  case ext/sysvsem in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
+  
+  
 
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_DN_EXPAND 1
-EOF
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBSOCKET 1
-EOF
+  old_IFS=$IFS
+  for ac_src in sysvsem.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-    ac_cv_func_dn_expand=yes
-  else
-    
-  :
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-  fi
-  
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
-  fi
-  
 
-  fi
-  
- ;;
+        EXT_STATIC="$EXT_STATIC sysvsem"
+        ;;
+      *)
+        
   
+  case ext/sysvsem in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
 
-  unset ac_cv_func_dn_skipname
-  unset ac_cv_func___dn_skipname
-  unset found
+  old_IFS=$IFS
+  for ac_src in sysvsem.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC sysvsem"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
   
-  echo $ac_n "checking for dn_skipname""... $ac_c" 1>&6
-echo "configure:90225: checking for dn_skipname" >&5
-if eval "test \"`echo '$''{'ac_cv_func_dn_skipname'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 90230 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char dn_skipname(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char dn_skipname();
 
-int main() {
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_dn_skipname) || defined (__stub___dn_skipname)
-choke me
-#else
-dn_skipname();
-#endif
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=sysvsem
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
-; return 0; }
+  fi
+
+ cat >> confdefs.h <<\EOF
+#define HAVE_SYSVSEM 1
 EOF
-if { (eval echo configure:90253: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_dn_skipname=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_dn_skipname=no"
-fi
-rm -f conftest*
-fi
 
-if eval "test \"`echo '$ac_cv_func_'dn_skipname`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
- echo $ac_n "checking for __dn_skipname""... $ac_c" 1>&6
-echo "configure:90271: checking for __dn_skipname" >&5
-if eval "test \"`echo '$''{'ac_cv_func___dn_skipname'+set}'`\" = set"; then
+ echo $ac_n "checking for union semun""... $ac_c" 1>&6
+echo "configure:97261: checking for union semun" >&5
+if eval "test \"`echo '$''{'php_cv_semun'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 90276 "configure"
+#line 97266 "configure"
 #include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char __dn_skipname(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __dn_skipname();
 
+#include <sys/types.h>
+#include <sys/ipc.h>
+#include <sys/sem.h>
+   
 int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub___dn_skipname) || defined (__stub_____dn_skipname)
-choke me
-#else
-__dn_skipname();
-#endif
-
+union semun x;
 ; return 0; }
 EOF
-if { (eval echo configure:90299: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:97277: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
-  eval "ac_cv_func___dn_skipname=yes"
+  
+     php_cv_semun=yes
+   
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_func___dn_skipname=no"
+  
+     php_cv_semun=no
+   
 fi
 rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'__dn_skipname`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
  
 fi
 
-
-  case $found in
-  yes) 
-    cat >> confdefs.h <<\EOF
-#define HAVE_DN_SKIPNAME 1
+echo "$ac_t""$php_cv_semun" 1>&6
+ if test "$php_cv_semun" = "yes"; then
+   cat >> confdefs.h <<\EOF
+#define HAVE_SEMUN 1
 EOF
 
-    ac_cv_func_dn_skipname=yes
-  ;;
-  
-    *) 
-  
-  unset ac_cv_lib_resolv_dn_skipname
-  unset ac_cv_lib_resolv___dn_skipname
-  unset found
-  echo $ac_n "checking for dn_skipname in -lresolv""... $ac_c" 1>&6
-echo "configure:90337: checking for dn_skipname in -lresolv" >&5
-ac_lib_var=`echo resolv'_'dn_skipname | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lresolv  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 90345 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char dn_skipname();
-
-int main() {
-dn_skipname()
-; return 0; }
+ else
+   cat >> confdefs.h <<\EOF
+#define HAVE_SEMUN 0
 EOF
-if { (eval echo configure:90356: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
+ fi
 fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
 
-    echo $ac_n "checking for __dn_skipname in -lresolv""... $ac_c" 1>&6
-echo "configure:90376: checking for __dn_skipname in -lresolv" >&5
-ac_lib_var=`echo resolv'_'__dn_skipname | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lresolv  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 90384 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __dn_skipname();
 
-int main() {
-__dn_skipname()
-; return 0; }
-EOF
-if { (eval echo configure:90395: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
+php_enable_sysvshm=no
 
+echo $ac_n "checking whether to enable System V shared memory support""... $ac_c" 1>&6
+echo "configure:97313: checking whether to enable System V shared memory support" >&5
+# Check whether --enable-sysvshm or --disable-sysvshm was given.
+if test "${enable_sysvshm+set}" = set; then
+  enableval="$enable_sysvshm"
+  PHP_SYSVSHM=$enableval
+else
   
+  PHP_SYSVSHM=no
+  test "$PHP_ENABLE_ALL" && PHP_SYSVSHM=$PHP_ENABLE_ALL
+
 fi
 
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lresolv"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 90427 "configure"
-#include "confdefs.h"
-main() { return (0); }
-EOF
-if { (eval echo configure:90431: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
 
-    LIBS=$ac_libs
-  fi
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_SYSVSHM in
+shared,*)
+  PHP_SYSVSHM=`echo "$PHP_SYSVSHM"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_SYSVSHM=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
-  if test "$found" = "yes"; then
-    
-  
-  case resolv in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lresolv $LIBS" 
-   ;;
-  esac
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_DN_SKIPNAME 1
-EOF
+echo "$ac_t""$ext_output" 1>&6
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBRESOLV 1
+
+
+
+if test "$PHP_SYSVSHM" != "no"; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_SYSVSHM 1
 EOF
 
-    ac_cv_func_dn_skipname=yes
-  else
+  
+  ext_builddir=ext/sysvshm
+  ext_srcdir=$abs_srcdir/ext/sysvshm
+
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_SYSVSHM_SHARED=no
     
   
-  unset ac_cv_lib_bind_dn_skipname
-  unset ac_cv_lib_bind___dn_skipname
-  unset found
-  echo $ac_n "checking for dn_skipname in -lbind""... $ac_c" 1>&6
-echo "configure:90473: checking for dn_skipname in -lbind" >&5
-ac_lib_var=`echo bind'_'dn_skipname | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lbind  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 90481 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char dn_skipname();
+  case ext/sysvshm in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-int main() {
-dn_skipname()
-; return 0; }
-EOF
-if { (eval echo configure:90492: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
 
-    echo $ac_n "checking for __dn_skipname in -lbind""... $ac_c" 1>&6
-echo "configure:90512: checking for __dn_skipname in -lbind" >&5
-ac_lib_var=`echo bind'_'__dn_skipname | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lbind  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 90520 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __dn_skipname();
+  old_IFS=$IFS
+  for ac_src in sysvshm.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-int main() {
-__dn_skipname()
-; return 0; }
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:90531: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  done
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
 
+    EXT_STATIC="$EXT_STATIC sysvshm"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC sysvshm"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_SYSVSHM_SHARED=yes
+      
+  case ext/sysvshm in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
   
-fi
-
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lbind"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 90563 "configure"
-#include "confdefs.h"
-main() { return (0); }
-EOF
-if { (eval echo configure:90567: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
 
-    LIBS=$ac_libs
-  fi
 
-  if test "$found" = "yes"; then
-    
+  old_IFS=$IFS
+  for ac_src in sysvshm.c; do
   
-  case bind in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lbind $LIBS" 
-   ;;
-  esac
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_sysvshm="$shared_objects_sysvshm $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_DN_SKIPNAME 1
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBBIND 1
-EOF
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
 
-    ac_cv_func_dn_skipname=yes
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsysvshm.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) $(PHPSYSVSHM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsysvshm.so '$ext_builddir'/phpsysvshm.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSYSVSHM, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) $(PHPSYSVSHM_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsysvshm.$suffix"
   else
-    
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsysvshm.$suffix"
+  fi
   
-  unset ac_cv_lib_socket_dn_skipname
-  unset ac_cv_lib_socket___dn_skipname
-  unset found
-  echo $ac_n "checking for dn_skipname in -lsocket""... $ac_c" 1>&6
-echo "configure:90609: checking for dn_skipname in -lsocket" >&5
-ac_lib_var=`echo socket'_'dn_skipname | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsocket  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 90617 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char dn_skipname();
-
-int main() {
-dn_skipname()
-; return 0; }
-EOF
-if { (eval echo configure:90628: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvshm"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpsysvshm.$suffix: $ext_builddir/phpsysvshm.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsysvshm.$suffix \$(phplibdir)
 
-    echo $ac_n "checking for __dn_skipname in -lsocket""... $ac_c" 1>&6
-echo "configure:90648: checking for __dn_skipname in -lsocket" >&5
-ac_lib_var=`echo socket'_'__dn_skipname | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsocket  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 90656 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __dn_skipname();
+$ext_builddir/phpsysvshm.$suffix: \$(shared_objects_sysvshm) \$(PHPSYSVSHM_SHARED_DEPENDENCIES)
+	$link_cmd
 
-int main() {
-__dn_skipname()
-; return 0; }
 EOF
-if { (eval echo configure:90667: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sysvshm.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) $(SYSVSHM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sysvshm.so '$ext_builddir'/sysvshm.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SYSVSHM, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) $(SYSVSHM_SHARED_LIBADD)'
+      ;;
+  esac
 
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sysvshm.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sysvshm.$suffix"
+  fi
   
-fi
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvshm"
 
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/sysvshm.$suffix: $ext_builddir/sysvshm.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/sysvshm.$suffix \$(phplibdir)
+
+$ext_builddir/sysvshm.$suffix: \$(shared_objects_sysvshm) \$(SYSVSHM_SHARED_DEPENDENCIES)
+	$link_cmd
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lsocket"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 90699 "configure"
-#include "confdefs.h"
-main() { return (0); }
 EOF
-if { (eval echo configure:90703: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
 
-    LIBS=$ac_libs
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_SYSVSHM 1
+EOF
+
+    fi
   fi
 
-  if test "$found" = "yes"; then
-    
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_SYSVSHM_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
   
-  case socket in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsocket $LIBS" 
-   ;;
+  case ext/sysvshm in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
+  
+  
 
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_DN_SKIPNAME 1
-EOF
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBSOCKET 1
+  old_IFS=$IFS
+  for ac_src in sysvshm.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
 
-    ac_cv_func_dn_skipname=yes
-  else
-    
-  :
 
-  fi
+        EXT_STATIC="$EXT_STATIC sysvshm"
+        ;;
+      *)
+        
   
-
-  fi
+  case ext/sysvshm in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-
-  fi
   
- ;;
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in sysvshm.c; do
   
-  esac
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
 
-  unset ac_cv_func_res_search
-  unset ac_cv_func___res_search
-  unset found
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC sysvshm"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
   
-  echo $ac_n "checking for res_search""... $ac_c" 1>&6
-echo "configure:90762: checking for res_search" >&5
-if eval "test \"`echo '$''{'ac_cv_func_res_search'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 90767 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char res_search(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char res_search();
 
-int main() {
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_res_search) || defined (__stub___res_search)
-choke me
-#else
-res_search();
-#endif
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=sysvshm
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
 
-; return 0; }
-EOF
-if { (eval echo configure:90790: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_res_search=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_res_search=no"
-fi
-rm -f conftest*
 fi
 
-if eval "test \"`echo '$ac_cv_func_'res_search`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
- echo $ac_n "checking for __res_search""... $ac_c" 1>&6
-echo "configure:90808: checking for __res_search" >&5
-if eval "test \"`echo '$''{'ac_cv_func___res_search'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 90813 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char __res_search(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __res_search();
 
-int main() {
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub___res_search) || defined (__stub_____res_search)
-choke me
-#else
-__res_search();
-#endif
+php_with_tidy=no
 
-; return 0; }
-EOF
-if { (eval echo configure:90836: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func___res_search=yes"
+echo $ac_n "checking for TIDY support""... $ac_c" 1>&6
+echo "configure:97657: checking for TIDY support" >&5
+# Check whether --with-tidy or --without-tidy was given.
+if test "${with_tidy+set}" = set; then
+  withval="$with_tidy"
+  PHP_TIDY=$withval
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func___res_search=no"
-fi
-rm -f conftest*
-fi
+  
+  PHP_TIDY=no
+  test "$PHP_ENABLE_ALL" && PHP_TIDY=$PHP_ENABLE_ALL
 
-if eval "test \"`echo '$ac_cv_func_'__res_search`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
- 
 fi
 
 
-  case $found in
-  yes) 
-    cat >> confdefs.h <<\EOF
-#define HAVE_RES_SEARCH 1
-EOF
 
-    ac_cv_func_res_search=yes
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_TIDY in
+shared,*)
+  PHP_TIDY=`echo "$PHP_TIDY"|$SED 's/^shared,//'`
   ;;
-  
-    *) 
-  
-  unset ac_cv_lib_resolv_res_search
-  unset ac_cv_lib_resolv___res_search
-  unset found
-  echo $ac_n "checking for res_search in -lresolv""... $ac_c" 1>&6
-echo "configure:90874: checking for res_search in -lresolv" >&5
-ac_lib_var=`echo resolv'_'res_search | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lresolv  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 90882 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char res_search();
+shared)
+  PHP_TIDY=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
-int main() {
-res_search()
-; return 0; }
-EOF
-if { (eval echo configure:90893: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
 
-    echo $ac_n "checking for __res_search in -lresolv""... $ac_c" 1>&6
-echo "configure:90913: checking for __res_search in -lresolv" >&5
-ac_lib_var=`echo resolv'_'__res_search | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lresolv  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 90921 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __res_search();
+echo "$ac_t""$ext_output" 1>&6
 
-int main() {
-__res_search()
-; return 0; }
-EOF
-if { (eval echo configure:90932: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
 
-  
-fi
 
+if test "$PHP_TIDY" != "no"; then
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lresolv"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 90964 "configure"
-#include "confdefs.h"
-main() { return (0); }
-EOF
-if { (eval echo configure:90968: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
+  if test "$PHP_TIDY" != "yes"; then
+    TIDY_SEARCH_DIRS=$PHP_TIDY
+  else
+    TIDY_SEARCH_DIRS="/usr/local /usr"
+  fi
 
-    LIBS=$ac_libs
+  for i in $TIDY_SEARCH_DIRS; do
+    if test -f $i/include/tidy/tidy.h; then
+      TIDY_DIR=$i
+      TIDY_INCDIR=$i/include/tidy
+    elif test -f $i/include/tidy.h; then
+      TIDY_DIR=$i
+      TIDY_INCDIR=$i/include
+    fi
+  done
+
+  if test -z "$TIDY_DIR"; then
+    { echo "configure: error: Cannot find libtidy" 1>&2; exit 1; }
   fi
 
-  if test "$found" = "yes"; then
+  TIDY_LIBDIR=$TIDY_DIR/$PHP_LIBDIR
+
+  
+
+  if test "$ext_shared" = "yes"; then
+    TIDY_SHARED_LIBADD="-ltidy $TIDY_SHARED_LIBADD"
+    if test -n "$TIDY_LIBDIR"; then
+      
+  if test "$TIDY_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$TIDY_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$TIDY_LIBDIR" || echo "$TIDY_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$TIDY_LIBDIR
+  else
+    
+    ep_dir="`echo $TIDY_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$TIDY_LIBDIR\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        TIDY_SHARED_LIBADD="-L$ai_p $TIDY_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && TIDY_SHARED_LIBADD="$ld_runpath_switch$ai_p $TIDY_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
     
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  case resolv in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lresolv $LIBS" 
-   ;;
-  esac
+  fi
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_RES_SEARCH 1
-EOF
+      fi
+    
+  fi
+
+    fi
+  else
+    
+
+  if test -n "$TIDY_LIBDIR"; then
+    
+  if test "$TIDY_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$TIDY_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$TIDY_LIBDIR" || echo "$TIDY_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$TIDY_LIBDIR
+  else
+    
+    ep_dir="`echo $TIDY_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$TIDY_LIBDIR\"`"
+  fi
+
+    
+      
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBRESOLV 1
-EOF
 
-    ac_cv_func_res_search=yes
-  else
     
+  fi
+
+  fi
   
-  unset ac_cv_lib_bind_res_search
-  unset ac_cv_lib_bind___res_search
-  unset found
-  echo $ac_n "checking for res_search in -lbind""... $ac_c" 1>&6
-echo "configure:91010: checking for res_search in -lbind" >&5
-ac_lib_var=`echo bind'_'res_search | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lbind  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 91018 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char res_search();
+  
+  case tidy in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-ltidy $LIBS" 
+   ;;
+  esac
 
-int main() {
-res_search()
-; return 0; }
-EOF
-if { (eval echo configure:91029: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
 
-    echo $ac_n "checking for __res_search in -lbind""... $ac_c" 1>&6
-echo "configure:91049: checking for __res_search in -lbind" >&5
-ac_lib_var=`echo bind'_'__res_search | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lbind  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 91057 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __res_search();
 
-int main() {
-__res_search()
-; return 0; }
-EOF
-if { (eval echo configure:91068: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  fi
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
 
   
-fi
+  if test "$TIDY_INCDIR" != "/usr/include"; then
+    
+  if test -z "$TIDY_INCDIR" || echo "$TIDY_INCDIR" | grep '^/' >/dev/null ; then
+    ai_p=$TIDY_INCDIR
+  else
+    
+    ep_dir="`echo $TIDY_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$TIDY_INCDIR\"`"
+  fi
 
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lbind"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 91100 "configure"
-#include "confdefs.h"
-main() { return (0); }
-EOF
-if { (eval echo configure:91104: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
+  fi
 
-    LIBS=$ac_libs
+
+  
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff=""
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
   fi
 
-  if test "$found" = "yes"; then
-    
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
-  case bind in
+  case $ac_ii in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lbind $LIBS" 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
    ;;
   esac
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_RES_SEARCH 1
-EOF
+    fi
+   ;;
+  esac
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBBIND 1
-EOF
 
-    ac_cv_func_res_search=yes
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
     
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
-  unset ac_cv_lib_socket_res_search
-  unset ac_cv_lib_socket___res_search
-  unset found
-  echo $ac_n "checking for res_search in -lsocket""... $ac_c" 1>&6
-echo "configure:91146: checking for res_search in -lsocket" >&5
-ac_lib_var=`echo socket'_'res_search | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsocket  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 91154 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char res_search();
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-int main() {
-res_search()
-; return 0; }
-EOF
-if { (eval echo configure:91165: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
+      fi
+    
+  fi
 
-    echo $ac_n "checking for __res_search in -lsocket""... $ac_c" 1>&6
-echo "configure:91185: checking for __res_search in -lsocket" >&5
-ac_lib_var=`echo socket'_'__res_search | sed 'y%./+-%__p_%'`
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for tidyOptGetDoc in -ltidy""... $ac_c" 1>&6
+echo "configure:97946: checking for tidyOptGetDoc in -ltidy" >&5
+ac_lib_var=`echo tidy'_'tidyOptGetDoc | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lsocket  $LIBS"
+LIBS="-ltidy  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 91193 "configure"
+#line 97954 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char __res_search();
+char tidyOptGetDoc();
 
 int main() {
-__res_search()
+tidyOptGetDoc()
 ; return 0; }
 EOF
-if { (eval echo configure:91204: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:97965: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -91215,618 +97976,390 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
-
   
-fi
-
-
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lsocket"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 91236 "configure"
-#include "confdefs.h"
-main() { return (0); }
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+  cat >> confdefs.h <<\EOF
+#define HAVE_TIDYOPTGETDOC 1
 EOF
-if { (eval echo configure:91240: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
 
-    LIBS=$ac_libs
-  fi
+  
+  
+else
+  echo "$ac_t""no" 1>&6
 
-  if test "$found" = "yes"; then
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_tidy_tidyOptGetDoc
     
   
-  case socket in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsocket $LIBS" 
-   ;;
-  esac
-
-
-    cat >> confdefs.h <<\EOF
-#define HAVE_RES_SEARCH 1
-EOF
+fi
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBSOCKET 1
-EOF
 
-    ac_cv_func_res_search=yes
-  else
-    
-  :
 
-  fi
   
+  ext_builddir=ext/tidy
+  ext_srcdir=$abs_srcdir/ext/tidy
 
-  fi
-  
+  ac_extra=
 
-  fi
-  
- ;;
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_TIDY_SHARED=no
+    
   
+  case ext/tidy in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/tidy"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/tidy/"; ac_bdir="ext/tidy/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
-
-
-echo $ac_n "checking whether atof() accepts NAN""... $ac_c" 1>&6
-echo "configure:91293: checking whether atof() accepts NAN" >&5
-if eval "test \"`echo '$''{'ac_cv_atof_accept_nan'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
   
-if test "$cross_compiling" = yes; then
   
-  ac_cv_atof_accept_nan=no
-
-else
-  cat > conftest.$ac_ext <<EOF
-#line 91304 "configure"
-#include "confdefs.h"
-
-#include <math.h>
-#include <stdlib.h>
-
-#ifdef HAVE_ISNAN
-#define zend_isnan(a) isnan(a)
-#elif defined(HAVE_FPCLASS)
-#define zend_isnan(a) ((fpclass(a) == FP_SNAN) || (fpclass(a) == FP_QNAN))
-#else
-#define zend_isnan(a) 0
-#endif
 
-int main(int argc, char** argv)
-{
-	return zend_isnan(atof("NAN")) ? 0 : 1;
-}
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-EOF
-if { (eval echo configure:91324: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-  ac_cv_atof_accept_nan=yes
 
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
+  old_IFS=$IFS
+  for ac_src in tidy.c; do
   
-  ac_cv_atof_accept_nan=no
-
-fi
-rm -fr conftest*
-fi
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-fi
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-echo "$ac_t""$ac_cv_atof_accept_nan" 1>&6
-if test "$ac_cv_atof_accept_nan" = "yes"; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_ATOF_ACCEPTS_NAN 1
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
 
-fi
 
-echo $ac_n "checking whether atof() accepts INF""... $ac_c" 1>&6
-echo "configure:91351: checking whether atof() accepts INF" >&5
-if eval "test \"`echo '$''{'ac_cv_atof_accept_inf'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
+    EXT_STATIC="$EXT_STATIC tidy"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC tidy"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_TIDY_SHARED=yes
+      
+  case ext/tidy in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/tidy"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/tidy/"; ac_bdir="ext/tidy/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-if test "$cross_compiling" = yes; then
   
-  ac_cv_atof_accept_inf=no
 
-else
-  cat > conftest.$ac_ext <<EOF
-#line 91362 "configure"
-#include "confdefs.h"
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
 
-#include <math.h>
-#include <stdlib.h>
 
-#ifdef HAVE_ISINF
-#define zend_isinf(a) isinf(a)
-#elif defined(INFINITY)
-/* Might not work, but is required by ISO C99 */
-#define zend_isinf(a) (((a)==INFINITY)?1:0)
-#elif defined(HAVE_FPCLASS)
-#define zend_isinf(a) ((fpclass(a) == FP_PINF) || (fpclass(a) == FP_NINF))
-#else
-#define zend_isinf(a) 0
-#endif
+  old_IFS=$IFS
+  for ac_src in tidy.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_tidy="$shared_objects_tidy $ac_bdir$ac_obj.lo"
 
-int main(int argc, char** argv)
-{
-	return zend_isinf(atof("INF")) && zend_isinf(atof("-INF")) ? 0 : 1;
-}
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:91385: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-  ac_cv_atof_accept_inf=yes
+  done
 
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phptidy.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) $(PHPTIDY_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phptidy.so '$ext_builddir'/phptidy.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPTIDY, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) $(PHPTIDY_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phptidy.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phptidy.$suffix"
+  fi
   
-  ac_cv_atof_accept_inf=no
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tidy"
 
-fi
-rm -fr conftest*
-fi
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phptidy.$suffix: $ext_builddir/phptidy.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phptidy.$suffix \$(phplibdir)
 
-fi
+$ext_builddir/phptidy.$suffix: \$(shared_objects_tidy) \$(PHPTIDY_SHARED_DEPENDENCIES)
+	$link_cmd
 
-echo "$ac_t""$ac_cv_atof_accept_inf" 1>&6
-if test "$ac_cv_atof_accept_inf" = "yes"; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_ATOF_ACCEPTS_INF 1
 EOF
 
-fi
-
-echo $ac_n "checking whether HUGE_VAL == INF""... $ac_c" 1>&6
-echo "configure:91412: checking whether HUGE_VAL == INF" >&5
-if eval "test \"`echo '$''{'ac_cv_huge_val_inf'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  
-  ac_cv_huge_val_inf=yes
-
-else
-  cat > conftest.$ac_ext <<EOF
-#line 91423 "configure"
-#include "confdefs.h"
-
-#include <math.h>
-#include <stdlib.h>
-
-#ifdef HAVE_ISINF
-#define zend_isinf(a) isinf(a)
-#elif defined(INFINITY)
-/* Might not work, but is required by ISO C99 */
-#define zend_isinf(a) (((a)==INFINITY)?1:0)
-#elif defined(HAVE_FPCLASS)
-#define zend_isinf(a) ((fpclass(a) == FP_PINF) || (fpclass(a) == FP_NINF))
-#else
-#define zend_isinf(a) 0
-#endif
+          ;;
+        *)
+          
+  install_modules="install-modules"
 
-int main(int argc, char** argv)
-{
-	return zend_isinf(HUGE_VAL) ? 0 : 1;
-}
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/tidy.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) $(TIDY_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/tidy.so '$ext_builddir'/tidy.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(TIDY, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) $(TIDY_SHARED_LIBADD)'
+      ;;
+  esac
 
-EOF
-if { (eval echo configure:91446: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/tidy.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/tidy.$suffix"
+  fi
   
-  ac_cv_huge_val_inf=yes
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tidy"
 
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  
-  ac_cv_huge_val_inf=no
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/tidy.$suffix: $ext_builddir/tidy.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/tidy.$suffix \$(phplibdir)
 
-fi
-rm -fr conftest*
-fi
+$ext_builddir/tidy.$suffix: \$(shared_objects_tidy) \$(TIDY_SHARED_DEPENDENCIES)
+	$link_cmd
 
-fi
+EOF
 
-echo "$ac_t""$ac_cv_huge_val_inf" 1>&6
-if test "$ac_cv_huge_val_inf" = "yes"; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_HUGE_VAL_INF 1
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_TIDY 1
 EOF
 
-fi
+    fi
+  fi
 
-echo $ac_n "checking whether HUGE_VAL + -HUGEVAL == NAN""... $ac_c" 1>&6
-echo "configure:91473: checking whether HUGE_VAL + -HUGEVAL == NAN" >&5
-if eval "test \"`echo '$''{'ac_cv_huge_val_nan'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_TIDY_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/tidy in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/tidy"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/tidy/"; ac_bdir="ext/tidy/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-if test "$cross_compiling" = yes; then
   
-  ac_cv_huge_val_nan=yes
-
-else
-  cat > conftest.$ac_ext <<EOF
-#line 91484 "configure"
-#include "confdefs.h"
-
-#include <math.h>
-#include <stdlib.h>
-
-#ifdef HAVE_ISNAN
-#define zend_isnan(a) isnan(a)
-#elif defined(HAVE_FPCLASS)
-#define zend_isnan(a) ((fpclass(a) == FP_SNAN) || (fpclass(a) == FP_QNAN))
-#else
-#define zend_isnan(a) 0
-#endif
 
-int main(int argc, char** argv)
-{
-#if defined(__sparc__) && !(__GNUC__ >= 3)
-	/* prevent bug #27830 */
-	return 1;
-#else
-	return zend_isnan(HUGE_VAL + -HUGE_VAL) ? 0 : 1;
-#endif
-}
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-EOF
-if { (eval echo configure:91509: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-  ac_cv_huge_val_nan=yes
 
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
+  old_IFS=$IFS
+  for ac_src in tidy.c; do
   
-  ac_cv_huge_val_nan=no
-
-fi
-rm -fr conftest*
-fi
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-fi
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-echo "$ac_t""$ac_cv_huge_val_nan" 1>&6
-if test "$ac_cv_huge_val_nan" = "yes"; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_HUGE_VAL_NAN 1
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
 
-fi
 
-echo $ac_n "checking whether strptime() declaration fails""... $ac_c" 1>&6
-echo "configure:91536: checking whether strptime() declaration fails" >&5
-if eval "test \"`echo '$''{'ac_cv_strptime_decl_fails'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
+        EXT_STATIC="$EXT_STATIC tidy"
+        ;;
+      *)
+        
+  
+  case ext/tidy in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/tidy"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/tidy/"; ac_bdir="ext/tidy/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
   
-cat > conftest.$ac_ext <<EOF
-#line 91542 "configure"
-#include "confdefs.h"
-
-#include <time.h>
-
-int main() {
 
-#ifndef HAVE_STRPTIME
-#error no strptime() on this platform
-#else
-/* use invalid strptime() declaration to see if it fails to compile */
-int strptime(const char *s, const char *format, struct tm *tm);
-#endif
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-; return 0; }
-EOF
-if { (eval echo configure:91558: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  
-  ac_cv_strptime_decl_fails=no
 
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
+  old_IFS=$IFS
+  for ac_src in tidy.c; do
   
-  ac_cv_strptime_decl_fails=yes
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
-fi
-rm -f conftest*
-fi
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-echo "$ac_t""$ac_cv_strptime_decl_fails" 1>&6
-if test "$ac_cv_strptime_decl_fails" = "yes"; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_STRPTIME_DECL_FAILS 1
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
 
-fi
 
-for ac_hdr in wchar.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:91586: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 91591 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:91596: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC tidy"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
 
-for ac_func in mblen
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:91625: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 91630 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
 
-int main() {
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=tidy
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
+  fi
 
-; return 0; }
-EOF
-if { (eval echo configure:91653: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST TIDY_SHARED_LIBADD"
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
+  cat >> confdefs.h <<\EOF
+#define HAVE_TIDY 1
 EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
 
-for ac_func in mbrlen mbsinit
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:91680: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 91685 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
+fi
 
-int main() {
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
 
-; return 0; }
-EOF
-if { (eval echo configure:91708: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
+php_enable_tokenizer=yes
 
-echo $ac_n "checking for mbstate_t""... $ac_c" 1>&6
-echo "configure:91733: checking for mbstate_t" >&5
-if eval "test \"`echo '$''{'ac_cv_type_mbstate_t'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo $ac_n "checking whether to enable tokenizer support""... $ac_c" 1>&6
+echo "configure:98309: checking whether to enable tokenizer support" >&5
+# Check whether --enable-tokenizer or --disable-tokenizer was given.
+if test "${enable_tokenizer+set}" = set; then
+  enableval="$enable_tokenizer"
+  PHP_TOKENIZER=$enableval
 else
   
-cat > conftest.$ac_ext <<EOF
-#line 91739 "configure"
-#include "confdefs.h"
-
-#ifdef HAVE_WCHAR_H
-# include <wchar.h>
-#endif
+  PHP_TOKENIZER=yes
+  test "$PHP_ENABLE_ALL" && PHP_TOKENIZER=$PHP_ENABLE_ALL
 
-int main() {
+fi
 
-int __tmp__() { mbstate_t a; }
 
-; return 0; }
-EOF
-if { (eval echo configure:91752: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  
-  ac_cv_type_mbstate_t=yes
 
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  
-  ac_cv_type_mbstate_t=no
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_TOKENIZER in
+shared,*)
+  PHP_TOKENIZER=`echo "$PHP_TOKENIZER"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_TOKENIZER=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
-fi
-rm -f conftest*
-fi
 
-echo "$ac_t""$ac_cv_type_mbstate_t" 1>&6
-if test "$ac_cv_type_mbstate_t" = "yes"; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_MBSTATE_T 1
-EOF
 
-fi
+echo "$ac_t""$ext_output" 1>&6
 
-for ac_hdr in atomic.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:91780: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 91785 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:91790: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
 
 
 
-  ext_builddir=ext/standard
-  ext_srcdir=$abs_srcdir/ext/standard
+if test "$PHP_TOKENIZER" != "no"; then
+  
+  ext_builddir=ext/tokenizer
+  ext_srcdir=$abs_srcdir/ext/tokenizer
 
   ac_extra=
 
-  if test "" != "shared" && test "" != "yes" && test "" != "cli"; then
-    PHP_STANDARD_SHARED=no
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_TOKENIZER_SHARED=no
     
   
-  case ext/standard in
+  case ext/tokenizer in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -91841,17 +98374,7 @@ done
 
 
   old_IFS=$IFS
-  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
-                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
-                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
-                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
-                            microtime.c pack.c pageinfo.c quot_print.c rand.c \
-                            soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
-                            var.c versioning.c assert.c strnatcmp.c levenshtein.c \
-                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
-                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
-                            var_unserializer.c ftok.c sha1.c user_filters.c uuencode.c \
-                            filters.c proc_open.c streamsfuncs.c http.c; do
+  for ac_src in tokenizer.c tokenizer_data.c; do
   
       IFS=.
       set $ac_src
@@ -91874,18 +98397,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC standard"
-    if test "" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC standard"
+    EXT_STATIC="$EXT_STATIC tokenizer"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC tokenizer"
     fi
   else
-    if test "" = "shared" || test "" = "yes"; then
-      PHP_STANDARD_SHARED=yes
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_TOKENIZER_SHARED=yes
       
-  case ext/standard in
+  case ext/tokenizer in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -91900,24 +98423,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
-                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
-                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
-                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
-                            microtime.c pack.c pageinfo.c quot_print.c rand.c \
-                            soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
-                            var.c versioning.c assert.c strnatcmp.c levenshtein.c \
-                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
-                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
-                            var_unserializer.c ftok.c sha1.c user_filters.c uuencode.c \
-                            filters.c proc_open.c streamsfuncs.c http.c; do
+  for ac_src in tokenizer.c tokenizer_data.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_standard="$shared_objects_standard $ac_bdir$ac_obj.lo"
+      shared_objects_tokenizer="$shared_objects_tokenizer $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -91940,31 +98453,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpstandard.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) $(PHPSTANDARD_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpstandard.so '$ext_builddir'/phpstandard.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phptokenizer.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) $(PHPTOKENIZER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phptokenizer.so '$ext_builddir'/phptokenizer.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSTANDARD, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPTOKENIZER, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) $(PHPSTANDARD_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) $(PHPTOKENIZER_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpstandard.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phptokenizer.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpstandard.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phptokenizer.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_standard"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tokenizer"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpstandard.$suffix: $ext_builddir/phpstandard.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpstandard.$suffix \$(phplibdir)
+\$(phplibdir)/phptokenizer.$suffix: $ext_builddir/phptokenizer.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phptokenizer.$suffix \$(phplibdir)
 
-$ext_builddir/phpstandard.$suffix: \$(shared_objects_standard) \$(PHPSTANDARD_SHARED_DEPENDENCIES)
+$ext_builddir/phptokenizer.$suffix: \$(shared_objects_tokenizer) \$(PHPTOKENIZER_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -91977,31 +98490,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/standard.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) $(STANDARD_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/standard.so '$ext_builddir'/standard.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/tokenizer.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) $(TOKENIZER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/tokenizer.so '$ext_builddir'/tokenizer.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(STANDARD, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(TOKENIZER, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) $(STANDARD_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) $(TOKENIZER_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/standard.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/tokenizer.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/standard.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/tokenizer.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_standard"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tokenizer"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/standard.$suffix: $ext_builddir/standard.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/standard.$suffix \$(phplibdir)
+\$(phplibdir)/tokenizer.$suffix: $ext_builddir/tokenizer.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/tokenizer.$suffix \$(phplibdir)
 
-$ext_builddir/standard.$suffix: \$(shared_objects_standard) \$(STANDARD_SHARED_DEPENDENCIES)
+$ext_builddir/tokenizer.$suffix: \$(shared_objects_tokenizer) \$(TOKENIZER_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -92009,22 +98522,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_STANDARD 1
+#define COMPILE_DL_TOKENIZER 1
 EOF
 
     fi
   fi
 
-  if test "" != "shared" && test "" != "yes" && test "" = "cli"; then
-    PHP_STANDARD_SHARED=no
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_TOKENIZER_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/standard in
+  case ext/tokenizer in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -92039,17 +98552,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
-                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
-                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
-                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
-                            microtime.c pack.c pageinfo.c quot_print.c rand.c \
-                            soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
-                            var.c versioning.c assert.c strnatcmp.c levenshtein.c \
-                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
-                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
-                            var_unserializer.c ftok.c sha1.c user_filters.c uuencode.c \
-                            filters.c proc_open.c streamsfuncs.c http.c; do
+  for ac_src in tokenizer.c tokenizer_data.c; do
   
       IFS=.
       set $ac_src
@@ -92072,15 +98575,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC standard"
+        EXT_STATIC="$EXT_STATIC tokenizer"
         ;;
       *)
         
   
-  case ext/standard in
+  case ext/tokenizer in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -92095,17 +98598,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
-                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
-                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
-                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
-                            microtime.c pack.c pageinfo.c quot_print.c rand.c \
-                            soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
-                            var.c versioning.c assert.c strnatcmp.c levenshtein.c \
-                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
-                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
-                            var_unserializer.c ftok.c sha1.c user_filters.c uuencode.c \
-                            filters.c proc_open.c streamsfuncs.c http.c; do
+  for ac_src in tokenizer.c tokenizer_data.c; do
   
       IFS=.
       set $ac_src
@@ -92130,7 +98623,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC standard"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC tokenizer"
   fi
   
   
@@ -92139,52 +98632,34 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=standard
+    PHP_PECL_EXTENSION=tokenizer
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
-
-
+  
   src=$ext_srcdir/Makefile.frag
   ac_srcdir=$ext_srcdir
   ac_builddir=$ext_builddir
   test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments
 
-
-  
-    for header_file in ext/standard/; do
-      
-  
-  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INSTALLHEADERS$unique=set"
-    
-        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
-      
-  fi
-
-    done 
-  
-
+fi
 
 
 
-php_with_sybase_ct=no
+php_enable_wddx=no
 
-echo $ac_n "checking for Sybase-CT support""... $ac_c" 1>&6
-echo "configure:92180: checking for Sybase-CT support" >&5
-# Check whether --with-sybase-ct or --without-sybase-ct was given.
-if test "${with_sybase_ct+set}" = set; then
-  withval="$with_sybase_ct"
-  PHP_SYBASE_CT=$withval
+echo $ac_n "checking whether to enable WDDX support""... $ac_c" 1>&6
+echo "configure:98655: checking whether to enable WDDX support" >&5
+# Check whether --enable-wddx or --disable-wddx was given.
+if test "${enable_wddx+set}" = set; then
+  enableval="$enable_wddx"
+  PHP_WDDX=$enableval
 else
   
-  PHP_SYBASE_CT=no
-  test "$PHP_ENABLE_ALL" && PHP_SYBASE_CT=$PHP_ENABLE_ALL
+  PHP_WDDX=no
+  test "$PHP_ENABLE_ALL" && PHP_WDDX=$PHP_ENABLE_ALL
 
 fi
 
@@ -92192,12 +98667,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_SYBASE_CT in
+case $PHP_WDDX in
 shared,*)
-  PHP_SYBASE_CT=`echo "$PHP_SYBASE_CT"|$SED 's/^shared,//'`
+  PHP_WDDX=`echo "$PHP_WDDX"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_SYBASE_CT=yes
+  PHP_WDDX=yes
   ;;
 no)
   ext_output=no
@@ -92216,254 +98691,290 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
-if test "$PHP_SYBASE_CT" != "no"; then
+if test -z "$PHP_LIBXML_DIR"; then
+  
+php_with_libxml_dir=no
 
-  if test "$PHP_SYBASE" && test "$PHP_SYBASE" != "no" && test "$ext_shared" = "no"; then
-    { echo "configure: error: You can not use both --with-sybase and --with-sybase-ct in same build!" 1>&2; exit 1; }
-  fi
+echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
+echo "configure:98700: checking libxml2 install dir" >&5
+# Check whether --with-libxml-dir or --without-libxml-dir was given.
+if test "${with_libxml_dir+set}" = set; then
+  withval="$with_libxml_dir"
+  PHP_LIBXML_DIR=$withval
+else
+  
+  PHP_LIBXML_DIR=no
+  
 
-  cat >> confdefs.h <<\EOF
-#define HAVE_SYBASE_CT 1
-EOF
+fi
 
-  
-  ext_builddir=ext/sybase_ct
-  ext_srcdir=$abs_srcdir/ext/sybase_ct
 
-  ac_extra=
+ext_output=$PHP_LIBXML_DIR
+echo "$ac_t""$ext_output" 1>&6
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_SYBASE_CT_SHARED=no
-    
-  
-  case ext/sybase_ct in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+
+
+fi
+
+
+php_with_libexpat_dir=no
+
+echo $ac_n "checking libexpat dir for WDDX""... $ac_c" 1>&6
+echo "configure:98724: checking libexpat dir for WDDX" >&5
+# Check whether --with-libexpat-dir or --without-libexpat-dir was given.
+if test "${with_libexpat_dir+set}" = set; then
+  withval="$with_libexpat_dir"
+  PHP_LIBEXPAT_DIR=$withval
+else
   
+  PHP_LIBEXPAT_DIR=no
   
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+fi
 
 
-  old_IFS=$IFS
-  for ac_src in php_sybase_ct.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+ext_output=$PHP_LIBEXPAT_DIR
+echo "$ac_t""$ext_output" 1>&6
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
 
 
-    EXT_STATIC="$EXT_STATIC sybase_ct"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC sybase_ct"
+if test "$PHP_WDDX" != "no"; then
+
+        if test "$PHP_LIBEXPAT_DIR" = "no"; then
+    if test "$PHP_LIBXML" = "no"; then
+      { echo "configure: error: WDDX extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
     fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_SYBASE_CT_SHARED=yes
-      
-  case ext/sybase_ct in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
+
+    
+echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
+echo "configure:98752: checking for xml2-config path" >&5
+if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
   
+  for i in $PHP_LIBXML_DIR /usr/local /usr; do
+    if test -x "$i/bin/xml2-config"; then
+      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
+      break
+    fi
+  done
 
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
+fi
 
+echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6
 
-  old_IFS=$IFS
-  for ac_src in php_sybase_ct.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+  if test -x "$ac_cv_php_xml2_config_path"; then
+    XML2_CONFIG="$ac_cv_php_xml2_config_path"
+    libxml_full_version=`$XML2_CONFIG --version`
+    ac_IFS=$IFS
+    IFS="."
+    set $libxml_full_version
+    IFS=$ac_IFS
+    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
+    if test "$LIBXML_VERSION" -ge "2006011"; then
+      LIBXML_LIBS=`$XML2_CONFIG --libs`
+      LIBXML_INCS=`$XML2_CONFIG --cflags`
       
-      shared_objects_sybase_ct="$shared_objects_sybase_ct $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+  for ac_i in $LIBXML_LIBS; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        WDDX_SHARED_LIBADD="$WDDX_SHARED_LIBADD -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        WDDX_SHARED_LIBADD="$WDDX_SHARED_LIBADD -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsybase_ct.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) $(PHPSYBASE_CT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsybase_ct.so '$ext_builddir'/phpsybase_ct.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSYBASE_CT, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) $(PHPSYBASE_CT_SHARED_LIBADD)'
-      ;;
+    fi
+   ;;
   esac
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsybase_ct.$suffix"
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsybase_ct.$suffix"
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sybase_ct"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpsybase_ct.$suffix: $ext_builddir/phpsybase_ct.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsybase_ct.$suffix \$(phplibdir)
 
-$ext_builddir/phpsybase_ct.$suffix: \$(shared_objects_sybase_ct) \$(PHPSYBASE_CT_SHARED_DEPENDENCIES)
-	$link_cmd
+    
+      if test "$ext_shared" = "yes"; then
+        WDDX_SHARED_LIBADD="-L$ai_p $WDDX_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && WDDX_SHARED_LIBADD="$ld_runpath_switch$ai_p $WDDX_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-EOF
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
+      fi
+    
+  fi
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sybase_ct.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) $(SYBASE_CT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sybase_ct.so '$ext_builddir'/sybase_ct.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SYBASE_CT, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) $(SYBASE_CT_SHARED_LIBADD)'
-      ;;
-  esac
+    ;;
+    esac
+  done
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sybase_ct.$suffix"
+      
+  for ac_i in $LIBXML_INCS; do
+    case $ac_i in
+    -I*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/include"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sybase_ct.$suffix"
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sybase_ct"
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/sybase_ct.$suffix: $ext_builddir/sybase_ct.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/sybase_ct.$suffix \$(phplibdir)
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-$ext_builddir/sybase_ct.$suffix: \$(shared_objects_sybase_ct) \$(SYBASE_CT_SHARED_DEPENDENCIES)
-	$link_cmd
+  fi
 
-EOF
+    ;;
+    esac
+  done
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_SYBASE_CT 1
-EOF
 
-    fi
-  fi
+            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
+echo "configure:98910: checking whether libxml build works" >&5
+if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+        
+  old_LIBS=$LIBS
+  LIBS="
+          $WDDX_SHARED_LIBADD
+         $LIBS"
+  if test "$cross_compiling" = yes; then
+  
+    LIBS=$old_LIBS
+  
+else
+  cat > conftest.$ac_ext <<EOF
+#line 98926 "configure"
+#include "confdefs.h"
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_SYBASE_CT_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
+    
+    char xmlInitParser();
+    int main() {
+      xmlInitParser();
+      return 0;
+    }
+  
+EOF
+if { (eval echo configure:98937: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+    LIBS=$old_LIBS
+    
+          php_cv_libxml_build_works=yes
         
   
-  case ext/sybase_ct in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
   
+    LIBS=$old_LIBS
+    
+          echo "$ac_t""no" 1>&6
+          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
+        
   
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+fi
+rm -fr conftest*
+fi
 
 
-  old_IFS=$IFS
-  for ac_src in php_sybase_ct.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
       
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+fi
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+echo "$ac_t""$php_cv_libxml_build_works" 1>&6
+      if test "$php_cv_libxml_build_works" = "yes"; then
+        cat >> confdefs.h <<\EOF
+#define HAVE_LIBXML 1
 EOF
-  done
 
-
-        EXT_STATIC="$EXT_STATIC sybase_ct"
-        ;;
-      *)
+      fi
+      
+      if test "$PHP_XML" = "no"; then
         
   
-  case ext/sybase_ct in
+  case ext/xml in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -92478,20 +98989,20 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_sybase_ct.c; do
+  for ac_src in compat.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
       case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
       esac
 
     cat >>Makefile.objects<<EOF
@@ -92501,47 +99012,46 @@ EOF
   done
 
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC sybase_ct"
-  fi
-  
+        
   
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
+    BUILD_DIR="$BUILD_DIR ext/xml"
   
 
-
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=sybase_ct
+      fi
     
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+    else
+      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
+    fi
+else 
+      { echo "configure: error: xml2-config not found. Use --with-libxml-dir=<DIR>" 1>&2; exit 1; }
+    
+  fi
 
   fi
 
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST SYBASE_CT_SHARED_LIBADD"
+        if test "$PHP_LIBEXPAT_DIR" != "no"; then
+    for i in $PHP_XML $PHP_LIBEXPAT_DIR /usr /usr/local; do
+      if test -f "$i/$PHP_LIBDIR/libexpat.a" || test -f "$i/$PHP_LIBDIR/libexpat.$SHLIB_SUFFIX_NAME"; then
+        EXPAT_DIR=$i
+        break
+      fi
+    done
 
-  
-  if test "$PHP_SYBASE_CT" = "yes"; then
-    SYBASE_CT_INCDIR=/home/sybase/include
-    SYBASE_CT_LIBDIR=/home/sybase/lib
-  else
-    SYBASE_CT_INCDIR=$PHP_SYBASE_CT/include
-    SYBASE_CT_LIBDIR=$PHP_SYBASE_CT/lib
-  fi
+    if test -z "$EXPAT_DIR"; then
+      { echo "configure: error: not found. Please reinstall the expat distribution." 1>&2; exit 1; }
+    fi
 
-  if test -f $SYBASE_CT_INCDIR/ctpublic.h; then
     
-  if test "$SYBASE_CT_INCDIR" != "/usr/include"; then
+  if test "$EXPAT_DIR/include" != "/usr/include"; then
     
-  if test -z "$SYBASE_CT_INCDIR" || echo "$SYBASE_CT_INCDIR" | grep '^/' >/dev/null ; then
-    ai_p=$SYBASE_CT_INCDIR
+  if test -z "$EXPAT_DIR/include" || echo "$EXPAT_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$EXPAT_DIR/include
   else
     
-    ep_dir="`echo $SYBASE_CT_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $EXPAT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$SYBASE_CT_INCDIR\"`"
+    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/include\"`"
   fi
 
     
@@ -92562,27 +99072,28 @@ EOF
 
   fi
 
-  else
-    { echo "configure: error: ctpublic.h missing!" 1>&2; exit 1; }
-  fi
-  
-  
-  if test "$SYBASE_CT_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SYBASE_CT_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$SYBASE_CT_LIBDIR" || echo "$SYBASE_CT_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$SYBASE_CT_LIBDIR
+
+  if test "$ext_shared" = "yes"; then
+    WDDX_SHARED_LIBADD="-lexpat $WDDX_SHARED_LIBADD"
+    if test -n "$EXPAT_DIR/$PHP_LIBDIR"; then
+      
+  if test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$EXPAT_DIR/$PHP_LIBDIR" || echo "$EXPAT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$EXPAT_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $SYBASE_CT_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $EXPAT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$SYBASE_CT_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/$PHP_LIBDIR\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-L$ai_p $SYBASE_CT_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && SYBASE_CT_SHARED_LIBADD="$ld_runpath_switch$ai_p $SYBASE_CT_SHARED_LIBADD"
+        WDDX_SHARED_LIBADD="-L$ai_p $WDDX_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && WDDX_SHARED_LIBADD="$ld_runpath_switch$ai_p $WDDX_SHARED_LIBADD"
       else
         
   
@@ -92604,772 +99115,522 @@ EOF
     
   fi
 
-  if test -f $SYBASE_CT_INCDIR/tds.h || test -f $SYBASE_CT_INCDIR/tds_sysdep_public.h; then
-    
-  
-  case ct in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lct $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
-  
-  case ct in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lct $LIBS" 
-   ;;
-  esac
-
-
     fi
-   ;;
-  esac
+  else
+    
 
+  if test -n "$EXPAT_DIR/$PHP_LIBDIR"; then
+    
+  if test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$EXPAT_DIR/$PHP_LIBDIR" || echo "$EXPAT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$EXPAT_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $EXPAT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/$PHP_LIBDIR\"`"
+  fi
 
-    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lct"
-  elif test -f $SYBASE_CT_INCDIR/libsybct64.so; then
     
-  
-  case sybcs64 in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybcs64 $SYBASE_CT_SHARED_LIBADD" 
-    else
       
   
-  case sybcs64 in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybcs64 $LIBS" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    
   
-  case sybct64 in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybct64 $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  case sybct64 in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybct64 $LIBS" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
 
     
+  fi
+
+  fi
   
-  case sybcomn64 in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybcomn64 $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
   
-  case sybcomn64 in
+  case expat in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lsybcomn64 $LIBS" 
+      LIBS="-lexpat $LIBS" 
    ;;
   esac
 
 
-    fi
-   ;;
-  esac
 
 
-    
-  
-  case sybintl64 in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybintl64 $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
-  
-  case sybintl64 in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybintl64 $LIBS" 
-   ;;
-  esac
+  fi
 
 
-    fi
-   ;;
-  esac
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBEXPAT 1
+EOF
 
+  fi
 
+  cat >> confdefs.h <<\EOF
+#define HAVE_WDDX 1
+EOF
 
-    ac_solid_uname_s=`uname -s 2>/dev/null`
-    case $ac_solid_uname_s in
-      *OSF*)                            ;; # Tru64/DEC OSF does NOT use the SYB_LP64 define
-      *) CFLAGS="${CFLAGS} -DSYB_LP64"  ;; # 
-    esac
-    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lsybcs64 -lsybct64 -lsybcomn64 -lsybintl64"
   
+  ext_builddir=ext/wddx
+  ext_srcdir=$abs_srcdir/ext/wddx
+
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_WDDX_SHARED=no
     
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff=" 
-      $SYBASE_CT_LIBS 
-    "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
   
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
+  case ext/wddx in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in wddx.c; do
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
 
+    EXT_STATIC="$EXT_STATIC wddx"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC wddx"
     fi
-   ;;
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_WDDX_SHARED=yes
+      
+  case ext/wddx in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
+  
+  
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
 
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
+  old_IFS=$IFS
+  for ac_src in wddx.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+      shared_objects_wddx="$shared_objects_wddx $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpwddx.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) $(PHPWDDX_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpwddx.so '$ext_builddir'/phpwddx.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPWDDX, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) $(PHPWDDX_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpwddx.$suffix"
   else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpwddx.$suffix"
   fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  fi
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_wddx"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpwddx.$suffix: $ext_builddir/phpwddx.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpwddx.$suffix \$(phplibdir)
+
+$ext_builddir/phpwddx.$suffix: \$(shared_objects_wddx) \$(PHPWDDX_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
 
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/wddx.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) $(WDDX_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/wddx.so '$ext_builddir'/wddx.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(WDDX, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) $(WDDX_SHARED_LIBADD)'
+      ;;
+  esac
 
-      fi
-    
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/wddx.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/wddx.$suffix"
   fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_wddx"
 
-    ;;
-    esac
-  done
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/wddx.$suffix: $ext_builddir/wddx.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/wddx.$suffix \$(phplibdir)
 
-  echo $ac_n "checking for netg_errstr in -lsybtcl64""... $ac_c" 1>&6
-echo "configure:92832: checking for netg_errstr in -lsybtcl64" >&5
-ac_lib_var=`echo sybtcl64'_'netg_errstr | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsybtcl64  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 92840 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char netg_errstr();
+$ext_builddir/wddx.$suffix: \$(shared_objects_wddx) \$(WDDX_SHARED_DEPENDENCIES)
+	$link_cmd
 
-int main() {
-netg_errstr()
-; return 0; }
 EOF
-if { (eval echo configure:92851: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-      
-  
-  case sybtcl64 in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybtcl64 $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
-  
-  case sybtcl64 in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybtcl64 $LIBS" 
-   ;;
-  esac
 
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_WDDX 1
+EOF
 
     fi
-   ;;
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_WDDX_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/wddx in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
+  
+  
 
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-    
-  
-else
-  echo "$ac_t""no" 1>&6
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_sybtcl64_netg_errstr
-     
-      
+  old_IFS=$IFS
+  for ac_src in wddx.c; do
   
-  case sybtcl64 in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybtcl64 $SYBASE_CT_SHARED_LIBADD" 
-    else
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-  
-  case sybtcl64 in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybtcl64 $LIBS" 
-   ;;
-  esac
-
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-    fi
-   ;;
-  esac
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
-    
-  
-fi
 
-  
-    
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="-L$SYBASE_CT_LIBDIR"
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
+        EXT_STATIC="$EXT_STATIC wddx"
+        ;;
+      *)
         
   
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  case ext/wddx in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
   
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in wddx.c; do
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-    fi
-   ;;
-  esac
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC wddx"
   fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
   
-  fi
 
 
-      fi
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=wddx
     
-  fi
-
-    ;;
-    esac
-  done
-
-  echo $ac_n "checking for insck__getVdate in -linsck64""... $ac_c" 1>&6
-echo "configure:93026: checking for insck__getVdate in -linsck64" >&5
-ac_lib_var=`echo insck64'_'insck__getVdate | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-linsck64  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 93034 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char insck__getVdate();
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
-int main() {
-insck__getVdate()
-; return 0; }
-EOF
-if { (eval echo configure:93045: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  fi
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
   
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
+  am_i_shared=$PHP_WDDX_SHARED
+  is_it_shared=$PHP_LIBXML_SHARED
+  is_it_enabled=$PHP_LIBXML
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension wddx to build statically, but it
+depends on extension libxml, which you've configured to build shared.
+You either need to build wddx shared or build libxml statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension wddx, which depends on extension libxml,
+but you've either not enabled libxml, or have disabled it.
+" 1>&2; exit 1; }
+  fi
   
-  case insck64 in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-linsck64 $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
   
-  case insck64 in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-linsck64 $LIBS" 
-   ;;
-  esac
+  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLRPC_SHARED_LIBADD"
 
+fi
 
-    fi
-   ;;
-  esac
 
 
-  
-else
-  echo "$ac_t""no" 1>&6
+php_enable_xml=yes
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_insck64_insck__getVdate
-    
+echo $ac_n "checking whether to enable XML support""... $ac_c" 1>&6
+echo "configure:99504: checking whether to enable XML support" >&5
+# Check whether --enable-xml or --disable-xml was given.
+if test "${enable_xml+set}" = set; then
+  enableval="$enable_xml"
+  PHP_XML=$enableval
+else
   
-fi
+  PHP_XML=yes
+  test "$PHP_ENABLE_ALL" && PHP_XML=$PHP_ENABLE_ALL
 
-    
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="-L$SYBASE_CT_LIBDIR"
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
+fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
 
 
-    fi
-   ;;
-  esac
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_XML in
+shared,*)
+  PHP_XML=`echo "$PHP_XML"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_XML=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
 
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
+echo "$ac_t""$ext_output" 1>&6
 
 
-      fi
-    
-  fi
 
-    ;;
-    esac
-  done
 
-  echo $ac_n "checking for bsd_tcp in -linsck64""... $ac_c" 1>&6
-echo "configure:93193: checking for bsd_tcp in -linsck64" >&5
-ac_lib_var=`echo insck64'_'bsd_tcp | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-linsck64  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 93201 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char bsd_tcp();
+if test -z "$PHP_LIBXML_DIR"; then
+  
+php_with_libxml_dir=no
 
-int main() {
-bsd_tcp()
-; return 0; }
-EOF
-if { (eval echo configure:93212: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
+echo "configure:99549: checking libxml2 install dir" >&5
+# Check whether --with-libxml-dir or --without-libxml-dir was given.
+if test "${with_libxml_dir+set}" = set; then
+  withval="$with_libxml_dir"
+  PHP_LIBXML_DIR=$withval
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
   
-  case insck64 in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-linsck64 $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
+  PHP_LIBXML_DIR=no
   
-  case insck64 in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-linsck64 $LIBS" 
-   ;;
-  esac
+
+fi
 
 
-    fi
-   ;;
-  esac
+ext_output=$PHP_LIBXML_DIR
+echo "$ac_t""$ext_output" 1>&6
 
 
-  
-else
-  echo "$ac_t""no" 1>&6
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_insck64_bsd_tcp
-    
-  
 fi
 
-  elif test -f $SYBASE_CT_INCDIR/libsybct.so; then
-    
+
+php_with_libexpat_dir=no
+
+echo $ac_n "checking libexpat install dir""... $ac_c" 1>&6
+echo "configure:99573: checking libexpat install dir" >&5
+# Check whether --with-libexpat-dir or --without-libexpat-dir was given.
+if test "${with_libexpat_dir+set}" = set; then
+  withval="$with_libexpat_dir"
+  PHP_LIBEXPAT_DIR=$withval
+else
   
-  case sybcs in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybcs $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
+  PHP_LIBEXPAT_DIR=no
   
-  case sybcs in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybcs $LIBS" 
-   ;;
-  esac
-
 
-    fi
-   ;;
-  esac
+fi
 
 
-    
-  
-  case sybct in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybct $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
-  
-  case sybct in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybct $LIBS" 
-   ;;
-  esac
+ext_output=$PHP_LIBEXPAT_DIR
+echo "$ac_t""$ext_output" 1>&6
 
 
-    fi
-   ;;
-  esac
 
 
-    
-  
-  case sybcomn in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybcomn $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
-  
-  case sybcomn in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybcomn $LIBS" 
-   ;;
-  esac
+if test "$PHP_XML" != "no"; then
 
+        if test "$PHP_LIBEXPAT_DIR" = "no"; then
 
+    if test "$PHP_LIBXML" = "no"; then
+      { echo "configure: error: XML extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
     fi
-   ;;
-  esac
-
 
     
+echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
+echo "configure:99602: checking for xml2-config path" >&5
+if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
   
-  case sybintl in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybintl $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
-  
-  case sybintl in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybintl $LIBS" 
-   ;;
-  esac
-
-
+  for i in $PHP_LIBXML_DIR /usr/local /usr; do
+    if test -x "$i/bin/xml2-config"; then
+      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
+      break
     fi
-   ;;
-  esac
+  done
 
+fi
 
-  
-    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lsybcs -lsybct -lsybcomn -lsybintl"
-  
-    
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff=" 
-      $SYBASE_CT_LIBS 
-    "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
+echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6
+
+  if test -x "$ac_cv_php_xml2_config_path"; then
+    XML2_CONFIG="$ac_cv_php_xml2_config_path"
+    libxml_full_version=`$XML2_CONFIG --version`
+    ac_IFS=$IFS
+    IFS="."
+    set $libxml_full_version
+    IFS=$ac_IFS
+    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
+    if test "$LIBXML_VERSION" -ge "2006011"; then
+      LIBXML_LIBS=`$XML2_CONFIG --libs`
+      LIBXML_INCS=`$XML2_CONFIG --cflags`
+      
+  for ac_i in $LIBXML_LIBS; do
     case $ac_i in
     -pthread)
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
+        XML_SHARED_LIBADD="$XML_SHARED_LIBADD -pthread"
       else
         
   
@@ -93391,7 +99652,7 @@ fi
   c|c_r|pthread*) ;;
   *) 
     if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
+        XML_SHARED_LIBADD="$XML_SHARED_LIBADD -l$ac_ii" 
     else
       
   
@@ -93426,8 +99687,8 @@ fi
 
     
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+        XML_SHARED_LIBADD="-L$ai_p $XML_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && XML_SHARED_LIBADD="$ld_runpath_switch$ai_p $XML_SHARED_LIBADD"
       else
         
   
@@ -93453,160 +99714,13 @@ fi
     esac
   done
 
-  echo $ac_n "checking for netg_errstr in -lsybtcl""... $ac_c" 1>&6
-echo "configure:93458: checking for netg_errstr in -lsybtcl" >&5
-ac_lib_var=`echo sybtcl'_'netg_errstr | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsybtcl  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 93466 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char netg_errstr();
-
-int main() {
-netg_errstr()
-; return 0; }
-EOF
-if { (eval echo configure:93477: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-      
-  
-  case sybtcl in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybtcl $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
-  
-  case sybtcl in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybtcl $LIBS" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    
-  
-else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_sybtcl_netg_errstr
-     
-      
-  
-  case sybtcl in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybtcl $SYBASE_CT_SHARED_LIBADD" 
-    else
       
-  
-  case sybtcl in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybtcl $LIBS" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    
-  
-fi
-
-  
-    
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="-L$SYBASE_CT_LIBDIR"
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
+  for ac_i in $LIBXML_INCS; do
     case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    ;;
-    -L*)
+    -I*)
       ac_ii=`echo $ac_i|cut -c 3-`
       
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+  if test "$ac_ii" != "/usr/include"; then
     
   if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
     ai_p=$ac_ii
@@ -93619,176 +99733,187 @@ fi
   fi
 
     
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
+    eval "INCLUDEPATH$unique=set"
     
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
       fi
     
   fi
 
+  fi
+
     ;;
     esac
   done
 
-  echo $ac_n "checking for insck__getVdate in -linsck""... $ac_c" 1>&6
-echo "configure:93652: checking for insck__getVdate in -linsck" >&5
-ac_lib_var=`echo insck'_'insck__getVdate | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+
+            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
+echo "configure:99760: checking whether libxml build works" >&5
+if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  ac_save_LIBS="$LIBS"
-LIBS="-linsck  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 93660 "configure"
+  
+        
+  old_LIBS=$LIBS
+  LIBS="
+          $XML_SHARED_LIBADD
+         $LIBS"
+  if test "$cross_compiling" = yes; then
+  
+    LIBS=$old_LIBS
+  
+else
+  cat > conftest.$ac_ext <<EOF
+#line 99776 "configure"
 #include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char insck__getVdate();
 
-int main() {
-insck__getVdate()
-; return 0; }
+    
+    char xmlInitParser();
+    int main() {
+      xmlInitParser();
+      return 0;
+    }
+  
 EOF
-if { (eval echo configure:93671: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+if { (eval echo configure:99787: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+    LIBS=$old_LIBS
+    
+          php_cv_libxml_build_works=yes
+        
+  
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+  rm -fr conftest*
   
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
+    LIBS=$old_LIBS
     
+          echo "$ac_t""no" 1>&6
+          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
+        
   
-  case insck in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
-  
-  case insck in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-linsck $LIBS" 
-   ;;
-  esac
+fi
+rm -fr conftest*
+fi
 
 
-    fi
-   ;;
-  esac
+      
+fi
 
+echo "$ac_t""$php_cv_libxml_build_works" 1>&6
+      if test "$php_cv_libxml_build_works" = "yes"; then
+        cat >> confdefs.h <<\EOF
+#define HAVE_LIBXML 1
+EOF
 
+      fi
+      
+      xml_extra_sources="compat.c"
+      
+  am_i_shared=$PHP_XML_SHARED
+  is_it_shared=$PHP_LIBXML_SHARED
+  is_it_enabled=$PHP_LIBXML
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension xml to build statically, but it
+depends on extension libxml, which you've configured to build shared.
+You either need to build xml shared or build libxml statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension xml, which depends on extension libxml,
+but you've either not enabled libxml, or have disabled it.
+" 1>&2; exit 1; }
+  fi
   
-else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_insck_insck__getVdate
     
+    else
+      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
+    fi
+else 
+      { echo "configure: error: xml2-config not found. Use --with-libxml-dir=<DIR>" 1>&2; exit 1; }
+    
+  fi
+
+  fi
   
-fi
+        if test "$PHP_LIBEXPAT_DIR" != "no"; then
+    for i in $PHP_XML $PHP_LIBEXPAT_DIR /usr /usr/local; do
+      if test -f "$i/$PHP_LIBDIR/libexpat.a" || test -f "$i/$PHP_LIBDIR/libexpat.$SHLIB_SUFFIX_NAME"; then
+        EXPAT_DIR=$i
+        break
+      fi
+    done
+
+    if test -z "$EXPAT_DIR"; then
+      { echo "configure: error: not found. Please reinstall the expat distribution." 1>&2; exit 1; }
+    fi
 
     
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="-L$SYBASE_CT_LIBDIR"
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  if test "$EXPAT_DIR/include" != "/usr/include"; then
+    
+  if test -z "$EXPAT_DIR/include" || echo "$EXPAT_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$EXPAT_DIR/include
+  else
+    
+    ep_dir="`echo $EXPAT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/include\"`"
   fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
+    
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-    fi
-   ;;
-  esac
+  fi
 
+    
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
+  if test "$ext_shared" = "yes"; then
+    XML_SHARED_LIBADD="-lexpat $XML_SHARED_LIBADD"
+    if test -n "$EXPAT_DIR/$PHP_LIBDIR"; then
       
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+  if test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+  if test -z "$EXPAT_DIR/$PHP_LIBDIR" || echo "$EXPAT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$EXPAT_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $EXPAT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/$PHP_LIBDIR\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+        XML_SHARED_LIBADD="-L$ai_p $XML_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && XML_SHARED_LIBADD="$ld_runpath_switch$ai_p $XML_SHARED_LIBADD"
       else
         
   
@@ -93810,386 +99935,496 @@ fi
     
   fi
 
-    ;;
-    esac
-  done
-
-  echo $ac_n "checking for bsd_tcp in -linsck""... $ac_c" 1>&6
-echo "configure:93819: checking for bsd_tcp in -linsck" >&5
-ac_lib_var=`echo insck'_'bsd_tcp | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-linsck  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 93827 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char bsd_tcp();
+    fi
+  else
+    
 
-int main() {
-bsd_tcp()
-; return 0; }
-EOF
-if { (eval echo configure:93838: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  if test -n "$EXPAT_DIR/$PHP_LIBDIR"; then
+    
+  if test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$EXPAT_DIR/$PHP_LIBDIR" || echo "$EXPAT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$EXPAT_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $EXPAT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/$PHP_LIBDIR\"`"
+  fi
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+    
+      
   
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
     
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  case insck in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
+  fi
+
+
+    
+  fi
+
+  fi
   
-  case insck in
+  
+  case expat in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-linsck $LIBS" 
+      LIBS="-lexpat $LIBS" 
    ;;
   esac
 
 
-    fi
-   ;;
-  esac
 
 
-  
-else
-  echo "$ac_t""no" 1>&6
+  fi
+
+
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBEXPAT 1
+EOF
+
+  fi
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_insck_bsd_tcp
-    
   
-fi
+  ext_builddir=ext/xml
+  ext_srcdir=$abs_srcdir/ext/xml
 
-  else
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_XML_SHARED=no
     
   
-  case cs in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lcs $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
-  
-  case cs in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lcs $LIBS" 
-   ;;
+  case ext/xml in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
+  
+  
 
-
-    fi
-   ;;
-  esac
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
 
-    
+  old_IFS=$IFS
+  for ac_src in xml.c $xml_extra_sources; do
   
-  case ct in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lct $SYBASE_CT_SHARED_LIBADD" 
-    else
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-  
-  case ct in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lct $LIBS" 
-   ;;
-  esac
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
 
+    EXT_STATIC="$EXT_STATIC xml"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC xml"
     fi
-   ;;
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_XML_SHARED=yes
+      
+  case ext/xml in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
+  
+  
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
 
 
-    
+  old_IFS=$IFS
+  for ac_src in xml.c $xml_extra_sources; do
   
-  case comn in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lcomn $SYBASE_CT_SHARED_LIBADD" 
-    else
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-  
-  case comn in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lcomn $LIBS" 
-   ;;
-  esac
+      shared_objects_xml="$shared_objects_xml $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
-    fi
-   ;;
-  esac
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
 
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) $(PHPXML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxml.so '$ext_builddir'/phpxml.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXML, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) $(PHPXML_SHARED_LIBADD)'
+      ;;
+  esac
 
-    
-  
-  case intl in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lintl $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxml.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxml.$suffix"
+  fi
   
-  case intl in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lintl $LIBS" 
-   ;;
-  esac
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xml"
 
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpxml.$suffix: $ext_builddir/phpxml.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxml.$suffix \$(phplibdir)
 
-    fi
-   ;;
+$ext_builddir/phpxml.$suffix: \$(shared_objects_xml) \$(PHPXML_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) $(XML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xml.so '$ext_builddir'/xml.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XML, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) $(XML_SHARED_LIBADD)'
+      ;;
   esac
 
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xml.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xml.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xml"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/xml.$suffix: $ext_builddir/xml.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/xml.$suffix \$(phplibdir)
+
+$ext_builddir/xml.$suffix: \$(shared_objects_xml) \$(XML_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_XML 1
+EOF
+
+    fi
+  fi
 
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_XML_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
   
-    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lcs -lct -lcomn -lintl"
+  case ext/xml in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-    
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff=" 
-      $SYBASE_CT_LIBS 
-    "
   
-  save_ext_shared=$ext_shared
-  ext_shared=yes
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in xml.c $xml_extra_sources; do
   
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        EXT_STATIC="$EXT_STATIC xml"
+        ;;
+      *)
         
   
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  case ext/xml in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
   
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in xml.c $xml_extra_sources; do
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-    fi
-   ;;
-  esac
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC xml"
   fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
 
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=xml
     
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
   
+  PHP_VAR_SUBST="$PHP_VAR_SUBST XML_SHARED_LIBADD"
+
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+    for header_file in ext/xml/; do
+      
+  
+  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
+    eval "INSTALLHEADERS$unique=set"
     
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
+        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
+      
   fi
 
+    done 
+  
 
-      fi
-    
-  fi
+  cat >> confdefs.h <<\EOF
+#define HAVE_XML 1
+EOF
 
-    ;;
-    esac
-  done
+fi
 
-  echo $ac_n "checking for netg_errstr in -ltcl""... $ac_c" 1>&6
-echo "configure:94084: checking for netg_errstr in -ltcl" >&5
-ac_lib_var=`echo tcl'_'netg_errstr | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-ltcl  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 94092 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char netg_errstr();
 
-int main() {
-netg_errstr()
-; return 0; }
-EOF
-if { (eval echo configure:94103: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+
+php_enable_xmlreader=yes
+
+echo $ac_n "checking whether to enable XMLReader support""... $ac_c" 1>&6
+echo "configure:100323: checking whether to enable XMLReader support" >&5
+# Check whether --enable-xmlreader or --disable-xmlreader was given.
+if test "${enable_xmlreader+set}" = set; then
+  enableval="$enable_xmlreader"
+  PHP_XMLREADER=$enableval
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  
+  PHP_XMLREADER=yes
+  test "$PHP_ENABLE_ALL" && PHP_XMLREADER=$PHP_ENABLE_ALL
 
 fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-      
-  
-  case tcl in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-ltcl $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
-  
-  case tcl in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-ltcl $LIBS" 
-   ;;
-  esac
 
 
-    fi
-   ;;
-  esac
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_XMLREADER in
+shared,*)
+  PHP_XMLREADER=`echo "$PHP_XMLREADER"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_XMLREADER=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
 
-    
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test -z "$PHP_LIBXML_DIR"; then
   
-else
-  echo "$ac_t""no" 1>&6
+php_with_libxml_dir=no
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_tcl_netg_errstr
-     
-      
+echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
+echo "configure:100368: checking libxml2 install dir" >&5
+# Check whether --with-libxml-dir or --without-libxml-dir was given.
+if test "${with_libxml_dir+set}" = set; then
+  withval="$with_libxml_dir"
+  PHP_LIBXML_DIR=$withval
+else
   
-  case sybtcl in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybtcl $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
+  PHP_LIBXML_DIR=no
   
-  case sybtcl in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybtcl $LIBS" 
-   ;;
-  esac
+
+fi
 
 
-    fi
-   ;;
-  esac
+ext_output=$PHP_LIBXML_DIR
+echo "$ac_t""$ext_output" 1>&6
+
 
 
-    
-  
 fi
 
+if test "$PHP_XMLREADER" != "no"; then
+
+  if test "$PHP_LIBXML" = "no"; then
+    { echo "configure: error: XMLReader extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
+  fi
+
   
-    
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="-L$SYBASE_CT_LIBDIR"
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
+echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
+echo "configure:100396: checking for xml2-config path" >&5
+if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
   
-  for ac_i in $ac_stuff; do
+  for i in $PHP_LIBXML_DIR /usr/local /usr; do
+    if test -x "$i/bin/xml2-config"; then
+      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
+      break
+    fi
+  done
+
+fi
+
+echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6
+
+  if test -x "$ac_cv_php_xml2_config_path"; then
+    XML2_CONFIG="$ac_cv_php_xml2_config_path"
+    libxml_full_version=`$XML2_CONFIG --version`
+    ac_IFS=$IFS
+    IFS="."
+    set $libxml_full_version
+    IFS=$ac_IFS
+    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
+    if test "$LIBXML_VERSION" -ge "2006011"; then
+      LIBXML_LIBS=`$XML2_CONFIG --libs`
+      LIBXML_INCS=`$XML2_CONFIG --cflags`
+      
+  for ac_i in $LIBXML_LIBS; do
     case $ac_i in
     -pthread)
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
+        XMLREADER_SHARED_LIBADD="$XMLREADER_SHARED_LIBADD -pthread"
       else
         
   
@@ -94211,7 +100446,7 @@ fi
   c|c_r|pthread*) ;;
   *) 
     if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
+        XMLREADER_SHARED_LIBADD="$XMLREADER_SHARED_LIBADD -l$ac_ii" 
     else
       
   
@@ -94246,8 +100481,8 @@ fi
 
     
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+        XMLREADER_SHARED_LIBADD="-L$ai_p $XMLREADER_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && XMLREADER_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLREADER_SHARED_LIBADD"
       else
         
   
@@ -94273,133 +100508,13 @@ fi
     esac
   done
 
-  echo $ac_n "checking for insck__getVdate in -linsck""... $ac_c" 1>&6
-echo "configure:94278: checking for insck__getVdate in -linsck" >&5
-ac_lib_var=`echo insck'_'insck__getVdate | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-linsck  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 94286 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char insck__getVdate();
-
-int main() {
-insck__getVdate()
-; return 0; }
-EOF
-if { (eval echo configure:94297: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-  
-  case insck in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD" 
-    else
       
-  
-  case insck in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-linsck $LIBS" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-  
-else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_insck_insck__getVdate
-    
-  
-fi
-
-    
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="-L$SYBASE_CT_LIBDIR"
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
+  for ac_i in $LIBXML_INCS; do
     case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    ;;
-    -L*)
+    -I*)
       ac_ii=`echo $ac_i|cut -c 3-`
       
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+  if test "$ac_ii" != "/usr/include"; then
     
   if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
     ai_p=$ac_ii
@@ -94412,209 +100527,109 @@ fi
   fi
 
     
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
+    eval "INCLUDEPATH$unique=set"
     
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
       fi
     
   fi
 
+  fi
+
     ;;
     esac
   done
 
-  echo $ac_n "checking for bsd_tcp in -linsck""... $ac_c" 1>&6
-echo "configure:94445: checking for bsd_tcp in -linsck" >&5
-ac_lib_var=`echo insck'_'bsd_tcp | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-linsck  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 94453 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char bsd_tcp();
 
-int main() {
-bsd_tcp()
-; return 0; }
-EOF
-if { (eval echo configure:94464: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
+echo "configure:100554: checking whether libxml build works" >&5
+if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
   
-  case insck in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
+        
+  old_LIBS=$LIBS
+  LIBS="
+          $XMLREADER_SHARED_LIBADD
+         $LIBS"
+  if test "$cross_compiling" = yes; then
   
-  case insck in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-linsck $LIBS" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
+    LIBS=$old_LIBS
   
 else
-  echo "$ac_t""no" 1>&6
+  cat > conftest.$ac_ext <<EOF
+#line 100570 "configure"
+#include "confdefs.h"
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_insck_bsd_tcp
     
+    char xmlInitParser();
+    int main() {
+      xmlInitParser();
+      return 0;
+    }
   
-fi
-
-  fi
-fi
-
-
-
-php_enable_sysvmsg=no
-
-echo $ac_n "checking whether to enable System V IPC support""... $ac_c" 1>&6
-echo "configure:94524: checking whether to enable System V IPC support" >&5
-# Check whether --enable-sysvmsg or --disable-sysvmsg was given.
-if test "${enable_sysvmsg+set}" = set; then
-  enableval="$enable_sysvmsg"
-  PHP_SYSVMSG=$enableval
-else
-  
-  PHP_SYSVMSG=no
-  test "$PHP_ENABLE_ALL" && PHP_SYSVMSG=$PHP_ENABLE_ALL
-
-fi
-
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_SYSVMSG in
-shared,*)
-  PHP_SYSVMSG=`echo "$PHP_SYSVMSG"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_SYSVMSG=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test "$PHP_SYSVMSG" != "no"; then
-  ac_safe=`echo "sys/msg.h" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for sys/msg.h""... $ac_c" 1>&6
-echo "configure:94567: checking for sys/msg.h" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 94572 "configure"
-#include "confdefs.h"
-#include <sys/msg.h>
 EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:94577: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
+if { (eval echo configure:100581: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+    LIBS=$old_LIBS
+    
+          php_cv_libxml_build_works=yes
+        
+  
 else
-  echo "$ac_err" >&5
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  :
-else
-  echo "$ac_t""no" 1>&6
-{ echo "configure: error: Cannot enable System V IPC support, sys/msg.h is missing" 1>&2; exit 1; }
+  rm -fr conftest*
+  
+    LIBS=$old_LIBS
+    
+          echo "$ac_t""no" 1>&6
+          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
+        
   
 fi
+rm -fr conftest*
+fi
 
 
-  cat >> confdefs.h <<\EOF
-#define HAVE_SYSVMSG 1
+      
+fi
+
+echo "$ac_t""$php_cv_libxml_build_works" 1>&6
+      if test "$php_cv_libxml_build_works" = "yes"; then
+        cat >> confdefs.h <<\EOF
+#define HAVE_LIBXML 1
 EOF
 
-  
-  ext_builddir=ext/sysvmsg
-  ext_srcdir=$abs_srcdir/ext/sysvmsg
+      fi
+      
+    cat >> confdefs.h <<\EOF
+#define HAVE_XMLREADER 1
+EOF
+
+    
+  ext_builddir=ext/xmlreader
+  ext_srcdir=$abs_srcdir/ext/xmlreader
 
   ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_SYSVMSG_SHARED=no
+    PHP_XMLREADER_SHARED=no
     
   
-  case ext/sysvmsg in
+  case ext/xmlreader in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlreader"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlreader/"; ac_bdir="ext/xmlreader/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -94629,7 +100644,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in sysvmsg.c; do
+  for ac_src in php_xmlreader.c; do
   
       IFS=.
       set $ac_src
@@ -94652,18 +100667,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC sysvmsg"
+    EXT_STATIC="$EXT_STATIC xmlreader"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC sysvmsg"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlreader"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_SYSVMSG_SHARED=yes
+      PHP_XMLREADER_SHARED=yes
       
-  case ext/sysvmsg in
+  case ext/xmlreader in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlreader"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlreader/"; ac_bdir="ext/xmlreader/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -94678,14 +100693,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in sysvmsg.c; do
+  for ac_src in php_xmlreader.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_sysvmsg="$shared_objects_sysvmsg $ac_bdir$ac_obj.lo"
+      shared_objects_xmlreader="$shared_objects_xmlreader $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -94708,31 +100723,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsysvmsg.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) $(PHPSYSVMSG_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsysvmsg.so '$ext_builddir'/phpsysvmsg.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxmlreader.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) $(PHPXMLREADER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxmlreader.so '$ext_builddir'/phpxmlreader.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSYSVMSG, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXMLREADER, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) $(PHPSYSVMSG_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) $(PHPXMLREADER_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsysvmsg.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxmlreader.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsysvmsg.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxmlreader.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvmsg"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlreader"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpsysvmsg.$suffix: $ext_builddir/phpsysvmsg.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsysvmsg.$suffix \$(phplibdir)
+\$(phplibdir)/phpxmlreader.$suffix: $ext_builddir/phpxmlreader.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxmlreader.$suffix \$(phplibdir)
 
-$ext_builddir/phpsysvmsg.$suffix: \$(shared_objects_sysvmsg) \$(PHPSYSVMSG_SHARED_DEPENDENCIES)
+$ext_builddir/phpxmlreader.$suffix: \$(shared_objects_xmlreader) \$(PHPXMLREADER_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -94745,31 +100760,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sysvmsg.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) $(SYSVMSG_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sysvmsg.so '$ext_builddir'/sysvmsg.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xmlreader.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) $(XMLREADER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xmlreader.so '$ext_builddir'/xmlreader.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SYSVMSG, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XMLREADER, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) $(SYSVMSG_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) $(XMLREADER_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sysvmsg.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xmlreader.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sysvmsg.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlreader.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvmsg"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlreader"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/sysvmsg.$suffix: $ext_builddir/sysvmsg.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/sysvmsg.$suffix \$(phplibdir)
+\$(phplibdir)/xmlreader.$suffix: $ext_builddir/xmlreader.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlreader.$suffix \$(phplibdir)
 
-$ext_builddir/sysvmsg.$suffix: \$(shared_objects_sysvmsg) \$(SYSVMSG_SHARED_DEPENDENCIES)
+$ext_builddir/xmlreader.$suffix: \$(shared_objects_xmlreader) \$(XMLREADER_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -94777,22 +100792,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_SYSVMSG 1
+#define COMPILE_DL_XMLREADER 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_SYSVMSG_SHARED=no
+    PHP_XMLREADER_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/sysvmsg in
+  case ext/xmlreader in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlreader"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlreader/"; ac_bdir="ext/xmlreader/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -94807,7 +100822,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in sysvmsg.c; do
+  for ac_src in php_xmlreader.c; do
   
       IFS=.
       set $ac_src
@@ -94830,15 +100845,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC sysvmsg"
+        EXT_STATIC="$EXT_STATIC xmlreader"
         ;;
       *)
         
   
-  case ext/sysvmsg in
+  case ext/xmlreader in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlreader"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlreader/"; ac_bdir="ext/xmlreader/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -94853,7 +100868,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in sysvmsg.c; do
+  for ac_src in php_xmlreader.c; do
   
       IFS=.
       set $ac_src
@@ -94878,7 +100893,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC sysvmsg"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlreader"
   fi
   
   
@@ -94887,74 +100902,438 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=sysvmsg
+    PHP_PECL_EXTENSION=xmlreader
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
+    
+  am_i_shared=$PHP_XMLREADER_SHARED
+  is_it_shared=$PHP_DOM_SHARED
+  is_it_enabled=$PHP_DOM
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension xmlreader to build statically, but it
+depends on extension dom, which you've configured to build shared.
+You either need to build xmlreader shared or build dom statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension xmlreader, which depends on extension dom,
+but you've either not enabled dom, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLREADER_SHARED_LIBADD"
+
+  
+    else
+      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
+    fi
+else 
+    { echo "configure: error: xml2-config not found. Please check your libxml2 installation." 1>&2; exit 1; }
+  
+  fi
+
 fi
 
 
+# Local macros for automake & autoconf
 
-php_enable_sysvsem=no
 
-echo $ac_n "checking whether to enable System V semaphore support""... $ac_c" 1>&6
-echo "configure:94904: checking whether to enable System V semaphore support" >&5
-# Check whether --enable-sysvsem or --disable-sysvsem was given.
-if test "${enable_sysvsem+set}" = set; then
-  enableval="$enable_sysvsem"
-  PHP_SYSVSEM=$enableval
+
+
+
+
+
+
+
+
+
+
+
+php_with_xmlrpc=no
+
+echo $ac_n "checking for XMLRPC-EPI support""... $ac_c" 1>&6
+echo "configure:100963: checking for XMLRPC-EPI support" >&5
+# Check whether --with-xmlrpc or --without-xmlrpc was given.
+if test "${with_xmlrpc+set}" = set; then
+  withval="$with_xmlrpc"
+  PHP_XMLRPC=$withval
 else
   
-  PHP_SYSVSEM=no
-  test "$PHP_ENABLE_ALL" && PHP_SYSVSEM=$PHP_ENABLE_ALL
+  PHP_XMLRPC=no
+  test "$PHP_ENABLE_ALL" && PHP_XMLRPC=$PHP_ENABLE_ALL
+
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_XMLRPC in
+shared,*)
+  PHP_XMLRPC=`echo "$PHP_XMLRPC"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_XMLRPC=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test -z "$PHP_LIBXML_DIR"; then
+  
+php_with_libxml_dir=no
+
+echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
+echo "configure:101008: checking libxml2 install dir" >&5
+# Check whether --with-libxml-dir or --without-libxml-dir was given.
+if test "${with_libxml_dir+set}" = set; then
+  withval="$with_libxml_dir"
+  PHP_LIBXML_DIR=$withval
+else
+  
+  PHP_LIBXML_DIR=no
+  
+
+fi
+
+
+ext_output=$PHP_LIBXML_DIR
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+fi
+
+
+php_with_libexpat_dir=no
+
+echo $ac_n "checking libexpat dir for XMLRPC-EPI""... $ac_c" 1>&6
+echo "configure:101032: checking libexpat dir for XMLRPC-EPI" >&5
+# Check whether --with-libexpat-dir or --without-libexpat-dir was given.
+if test "${with_libexpat_dir+set}" = set; then
+  withval="$with_libexpat_dir"
+  PHP_LIBEXPAT_DIR=$withval
+else
+  
+  PHP_LIBEXPAT_DIR=no
+  
+
+fi
+
+
+ext_output=$PHP_LIBEXPAT_DIR
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+
+php_with_iconv_dir=no
+
+echo $ac_n "checking iconv dir for XMLRPC-EPI""... $ac_c" 1>&6
+echo "configure:101055: checking iconv dir for XMLRPC-EPI" >&5
+# Check whether --with-iconv-dir or --without-iconv-dir was given.
+if test "${with_iconv_dir+set}" = set; then
+  withval="$with_iconv_dir"
+  PHP_ICONV_DIR=$withval
+else
+  
+  PHP_ICONV_DIR=no
+  
+
+fi
+
+
+ext_output=$PHP_ICONV_DIR
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_XMLRPC" != "no"; then
+
+  
+  am_i_shared=$PHP_XMLRPC_SHARED
+  is_it_shared=$PHP_LIBXML_SHARED
+  is_it_enabled=$PHP_LIBXML
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension xmlrpc to build statically, but it
+depends on extension libxml, which you've configured to build shared.
+You either need to build xmlrpc shared or build libxml statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension xmlrpc, which depends on extension libxml,
+but you've either not enabled libxml, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLRPC_SHARED_LIBADD"
+
+  cat >> confdefs.h <<\EOF
+#define HAVE_XMLRPC 1
+EOF
+
+
+        if test "$PHP_LIBEXPAT_DIR" = "no"; then
+
+    if test "$PHP_LIBXML" = "no"; then
+      { echo "configure: error: XML-RPC extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
+    fi
+
+    
+echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
+echo "configure:101111: checking for xml2-config path" >&5
+if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+  for i in $PHP_LIBXML_DIR /usr/local /usr; do
+    if test -x "$i/bin/xml2-config"; then
+      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
+      break
+    fi
+  done
+
+fi
+
+echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6
+
+  if test -x "$ac_cv_php_xml2_config_path"; then
+    XML2_CONFIG="$ac_cv_php_xml2_config_path"
+    libxml_full_version=`$XML2_CONFIG --version`
+    ac_IFS=$IFS
+    IFS="."
+    set $libxml_full_version
+    IFS=$ac_IFS
+    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
+    if test "$LIBXML_VERSION" -ge "2006011"; then
+      LIBXML_LIBS=`$XML2_CONFIG --libs`
+      LIBXML_INCS=`$XML2_CONFIG --cflags`
+      
+  for ac_i in $LIBXML_LIBS; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        XMLRPC_SHARED_LIBADD="$XMLRPC_SHARED_LIBADD -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        XMLRPC_SHARED_LIBADD="$XMLRPC_SHARED_LIBADD -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        XMLRPC_SHARED_LIBADD="-L$ai_p $XMLRPC_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLRPC_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+      
+  for ac_i in $LIBXML_INCS; do
+    case $ac_i in
+    -I*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/include"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+    ;;
+    esac
+  done
+
+
+            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
+echo "configure:101269: checking whether libxml build works" >&5
+if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+        
+  old_LIBS=$LIBS
+  LIBS="
+          $XMLRPC_SHARED_LIBADD
+         $LIBS"
+  if test "$cross_compiling" = yes; then
+  
+    LIBS=$old_LIBS
+  
+else
+  cat > conftest.$ac_ext <<EOF
+#line 101285 "configure"
+#include "confdefs.h"
 
+    
+    char xmlInitParser();
+    int main() {
+      xmlInitParser();
+      return 0;
+    }
+  
+EOF
+if { (eval echo configure:101296: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+    LIBS=$old_LIBS
+    
+          php_cv_libxml_build_works=yes
+        
+  
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  
+    LIBS=$old_LIBS
+    
+          echo "$ac_t""no" 1>&6
+          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
+        
+  
+fi
+rm -fr conftest*
 fi
 
 
+      
+fi
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_SYSVSEM in
-shared,*)
-  PHP_SYSVSEM=`echo "$PHP_SYSVSEM"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_SYSVSEM=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test "$PHP_SYSVSEM" != "no"; then
- 
-  ext_builddir=ext/sysvsem
-  ext_srcdir=$abs_srcdir/ext/sysvsem
-
-  ac_extra=
+echo "$ac_t""$php_cv_libxml_build_works" 1>&6
+      if test "$php_cv_libxml_build_works" = "yes"; then
+        cat >> confdefs.h <<\EOF
+#define HAVE_LIBXML 1
+EOF
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_SYSVSEM_SHARED=no
-    
+      fi
+      
+      if test "$PHP_XML" = "no"; then
+        
   
-  case ext/sysvsem in
+  case ext/xml in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -94969,7 +101348,7 @@ if test "$PHP_SYSVSEM" != "no"; then
 
 
   old_IFS=$IFS
-  for ac_src in sysvsem.c; do
+  for ac_src in compat.c; do
   
       IFS=.
       set $ac_src
@@ -94979,10 +101358,10 @@ if test "$PHP_SYSVSEM" != "no"; then
       PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
       case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
       esac
 
     cat >>Makefile.objects<<EOF
@@ -94992,734 +101371,678 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC sysvsem"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC sysvsem"
+        
+  
+    BUILD_DIR="$BUILD_DIR ext/xml"
+  
+
+      fi
+    
+    else
+      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
     fi
+else 
+      { echo "configure: error: xml2-config not found. Use --with-libxml-dir=<DIR>" 1>&2; exit 1; }
+    
+  fi
+
   else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_SYSVSEM_SHARED=yes
+    testval=no
+    for i in $PHP_LIBEXPAT_DIR $XMLRPC_DIR /usr/local /usr; do
+      if test -f $i/$PHP_LIBDIR/libexpat.a || test -f $i/$PHP_LIBDIR/libexpat.$SHLIB_SUFFIX_NAME; then
+        cat >> confdefs.h <<\EOF
+#define HAVE_LIBEXPAT 1
+EOF
+
+        
+
+  if test "$ext_shared" = "yes"; then
+    XMLRPC_SHARED_LIBADD="-lexpat $XMLRPC_SHARED_LIBADD"
+    if test -n "$i/$PHP_LIBDIR"; then
       
-  case ext/sysvsem in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+  if test "$i/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$i/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$i/$PHP_LIBDIR" || echo "$i/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$i/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $i/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$i/$PHP_LIBDIR\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        XMLRPC_SHARED_LIBADD="-L$ai_p $XMLRPC_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLRPC_SHARED_LIBADD"
+      else
+        
   
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
 
+      fi
+    
+  fi
 
-  old_IFS=$IFS
-  for ac_src in sysvsem.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_sysvsem="$shared_objects_sysvsem $ac_bdir$ac_obj.lo"
+    fi
+  else
+    
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+  if test -n "$i/$PHP_LIBDIR"; then
+    
+  if test "$i/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$i/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$i/$PHP_LIBDIR" || echo "$i/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$i/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $i/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$i/$PHP_LIBDIR\"`"
+  fi
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+    
+      
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsysvsem.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) $(PHPSYSVSEM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsysvsem.so '$ext_builddir'/phpsysvsem.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSYSVSEM, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) $(PHPSYSVSEM_SHARED_LIBADD)'
-      ;;
-  esac
+    
+  fi
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsysvsem.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsysvsem.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvsem"
+  
+  case expat in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lexpat $LIBS" 
+   ;;
+  esac
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpsysvsem.$suffix: $ext_builddir/phpsysvsem.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsysvsem.$suffix \$(phplibdir)
 
-$ext_builddir/phpsysvsem.$suffix: \$(shared_objects_sysvsem) \$(PHPSYSVSEM_SHARED_DEPENDENCIES)
-	$link_cmd
 
-EOF
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
+  fi
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sysvsem.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) $(SYSVSEM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sysvsem.so '$ext_builddir'/sysvsem.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SYSVSEM, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) $(SYSVSEM_SHARED_LIBADD)'
-      ;;
-  esac
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sysvsem.$suffix"
+        
+  if test "$i/include" != "/usr/include"; then
+    
+  if test -z "$i/include" || echo "$i/include" | grep '^/' >/dev/null ; then
+    ai_p=$i/include
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sysvsem.$suffix"
+    
+    ep_dir="`echo $i/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$i/include\"`"
   fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvsem"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/sysvsem.$suffix: $ext_builddir/sysvsem.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/sysvsem.$suffix \$(phplibdir)
 
-$ext_builddir/sysvsem.$suffix: \$(shared_objects_sysvsem) \$(SYSVSEM_SHARED_DEPENDENCIES)
-	$link_cmd
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-EOF
+  fi
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_SYSVSEM 1
-EOF
+        testval=yes
+        break
+      fi
+    done
 
+    if test "$testval" = "no"; then
+      { echo "configure: error: XML-RPC support requires libexpat. Use --with-libexpat-dir=<DIR> (deprecated!)" 1>&2; exit 1; }
     fi
   fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_SYSVSEM_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
+    if test "$PHP_ICONV_SHARED" = "yes" || test "$PHP_ICONV" = "no"; then
+
+    if test "$PHP_ICONV_DIR" != "no"; then
+      PHP_ICONV=$PHP_ICONV_DIR
+    fi
   
-  case ext/sysvsem in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+    if test -z "$PHP_ICONV" || test "$PHP_ICONV" = "no"; then
+      PHP_ICONV=yes
+    fi
   
+    
+  found_iconv=no
+  unset ICONV_DIR
+
+  # Create the directories for a VPATH build:
+  $php_shtool mkdir -p ext/iconv
+
+  echo > ext/iconv/php_have_bsd_iconv.h
+  echo > ext/iconv/php_have_ibm_iconv.h
+  echo > ext/iconv/php_have_glibc_iconv.h
+  echo > ext/iconv/php_have_libiconv.h
+  echo > ext/iconv/php_have_iconv.h
+  echo > ext/iconv/php_php_iconv_impl.h
+  echo > ext/iconv/php_iconv_aliased_libiconv.h
+  echo > ext/iconv/php_php_iconv_h_path.h
+  echo > ext/iconv/php_iconv_supports_errno.h
+
+        if test "$PHP_ICONV" = "yes"; then
+    echo $ac_n "checking for iconv""... $ac_c" 1>&6
+echo "configure:101565: checking for iconv" >&5
+if eval "test \"`echo '$''{'ac_cv_func_iconv'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 101570 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char iconv(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char iconv();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_iconv) || defined (__stub___iconv)
+choke me
+#else
+iconv();
+#endif
+
+; return 0; }
+EOF
+if { (eval echo configure:101593: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_iconv=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_iconv=no"
+fi
+rm -f conftest*
+fi
+
+if eval "test \"`echo '$ac_cv_func_'iconv`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
   
+      found_iconv=yes
+    
+else
+  echo "$ac_t""no" 1>&6
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+      echo $ac_n "checking for libiconv""... $ac_c" 1>&6
+echo "configure:101614: checking for libiconv" >&5
+if eval "test \"`echo '$''{'ac_cv_func_libiconv'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 101619 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char libiconv(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char libiconv();
 
+int main() {
 
-  old_IFS=$IFS
-  for ac_src in sysvsem.c; do
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_libiconv) || defined (__stub___libiconv)
+choke me
+#else
+libiconv();
+#endif
+
+; return 0; }
+EOF
+if { (eval echo configure:101642: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_libiconv=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_libiconv=no"
+fi
+rm -f conftest*
+fi
+
+if eval "test \"`echo '$ac_cv_func_'libiconv`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+        
+  echo "#define HAVE_LIBICONV 1" > ext/iconv/php_have_libiconv.h
+
+        cat >> confdefs.h <<\EOF
+#define HAVE_LIBICONV 1
+EOF
+
+        found_iconv=yes
       
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+else
+  echo "$ac_t""no" 1>&6
+fi
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+    
+fi
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+  fi
+
+        if test "$found_iconv" = "no"; then
+
+    for i in $PHP_ICONV /usr/local /usr; do
+      if test -r $i/include/giconv.h; then
+        cat >> confdefs.h <<\EOF
+#define HAVE_GICONV_H 1
 EOF
-  done
 
+        ICONV_DIR=$i
+        iconv_lib_name=giconv
+        break
+      elif test -r $i/include/iconv.h; then
+        ICONV_DIR=$i
+        iconv_lib_name=iconv
+        break
+      fi
+    done
 
-        EXT_STATIC="$EXT_STATIC sysvsem"
-        ;;
-      *)
-        
+    if test -z "$ICONV_DIR"; then
+      { echo "configure: error: Please specify the install prefix of iconv with --with-iconv=<DIR>" 1>&2; exit 1; }
+    fi
   
-  case ext/sysvsem in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+    if test -f $ICONV_DIR/$PHP_LIBDIR/lib$iconv_lib_name.a ||
+       test -f $ICONV_DIR/$PHP_LIBDIR/lib$iconv_lib_name.$SHLIB_SUFFIX_NAME
+    then
+      
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+        -L$ICONV_DIR/$PHP_LIBDIR
+      "
   
+  save_ext_shared=$ext_shared
+  ext_shared=yes
   
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in sysvsem.c; do
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
       
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+    fi
+   ;;
+  esac
 
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC sysvsem"
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
   
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
+  fi
 
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=sysvsem
+      fi
     
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
-
   fi
 
- cat >> confdefs.h <<\EOF
-#define HAVE_SYSVSEM 1
-EOF
+    ;;
+    esac
+  done
 
- echo $ac_n "checking for union semun""... $ac_c" 1>&6
-echo "configure:95242: checking for union semun" >&5
-if eval "test \"`echo '$''{'php_cv_semun'+set}'`\" = set"; then
+  echo $ac_n "checking for libiconv in -l$iconv_lib_name""... $ac_c" 1>&6
+echo "configure:101798: checking for libiconv in -l$iconv_lib_name" >&5
+ac_lib_var=`echo $iconv_lib_name'_'libiconv | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 95247 "configure"
+  ac_save_LIBS="$LIBS"
+LIBS="-l$iconv_lib_name  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 101806 "configure"
 #include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char libiconv();
 
-#include <sys/types.h>
-#include <sys/ipc.h>
-#include <sys/sem.h>
-   
 int main() {
-union semun x;
+libiconv()
 ; return 0; }
 EOF
-if { (eval echo configure:95258: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:101817: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  
-     php_cv_semun=yes
-   
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  
-     php_cv_semun=no
-   
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
 rm -f conftest*
- 
-fi
-
-echo "$ac_t""$php_cv_semun" 1>&6
- if test "$php_cv_semun" = "yes"; then
-   cat >> confdefs.h <<\EOF
-#define HAVE_SEMUN 1
-EOF
-
- else
-   cat >> confdefs.h <<\EOF
-#define HAVE_SEMUN 0
-EOF
+LIBS="$ac_save_LIBS"
 
- fi
 fi
-
-
-
-php_enable_sysvshm=no
-
-echo $ac_n "checking whether to enable System V shared memory support""... $ac_c" 1>&6
-echo "configure:95294: checking whether to enable System V shared memory support" >&5
-# Check whether --enable-sysvshm or --disable-sysvshm was given.
-if test "${enable_sysvshm+set}" = set; then
-  enableval="$enable_sysvshm"
-  PHP_SYSVSHM=$enableval
-else
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
   
-  PHP_SYSVSHM=no
-  test "$PHP_ENABLE_ALL" && PHP_SYSVSHM=$PHP_ENABLE_ALL
-
-fi
-
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_SYSVSHM in
-shared,*)
-  PHP_SYSVSHM=`echo "$PHP_SYSVSHM"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_SYSVSHM=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
-
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+        found_iconv=yes
+        
+  echo "#define HAVE_LIBICONV 1" > ext/iconv/php_have_libiconv.h
 
+        cat >> confdefs.h <<\EOF
+#define HAVE_LIBICONV 1
+EOF
 
+        
+  echo "#define ICONV_ALIASED_LIBICONV 1" > ext/iconv/php_iconv_aliased_libiconv.h
 
-if test "$PHP_SYSVSHM" != "no"; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_SYSVSHM 1
+        cat >> confdefs.h <<\EOF
+#define ICONV_ALIASED_LIBICONV 1
 EOF
 
+      
   
-  ext_builddir=ext/sysvshm
-  ext_srcdir=$abs_srcdir/ext/sysvshm
-
-  ac_extra=
+else
+  echo "$ac_t""no" 1>&6
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_SYSVSHM_SHARED=no
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_$iconv_lib_name_libiconv
     
+        
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+          -L$ICONV_DIR/$PHP_LIBDIR
+        "
   
-  case ext/sysvshm in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+  save_ext_shared=$ext_shared
+  ext_shared=yes
   
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
   
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in sysvshm.c; do
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-    EXT_STATIC="$EXT_STATIC sysvshm"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC sysvshm"
-    fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_SYSVSHM_SHARED=yes
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
       
-  case ext/sysvshm in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
   
-
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
-
-
-  old_IFS=$IFS
-  for ac_src in sysvshm.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
       
-      shared_objects_sysvshm="$shared_objects_sysvshm $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsysvshm.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) $(PHPSYSVSHM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsysvshm.so '$ext_builddir'/phpsysvshm.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSYSVSHM, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) $(PHPSYSVSHM_SHARED_LIBADD)'
-      ;;
-  esac
-
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsysvshm.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsysvshm.$suffix"
-  fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvshm"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpsysvshm.$suffix: $ext_builddir/phpsysvshm.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsysvshm.$suffix \$(phplibdir)
-
-$ext_builddir/phpsysvshm.$suffix: \$(shared_objects_sysvshm) \$(PHPSYSVSHM_SHARED_DEPENDENCIES)
-	$link_cmd
-
-EOF
-
-          ;;
-        *)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sysvshm.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) $(SYSVSHM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sysvshm.so '$ext_builddir'/sysvshm.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SYSVSHM, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) $(SYSVSHM_SHARED_LIBADD)'
-      ;;
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
   esac
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sysvshm.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sysvshm.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvshm"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/sysvshm.$suffix: $ext_builddir/sysvshm.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/sysvshm.$suffix \$(phplibdir)
-
-$ext_builddir/sysvshm.$suffix: \$(shared_objects_sysvshm) \$(SYSVSHM_SHARED_DEPENDENCIES)
-	$link_cmd
-
-EOF
-
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_SYSVSHM 1
-EOF
 
     fi
-  fi
-
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_SYSVSHM_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
-  
-  case ext/sysvshm in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+   ;;
   esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
 
 
-  old_IFS=$IFS
-  for ac_src in sysvshm.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
       
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
 
-        EXT_STATIC="$EXT_STATIC sysvshm"
-        ;;
-      *)
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
         
   
-  case ext/sysvshm in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in sysvshm.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC sysvshm"
-  fi
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
+  fi
 
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=sysvshm
+      fi
     
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
-
   fi
 
-fi
-
-
-
-php_with_tidy=no
+    ;;
+    esac
+  done
 
-echo $ac_n "checking for TIDY support""... $ac_c" 1>&6
-echo "configure:95638: checking for TIDY support" >&5
-# Check whether --with-tidy or --without-tidy was given.
-if test "${with_tidy+set}" = set; then
-  withval="$with_tidy"
-  PHP_TIDY=$withval
+  echo $ac_n "checking for iconv in -l$iconv_lib_name""... $ac_c" 1>&6
+echo "configure:101958: checking for iconv in -l$iconv_lib_name" >&5
+ac_lib_var=`echo $iconv_lib_name'_'iconv | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
-  
-  PHP_TIDY=no
-  test "$PHP_ENABLE_ALL" && PHP_TIDY=$PHP_ENABLE_ALL
+  ac_save_LIBS="$LIBS"
+LIBS="-l$iconv_lib_name  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 101966 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char iconv();
 
+int main() {
+iconv()
+; return 0; }
+EOF
+if { (eval echo configure:101977: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+          found_iconv=yes
+        
+  
+else
+  echo "$ac_t""no" 1>&6
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_$iconv_lib_name_iconv
+    
+  
+fi
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_TIDY in
-shared,*)
-  PHP_TIDY=`echo "$PHP_TIDY"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_TIDY=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test "$PHP_TIDY" != "no"; then
-
-  if test "$PHP_TIDY" != "yes"; then
-    TIDY_SEARCH_DIRS=$PHP_TIDY
-  else
-    TIDY_SEARCH_DIRS="/usr/local /usr"
-  fi
+      
+  
+fi
 
-  for i in $TIDY_SEARCH_DIRS; do
-    if test -f $i/include/tidy/tidy.h; then
-      TIDY_DIR=$i
-      TIDY_INCDIR=$i/include/tidy
-    elif test -f $i/include/tidy.h; then
-      TIDY_DIR=$i
-      TIDY_INCDIR=$i/include
     fi
-  done
-
-  if test -z "$TIDY_DIR"; then
-    { echo "configure: error: Cannot find libtidy" 1>&2; exit 1; }
   fi
 
-  TIDY_LIBDIR=$TIDY_DIR/$PHP_LIBDIR
+  if test "$found_iconv" = "yes"; then
+    
+  echo "#define HAVE_ICONV 1" > ext/iconv/php_have_iconv.h
 
-  
+    cat >> confdefs.h <<\EOF
+#define HAVE_ICONV 1
+EOF
+
+    if test -n "$ICONV_DIR"; then
+      
 
   if test "$ext_shared" = "yes"; then
-    TIDY_SHARED_LIBADD="-ltidy $TIDY_SHARED_LIBADD"
-    if test -n "$TIDY_LIBDIR"; then
+    XMLRPC_SHARED_LIBADD="-l$iconv_lib_name $XMLRPC_SHARED_LIBADD"
+    if test -n "$ICONV_DIR/$PHP_LIBDIR"; then
       
-  if test "$TIDY_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$TIDY_LIBDIR" != "/usr/lib"; then
+  if test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$TIDY_LIBDIR" || echo "$TIDY_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$TIDY_LIBDIR
+  if test -z "$ICONV_DIR/$PHP_LIBDIR" || echo "$ICONV_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$ICONV_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $TIDY_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $ICONV_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$TIDY_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$ICONV_DIR/$PHP_LIBDIR\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        TIDY_SHARED_LIBADD="-L$ai_p $TIDY_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && TIDY_SHARED_LIBADD="$ld_runpath_switch$ai_p $TIDY_SHARED_LIBADD"
+        XMLRPC_SHARED_LIBADD="-L$ai_p $XMLRPC_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLRPC_SHARED_LIBADD"
       else
         
   
@@ -95745,18 +102068,18 @@ if test "$PHP_TIDY" != "no"; then
   else
     
 
-  if test -n "$TIDY_LIBDIR"; then
+  if test -n "$ICONV_DIR/$PHP_LIBDIR"; then
     
-  if test "$TIDY_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$TIDY_LIBDIR" != "/usr/lib"; then
+  if test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$TIDY_LIBDIR" || echo "$TIDY_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$TIDY_LIBDIR
+  if test -z "$ICONV_DIR/$PHP_LIBDIR" || echo "$ICONV_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$ICONV_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $TIDY_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $ICONV_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$TIDY_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$ICONV_DIR/$PHP_LIBDIR\"`"
   fi
 
     
@@ -95776,223 +102099,642 @@ if test "$PHP_TIDY" != "no"; then
   fi
 
 
-    
-  fi
+    
+  fi
+
+  fi
+  
+  
+  case $iconv_lib_name in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-l$iconv_lib_name $LIBS" 
+   ;;
+  esac
+
+
+
+
+  fi
+
+
+      
+  if test "$ICONV_DIR/include" != "/usr/include"; then
+    
+  if test -z "$ICONV_DIR/include" || echo "$ICONV_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$ICONV_DIR/include
+  else
+    
+    ep_dir="`echo $ICONV_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ICONV_DIR/include\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+    fi
+    
+else 
+      { echo "configure: error: iconv not found, in order to build xmlrpc you need the iconv library" 1>&2; exit 1; }
+    
+  fi
+
+  fi
+fi
+
+if test "$PHP_XMLRPC" = "yes"; then
+  # Extract the first word of "ranlib", so it can be a program name with args.
+set dummy ranlib; ac_word=$2
+echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
+echo "configure:102167: checking for $ac_word" >&5
+if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test -n "$RANLIB"; then
+  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
+else
+  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
+  ac_dummy="$PATH"
+  for ac_dir in $ac_dummy; do
+    test -z "$ac_dir" && ac_dir=.
+    if test -f $ac_dir/$ac_word; then
+      ac_cv_prog_RANLIB="ranlib"
+      break
+    fi
+  done
+  IFS="$ac_save_ifs"
+  test -z "$ac_cv_prog_RANLIB" && ac_cv_prog_RANLIB=":"
+fi
+fi
+RANLIB="$ac_cv_prog_RANLIB"
+if test -n "$RANLIB"; then
+  echo "$ac_t""$RANLIB" 1>&6
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+echo $ac_n "checking for inline""... $ac_c" 1>&6
+echo "configure:102195: checking for inline" >&5
+if eval "test \"`echo '$''{'ac_cv_c_inline'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_cv_c_inline=no
+for ac_kw in inline __inline__ __inline; do
+  cat > conftest.$ac_ext <<EOF
+#line 102202 "configure"
+#include "confdefs.h"
+
+int main() {
+} $ac_kw foo() {
+; return 0; }
+EOF
+if { (eval echo configure:102209: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
+  ac_cv_c_inline=$ac_kw; break
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+fi
+rm -f conftest*
+done
+
+fi
+
+echo "$ac_t""$ac_cv_c_inline" 1>&6
+case "$ac_cv_c_inline" in
+  inline | yes) ;;
+  no) cat >> confdefs.h <<\EOF
+#define inline 
+EOF
+ ;;
+  *)  cat >> confdefs.h <<EOF
+#define inline $ac_cv_c_inline
+EOF
+ ;;
+esac
+
+	
+
+
+
+
+
+cat >> confdefs.h <<\EOF
+#define UNDEF_THREADS_HACK 
+EOF
+
+
+
+echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
+echo "configure:102247: checking for ANSI C header files" >&5
+if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 102252 "configure"
+#include "confdefs.h"
+#include <stdlib.h>
+#include <stdarg.h>
+#include <string.h>
+#include <float.h>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:102260: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  ac_cv_header_stdc=yes
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  ac_cv_header_stdc=no
+fi
+rm -f conftest*
+
+if test $ac_cv_header_stdc = yes; then
+  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
+cat > conftest.$ac_ext <<EOF
+#line 102277 "configure"
+#include "confdefs.h"
+#include <string.h>
+EOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "memchr" >/dev/null 2>&1; then
+  :
+else
+  rm -rf conftest*
+  ac_cv_header_stdc=no
+fi
+rm -f conftest*
+
+fi
+
+if test $ac_cv_header_stdc = yes; then
+  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
+cat > conftest.$ac_ext <<EOF
+#line 102295 "configure"
+#include "confdefs.h"
+#include <stdlib.h>
+EOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "free" >/dev/null 2>&1; then
+  :
+else
+  rm -rf conftest*
+  ac_cv_header_stdc=no
+fi
+rm -f conftest*
+
+fi
+
+if test $ac_cv_header_stdc = yes; then
+  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
+if test "$cross_compiling" = yes; then
+  :
+else
+  cat > conftest.$ac_ext <<EOF
+#line 102316 "configure"
+#include "confdefs.h"
+#include <ctype.h>
+#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
+#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
+#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
+int main () { int i; for (i = 0; i < 256; i++)
+if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
+exit (0); }
+
+EOF
+if { (eval echo configure:102327: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  :
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_header_stdc=no
+fi
+rm -fr conftest*
+fi
+
+fi
+fi
+
+echo "$ac_t""$ac_cv_header_stdc" 1>&6
+if test $ac_cv_header_stdc = yes; then
+  cat >> confdefs.h <<\EOF
+#define STDC_HEADERS 1
+EOF
+
+fi
+
+for ac_hdr in xmlparse.h xmltok.h stdlib.h strings.h string.h
+do
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:102354: checking for $ac_hdr" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 102359 "configure"
+#include "confdefs.h"
+#include <$ac_hdr>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:102364: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_hdr 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
+
+
+
+
+
+echo $ac_n "checking size of char""... $ac_c" 1>&6
+echo "configure:102396: checking size of char" >&5
+if eval "test \"`echo '$''{'ac_cv_sizeof_char'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_sizeof_char=1
+else
+  cat > conftest.$ac_ext <<EOF
+#line 102404 "configure"
+#include "confdefs.h"
+#include <stdio.h>
+#include <sys/types.h>
+main()
+{
+  FILE *f=fopen("conftestval", "w");
+  if (!f) exit(1);
+  fprintf(f, "%d\n", sizeof(char));
+  exit(0);
+}
+EOF
+if { (eval echo configure:102416: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_sizeof_char=`cat conftestval`
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_sizeof_char=0
+fi
+rm -fr conftest*
+fi
+
+fi
+echo "$ac_t""$ac_cv_sizeof_char" 1>&6
+cat >> confdefs.h <<EOF
+#define SIZEOF_CHAR $ac_cv_sizeof_char
+EOF
+
+
+
+echo $ac_n "checking size of int""... $ac_c" 1>&6
+echo "configure:102437: checking size of int" >&5
+if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_sizeof_int=4
+else
+  cat > conftest.$ac_ext <<EOF
+#line 102445 "configure"
+#include "confdefs.h"
+#include <stdio.h>
+#include <sys/types.h>
+main()
+{
+  FILE *f=fopen("conftestval", "w");
+  if (!f) exit(1);
+  fprintf(f, "%d\n", sizeof(int));
+  exit(0);
+}
+EOF
+if { (eval echo configure:102457: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_sizeof_int=`cat conftestval`
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_sizeof_int=0
+fi
+rm -fr conftest*
+fi
+
+fi
+echo "$ac_t""$ac_cv_sizeof_int" 1>&6
+cat >> confdefs.h <<EOF
+#define SIZEOF_INT $ac_cv_sizeof_int
+EOF
+
+
+echo $ac_n "checking size of long""... $ac_c" 1>&6
+echo "configure:102477: checking size of long" >&5
+if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_sizeof_long=4
+else
+  cat > conftest.$ac_ext <<EOF
+#line 102485 "configure"
+#include "confdefs.h"
+#include <stdio.h>
+#include <sys/types.h>
+main()
+{
+  FILE *f=fopen("conftestval", "w");
+  if (!f) exit(1);
+  fprintf(f, "%d\n", sizeof(long));
+  exit(0);
+}
+EOF
+if { (eval echo configure:102497: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_sizeof_long=`cat conftestval`
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_sizeof_long=0
+fi
+rm -fr conftest*
+fi
+
+fi
+echo "$ac_t""$ac_cv_sizeof_long" 1>&6
+cat >> confdefs.h <<EOF
+#define SIZEOF_LONG $ac_cv_sizeof_long
+EOF
 
-  fi
-  
-  
-  case tidy in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-ltidy $LIBS" 
-   ;;
-  esac
 
+echo $ac_n "checking size of long long""... $ac_c" 1>&6
+echo "configure:102517: checking size of long long" >&5
+if eval "test \"`echo '$''{'ac_cv_sizeof_long_long'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_sizeof_long_long=8
+else
+  cat > conftest.$ac_ext <<EOF
+#line 102525 "configure"
+#include "confdefs.h"
+#include <stdio.h>
+#include <sys/types.h>
+main()
+{
+  FILE *f=fopen("conftestval", "w");
+  if (!f) exit(1);
+  fprintf(f, "%d\n", sizeof(long long));
+  exit(0);
+}
+EOF
+if { (eval echo configure:102537: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_sizeof_long_long=`cat conftestval`
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_sizeof_long_long=0
+fi
+rm -fr conftest*
+fi
 
+fi
+echo "$ac_t""$ac_cv_sizeof_long_long" 1>&6
+cat >> confdefs.h <<EOF
+#define SIZEOF_LONG_LONG $ac_cv_sizeof_long_long
+EOF
 
 
-  fi
+echo $ac_n "checking for size_t""... $ac_c" 1>&6
+echo "configure:102557: checking for size_t" >&5
+if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 102562 "configure"
+#include "confdefs.h"
+#include <sys/types.h>
+#if STDC_HEADERS
+#include <stdlib.h>
+#include <stddef.h>
+#endif
+EOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "(^|[^a-zA-Z_0-9])size_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
+  rm -rf conftest*
+  ac_cv_type_size_t=yes
+else
+  rm -rf conftest*
+  ac_cv_type_size_t=no
+fi
+rm -f conftest*
 
+fi
+echo "$ac_t""$ac_cv_type_size_t" 1>&6
+if test $ac_cv_type_size_t = no; then
+  cat >> confdefs.h <<\EOF
+#define size_t unsigned
+EOF
 
-  
-  if test "$TIDY_INCDIR" != "/usr/include"; then
-    
-  if test -z "$TIDY_INCDIR" || echo "$TIDY_INCDIR" | grep '^/' >/dev/null ; then
-    ai_p=$TIDY_INCDIR
-  else
-    
-    ep_dir="`echo $TIDY_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$TIDY_INCDIR\"`"
-  fi
+fi
 
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
+echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
+echo "configure:102590: checking whether time.h and sys/time.h may both be included" >&5
+if eval "test \"`echo '$''{'ac_cv_header_time'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 102595 "configure"
+#include "confdefs.h"
+#include <sys/types.h>
+#include <sys/time.h>
+#include <time.h>
+int main() {
+struct tm *tp;
+; return 0; }
+EOF
+if { (eval echo configure:102604: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
+  ac_cv_header_time=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  ac_cv_header_time=no
+fi
+rm -f conftest*
+fi
 
-  fi
+echo "$ac_t""$ac_cv_header_time" 1>&6
+if test $ac_cv_header_time = yes; then
+  cat >> confdefs.h <<\EOF
+#define TIME_WITH_SYS_TIME 1
+EOF
 
+fi
 
-  
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff=""
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
+echo $ac_n "checking for uid_t in sys/types.h""... $ac_c" 1>&6
+echo "configure:102625: checking for uid_t in sys/types.h" >&5
+if eval "test \"`echo '$''{'ac_cv_type_uid_t'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 102630 "configure"
+#include "confdefs.h"
+#include <sys/types.h>
+EOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "uid_t" >/dev/null 2>&1; then
+  rm -rf conftest*
+  ac_cv_type_uid_t=yes
+else
+  rm -rf conftest*
+  ac_cv_type_uid_t=no
+fi
+rm -f conftest*
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
+fi
 
+echo "$ac_t""$ac_cv_type_uid_t" 1>&6
+if test $ac_cv_type_uid_t = no; then
+  cat >> confdefs.h <<\EOF
+#define uid_t int
+EOF
 
-    fi
-   ;;
-  esac
+  cat >> confdefs.h <<\EOF
+#define gid_t int
+EOF
 
+fi
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
 
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
 
 
-      fi
-    
-  fi
 
-    ;;
-    esac
-  done
 
-  echo $ac_n "checking for tidyOptGetDoc in -ltidy""... $ac_c" 1>&6
-echo "configure:95927: checking for tidyOptGetDoc in -ltidy" >&5
-ac_lib_var=`echo tidy'_'tidyOptGetDoc | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+# Standard XMLRPC list
+for ac_func in \
+ strtoul strtoull snprintf \
+ strstr strpbrk strerror\
+ memcpy memmove
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:102670: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  ac_save_LIBS="$LIBS"
-LIBS="-ltidy  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 95935 "configure"
+  cat > conftest.$ac_ext <<EOF
+#line 102675 "configure"
 #include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char tidyOptGetDoc();
+char $ac_func();
 
 int main() {
-tidyOptGetDoc()
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
+
 ; return 0; }
 EOF
-if { (eval echo configure:95946: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:102698: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+  eval "ac_cv_func_$ac_func=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
+  eval "ac_cv_func_$ac_func=no"
 fi
 rm -f conftest*
-LIBS="$ac_save_LIBS"
-
 fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-  cat >> confdefs.h <<\EOF
-#define HAVE_TIDYOPTGETDOC 1
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
 EOF
-
-  
-  
+ 
 else
   echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_tidy_tidyOptGetDoc
-    
-  
 fi
+done
+
 
 
 
   
-  ext_builddir=ext/tidy
-  ext_srcdir=$abs_srcdir/ext/tidy
+  ext_builddir=ext/xmlrpc
+  ext_srcdir=$abs_srcdir/ext/xmlrpc
 
-  ac_extra=
+  ac_extra=`echo "-I@ext_srcdir@/libxmlrpc -DVERSION="0.50""|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_TIDY_SHARED=no
+    PHP_XMLRPC_SHARED=no
     
   
-  case ext/tidy in
+  case ext/xmlrpc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/tidy"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/tidy/"; ac_bdir="ext/tidy/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -96007,7 +102749,12 @@ fi
 
 
   old_IFS=$IFS
-  for ac_src in tidy.c; do
+  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
+          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
+          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
+          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
+          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
+          libxmlrpc/xml_to_soap.c; do
   
       IFS=.
       set $ac_src
@@ -96030,18 +102777,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC tidy"
+    EXT_STATIC="$EXT_STATIC xmlrpc"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC tidy"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_TIDY_SHARED=yes
+      PHP_XMLRPC_SHARED=yes
       
-  case ext/tidy in
+  case ext/xmlrpc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/tidy"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/tidy/"; ac_bdir="ext/tidy/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -96056,14 +102803,19 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in tidy.c; do
+  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
+          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
+          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
+          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
+          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
+          libxmlrpc/xml_to_soap.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_tidy="$shared_objects_tidy $ac_bdir$ac_obj.lo"
+      shared_objects_xmlrpc="$shared_objects_xmlrpc $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -96086,31 +102838,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phptidy.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) $(PHPTIDY_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phptidy.so '$ext_builddir'/phptidy.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxmlrpc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(PHPXMLRPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxmlrpc.so '$ext_builddir'/phpxmlrpc.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPTIDY, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXMLRPC, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) $(PHPTIDY_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(PHPXMLRPC_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phptidy.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxmlrpc.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phptidy.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxmlrpc.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tidy"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phptidy.$suffix: $ext_builddir/phptidy.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phptidy.$suffix \$(phplibdir)
+\$(phplibdir)/phpxmlrpc.$suffix: $ext_builddir/phpxmlrpc.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxmlrpc.$suffix \$(phplibdir)
 
-$ext_builddir/phptidy.$suffix: \$(shared_objects_tidy) \$(PHPTIDY_SHARED_DEPENDENCIES)
+$ext_builddir/phpxmlrpc.$suffix: \$(shared_objects_xmlrpc) \$(PHPXMLRPC_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -96123,31 +102875,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/tidy.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) $(TIDY_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/tidy.so '$ext_builddir'/tidy.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xmlrpc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(XMLRPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xmlrpc.so '$ext_builddir'/xmlrpc.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(TIDY, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XMLRPC, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) $(TIDY_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(XMLRPC_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/tidy.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xmlrpc.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/tidy.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlrpc.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tidy"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/tidy.$suffix: $ext_builddir/tidy.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/tidy.$suffix \$(phplibdir)
+\$(phplibdir)/xmlrpc.$suffix: $ext_builddir/xmlrpc.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlrpc.$suffix \$(phplibdir)
 
-$ext_builddir/tidy.$suffix: \$(shared_objects_tidy) \$(TIDY_SHARED_DEPENDENCIES)
+$ext_builddir/xmlrpc.$suffix: \$(shared_objects_xmlrpc) \$(XMLRPC_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -96155,22 +102907,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_TIDY 1
+#define COMPILE_DL_XMLRPC 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_TIDY_SHARED=no
+    PHP_XMLRPC_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/tidy in
+  case ext/xmlrpc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/tidy"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/tidy/"; ac_bdir="ext/tidy/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -96185,7 +102937,12 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in tidy.c; do
+  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
+          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
+          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
+          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
+          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
+          libxmlrpc/xml_to_soap.c; do
   
       IFS=.
       set $ac_src
@@ -96208,15 +102965,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC tidy"
+        EXT_STATIC="$EXT_STATIC xmlrpc"
         ;;
       *)
         
   
-  case ext/tidy in
+  case ext/xmlrpc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/tidy"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/tidy/"; ac_bdir="ext/tidy/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -96231,7 +102988,12 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in tidy.c; do
+  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
+          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
+          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
+          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
+          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
+          libxmlrpc/xml_to_soap.c; do
   
       IFS=.
       set $ac_src
@@ -96254,93 +103016,195 @@ EOF
   done
 
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC tidy"
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=xmlrpc
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir/libxmlrpc"
+  
+
+  XMLRPC_MODULE_TYPE=builtin
+
+elif test "$PHP_XMLRPC" != "no"; then
+
+  if test -r $PHP_XMLRPC/include/xmlrpc.h; then
+    XMLRPC_DIR=$PHP_XMLRPC/include
+  elif test -r $PHP_XMLRPC/include/xmlrpc-epi/xmlrpc.h; then
+    XMLRPC_DIR=$PHP_XMLRPC/include/xmlrpc-epi
+  else
+    echo $ac_n "checking for XMLRPC-EPI in default path""... $ac_c" 1>&6
+echo "configure:103052: checking for XMLRPC-EPI in default path" >&5
+    for i in /usr/local /usr; do
+      if test -r $i/include/xmlrpc.h; then
+        XMLRPC_DIR=$i/include
+        echo "$ac_t""found in $i" 1>&6
+        break
+      fi
+    done
+  fi
+
+  if test -z "$XMLRPC_DIR"; then
+    echo "$ac_t""not found" 1>&6
+    { echo "configure: error: Please reinstall the XMLRPC-EPI distribution" 1>&2; exit 1; }
+  fi
+
+  
+  if test "$XMLRPC_DIR" != "/usr/include"; then
+    
+  if test -z "$XMLRPC_DIR" || echo "$XMLRPC_DIR" | grep '^/' >/dev/null ; then
+    ai_p=$XMLRPC_DIR
+  else
+    
+    ep_dir="`echo $XMLRPC_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$XMLRPC_DIR\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
   fi
-  
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
 
+  
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=tidy
+  if test "$ext_shared" = "yes"; then
+    XMLRPC_SHARED_LIBADD="-lxmlrpc $XMLRPC_SHARED_LIBADD"
+    if test -n "$XMLRPC_DIR/$PHP_LIBDIR"; then
+      
+  if test "$XMLRPC_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$XMLRPC_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
-
+  if test -z "$XMLRPC_DIR/$PHP_LIBDIR" || echo "$XMLRPC_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$XMLRPC_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $XMLRPC_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$XMLRPC_DIR/$PHP_LIBDIR\"`"
   fi
 
+    
+      if test "$ext_shared" = "yes"; then
+        XMLRPC_SHARED_LIBADD="-L$ai_p $XMLRPC_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLRPC_SHARED_LIBADD"
+      else
+        
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST TIDY_SHARED_LIBADD"
-
-  cat >> confdefs.h <<\EOF
-#define HAVE_TIDY 1
-EOF
-
-fi
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
 
+      fi
+    
+  fi
 
+    fi
+  else
+    
 
-php_enable_tokenizer=yes
+  if test -n "$XMLRPC_DIR/$PHP_LIBDIR"; then
+    
+  if test "$XMLRPC_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$XMLRPC_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$XMLRPC_DIR/$PHP_LIBDIR" || echo "$XMLRPC_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$XMLRPC_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $XMLRPC_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$XMLRPC_DIR/$PHP_LIBDIR\"`"
+  fi
 
-echo $ac_n "checking whether to enable tokenizer support""... $ac_c" 1>&6
-echo "configure:96290: checking whether to enable tokenizer support" >&5
-# Check whether --enable-tokenizer or --disable-tokenizer was given.
-if test "${enable_tokenizer+set}" = set; then
-  enableval="$enable_tokenizer"
-  PHP_TOKENIZER=$enableval
-else
+    
+      
   
-  PHP_TOKENIZER=yes
-  test "$PHP_ENABLE_ALL" && PHP_TOKENIZER=$PHP_ENABLE_ALL
-
-fi
-
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_TOKENIZER in
-shared,*)
-  PHP_TOKENIZER=`echo "$PHP_TOKENIZER"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_TOKENIZER=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
+    
+  fi
 
+  fi
+  
+  
+  case xmlrpc in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lxmlrpc $LIBS" 
+   ;;
+  esac
 
 
-echo "$ac_t""$ext_output" 1>&6
 
 
+  fi
 
 
-if test "$PHP_TOKENIZER" != "no"; then
   
-  ext_builddir=ext/tokenizer
-  ext_srcdir=$abs_srcdir/ext/tokenizer
+  ext_builddir=ext/xmlrpc
+  ext_srcdir=$abs_srcdir/ext/xmlrpc
 
   ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_TOKENIZER_SHARED=no
+    PHP_XMLRPC_SHARED=no
     
   
-  case ext/tokenizer in
+  case ext/xmlrpc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -96355,7 +103219,7 @@ if test "$PHP_TOKENIZER" != "no"; then
 
 
   old_IFS=$IFS
-  for ac_src in tokenizer.c tokenizer_data.c; do
+  for ac_src in xmlrpc-epi-php.c; do
   
       IFS=.
       set $ac_src
@@ -96378,18 +103242,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC tokenizer"
+    EXT_STATIC="$EXT_STATIC xmlrpc"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC tokenizer"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_TOKENIZER_SHARED=yes
+      PHP_XMLRPC_SHARED=yes
       
-  case ext/tokenizer in
+  case ext/xmlrpc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -96404,14 +103268,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in tokenizer.c tokenizer_data.c; do
+  for ac_src in xmlrpc-epi-php.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_tokenizer="$shared_objects_tokenizer $ac_bdir$ac_obj.lo"
+      shared_objects_xmlrpc="$shared_objects_xmlrpc $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -96434,31 +103298,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phptokenizer.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) $(PHPTOKENIZER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phptokenizer.so '$ext_builddir'/phptokenizer.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxmlrpc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(PHPXMLRPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxmlrpc.so '$ext_builddir'/phpxmlrpc.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPTOKENIZER, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXMLRPC, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) $(PHPTOKENIZER_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(PHPXMLRPC_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phptokenizer.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxmlrpc.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phptokenizer.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxmlrpc.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tokenizer"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phptokenizer.$suffix: $ext_builddir/phptokenizer.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phptokenizer.$suffix \$(phplibdir)
+\$(phplibdir)/phpxmlrpc.$suffix: $ext_builddir/phpxmlrpc.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxmlrpc.$suffix \$(phplibdir)
 
-$ext_builddir/phptokenizer.$suffix: \$(shared_objects_tokenizer) \$(PHPTOKENIZER_SHARED_DEPENDENCIES)
+$ext_builddir/phpxmlrpc.$suffix: \$(shared_objects_xmlrpc) \$(PHPXMLRPC_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -96471,31 +103335,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/tokenizer.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) $(TOKENIZER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/tokenizer.so '$ext_builddir'/tokenizer.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xmlrpc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(XMLRPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xmlrpc.so '$ext_builddir'/xmlrpc.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(TOKENIZER, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XMLRPC, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) $(TOKENIZER_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(XMLRPC_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/tokenizer.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xmlrpc.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/tokenizer.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlrpc.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tokenizer"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/tokenizer.$suffix: $ext_builddir/tokenizer.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/tokenizer.$suffix \$(phplibdir)
+\$(phplibdir)/xmlrpc.$suffix: $ext_builddir/xmlrpc.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlrpc.$suffix \$(phplibdir)
 
-$ext_builddir/tokenizer.$suffix: \$(shared_objects_tokenizer) \$(TOKENIZER_SHARED_DEPENDENCIES)
+$ext_builddir/xmlrpc.$suffix: \$(shared_objects_xmlrpc) \$(XMLRPC_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -96503,22 +103367,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_TOKENIZER 1
+#define COMPILE_DL_XMLRPC 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_TOKENIZER_SHARED=no
+    PHP_XMLRPC_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/tokenizer in
+  case ext/xmlrpc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -96533,7 +103397,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in tokenizer.c tokenizer_data.c; do
+  for ac_src in xmlrpc-epi-php.c; do
   
       IFS=.
       set $ac_src
@@ -96556,15 +103420,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC tokenizer"
+        EXT_STATIC="$EXT_STATIC xmlrpc"
         ;;
       *)
         
   
-  case ext/tokenizer in
+  case ext/xmlrpc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -96579,7 +103443,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in tokenizer.c tokenizer_data.c; do
+  for ac_src in xmlrpc-epi-php.c; do
   
       IFS=.
       set $ac_src
@@ -96604,7 +103468,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC tokenizer"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
   fi
   
   
@@ -96613,34 +103477,29 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=tokenizer
+    PHP_PECL_EXTENSION=xmlrpc
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
-  
-  src=$ext_srcdir/Makefile.frag
-  ac_srcdir=$ext_srcdir
-  ac_builddir=$ext_builddir
-  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments
-
+  XMLRPC_MODULE_TYPE=external
 fi
 
 
 
-php_enable_wddx=no
+php_enable_xmlwriter=yes
 
-echo $ac_n "checking whether to enable WDDX support""... $ac_c" 1>&6
-echo "configure:96636: checking whether to enable WDDX support" >&5
-# Check whether --enable-wddx or --disable-wddx was given.
-if test "${enable_wddx+set}" = set; then
-  enableval="$enable_wddx"
-  PHP_WDDX=$enableval
+echo $ac_n "checking whether to enable XMLWriter support""... $ac_c" 1>&6
+echo "configure:103495: checking whether to enable XMLWriter support" >&5
+# Check whether --enable-xmlwriter or --disable-xmlwriter was given.
+if test "${enable_xmlwriter+set}" = set; then
+  enableval="$enable_xmlwriter"
+  PHP_XMLWRITER=$enableval
 else
   
-  PHP_WDDX=no
-  test "$PHP_ENABLE_ALL" && PHP_WDDX=$PHP_ENABLE_ALL
+  PHP_XMLWRITER=yes
+  test "$PHP_ENABLE_ALL" && PHP_XMLWRITER=$PHP_ENABLE_ALL
 
 fi
 
@@ -96648,12 +103507,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_WDDX in
+case $PHP_XMLWRITER in
 shared,*)
-  PHP_WDDX=`echo "$PHP_WDDX"|$SED 's/^shared,//'`
+  PHP_XMLWRITER=`echo "$PHP_XMLWRITER"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_WDDX=yes
+  PHP_XMLWRITER=yes
   ;;
 no)
   ext_output=no
@@ -96677,7 +103536,7 @@ if test -z "$PHP_LIBXML_DIR"; then
 php_with_libxml_dir=no
 
 echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
-echo "configure:96681: checking libxml2 install dir" >&5
+echo "configure:103540: checking libxml2 install dir" >&5
 # Check whether --with-libxml-dir or --without-libxml-dir was given.
 if test "${with_libxml_dir+set}" = set; then
   withval="$with_libxml_dir"
@@ -96697,39 +103556,15 @@ echo "$ac_t""$ext_output" 1>&6
 
 fi
 
+if test "$PHP_XMLWRITER" != "no"; then
 
-php_with_libexpat_dir=no
+  if test "$PHP_LIBXML" = "no"; then
+    { echo "configure: error: XMLWriter extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
+  fi
 
-echo $ac_n "checking libexpat dir for WDDX""... $ac_c" 1>&6
-echo "configure:96705: checking libexpat dir for WDDX" >&5
-# Check whether --with-libexpat-dir or --without-libexpat-dir was given.
-if test "${with_libexpat_dir+set}" = set; then
-  withval="$with_libexpat_dir"
-  PHP_LIBEXPAT_DIR=$withval
-else
-  
-  PHP_LIBEXPAT_DIR=no
   
-
-fi
-
-
-ext_output=$PHP_LIBEXPAT_DIR
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test "$PHP_WDDX" != "no"; then
-
-        if test "$PHP_LIBEXPAT_DIR" = "no"; then
-    if test "$PHP_LIBXML" = "no"; then
-      { echo "configure: error: WDDX extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
-    fi
-
-    
 echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
-echo "configure:96733: checking for xml2-config path" >&5
+echo "configure:103568: checking for xml2-config path" >&5
 if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -96761,7 +103596,7 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
     case $ac_i in
     -pthread)
       if test "$ext_shared" = "yes"; then
-        WDDX_SHARED_LIBADD="$WDDX_SHARED_LIBADD -pthread"
+        XMLWRITER_SHARED_LIBADD="$XMLWRITER_SHARED_LIBADD -pthread"
       else
         
   
@@ -96783,7 +103618,7 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
   c|c_r|pthread*) ;;
   *) 
     if test "$ext_shared" = "yes"; then
-        WDDX_SHARED_LIBADD="$WDDX_SHARED_LIBADD -l$ac_ii" 
+        XMLWRITER_SHARED_LIBADD="$XMLWRITER_SHARED_LIBADD -l$ac_ii" 
     else
       
   
@@ -96818,8 +103653,8 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
 
     
       if test "$ext_shared" = "yes"; then
-        WDDX_SHARED_LIBADD="-L$ai_p $WDDX_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && WDDX_SHARED_LIBADD="$ld_runpath_switch$ai_p $WDDX_SHARED_LIBADD"
+        XMLWRITER_SHARED_LIBADD="-L$ai_p $XMLWRITER_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && XMLWRITER_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLWRITER_SHARED_LIBADD"
       else
         
   
@@ -96887,7 +103722,7 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
 
 
             echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
-echo "configure:96891: checking whether libxml build works" >&5
+echo "configure:103726: checking whether libxml build works" >&5
 if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -96895,7 +103730,7 @@ else
         
   old_LIBS=$LIBS
   LIBS="
-          $WDDX_SHARED_LIBADD
+          $XMLWRITER_SHARED_LIBADD
          $LIBS"
   if test "$cross_compiling" = yes; then
   
@@ -96903,7 +103738,7 @@ else
   
 else
   cat > conftest.$ac_ext <<EOF
-#line 96907 "configure"
+#line 103742 "configure"
 #include "confdefs.h"
 
     
@@ -96914,7 +103749,7 @@ else
     }
   
 EOF
-if { (eval echo configure:96918: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:103753: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     LIBS=$old_LIBS
@@ -96925,255 +103760,48 @@ then
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  
-    LIBS=$old_LIBS
-    
-          echo "$ac_t""no" 1>&6
-          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
-        
-  
-fi
-rm -fr conftest*
-fi
-
-
-      
-fi
-
-echo "$ac_t""$php_cv_libxml_build_works" 1>&6
-      if test "$php_cv_libxml_build_works" = "yes"; then
-        cat >> confdefs.h <<\EOF
-#define HAVE_LIBXML 1
-EOF
-
-      fi
-      
-      if test "$PHP_XML" = "no"; then
-        
-  
-  case ext/xml in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in compat.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-        
-  
-    BUILD_DIR="$BUILD_DIR ext/xml"
-  
-
-      fi
-    
-    else
-      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
-    fi
-else 
-      { echo "configure: error: xml2-config not found. Use --with-libxml-dir=<DIR>" 1>&2; exit 1; }
-    
-  fi
-
-  fi
-
-        if test "$PHP_LIBEXPAT_DIR" != "no"; then
-    for i in $PHP_XML $PHP_LIBEXPAT_DIR /usr /usr/local; do
-      if test -f "$i/$PHP_LIBDIR/libexpat.a" || test -f "$i/$PHP_LIBDIR/libexpat.$SHLIB_SUFFIX_NAME"; then
-        EXPAT_DIR=$i
-        break
-      fi
-    done
-
-    if test -z "$EXPAT_DIR"; then
-      { echo "configure: error: not found. Please reinstall the expat distribution." 1>&2; exit 1; }
-    fi
-
-    
-  if test "$EXPAT_DIR/include" != "/usr/include"; then
-    
-  if test -z "$EXPAT_DIR/include" || echo "$EXPAT_DIR/include" | grep '^/' >/dev/null ; then
-    ai_p=$EXPAT_DIR/include
-  else
-    
-    ep_dir="`echo $EXPAT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/include\"`"
-  fi
-
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
-
-    
-
-  if test "$ext_shared" = "yes"; then
-    WDDX_SHARED_LIBADD="-lexpat $WDDX_SHARED_LIBADD"
-    if test -n "$EXPAT_DIR/$PHP_LIBDIR"; then
-      
-  if test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$EXPAT_DIR/$PHP_LIBDIR" || echo "$EXPAT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$EXPAT_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $EXPAT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/$PHP_LIBDIR\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        WDDX_SHARED_LIBADD="-L$ai_p $WDDX_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && WDDX_SHARED_LIBADD="$ld_runpath_switch$ai_p $WDDX_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-      fi
-    
-  fi
-
-    fi
-  else
-    
-
-  if test -n "$EXPAT_DIR/$PHP_LIBDIR"; then
-    
-  if test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$EXPAT_DIR/$PHP_LIBDIR" || echo "$EXPAT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$EXPAT_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $EXPAT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/$PHP_LIBDIR\"`"
-  fi
-
-    
-      
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-    
-  fi
-
-  fi
-  
-  
-  case expat in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lexpat $LIBS" 
-   ;;
-  esac
-
-
-
+  rm -fr conftest*
+  
+    LIBS=$old_LIBS
+    
+          echo "$ac_t""no" 1>&6
+          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
+        
+  
+fi
+rm -fr conftest*
+fi
 
-  fi
 
+      
+fi
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBEXPAT 1
+echo "$ac_t""$php_cv_libxml_build_works" 1>&6
+      if test "$php_cv_libxml_build_works" = "yes"; then
+        cat >> confdefs.h <<\EOF
+#define HAVE_LIBXML 1
 EOF
 
-  fi
-
-  cat >> confdefs.h <<\EOF
-#define HAVE_WDDX 1
+      fi
+      
+    cat >> confdefs.h <<\EOF
+#define HAVE_XMLWRITER 1
 EOF
 
-  
-  ext_builddir=ext/wddx
-  ext_srcdir=$abs_srcdir/ext/wddx
+    
+  ext_builddir=ext/xmlwriter
+  ext_srcdir=$abs_srcdir/ext/xmlwriter
 
   ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_WDDX_SHARED=no
+    PHP_XMLWRITER_SHARED=no
     
   
-  case ext/wddx in
+  case ext/xmlwriter in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlwriter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlwriter/"; ac_bdir="ext/xmlwriter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -97188,7 +103816,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in wddx.c; do
+  for ac_src in php_xmlwriter.c; do
   
       IFS=.
       set $ac_src
@@ -97211,18 +103839,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC wddx"
+    EXT_STATIC="$EXT_STATIC xmlwriter"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC wddx"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlwriter"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_WDDX_SHARED=yes
+      PHP_XMLWRITER_SHARED=yes
       
-  case ext/wddx in
+  case ext/xmlwriter in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlwriter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlwriter/"; ac_bdir="ext/xmlwriter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -97237,14 +103865,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in wddx.c; do
+  for ac_src in php_xmlwriter.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_wddx="$shared_objects_wddx $ac_bdir$ac_obj.lo"
+      shared_objects_xmlwriter="$shared_objects_xmlwriter $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -97267,31 +103895,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpwddx.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) $(PHPWDDX_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpwddx.so '$ext_builddir'/phpwddx.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxmlwriter.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) $(PHPXMLWRITER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxmlwriter.so '$ext_builddir'/phpxmlwriter.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPWDDX, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXMLWRITER, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) $(PHPWDDX_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) $(PHPXMLWRITER_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpwddx.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxmlwriter.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpwddx.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxmlwriter.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_wddx"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlwriter"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpwddx.$suffix: $ext_builddir/phpwddx.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpwddx.$suffix \$(phplibdir)
+\$(phplibdir)/phpxmlwriter.$suffix: $ext_builddir/phpxmlwriter.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxmlwriter.$suffix \$(phplibdir)
 
-$ext_builddir/phpwddx.$suffix: \$(shared_objects_wddx) \$(PHPWDDX_SHARED_DEPENDENCIES)
+$ext_builddir/phpxmlwriter.$suffix: \$(shared_objects_xmlwriter) \$(PHPXMLWRITER_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -97304,31 +103932,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/wddx.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) $(WDDX_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/wddx.so '$ext_builddir'/wddx.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xmlwriter.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) $(XMLWRITER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xmlwriter.so '$ext_builddir'/xmlwriter.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(WDDX, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XMLWRITER, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) $(WDDX_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) $(XMLWRITER_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/wddx.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xmlwriter.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/wddx.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlwriter.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_wddx"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlwriter"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/wddx.$suffix: $ext_builddir/wddx.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/wddx.$suffix \$(phplibdir)
+\$(phplibdir)/xmlwriter.$suffix: $ext_builddir/xmlwriter.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlwriter.$suffix \$(phplibdir)
 
-$ext_builddir/wddx.$suffix: \$(shared_objects_wddx) \$(WDDX_SHARED_DEPENDENCIES)
+$ext_builddir/xmlwriter.$suffix: \$(shared_objects_xmlwriter) \$(XMLWRITER_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -97336,22 +103964,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_WDDX 1
+#define COMPILE_DL_XMLWRITER 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_WDDX_SHARED=no
+    PHP_XMLWRITER_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/wddx in
+  case ext/xmlwriter in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlwriter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlwriter/"; ac_bdir="ext/xmlwriter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -97366,7 +103994,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in wddx.c; do
+  for ac_src in php_xmlwriter.c; do
   
       IFS=.
       set $ac_src
@@ -97389,15 +104017,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC wddx"
+        EXT_STATIC="$EXT_STATIC xmlwriter"
         ;;
       *)
         
   
-  case ext/wddx in
+  case ext/xmlwriter in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlwriter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlwriter/"; ac_bdir="ext/xmlwriter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -97412,7 +104040,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in wddx.c; do
+  for ac_src in php_xmlwriter.c; do
   
       IFS=.
       set $ac_src
@@ -97437,7 +104065,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC wddx"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlwriter"
   fi
   
   
@@ -97446,50 +104074,40 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=wddx
+    PHP_PECL_EXTENSION=xmlwriter
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLWRITER_SHARED_LIBADD"
+
   
-  am_i_shared=$PHP_WDDX_SHARED
-  is_it_shared=$PHP_LIBXML_SHARED
-  is_it_enabled=$PHP_LIBXML
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension wddx to build statically, but it
-depends on extension libxml, which you've configured to build shared.
-You either need to build wddx shared or build libxml statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension wddx, which depends on extension libxml,
-but you've either not enabled libxml, or have disabled it.
-" 1>&2; exit 1; }
-  fi
-  
+    else
+      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
+    fi
+else 
+    { echo "configure: error: xml2-config not found. Please check your libxml2 installation." 1>&2; exit 1; }
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLRPC_SHARED_LIBADD"
+  fi
 
 fi
 
 
 
-php_enable_xml=yes
+php_with_xsl=no
 
-echo $ac_n "checking whether to enable XML support""... $ac_c" 1>&6
-echo "configure:97485: checking whether to enable XML support" >&5
-# Check whether --enable-xml or --disable-xml was given.
-if test "${enable_xml+set}" = set; then
-  enableval="$enable_xml"
-  PHP_XML=$enableval
+echo $ac_n "checking for XSL support""... $ac_c" 1>&6
+echo "configure:104103: checking for XSL support" >&5
+# Check whether --with-xsl or --without-xsl was given.
+if test "${with_xsl+set}" = set; then
+  withval="$with_xsl"
+  PHP_XSL=$withval
 else
   
-  PHP_XML=yes
-  test "$PHP_ENABLE_ALL" && PHP_XML=$PHP_ENABLE_ALL
+  PHP_XSL=no
+  test "$PHP_ENABLE_ALL" && PHP_XSL=$PHP_ENABLE_ALL
 
 fi
 
@@ -97497,12 +104115,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_XML in
+case $PHP_XSL in
 shared,*)
-  PHP_XML=`echo "$PHP_XML"|$SED 's/^shared,//'`
+  PHP_XSL=`echo "$PHP_XSL"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_XML=yes
+  PHP_XSL=yes
   ;;
 no)
   ext_output=no
@@ -97521,97 +104139,41 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
-if test -z "$PHP_LIBXML_DIR"; then
-  
-php_with_libxml_dir=no
-
-echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
-echo "configure:97530: checking libxml2 install dir" >&5
-# Check whether --with-libxml-dir or --without-libxml-dir was given.
-if test "${with_libxml_dir+set}" = set; then
-  withval="$with_libxml_dir"
-  PHP_LIBXML_DIR=$withval
-else
-  
-  PHP_LIBXML_DIR=no
-  
-
-fi
-
-
-ext_output=$PHP_LIBXML_DIR
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-fi
-
-
-php_with_libexpat_dir=no
+if test "$PHP_XSL" != "no"; then
 
-echo $ac_n "checking libexpat install dir""... $ac_c" 1>&6
-echo "configure:97554: checking libexpat install dir" >&5
-# Check whether --with-libexpat-dir or --without-libexpat-dir was given.
-if test "${with_libexpat_dir+set}" = set; then
-  withval="$with_libexpat_dir"
-  PHP_LIBEXPAT_DIR=$withval
-else
-  
-  PHP_LIBEXPAT_DIR=no
+  if test "$PHP_LIBXML" = "no"; then
+    { echo "configure: error: XSL extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
+  fi
   
+  if test "$PHP_DOM" = "no"; then
+    { echo "configure: error: XSL extension requires DOM extension, add --enable-dom" 1>&2; exit 1; }
+  fi
 
-fi
-
-
-ext_output=$PHP_LIBEXPAT_DIR
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test "$PHP_XML" != "no"; then
-
-        if test "$PHP_LIBEXPAT_DIR" = "no"; then
-
-    if test "$PHP_LIBXML" = "no"; then
-      { echo "configure: error: XML extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
-    fi
-
-    
-echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
-echo "configure:97583: checking for xml2-config path" >&5
-if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-  for i in $PHP_LIBXML_DIR /usr/local /usr; do
-    if test -x "$i/bin/xml2-config"; then
-      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
+  for i in $PHP_XSL /usr/local /usr; do
+    if test -x "$i/bin/xslt-config"; then
+      XSLT_CONFIG=$i/bin/xslt-config
       break
     fi
   done
 
-fi
-
-echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6
-
-  if test -x "$ac_cv_php_xml2_config_path"; then
-    XML2_CONFIG="$ac_cv_php_xml2_config_path"
-    libxml_full_version=`$XML2_CONFIG --version`
+  if test -z "$XSLT_CONFIG"; then
+    { echo "configure: error: xslt-config not found. Please reinstall the libxslt >= 1.1.0 distribution" 1>&2; exit 1; }
+  else
+    libxslt_full_version=`$XSLT_CONFIG --version`
     ac_IFS=$IFS
     IFS="."
-    set $libxml_full_version
+    set $libxslt_full_version
     IFS=$ac_IFS
-    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
-    if test "$LIBXML_VERSION" -ge "2006011"; then
-      LIBXML_LIBS=`$XML2_CONFIG --libs`
-      LIBXML_INCS=`$XML2_CONFIG --cflags`
+    LIBXSLT_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
+    if test "$LIBXSLT_VERSION" -ge "1001000"; then
+      XSL_LIBS=`$XSLT_CONFIG --libs`
+      XSL_INCS=`$XSLT_CONFIG --cflags`
       
-  for ac_i in $LIBXML_LIBS; do
+  for ac_i in $XSL_LIBS; do
     case $ac_i in
     -pthread)
       if test "$ext_shared" = "yes"; then
-        XML_SHARED_LIBADD="$XML_SHARED_LIBADD -pthread"
+        XSL_SHARED_LIBADD="$XSL_SHARED_LIBADD -pthread"
       else
         
   
@@ -97633,7 +104195,7 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
   c|c_r|pthread*) ;;
   *) 
     if test "$ext_shared" = "yes"; then
-        XML_SHARED_LIBADD="$XML_SHARED_LIBADD -l$ac_ii" 
+        XSL_SHARED_LIBADD="$XSL_SHARED_LIBADD -l$ac_ii" 
     else
       
   
@@ -97668,8 +104230,8 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
 
     
       if test "$ext_shared" = "yes"; then
-        XML_SHARED_LIBADD="-L$ai_p $XML_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && XML_SHARED_LIBADD="$ld_runpath_switch$ai_p $XML_SHARED_LIBADD"
+        XSL_SHARED_LIBADD="-L$ai_p $XSL_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && XSL_SHARED_LIBADD="$ld_runpath_switch$ai_p $XSL_SHARED_LIBADD"
       else
         
   
@@ -97696,7 +104258,7 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
   done
 
       
-  for ac_i in $LIBXML_INCS; do
+  for ac_i in $XSL_INCS; do
     case $ac_i in
     -I*)
       ac_ii=`echo $ac_i|cut -c 3-`
@@ -97735,166 +104297,41 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
     esac
   done
 
-
-            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
-echo "configure:97741: checking whether libxml build works" >&5
-if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-        
-  old_LIBS=$LIBS
-  LIBS="
-          $XML_SHARED_LIBADD
-         $LIBS"
-  if test "$cross_compiling" = yes; then
-  
-    LIBS=$old_LIBS
-  
-else
-  cat > conftest.$ac_ext <<EOF
-#line 97757 "configure"
-#include "confdefs.h"
-
-    
-    char xmlInitParser();
-    int main() {
-      xmlInitParser();
-      return 0;
-    }
-  
-EOF
-if { (eval echo configure:97768: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-    LIBS=$old_LIBS
-    
-          php_cv_libxml_build_works=yes
-        
-  
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  
-    LIBS=$old_LIBS
-    
-          echo "$ac_t""no" 1>&6
-          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
-        
-  
-fi
-rm -fr conftest*
-fi
-
-
-      
-fi
-
-echo "$ac_t""$php_cv_libxml_build_works" 1>&6
-      if test "$php_cv_libxml_build_works" = "yes"; then
-        cat >> confdefs.h <<\EOF
-#define HAVE_LIBXML 1
-EOF
-
-      fi
-      
-      xml_extra_sources="compat.c"
       
-  am_i_shared=$PHP_XML_SHARED
-  is_it_shared=$PHP_LIBXML_SHARED
-  is_it_enabled=$PHP_LIBXML
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension xml to build statically, but it
-depends on extension libxml, which you've configured to build shared.
-You either need to build xml shared or build libxml statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension xml, which depends on extension libxml,
-but you've either not enabled libxml, or have disabled it.
-" 1>&2; exit 1; }
-  fi
-  
-    
-    else
-      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
-    fi
-else 
-      { echo "configure: error: xml2-config not found. Use --with-libxml-dir=<DIR>" 1>&2; exit 1; }
-    
-  fi
-
-  fi
-  
-        if test "$PHP_LIBEXPAT_DIR" != "no"; then
-    for i in $PHP_XML $PHP_LIBEXPAT_DIR /usr /usr/local; do
-      if test -f "$i/$PHP_LIBDIR/libexpat.a" || test -f "$i/$PHP_LIBDIR/libexpat.$SHLIB_SUFFIX_NAME"; then
-        EXPAT_DIR=$i
-        break
-      fi
-    done
-
-    if test -z "$EXPAT_DIR"; then
-      { echo "configure: error: not found. Please reinstall the expat distribution." 1>&2; exit 1; }
-    fi
-
-    
-  if test "$EXPAT_DIR/include" != "/usr/include"; then
-    
-  if test -z "$EXPAT_DIR/include" || echo "$EXPAT_DIR/include" | grep '^/' >/dev/null ; then
-    ai_p=$EXPAT_DIR/include
-  else
-    
-    ep_dir="`echo $EXPAT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/include\"`"
-  fi
-
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
-
-    
+      echo $ac_n "checking for EXSLT support""... $ac_c" 1>&6
+echo "configure:104303: checking for EXSLT support" >&5
+      for i in $PHP_XSL /usr/local /usr; do
+        if test -r "$i/include/libexslt/exslt.h"; then
+          PHP_XSL_EXSL_DIR=$i
+          break
+        fi
+      done
+      if test -z "$PHP_XSL_EXSL_DIR"; then
+        echo "$ac_t""not found" 1>&6
+      else 
+        echo "$ac_t""found" 1>&6
+        
 
   if test "$ext_shared" = "yes"; then
-    XML_SHARED_LIBADD="-lexpat $XML_SHARED_LIBADD"
-    if test -n "$EXPAT_DIR/$PHP_LIBDIR"; then
+    XSL_SHARED_LIBADD="-lexslt $XSL_SHARED_LIBADD"
+    if test -n "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR"; then
       
-  if test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  if test "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$EXPAT_DIR/$PHP_LIBDIR" || echo "$EXPAT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$EXPAT_DIR/$PHP_LIBDIR
+  if test -z "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" || echo "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_XSL_EXSL_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $EXPAT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $PHP_XSL_EXSL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$PHP_XSL_EXSL_DIR/$PHP_LIBDIR\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        XML_SHARED_LIBADD="-L$ai_p $XML_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && XML_SHARED_LIBADD="$ld_runpath_switch$ai_p $XML_SHARED_LIBADD"
+        XSL_SHARED_LIBADD="-L$ai_p $XSL_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && XSL_SHARED_LIBADD="$ld_runpath_switch$ai_p $XSL_SHARED_LIBADD"
       else
         
   
@@ -97920,18 +104357,18 @@ else
   else
     
 
-  if test -n "$EXPAT_DIR/$PHP_LIBDIR"; then
+  if test -n "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR"; then
     
-  if test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  if test "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$EXPAT_DIR/$PHP_LIBDIR" || echo "$EXPAT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$EXPAT_DIR/$PHP_LIBDIR
+  if test -z "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" || echo "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_XSL_EXSL_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $EXPAT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $PHP_XSL_EXSL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$PHP_XSL_EXSL_DIR/$PHP_LIBDIR\"`"
   fi
 
     
@@ -97957,10 +104394,10 @@ else
   fi
   
   
-  case expat in
+  case exslt in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lexpat $LIBS" 
+      LIBS="-lexslt $LIBS" 
    ;;
   esac
 
@@ -97970,26 +104407,67 @@ else
   fi
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBEXPAT 1
+        
+  if test "$PHP_XSL_EXSL_DIR/include" != "/usr/include"; then
+    
+  if test -z "$PHP_XSL_EXSL_DIR/include" || echo "$PHP_XSL_EXSL_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_XSL_EXSL_DIR/include
+  else
+    
+    ep_dir="`echo $PHP_XSL_EXSL_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PHP_XSL_EXSL_DIR/include\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+        cat >> confdefs.h <<\EOF
+#define HAVE_XSL_EXSLT 1
 EOF
 
+      fi
+    else
+      { echo "configure: error: libxslt version 1.1.0 or greater required." 1>&2; exit 1; }
+    fi
+    
+  
   fi
+  
+  cat >> confdefs.h <<\EOF
+#define HAVE_XSL 1
+EOF
 
   
-  ext_builddir=ext/xml
-  ext_srcdir=$abs_srcdir/ext/xml
+  ext_builddir=ext/xsl
+  ext_srcdir=$abs_srcdir/ext/xsl
 
   ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_XML_SHARED=no
+    PHP_XSL_SHARED=no
     
   
-  case ext/xml in
+  case ext/xsl in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xsl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xsl/"; ac_bdir="ext/xsl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -98004,7 +104482,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in xml.c $xml_extra_sources; do
+  for ac_src in php_xsl.c xsltprocessor.c; do
   
       IFS=.
       set $ac_src
@@ -98027,18 +104505,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC xml"
+    EXT_STATIC="$EXT_STATIC xsl"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC xml"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC xsl"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_XML_SHARED=yes
+      PHP_XSL_SHARED=yes
       
-  case ext/xml in
+  case ext/xsl in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xsl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xsl/"; ac_bdir="ext/xsl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -98053,14 +104531,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in xml.c $xml_extra_sources; do
+  for ac_src in php_xsl.c xsltprocessor.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_xml="$shared_objects_xml $ac_bdir$ac_obj.lo"
+      shared_objects_xsl="$shared_objects_xsl $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -98083,31 +104561,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) $(PHPXML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxml.so '$ext_builddir'/phpxml.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxsl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) $(PHPXSL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxsl.so '$ext_builddir'/phpxsl.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXML, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXSL, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) $(PHPXML_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) $(PHPXSL_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxml.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxsl.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxml.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxsl.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xml"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xsl"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpxml.$suffix: $ext_builddir/phpxml.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxml.$suffix \$(phplibdir)
+\$(phplibdir)/phpxsl.$suffix: $ext_builddir/phpxsl.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxsl.$suffix \$(phplibdir)
 
-$ext_builddir/phpxml.$suffix: \$(shared_objects_xml) \$(PHPXML_SHARED_DEPENDENCIES)
+$ext_builddir/phpxsl.$suffix: \$(shared_objects_xsl) \$(PHPXSL_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -98120,31 +104598,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) $(XML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xml.so '$ext_builddir'/xml.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xsl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) $(XSL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xsl.so '$ext_builddir'/xsl.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XML, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XSL, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) $(XML_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) $(XSL_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xml.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xsl.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xml.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xsl.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xml"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xsl"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/xml.$suffix: $ext_builddir/xml.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/xml.$suffix \$(phplibdir)
+\$(phplibdir)/xsl.$suffix: $ext_builddir/xsl.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/xsl.$suffix \$(phplibdir)
 
-$ext_builddir/xml.$suffix: \$(shared_objects_xml) \$(XML_SHARED_DEPENDENCIES)
+$ext_builddir/xsl.$suffix: \$(shared_objects_xsl) \$(XSL_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -98152,22 +104630,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_XML 1
+#define COMPILE_DL_XSL 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_XML_SHARED=no
+    PHP_XSL_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/xml in
+  case ext/xsl in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xsl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xsl/"; ac_bdir="ext/xsl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -98182,7 +104660,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in xml.c $xml_extra_sources; do
+  for ac_src in php_xsl.c xsltprocessor.c; do
   
       IFS=.
       set $ac_src
@@ -98205,15 +104683,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC xml"
+        EXT_STATIC="$EXT_STATIC xsl"
         ;;
       *)
         
   
-  case ext/xml in
+  case ext/xsl in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xsl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xsl/"; ac_bdir="ext/xsl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -98228,7 +104706,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in xml.c $xml_extra_sources; do
+  for ac_src in php_xsl.c xsltprocessor.c; do
   
       IFS=.
       set $ac_src
@@ -98253,7 +104731,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC xml"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC xsl"
   fi
   
   
@@ -98262,53 +104740,50 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=xml
+    PHP_PECL_EXTENSION=xsl
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST XML_SHARED_LIBADD"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST XSL_SHARED_LIBADD"
 
   
-  
-    for header_file in ext/xml/; do
-      
-  
-  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INSTALLHEADERS$unique=set"
-    
-        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
-      
+  am_i_shared=$PHP_XSL_SHARED
+  is_it_shared=$PHP_LIBXML_SHARED
+  is_it_enabled=$PHP_LIBXML
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension xsl to build statically, but it
+depends on extension libxml, which you've configured to build shared.
+You either need to build xsl shared or build libxml statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension xsl, which depends on extension libxml,
+but you've either not enabled libxml, or have disabled it.
+" 1>&2; exit 1; }
   fi
-
-    done 
   
-
-  cat >> confdefs.h <<\EOF
-#define HAVE_XML 1
-EOF
-
 fi
 
 
 
-php_enable_xmlreader=yes
+php_enable_zip=no
 
-echo $ac_n "checking whether to enable XMLReader support""... $ac_c" 1>&6
-echo "configure:98304: checking whether to enable XMLReader support" >&5
-# Check whether --enable-xmlreader or --disable-xmlreader was given.
-if test "${enable_xmlreader+set}" = set; then
-  enableval="$enable_xmlreader"
-  PHP_XMLREADER=$enableval
+echo $ac_n "checking for zip archive read/writesupport""... $ac_c" 1>&6
+echo "configure:104779: checking for zip archive read/writesupport" >&5
+# Check whether --enable-zip or --disable-zip was given.
+if test "${enable_zip+set}" = set; then
+  enableval="$enable_zip"
+  PHP_ZIP=$enableval
 else
   
-  PHP_XMLREADER=yes
-  test "$PHP_ENABLE_ALL" && PHP_XMLREADER=$PHP_ENABLE_ALL
+  PHP_ZIP=no
+  test "$PHP_ENABLE_ALL" && PHP_ZIP=$PHP_ENABLE_ALL
 
 fi
 
@@ -98316,12 +104791,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_XMLREADER in
+case $PHP_ZIP in
 shared,*)
-  PHP_XMLREADER=`echo "$PHP_XMLREADER"|$SED 's/^shared,//'`
+  PHP_ZIP=`echo "$PHP_ZIP"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_XMLREADER=yes
+  PHP_ZIP=yes
   ;;
 no)
   ext_output=no
@@ -98340,132 +104815,147 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
-if test -z "$PHP_LIBXML_DIR"; then
+if test -z "$PHP_ZLIB_DIR"; then
   
-php_with_libxml_dir=no
+php_with_zlib_dir=no
 
-echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
-echo "configure:98349: checking libxml2 install dir" >&5
-# Check whether --with-libxml-dir or --without-libxml-dir was given.
-if test "${with_libxml_dir+set}" = set; then
-  withval="$with_libxml_dir"
-  PHP_LIBXML_DIR=$withval
+echo $ac_n "checking for the location of libz""... $ac_c" 1>&6
+echo "configure:104824: checking for the location of libz" >&5
+# Check whether --with-zlib-dir or --without-zlib-dir was given.
+if test "${with_zlib_dir+set}" = set; then
+  withval="$with_zlib_dir"
+  PHP_ZLIB_DIR=$withval
 else
   
-  PHP_LIBXML_DIR=no
+  PHP_ZLIB_DIR=no
   
 
 fi
 
 
-ext_output=$PHP_LIBXML_DIR
+ext_output=$PHP_ZLIB_DIR
 echo "$ac_t""$ext_output" 1>&6
 
 
 
 fi
 
-if test "$PHP_XMLREADER" != "no"; then
 
-  if test "$PHP_LIBXML" = "no"; then
-    { echo "configure: error: XMLReader extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
-  fi
+php_with_pcre_dir=no
 
-  
-echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
-echo "configure:98377: checking for xml2-config path" >&5
-if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo $ac_n "checking pcre install prefix""... $ac_c" 1>&6
+echo "configure:104848: checking pcre install prefix" >&5
+# Check whether --with-pcre-dir or --without-pcre-dir was given.
+if test "${with_pcre_dir+set}" = set; then
+  withval="$with_pcre_dir"
+  PHP_PCRE_DIR=$withval
 else
   
-  for i in $PHP_LIBXML_DIR /usr/local /usr; do
-    if test -x "$i/bin/xml2-config"; then
-      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
-      break
-    fi
-  done
+  PHP_PCRE_DIR=no
+  
 
 fi
 
-echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6
 
-  if test -x "$ac_cv_php_xml2_config_path"; then
-    XML2_CONFIG="$ac_cv_php_xml2_config_path"
-    libxml_full_version=`$XML2_CONFIG --version`
-    ac_IFS=$IFS
-    IFS="."
-    set $libxml_full_version
-    IFS=$ac_IFS
-    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
-    if test "$LIBXML_VERSION" -ge "2006011"; then
-      LIBXML_LIBS=`$XML2_CONFIG --libs`
-      LIBXML_INCS=`$XML2_CONFIG --cflags`
+ext_output=$PHP_PCRE_DIR
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_ZIP" != "no"; then
+
+  if test "$PHP_ZLIB_DIR" != "no" && test "$PHP_ZLIB_DIR" != "yes"; then
+    if test -f "$PHP_ZLIB_DIR/include/zlib/zlib.h"; then
+      PHP_ZLIB_DIR="$PHP_ZLIB_DIR"
+      PHP_ZLIB_INCDIR="$PHP_ZLIB_DIR/include/zlib"
+    elif test -f "$PHP_ZLIB_DIR/include/zlib.h"; then
+      PHP_ZLIB_DIR="$PHP_ZLIB_DIR"
+      PHP_ZLIB_INCDIR="$PHP_ZLIB_DIR/include"
+    else
+      { echo "configure: error: Can not find zlib headers under "$PHP_ZLIB_DIR"" 1>&2; exit 1; }
+    fi
+  else
+    for i in /usr/local /usr; do
+      if test -f "$i/include/zlib/zlib.h"; then
+        PHP_ZLIB_DIR="$i"
+        PHP_ZLIB_INCDIR="$i/include/zlib"
+      elif test -f "$i/include/zlib.h"; then
+        PHP_ZLIB_DIR="$i"
+        PHP_ZLIB_INCDIR="$i/include"
+      fi
+    done
+  fi
+
+    echo $ac_n "checking for the location of zlib""... $ac_c" 1>&6
+echo "configure:104892: checking for the location of zlib" >&5
+  if test "$PHP_ZLIB_DIR" = "no"; then
+    { echo "configure: error: zip support requires ZLIB. Use --with-zlib-dir=<DIR> to specify prefix where ZLIB include and library are located" 1>&2; exit 1; }
+  else
+    echo "$ac_t""$PHP_ZLIB_DIR" 1>&6
+    
+
+  if test "$ext_shared" = "yes"; then
+    ZIP_SHARED_LIBADD="-lz $ZIP_SHARED_LIBADD"
+    if test -n "$PHP_ZLIB_DIR/$PHP_LIBDIR"; then
       
-  for ac_i in $LIBXML_LIBS; do
-    case $ac_i in
-    -pthread)
+  if test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PHP_ZLIB_DIR/$PHP_LIBDIR" || echo "$PHP_ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_ZLIB_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $PHP_ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR/$PHP_LIBDIR\"`"
+  fi
+
+    
       if test "$ext_shared" = "yes"; then
-        XMLREADER_SHARED_LIBADD="$XMLREADER_SHARED_LIBADD -pthread"
+        ZIP_SHARED_LIBADD="-L$ai_p $ZIP_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && ZIP_SHARED_LIBADD="$ld_runpath_switch$ai_p $ZIP_SHARED_LIBADD"
       else
         
   
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
   fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        XMLREADER_SHARED_LIBADD="$XMLREADER_SHARED_LIBADD -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
 
+      fi
+    
+  fi
 
     fi
-   ;;
-  esac
-
+  else
+    
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+  if test -n "$PHP_ZLIB_DIR/$PHP_LIBDIR"; then
     
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+  if test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PHP_ZLIB_DIR/$PHP_LIBDIR" || echo "$PHP_ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_ZLIB_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $PHP_ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR/$PHP_LIBDIR\"`"
   fi
 
     
-      if test "$ext_shared" = "yes"; then
-        XMLREADER_SHARED_LIBADD="-L$ai_p $XMLREADER_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && XMLREADER_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLREADER_SHARED_LIBADD"
-      else
-        
+      
   
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
@@ -98481,30 +104971,36 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
   fi
 
 
-      fi
     
   fi
 
-    ;;
-    esac
-  done
+  fi
+  
+  
+  case z in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lz $LIBS" 
+   ;;
+  esac
+
+
+
+
+  fi
+
 
-      
-  for ac_i in $LIBXML_INCS; do
-    case $ac_i in
-    -I*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/include"; then
     
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+  if test "$PHP_ZLIB_INCDIR" != "/usr/include"; then
+    
+  if test -z "$PHP_ZLIB_INCDIR" || echo "$PHP_ZLIB_INCDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_ZLIB_INCDIR
   else
     
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $PHP_ZLIB_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_INCDIR\"`"
   fi
 
     
@@ -98525,92 +105021,97 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
 
   fi
 
-    ;;
-    esac
-  done
+  fi
 
+    old_CPPFLAGS=$CPPFLAGS
+  CPPFLAGS=$INCLUDES
+  cat > conftest.$ac_ext <<EOF
+#line 105030 "configure"
+#include "confdefs.h"
 
-            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
-echo "configure:98535: checking whether libxml build works" >&5
-if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
+#include <main/php_config.h>
+#if defined(HAVE_BUNDLED_PCRE) && !defined(COMPILE_DL_PCRE)
+yes
+#endif
   
-        
-  old_LIBS=$LIBS
-  LIBS="
-          $XMLREADER_SHARED_LIBADD
-         $LIBS"
-  if test "$cross_compiling" = yes; then
+EOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "yes" >/dev/null 2>&1; then
+  rm -rf conftest*
   
-    LIBS=$old_LIBS
+    PHP_PCRE_REGEX=yes
   
 else
-  cat > conftest.$ac_ext <<EOF
-#line 98551 "configure"
+  rm -rf conftest*
+  
+    cat > conftest.$ac_ext <<EOF
+#line 105049 "configure"
 #include "confdefs.h"
 
+#include <main/php_config.h>
+#if defined(HAVE_PCRE) && !defined(COMPILE_DL_PCRE)
+yes
+#endif
     
-    char xmlInitParser();
-    int main() {
-      xmlInitParser();
-      return 0;
-    }
-  
 EOF
-if { (eval echo configure:98562: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "yes" >/dev/null 2>&1; then
+  rm -rf conftest*
   
-    LIBS=$old_LIBS
+      PHP_PCRE_REGEX=pecl
     
-          php_cv_libxml_build_works=yes
-        
-  
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
+  rm -rf conftest*
   
-    LIBS=$old_LIBS
+      PHP_PCRE_REGEX=no
     
-          echo "$ac_t""no" 1>&6
-          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
-        
-  
-fi
-rm -fr conftest*
 fi
+rm -f conftest*
 
-
-      
+  
 fi
+rm -f conftest*
 
-echo "$ac_t""$php_cv_libxml_build_works" 1>&6
-      if test "$php_cv_libxml_build_works" = "yes"; then
-        cat >> confdefs.h <<\EOF
-#define HAVE_LIBXML 1
-EOF
+  CPPFLAGS=$old_CPPFLAGS
 
-      fi
-      
-    cat >> confdefs.h <<\EOF
-#define HAVE_XMLREADER 1
+  PHP_ZIP_SOURCES="$PHP_ZIP_SOURCES lib/zip_add.c lib/zip_error.c lib/zip_fclose.c \
+                         lib/zip_fread.c lib/zip_open.c lib/zip_source_filep.c  \
+                         lib/zip_strerror.c lib/zip_close.c lib/zip_error_get.c \
+                         lib/zip_file_error_get.c lib/zip_free.c lib/zip_rename.c \
+                         lib/zip_source_free.c lib/zip_unchange_all.c lib/zip_delete.c \
+                         lib/zip_error_get_sys_type.c lib/zip_file_get_offset.c \
+                         lib/zip_get_name.c lib/zip_replace.c lib/zip_source_function.c \
+                         lib/zip_unchange.c lib/zip_dirent.c lib/zip_error_strerror.c \
+                         lib/zip_filerange_crc.c lib/zip_file_strerror.c lib/zip_get_num_files.c \
+                         lib/zip_get_archive_flag.c lib/zip_set_archive_flag.c \
+                         lib/zip_set_name.c lib/zip_source_zip.c lib/zip_unchange_data.c \
+                         lib/zip_entry_free.c lib/zip_error_to_str.c lib/zip_fopen.c \
+                         lib/zip_name_locate.c lib/zip_source_buffer.c lib/zip_stat.c \
+                         lib/zip_entry_new.c lib/zip_err_str.c lib/zip_fopen_index.c \
+                         lib/zip_get_archive_comment.c lib/zip_get_file_comment.c \
+                         lib/zip_new.c lib/zip_source_file.c lib/zip_stat_index.c \
+                         lib/zip_set_archive_comment.c lib/zip_set_file_comment.c \
+                         lib/zip_unchange_archive.c lib/zip_memdup.c lib/zip_stat_init.c lib/zip_add_dir.c \
+                         lib/zip_error_clear.c lib/zip_file_error_clear.c"
+
+  cat >> confdefs.h <<\EOF
+#define HAVE_ZIP 1
 EOF
 
-    
-  ext_builddir=ext/xmlreader
-  ext_srcdir=$abs_srcdir/ext/xmlreader
+  
+  ext_builddir=ext/zip
+  ext_srcdir=$abs_srcdir/ext/zip
 
   ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_XMLREADER_SHARED=no
+    PHP_ZIP_SHARED=no
     
   
-  case ext/xmlreader in
+  case ext/zip in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlreader"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlreader/"; ac_bdir="ext/xmlreader/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -98625,7 +105126,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_xmlreader.c; do
+  for ac_src in php_zip.c zip_stream.c $PHP_ZIP_SOURCES; do
   
       IFS=.
       set $ac_src
@@ -98648,18 +105149,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC xmlreader"
+    EXT_STATIC="$EXT_STATIC zip"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlreader"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC zip"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_XMLREADER_SHARED=yes
+      PHP_ZIP_SHARED=yes
       
-  case ext/xmlreader in
+  case ext/zip in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlreader"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlreader/"; ac_bdir="ext/xmlreader/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -98674,14 +105175,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_xmlreader.c; do
+  for ac_src in php_zip.c zip_stream.c $PHP_ZIP_SOURCES; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_xmlreader="$shared_objects_xmlreader $ac_bdir$ac_obj.lo"
+      shared_objects_zip="$shared_objects_zip $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -98704,31 +105205,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxmlreader.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) $(PHPXMLREADER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxmlreader.so '$ext_builddir'/phpxmlreader.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpzip.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) $(PHPZIP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpzip.so '$ext_builddir'/phpzip.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXMLREADER, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPZIP, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) $(PHPXMLREADER_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) $(PHPZIP_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxmlreader.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpzip.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxmlreader.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpzip.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlreader"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_zip"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpxmlreader.$suffix: $ext_builddir/phpxmlreader.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxmlreader.$suffix \$(phplibdir)
+\$(phplibdir)/phpzip.$suffix: $ext_builddir/phpzip.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpzip.$suffix \$(phplibdir)
 
-$ext_builddir/phpxmlreader.$suffix: \$(shared_objects_xmlreader) \$(PHPXMLREADER_SHARED_DEPENDENCIES)
+$ext_builddir/phpzip.$suffix: \$(shared_objects_zip) \$(PHPZIP_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -98741,31 +105242,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xmlreader.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) $(XMLREADER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xmlreader.so '$ext_builddir'/xmlreader.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/zip.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) $(ZIP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/zip.so '$ext_builddir'/zip.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XMLREADER, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(ZIP, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) $(XMLREADER_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) $(ZIP_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xmlreader.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/zip.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlreader.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/zip.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlreader"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_zip"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/xmlreader.$suffix: $ext_builddir/xmlreader.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlreader.$suffix \$(phplibdir)
+\$(phplibdir)/zip.$suffix: $ext_builddir/zip.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/zip.$suffix \$(phplibdir)
 
-$ext_builddir/xmlreader.$suffix: \$(shared_objects_xmlreader) \$(XMLREADER_SHARED_DEPENDENCIES)
+$ext_builddir/zip.$suffix: \$(shared_objects_zip) \$(ZIP_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -98773,22 +105274,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_XMLREADER 1
+#define COMPILE_DL_ZIP 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_XMLREADER_SHARED=no
+    PHP_ZIP_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/xmlreader in
+  case ext/zip in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlreader"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlreader/"; ac_bdir="ext/xmlreader/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -98803,7 +105304,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_xmlreader.c; do
+  for ac_src in php_zip.c zip_stream.c $PHP_ZIP_SOURCES; do
   
       IFS=.
       set $ac_src
@@ -98826,15 +105327,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC xmlreader"
+        EXT_STATIC="$EXT_STATIC zip"
         ;;
       *)
         
   
-  case ext/xmlreader in
+  case ext/zip in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlreader"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlreader/"; ac_bdir="ext/xmlreader/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -98849,7 +105350,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_xmlreader.c; do
+  for ac_src in php_zip.c zip_stream.c $PHP_ZIP_SOURCES; do
   
       IFS=.
       set $ac_src
@@ -98874,7 +105375,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlreader"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC zip"
   fi
   
   
@@ -98883,72 +105384,43 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=xmlreader
+    PHP_PECL_EXTENSION=zip
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
-    
-  am_i_shared=$PHP_XMLREADER_SHARED
-  is_it_shared=$PHP_DOM_SHARED
-  is_it_enabled=$PHP_DOM
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension xmlreader to build statically, but it
-depends on extension dom, which you've configured to build shared.
-You either need to build xmlreader shared or build dom statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension xmlreader, which depends on extension dom,
-but you've either not enabled dom, or have disabled it.
-" 1>&2; exit 1; }
-  fi
   
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLREADER_SHARED_LIBADD"
-
   
-    else
-      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
-    fi
-else 
-    { echo "configure: error: xml2-config not found. Please check your libxml2 installation." 1>&2; exit 1; }
+    $php_shtool mkdir -p $ext_builddir/lib
   
-  fi
-
-fi
-
-
-# Local macros for automake & autoconf
-
-
-
-
-
-
 
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST ZIP_SHARED_LIBADD"
 
 
+    
+  src=$ext_srcdir/Makefile.frag
+  ac_srcdir=$ext_srcdir
+  ac_builddir=$ext_builddir
+  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments
 
+fi
 
 
 
-php_with_xmlrpc=no
+php_enable_http=no
 
-echo $ac_n "checking for XMLRPC-EPI support""... $ac_c" 1>&6
-echo "configure:98944: checking for XMLRPC-EPI support" >&5
-# Check whether --with-xmlrpc or --without-xmlrpc was given.
-if test "${with_xmlrpc+set}" = set; then
-  withval="$with_xmlrpc"
-  PHP_XMLRPC=$withval
+echo $ac_n "checking whether to enable extended HTTP support""... $ac_c" 1>&6
+echo "configure:105416: checking whether to enable extended HTTP support" >&5
+# Check whether --enable-http or --disable-http was given.
+if test "${enable_http+set}" = set; then
+  enableval="$enable_http"
+  PHP_HTTP=$enableval
 else
   
-  PHP_XMLRPC=no
-  test "$PHP_ENABLE_ALL" && PHP_XMLRPC=$PHP_ENABLE_ALL
+  PHP_HTTP=no
+  test "$PHP_ENABLE_ALL" && PHP_HTTP=$PHP_ENABLE_ALL
 
 fi
 
@@ -98956,12 +105428,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_XMLRPC in
+case $PHP_HTTP in
 shared,*)
-  PHP_XMLRPC=`echo "$PHP_XMLRPC"|$SED 's/^shared,//'`
+  PHP_HTTP=`echo "$PHP_HTTP"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_XMLRPC=yes
+  PHP_HTTP=yes
   ;;
 no)
   ext_output=no
@@ -98973,828 +105445,482 @@ no)
   ;;
 esac
 
-
-
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test -z "$PHP_LIBXML_DIR"; then
-  
-php_with_libxml_dir=no
-
-echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
-echo "configure:98989: checking libxml2 install dir" >&5
-# Check whether --with-libxml-dir or --without-libxml-dir was given.
-if test "${with_libxml_dir+set}" = set; then
-  withval="$with_libxml_dir"
-  PHP_LIBXML_DIR=$withval
-else
-  
-  PHP_LIBXML_DIR=no
-  
-
-fi
-
-
-ext_output=$PHP_LIBXML_DIR
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-fi
-
-
-php_with_libexpat_dir=no
-
-echo $ac_n "checking libexpat dir for XMLRPC-EPI""... $ac_c" 1>&6
-echo "configure:99013: checking libexpat dir for XMLRPC-EPI" >&5
-# Check whether --with-libexpat-dir or --without-libexpat-dir was given.
-if test "${with_libexpat_dir+set}" = set; then
-  withval="$with_libexpat_dir"
-  PHP_LIBEXPAT_DIR=$withval
-else
-  
-  PHP_LIBEXPAT_DIR=no
-  
-
-fi
-
-
-ext_output=$PHP_LIBEXPAT_DIR
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-
-php_with_iconv_dir=no
-
-echo $ac_n "checking iconv dir for XMLRPC-EPI""... $ac_c" 1>&6
-echo "configure:99036: checking iconv dir for XMLRPC-EPI" >&5
-# Check whether --with-iconv-dir or --without-iconv-dir was given.
-if test "${with_iconv_dir+set}" = set; then
-  withval="$with_iconv_dir"
-  PHP_ICONV_DIR=$withval
-else
-  
-  PHP_ICONV_DIR=no
-  
-
-fi
-
-
-ext_output=$PHP_ICONV_DIR
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test "$PHP_XMLRPC" != "no"; then
-
-  
-  am_i_shared=$PHP_XMLRPC_SHARED
-  is_it_shared=$PHP_LIBXML_SHARED
-  is_it_enabled=$PHP_LIBXML
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension xmlrpc to build statically, but it
-depends on extension libxml, which you've configured to build shared.
-You either need to build xmlrpc shared or build libxml statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension xmlrpc, which depends on extension libxml,
-but you've either not enabled libxml, or have disabled it.
-" 1>&2; exit 1; }
-  fi
-  
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLRPC_SHARED_LIBADD"
-
-  cat >> confdefs.h <<\EOF
-#define HAVE_XMLRPC 1
-EOF
-
-
-        if test "$PHP_LIBEXPAT_DIR" = "no"; then
-
-    if test "$PHP_LIBXML" = "no"; then
-      { echo "configure: error: XML-RPC extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
-    fi
-
-    
-echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
-echo "configure:99092: checking for xml2-config path" >&5
-if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-  for i in $PHP_LIBXML_DIR /usr/local /usr; do
-    if test -x "$i/bin/xml2-config"; then
-      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
-      break
-    fi
-  done
-
-fi
-
-echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6
-
-  if test -x "$ac_cv_php_xml2_config_path"; then
-    XML2_CONFIG="$ac_cv_php_xml2_config_path"
-    libxml_full_version=`$XML2_CONFIG --version`
-    ac_IFS=$IFS
-    IFS="."
-    set $libxml_full_version
-    IFS=$ac_IFS
-    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
-    if test "$LIBXML_VERSION" -ge "2006011"; then
-      LIBXML_LIBS=`$XML2_CONFIG --libs`
-      LIBXML_INCS=`$XML2_CONFIG --cflags`
-      
-  for ac_i in $LIBXML_LIBS; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        XMLRPC_SHARED_LIBADD="$XMLRPC_SHARED_LIBADD -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        XMLRPC_SHARED_LIBADD="$XMLRPC_SHARED_LIBADD -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        XMLRPC_SHARED_LIBADD="-L$ai_p $XMLRPC_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLRPC_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-      fi
-    
-  fi
-
-    ;;
-    esac
-  done
-
-      
-  for ac_i in $LIBXML_INCS; do
-    case $ac_i in
-    -I*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/include"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
-
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
-
-    ;;
-    esac
-  done
-
-
-            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
-echo "configure:99250: checking whether libxml build works" >&5
-if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-        
-  old_LIBS=$LIBS
-  LIBS="
-          $XMLRPC_SHARED_LIBADD
-         $LIBS"
-  if test "$cross_compiling" = yes; then
-  
-    LIBS=$old_LIBS
-  
-else
-  cat > conftest.$ac_ext <<EOF
-#line 99266 "configure"
-#include "confdefs.h"
-
-    
-    char xmlInitParser();
-    int main() {
-      xmlInitParser();
-      return 0;
-    }
-  
-EOF
-if { (eval echo configure:99277: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-    LIBS=$old_LIBS
-    
-          php_cv_libxml_build_works=yes
-        
-  
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  
-    LIBS=$old_LIBS
-    
-          echo "$ac_t""no" 1>&6
-          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
-        
-  
-fi
-rm -fr conftest*
-fi
-
-
-      
-fi
-
-echo "$ac_t""$php_cv_libxml_build_works" 1>&6
-      if test "$php_cv_libxml_build_works" = "yes"; then
-        cat >> confdefs.h <<\EOF
-#define HAVE_LIBXML 1
-EOF
-
-      fi
-      
-      if test "$PHP_XML" = "no"; then
-        
-  
-  case ext/xml in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in compat.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-        
-  
-    BUILD_DIR="$BUILD_DIR ext/xml"
-  
-
-      fi
-    
-    else
-      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
-    fi
-else 
-      { echo "configure: error: xml2-config not found. Use --with-libxml-dir=<DIR>" 1>&2; exit 1; }
-    
-  fi
-
-  else
-    testval=no
-    for i in $PHP_LIBEXPAT_DIR $XMLRPC_DIR /usr/local /usr; do
-      if test -f $i/$PHP_LIBDIR/libexpat.a || test -f $i/$PHP_LIBDIR/libexpat.$SHLIB_SUFFIX_NAME; then
-        cat >> confdefs.h <<\EOF
-#define HAVE_LIBEXPAT 1
-EOF
-
-        
-
-  if test "$ext_shared" = "yes"; then
-    XMLRPC_SHARED_LIBADD="-lexpat $XMLRPC_SHARED_LIBADD"
-    if test -n "$i/$PHP_LIBDIR"; then
-      
-  if test "$i/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$i/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$i/$PHP_LIBDIR" || echo "$i/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$i/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $i/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$i/$PHP_LIBDIR\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        XMLRPC_SHARED_LIBADD="-L$ai_p $XMLRPC_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLRPC_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+php_with_http_shared_deps=$PHP_HTTP
+
+echo $ac_n "checking whether to depend on extensions which have been built shared""... $ac_c" 1>&6
+echo "configure:105459: checking whether to depend on extensions which have been built shared" >&5
+# Check whether --with-http-shared-deps or --without-http-shared-deps was given.
+if test "${with_http_shared_deps+set}" = set; then
+  withval="$with_http_shared_deps"
+  PHP_HTTP_SHARED_DEPS=$withval
+else
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  PHP_HTTP_SHARED_DEPS=$PHP_HTTP
   
-  fi
 
+fi
 
-      fi
-    
-  fi
 
-    fi
-  else
-    
+ext_output=$PHP_HTTP_SHARED_DEPS
+echo "$ac_t""$ext_output" 1>&6
 
-  if test -n "$i/$PHP_LIBDIR"; then
-    
-  if test "$i/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$i/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$i/$PHP_LIBDIR" || echo "$i/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$i/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $i/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$i/$PHP_LIBDIR\"`"
-  fi
 
-    
-      
+
+
+php_with_http_curl_requests=$PHP_HTTP
+
+echo $ac_n "checking whether to enable cURL HTTP request support""... $ac_c" 1>&6
+echo "configure:105481: checking whether to enable cURL HTTP request support" >&5
+# Check whether --with-http-curl-requests or --without-http-curl-requests was given.
+if test "${with_http_curl_requests+set}" = set; then
+  withval="$with_http_curl_requests"
+  PHP_HTTP_CURL_REQUESTS=$withval
+else
   
+  PHP_HTTP_CURL_REQUESTS=$PHP_HTTP
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+
+fi
+
+
+ext_output=$PHP_HTTP_CURL_REQUESTS
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+php_with_http_curl_libevent=$PHP_HTTP_CURL_REQUESTS
+
+echo $ac_n "checking whether to enable libevent support fur cURL""... $ac_c" 1>&6
+echo "configure:105503: checking whether to enable libevent support fur cURL" >&5
+# Check whether --with-http-curl-libevent or --without-http-curl-libevent was given.
+if test "${with_http_curl_libevent+set}" = set; then
+  withval="$with_http_curl_libevent"
+  PHP_HTTP_CURL_LIBEVENT=$withval
+else
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  PHP_HTTP_CURL_LIBEVENT=$PHP_HTTP_CURL_REQUESTS
   
-  fi
 
+fi
 
-    
-  fi
 
-  fi
+ext_output=$PHP_HTTP_CURL_LIBEVENT
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+php_with_http_zlib_compression=$PHP_HTTP
+
+echo $ac_n "checking whether to enable zlib encodings support""... $ac_c" 1>&6
+echo "configure:105525: checking whether to enable zlib encodings support" >&5
+# Check whether --with-http-zlib-compression or --without-http-zlib-compression was given.
+if test "${with_http_zlib_compression+set}" = set; then
+  withval="$with_http_zlib_compression"
+  PHP_HTTP_ZLIB_COMPRESSION=$withval
+else
   
+  PHP_HTTP_ZLIB_COMPRESSION=$PHP_HTTP
   
-  case expat in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lexpat $LIBS" 
-   ;;
-  esac
 
+fi
 
 
+ext_output=$PHP_HTTP_ZLIB_COMPRESSION
+echo "$ac_t""$ext_output" 1>&6
 
-  fi
 
 
-        
-  if test "$i/include" != "/usr/include"; then
-    
-  if test -z "$i/include" || echo "$i/include" | grep '^/' >/dev/null ; then
-    ai_p=$i/include
-  else
-    
-    ep_dir="`echo $i/include|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$i/include\"`"
-  fi
 
-    
+php_with_http_magic_mime="no"
+
+echo $ac_n "checking whether to enable response content type guessing""... $ac_c" 1>&6
+echo "configure:105547: checking whether to enable response content type guessing" >&5
+# Check whether --with-http-magic-mime or --without-http-magic-mime was given.
+if test "${with_http_magic_mime+set}" = set; then
+  withval="$with_http_magic_mime"
+  PHP_HTTP_MAGIC_MIME=$withval
+else
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  PHP_HTTP_MAGIC_MIME="no"
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
 
-  fi
+fi
 
-        testval=yes
-        break
-      fi
-    done
 
-    if test "$testval" = "no"; then
-      { echo "configure: error: XML-RPC support requires libexpat. Use --with-libexpat-dir=<DIR> (deprecated!)" 1>&2; exit 1; }
-    fi
-  fi
+ext_output=$PHP_HTTP_MAGIC_MIME
+echo "$ac_t""$ext_output" 1>&6
 
-    if test "$PHP_ICONV_SHARED" = "yes" || test "$PHP_ICONV" = "no"; then
 
-    if test "$PHP_ICONV_DIR" != "no"; then
-      PHP_ICONV=$PHP_ICONV_DIR
+
+
+if test "$PHP_HTTP" != "no"; then
+
+	
+		echo $ac_n "checking for egrep""... $ac_c" 1>&6
+echo "configure:105570: checking for egrep" >&5
+if eval "test \"`echo '$''{'ac_cv_prog_egrep'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if echo a | (grep -E '(a|b)') >/dev/null 2>&1
+    then ac_cv_prog_egrep='grep -E'
+    else ac_cv_prog_egrep='egrep'
     fi
-  
-    if test -z "$PHP_ICONV" || test "$PHP_ICONV" = "no"; then
-      PHP_ICONV=yes
+fi
+
+echo "$ac_t""$ac_cv_prog_egrep" 1>&6
+ EGREP=$ac_cv_prog_egrep
+ 
+
+	
+	
+		
+			echo $ac_n "checking for a sed that does not truncate output""... $ac_c" 1>&6
+echo "configure:105588: checking for a sed that does not truncate output" >&5
+if eval "test \"`echo '$''{'lt_cv_path_SED'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  # Loop through the user's path and test for sed and gsed.
+# Then use that list of sed's as ones to test for truncation.
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for lt_ac_prog in sed gsed; do
+    for ac_exec_ext in '' $ac_executable_extensions; do
+      if test -f "$as_dir/$lt_ac_prog$ac_exec_ext"; then
+        lt_ac_sed_list="$lt_ac_sed_list $as_dir/$lt_ac_prog$ac_exec_ext"
+      fi
+    done
+  done
+done
+lt_ac_max=0
+lt_ac_count=0
+# Add /usr/xpg4/bin/sed as it is typically found on Solaris
+# along with /bin/sed that truncates output.
+for lt_ac_sed in $lt_ac_sed_list /usr/xpg4/bin/sed; do
+  test ! -f $lt_ac_sed && continue
+  cat /dev/null > conftest.in
+  lt_ac_count=0
+  echo $ECHO_N "0123456789$ECHO_C" >conftest.in
+  # Check for GNU sed and select it if it is found.
+  if "$lt_ac_sed" --version 2>&1 < /dev/null | grep 'GNU' > /dev/null; then
+    lt_cv_path_SED=$lt_ac_sed
+    break
+  fi
+  while true; do
+    cat conftest.in conftest.in >conftest.tmp
+    mv conftest.tmp conftest.in
+    cp conftest.in conftest.nl
+    echo >>conftest.nl
+    $lt_ac_sed -e 's/a$//' < conftest.nl >conftest.out || break
+    cmp -s conftest.out conftest.nl || break
+    # 10000 chars as input seems more than enough
+    test $lt_ac_count -gt 10 && break
+    lt_ac_count=`expr $lt_ac_count + 1`
+    if test $lt_ac_count -gt $lt_ac_max; then
+      lt_ac_max=$lt_ac_count
+      lt_cv_path_SED=$lt_ac_sed
     fi
-  
-    
-  found_iconv=no
-  unset ICONV_DIR
+  done
+done
 
-  # Create the directories for a VPATH build:
-  $php_shtool mkdir -p ext/iconv
+fi
 
-  echo > ext/iconv/php_have_bsd_iconv.h
-  echo > ext/iconv/php_have_ibm_iconv.h
-  echo > ext/iconv/php_have_glibc_iconv.h
-  echo > ext/iconv/php_have_libiconv.h
-  echo > ext/iconv/php_have_iconv.h
-  echo > ext/iconv/php_php_iconv_impl.h
-  echo > ext/iconv/php_iconv_aliased_libiconv.h
-  echo > ext/iconv/php_php_iconv_h_path.h
-  echo > ext/iconv/php_iconv_supports_errno.h
+SED=$lt_cv_path_SED
+echo "$ac_t""$SED" 1>&6
 
-        if test "$PHP_ICONV" = "yes"; then
-    echo $ac_n "checking for iconv""... $ac_c" 1>&6
-echo "configure:99546: checking for iconv" >&5
-if eval "test \"`echo '$''{'ac_cv_func_iconv'+set}'`\" = set"; then
+		
+	
+	
+	echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
+echo "configure:105647: checking how to run the C preprocessor" >&5
+# On Suns, sometimes $CPP names a directory.
+if test -n "$CPP" && test -d "$CPP"; then
+  CPP=
+fi
+if test -z "$CPP"; then
+if eval "test \"`echo '$''{'ac_cv_prog_CPP'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
+    # This must be in double quotes, not single quotes, because CPP may get
+  # substituted into the Makefile and "${CC-cc}" will confuse make.
+  CPP="${CC-cc} -E"
+  # On the NeXT, cc -E runs the code through the compiler's parser,
+  # not just through cpp.
   cat > conftest.$ac_ext <<EOF
-#line 99551 "configure"
+#line 105662 "configure"
 #include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char iconv(); below.  */
 #include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char iconv();
+Syntax Error
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:105668: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  :
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  CPP="${CC-cc} -E -traditional-cpp"
+  cat > conftest.$ac_ext <<EOF
+#line 105679 "configure"
+#include "confdefs.h"
+#include <assert.h>
+Syntax Error
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:105685: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  :
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  CPP="${CC-cc} -nologo -E"
+  cat > conftest.$ac_ext <<EOF
+#line 105696 "configure"
+#include "confdefs.h"
+#include <assert.h>
+Syntax Error
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:105702: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  :
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  CPP=/lib/cpp
+fi
+rm -f conftest*
+fi
+rm -f conftest*
+fi
+rm -f conftest*
+  ac_cv_prog_CPP="$CPP"
+fi
+  CPP="$ac_cv_prog_CPP"
+else
+  ac_cv_prog_CPP="$CPP"
+fi
+echo "$ac_t""$CPP" 1>&6
 
-int main() {
+	
+	if test "$PHP_HTTP_SHARED_DEPS" != "no"; then
+		cat >> confdefs.h <<\EOF
+#define HTTP_SHARED_DEPS 1
+EOF
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_iconv) || defined (__stub___iconv)
-choke me
-#else
-iconv();
-#endif
+	else
+		cat >> confdefs.h <<\EOF
+#define HTTP_SHARED_DEPS 0
+EOF
 
-; return 0; }
+	fi
+	
+				
+	
+				
+	
+				if test "x$PHP_LIBDIR" = "x"; then
+		PHP_LIBDIR=lib
+	fi
+
+	for ac_hdr in netdb.h unistd.h
+do
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:105751: checking for $ac_hdr" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 105756 "configure"
+#include "confdefs.h"
+#include <$ac_hdr>
 EOF
-if { (eval echo configure:99574: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:105761: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
   rm -rf conftest*
-  eval "ac_cv_func_iconv=yes"
+  eval "ac_cv_header_$ac_safe=yes"
 else
+  echo "$ac_err" >&5
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_func_iconv=no"
+  eval "ac_cv_header_$ac_safe=no"
 fi
 rm -f conftest*
 fi
-
-if eval "test \"`echo '$ac_cv_func_'iconv`\" = yes"; then
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  
-      found_iconv=yes
-    
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_hdr 1
+EOF
+ 
 else
   echo "$ac_t""no" 1>&6
+fi
+done
 
-      echo $ac_n "checking for libiconv""... $ac_c" 1>&6
-echo "configure:99595: checking for libiconv" >&5
-if eval "test \"`echo '$''{'ac_cv_func_libiconv'+set}'`\" = set"; then
+	
+  unset ac_cv_func_gethostname
+  unset ac_cv_func___gethostname
+  unset found
+  
+  echo $ac_n "checking for gethostname""... $ac_c" 1>&6
+echo "configure:105793: checking for gethostname" >&5
+if eval "test \"`echo '$''{'ac_cv_func_gethostname'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 99600 "configure"
+#line 105798 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char libiconv(); below.  */
+    which can conflict with char gethostname(); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char libiconv();
+char gethostname();
 
 int main() {
 
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
-#if defined (__stub_libiconv) || defined (__stub___libiconv)
+#if defined (__stub_gethostname) || defined (__stub___gethostname)
 choke me
 #else
-libiconv();
+gethostname();
 #endif
 
 ; return 0; }
 EOF
-if { (eval echo configure:99623: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:105821: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  eval "ac_cv_func_libiconv=yes"
+  eval "ac_cv_func_gethostname=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_func_libiconv=no"
+  eval "ac_cv_func_gethostname=no"
 fi
 rm -f conftest*
 fi
 
-if eval "test \"`echo '$ac_cv_func_'libiconv`\" = yes"; then
+if eval "test \"`echo '$ac_cv_func_'gethostname`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  
-        
-  echo "#define HAVE_LIBICONV 1" > ext/iconv/php_have_libiconv.h
-
-        cat >> confdefs.h <<\EOF
-#define HAVE_LIBICONV 1
-EOF
-
-        found_iconv=yes
-      
+  found=yes
 else
   echo "$ac_t""no" 1>&6
-fi
-
-    
-fi
-
-  fi
-
-        if test "$found_iconv" = "no"; then
-
-    for i in $PHP_ICONV /usr/local /usr; do
-      if test -r $i/include/giconv.h; then
-        cat >> confdefs.h <<\EOF
-#define HAVE_GICONV_H 1
-EOF
-
-        ICONV_DIR=$i
-        iconv_lib_name=giconv
-        break
-      elif test -r $i/include/iconv.h; then
-        ICONV_DIR=$i
-        iconv_lib_name=iconv
-        break
-      fi
-    done
-
-    if test -z "$ICONV_DIR"; then
-      { echo "configure: error: Please specify the install prefix of iconv with --with-iconv=<DIR>" 1>&2; exit 1; }
-    fi
-  
-    if test -f $ICONV_DIR/$PHP_LIBDIR/lib$iconv_lib_name.a ||
-       test -f $ICONV_DIR/$PHP_LIBDIR/lib$iconv_lib_name.$SHLIB_SUFFIX_NAME
-    then
-      
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-        -L$ICONV_DIR/$PHP_LIBDIR
-      "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
+ echo $ac_n "checking for __gethostname""... $ac_c" 1>&6
+echo "configure:105839: checking for __gethostname" >&5
+if eval "test \"`echo '$''{'ac_cv_func___gethostname'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 105844 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char __gethostname(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __gethostname();
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
+int main() {
 
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub___gethostname) || defined (__stub_____gethostname)
+choke me
+#else
+__gethostname();
+#endif
 
+; return 0; }
+EOF
+if { (eval echo configure:105867: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func___gethostname=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func___gethostname=no"
+fi
+rm -f conftest*
+fi
 
-      fi
-    
-  fi
+if eval "test \"`echo '$ac_cv_func_'__gethostname`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
+ 
+fi
 
-    ;;
-    esac
-  done
 
-  echo $ac_n "checking for libiconv in -l$iconv_lib_name""... $ac_c" 1>&6
-echo "configure:99779: checking for libiconv in -l$iconv_lib_name" >&5
-ac_lib_var=`echo $iconv_lib_name'_'libiconv | sed 'y%./+-%__p_%'`
+  case $found in
+  yes) 
+    cat >> confdefs.h <<\EOF
+#define HAVE_GETHOSTNAME 1
+EOF
+
+    ac_cv_func_gethostname=yes
+  ;;
+  
+    *) 
+  
+  unset ac_cv_lib_nsl_gethostname
+  unset ac_cv_lib_nsl___gethostname
+  unset found
+  echo $ac_n "checking for gethostname in -lnsl""... $ac_c" 1>&6
+echo "configure:105905: checking for gethostname in -lnsl" >&5
+ac_lib_var=`echo nsl'_'gethostname | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-l$iconv_lib_name  $LIBS"
+LIBS="-lnsl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 99787 "configure"
+#line 105913 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char libiconv();
+char gethostname();
 
 int main() {
-libiconv()
+gethostname()
 ; return 0; }
 EOF
-if { (eval echo configure:99798: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:105924: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -99809,152 +105935,31 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-        found_iconv=yes
-        
-  echo "#define HAVE_LIBICONV 1" > ext/iconv/php_have_libiconv.h
-
-        cat >> confdefs.h <<\EOF
-#define HAVE_LIBICONV 1
-EOF
-
-        
-  echo "#define ICONV_ALIASED_LIBICONV 1" > ext/iconv/php_iconv_aliased_libiconv.h
-
-        cat >> confdefs.h <<\EOF
-#define ICONV_ALIASED_LIBICONV 1
-EOF
-
-      
-  
+  found=yes
 else
   echo "$ac_t""no" 1>&6
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_$iconv_lib_name_libiconv
-    
-        
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-          -L$ICONV_DIR/$PHP_LIBDIR
-        "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-      fi
-    
-  fi
-
-    ;;
-    esac
-  done
-
-  echo $ac_n "checking for iconv in -l$iconv_lib_name""... $ac_c" 1>&6
-echo "configure:99939: checking for iconv in -l$iconv_lib_name" >&5
-ac_lib_var=`echo $iconv_lib_name'_'iconv | sed 'y%./+-%__p_%'`
+    echo $ac_n "checking for __gethostname in -lnsl""... $ac_c" 1>&6
+echo "configure:105944: checking for __gethostname in -lnsl" >&5
+ac_lib_var=`echo nsl'_'__gethostname | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-l$iconv_lib_name  $LIBS"
+LIBS="-lnsl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 99947 "configure"
+#line 105952 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char iconv();
+char __gethostname();
 
 int main() {
-iconv()
+__gethostname()
 ; return 0; }
 EOF
-if { (eval echo configure:99958: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:105963: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -99969,1088 +105974,1259 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-          found_iconv=yes
-        
-  
+  found=yes
 else
   echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_$iconv_lib_name_iconv
-    
-  
+found=no
 fi
 
-      
   
 fi
 
-    fi
-  fi
-
-  if test "$found_iconv" = "yes"; then
-    
-  echo "#define HAVE_ICONV 1" > ext/iconv/php_have_iconv.h
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_ICONV 1
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lnsl"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 105995 "configure"
+#include "confdefs.h"
+main() { return (0); }
 EOF
+if { (eval echo configure:105999: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
 
-    if test -n "$ICONV_DIR"; then
-      
-
-  if test "$ext_shared" = "yes"; then
-    XMLRPC_SHARED_LIBADD="-l$iconv_lib_name $XMLRPC_SHARED_LIBADD"
-    if test -n "$ICONV_DIR/$PHP_LIBDIR"; then
-      
-  if test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$ICONV_DIR/$PHP_LIBDIR" || echo "$ICONV_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$ICONV_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $ICONV_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ICONV_DIR/$PHP_LIBDIR\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        XMLRPC_SHARED_LIBADD="-L$ai_p $XMLRPC_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLRPC_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-      fi
-    
-  fi
-
-    fi
-  else
-    
-
-  if test -n "$ICONV_DIR/$PHP_LIBDIR"; then
-    
-  if test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$ICONV_DIR/$PHP_LIBDIR" || echo "$ICONV_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$ICONV_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $ICONV_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ICONV_DIR/$PHP_LIBDIR\"`"
-  fi
-
-    
-      
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
+    LIBS=$ac_libs
   fi
 
-
+  if test "$found" = "yes"; then
     
-  fi
-
-  fi
   
-  
-  case $iconv_lib_name in
+  case nsl in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-l$iconv_lib_name $LIBS" 
+      LIBS="-lnsl $LIBS" 
    ;;
   esac
 
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_GETHOSTNAME 1
+EOF
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBNSL 1
+EOF
 
-  fi
-
-
-      
-  if test "$ICONV_DIR/include" != "/usr/include"; then
-    
-  if test -z "$ICONV_DIR/include" || echo "$ICONV_DIR/include" | grep '^/' >/dev/null ; then
-    ai_p=$ICONV_DIR/include
+    ac_cv_func_gethostname=yes
   else
     
-    ep_dir="`echo $ICONV_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ICONV_DIR/include\"`"
-  fi
+  :
 
-    
+  fi
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+ ;;
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
+  esac
 
-  fi
+	
+  unset ac_cv_func_getdomainname
+  unset ac_cv_func___getdomainname
+  unset found
+  
+  echo $ac_n "checking for getdomainname""... $ac_c" 1>&6
+echo "configure:106050: checking for getdomainname" >&5
+if eval "test \"`echo '$''{'ac_cv_func_getdomainname'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 106055 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char getdomainname(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char getdomainname();
 
-    fi
-    
-else 
-      { echo "configure: error: iconv not found, in order to build xmlrpc you need the iconv library" 1>&2; exit 1; }
-    
-  fi
+int main() {
 
-  fi
-fi
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_getdomainname) || defined (__stub___getdomainname)
+choke me
+#else
+getdomainname();
+#endif
 
-if test "$PHP_XMLRPC" = "yes"; then
-  # Extract the first word of "ranlib", so it can be a program name with args.
-set dummy ranlib; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:100148: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test -n "$RANLIB"; then
-  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
+; return 0; }
+EOF
+if { (eval echo configure:106078: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_getdomainname=yes"
 else
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_prog_RANLIB="ranlib"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
-  test -z "$ac_cv_prog_RANLIB" && ac_cv_prog_RANLIB=":"
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_getdomainname=no"
 fi
+rm -f conftest*
 fi
-RANLIB="$ac_cv_prog_RANLIB"
-if test -n "$RANLIB"; then
-  echo "$ac_t""$RANLIB" 1>&6
+
+if eval "test \"`echo '$ac_cv_func_'getdomainname`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
 else
   echo "$ac_t""no" 1>&6
-fi
-
-echo $ac_n "checking for inline""... $ac_c" 1>&6
-echo "configure:100176: checking for inline" >&5
-if eval "test \"`echo '$''{'ac_cv_c_inline'+set}'`\" = set"; then
+ echo $ac_n "checking for __getdomainname""... $ac_c" 1>&6
+echo "configure:106096: checking for __getdomainname" >&5
+if eval "test \"`echo '$''{'ac_cv_func___getdomainname'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  ac_cv_c_inline=no
-for ac_kw in inline __inline__ __inline; do
   cat > conftest.$ac_ext <<EOF
-#line 100183 "configure"
+#line 106101 "configure"
 #include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char __getdomainname(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __getdomainname();
 
 int main() {
-} $ac_kw foo() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub___getdomainname) || defined (__stub_____getdomainname)
+choke me
+#else
+__getdomainname();
+#endif
+
 ; return 0; }
 EOF
-if { (eval echo configure:100190: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:106124: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  ac_cv_c_inline=$ac_kw; break
+  eval "ac_cv_func___getdomainname=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func___getdomainname=no"
 fi
 rm -f conftest*
-done
-
 fi
 
-echo "$ac_t""$ac_cv_c_inline" 1>&6
-case "$ac_cv_c_inline" in
-  inline | yes) ;;
-  no) cat >> confdefs.h <<\EOF
-#define inline 
-EOF
- ;;
-  *)  cat >> confdefs.h <<EOF
-#define inline $ac_cv_c_inline
-EOF
- ;;
-esac
-
-	
-
-
-
+if eval "test \"`echo '$ac_cv_func_'__getdomainname`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
+ 
+fi
 
 
-cat >> confdefs.h <<\EOF
-#define UNDEF_THREADS_HACK 
+  case $found in
+  yes) 
+    cat >> confdefs.h <<\EOF
+#define HAVE_GETDOMAINNAME 1
 EOF
 
-
-
-echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
-echo "configure:100228: checking for ANSI C header files" >&5
-if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
+    ac_cv_func_getdomainname=yes
+  ;;
+  
+    *) 
+  
+  unset ac_cv_lib_nsl_getdomainname
+  unset ac_cv_lib_nsl___getdomainname
+  unset found
+  echo $ac_n "checking for getdomainname in -lnsl""... $ac_c" 1>&6
+echo "configure:106162: checking for getdomainname in -lnsl" >&5
+ac_lib_var=`echo nsl'_'getdomainname | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 100233 "configure"
-#include "confdefs.h"
-#include <stdlib.h>
-#include <stdarg.h>
-#include <string.h>
-#include <float.h>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:100241: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  ac_cv_header_stdc=yes
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_header_stdc=no
-fi
-rm -f conftest*
-
-if test $ac_cv_header_stdc = yes; then
-  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
+  ac_save_LIBS="$LIBS"
+LIBS="-lnsl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 100258 "configure"
+#line 106170 "configure"
 #include "confdefs.h"
-#include <string.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char getdomainname();
+
+int main() {
+getdomainname()
+; return 0; }
 EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "memchr" >/dev/null 2>&1; then
-  :
+if { (eval echo configure:106181: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
   rm -rf conftest*
-  ac_cv_header_stdc=no
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
 rm -f conftest*
+LIBS="$ac_save_LIBS"
 
 fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-if test $ac_cv_header_stdc = yes; then
-  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
+    echo $ac_n "checking for __getdomainname in -lnsl""... $ac_c" 1>&6
+echo "configure:106201: checking for __getdomainname in -lnsl" >&5
+ac_lib_var=`echo nsl'_'__getdomainname | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lnsl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 100276 "configure"
+#line 106209 "configure"
 #include "confdefs.h"
-#include <stdlib.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __getdomainname();
+
+int main() {
+__getdomainname()
+; return 0; }
 EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "free" >/dev/null 2>&1; then
-  :
+if { (eval echo configure:106220: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
   rm -rf conftest*
-  ac_cv_header_stdc=no
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
 rm -f conftest*
+LIBS="$ac_save_LIBS"
 
 fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
 
-if test $ac_cv_header_stdc = yes; then
-  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
-if test "$cross_compiling" = yes; then
-  :
+  
+fi
+
+
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lnsl"
+    if test "$cross_compiling" = yes; then
+  found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 100297 "configure"
+#line 106252 "configure"
 #include "confdefs.h"
-#include <ctype.h>
-#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
-#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
-#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
-int main () { int i; for (i = 0; i < 256; i++)
-if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
-exit (0); }
-
+main() { return (0); }
 EOF
-if { (eval echo configure:100308: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:106256: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
-  :
+  found=yes
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -fr conftest*
-  ac_cv_header_stdc=no
+  found=no
 fi
 rm -fr conftest*
 fi
 
-fi
-fi
+    LIBS=$ac_libs
+  fi
 
-echo "$ac_t""$ac_cv_header_stdc" 1>&6
-if test $ac_cv_header_stdc = yes; then
-  cat >> confdefs.h <<\EOF
-#define STDC_HEADERS 1
+  if test "$found" = "yes"; then
+    
+  
+  case nsl in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lnsl $LIBS" 
+   ;;
+  esac
+
+
+    cat >> confdefs.h <<\EOF
+#define HAVE_GETDOMAINNAME 1
 EOF
 
-fi
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBNSL 1
+EOF
 
-for ac_hdr in xmlparse.h xmltok.h stdlib.h strings.h string.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:100335: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+    ac_cv_func_getdomainname=yes
+  else
+    
+  :
+
+  fi
+  
+ ;;
+  
+  esac
+
+	
+  unset ac_cv_func_getservbyport
+  unset ac_cv_func___getservbyport
+  unset found
+  
+  echo $ac_n "checking for getservbyport""... $ac_c" 1>&6
+echo "configure:106307: checking for getservbyport" >&5
+if eval "test \"`echo '$''{'ac_cv_func_getservbyport'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 100340 "configure"
+#line 106312 "configure"
 #include "confdefs.h"
-#include <$ac_hdr>
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char getservbyport(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char getservbyport();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_getservbyport) || defined (__stub___getservbyport)
+choke me
+#else
+getservbyport();
+#endif
+
+; return 0; }
 EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:100345: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
+if { (eval echo configure:106335: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
+  eval "ac_cv_func_getservbyport=yes"
 else
-  echo "$ac_err" >&5
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
+  eval "ac_cv_func_getservbyport=no"
 fi
 rm -f conftest*
 fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+
+if eval "test \"`echo '$ac_cv_func_'getservbyport`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
+  found=yes
 else
   echo "$ac_t""no" 1>&6
-fi
-done
-
-
-
-
-
-
-echo $ac_n "checking size of char""... $ac_c" 1>&6
-echo "configure:100377: checking size of char" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_char'+set}'`\" = set"; then
+ echo $ac_n "checking for __getservbyport""... $ac_c" 1>&6
+echo "configure:106353: checking for __getservbyport" >&5
+if eval "test \"`echo '$''{'ac_cv_func___getservbyport'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  if test "$cross_compiling" = yes; then
-  ac_cv_sizeof_char=1
-else
   cat > conftest.$ac_ext <<EOF
-#line 100385 "configure"
+#line 106358 "configure"
 #include "confdefs.h"
-#include <stdio.h>
-int main()
-{
-  FILE *f=fopen("conftestval", "w");
-  if (!f) return(1);
-  fprintf(f, "%d\n", sizeof(char));
-  return(0);
-}
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char __getservbyport(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __getservbyport();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub___getservbyport) || defined (__stub_____getservbyport)
+choke me
+#else
+__getservbyport();
+#endif
+
+; return 0; }
 EOF
-if { (eval echo configure:100396: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_sizeof_char=`cat conftestval`
+if { (eval echo configure:106381: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func___getservbyport=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_sizeof_char=0
+  rm -rf conftest*
+  eval "ac_cv_func___getservbyport=no"
 fi
-rm -fr conftest*
+rm -f conftest*
 fi
 
+if eval "test \"`echo '$ac_cv_func_'__getservbyport`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
+ 
 fi
-echo "$ac_t""$ac_cv_sizeof_char" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_CHAR $ac_cv_sizeof_char
-EOF
 
 
+  case $found in
+  yes) 
+    cat >> confdefs.h <<\EOF
+#define HAVE_GETSERVBYPORT 1
+EOF
 
-echo $ac_n "checking size of int""... $ac_c" 1>&6
-echo "configure:100417: checking size of int" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
+    ac_cv_func_getservbyport=yes
+  ;;
+  
+    *) 
+  
+  unset ac_cv_lib_nsl_getservbyport
+  unset ac_cv_lib_nsl___getservbyport
+  unset found
+  echo $ac_n "checking for getservbyport in -lnsl""... $ac_c" 1>&6
+echo "configure:106419: checking for getservbyport in -lnsl" >&5
+ac_lib_var=`echo nsl'_'getservbyport | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  if test "$cross_compiling" = yes; then
-  ac_cv_sizeof_int=4
-else
-  cat > conftest.$ac_ext <<EOF
-#line 100425 "configure"
+  ac_save_LIBS="$LIBS"
+LIBS="-lnsl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 106427 "configure"
 #include "confdefs.h"
-#include <stdio.h>
-int main()
-{
-  FILE *f=fopen("conftestval", "w");
-  if (!f) return(1);
-  fprintf(f, "%d\n", sizeof(int));
-  return(0);
-}
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char getservbyport();
+
+int main() {
+getservbyport()
+; return 0; }
 EOF
-if { (eval echo configure:100436: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_sizeof_int=`cat conftestval`
+if { (eval echo configure:106438: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_sizeof_int=0
-fi
-rm -fr conftest*
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
 fi
-echo "$ac_t""$ac_cv_sizeof_int" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_INT $ac_cv_sizeof_int
-EOF
-
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-echo $ac_n "checking size of long""... $ac_c" 1>&6
-echo "configure:100456: checking size of long" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
+    echo $ac_n "checking for __getservbyport in -lnsl""... $ac_c" 1>&6
+echo "configure:106458: checking for __getservbyport in -lnsl" >&5
+ac_lib_var=`echo nsl'_'__getservbyport | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  if test "$cross_compiling" = yes; then
-  ac_cv_sizeof_long=4
-else
-  cat > conftest.$ac_ext <<EOF
-#line 100464 "configure"
+  ac_save_LIBS="$LIBS"
+LIBS="-lnsl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 106466 "configure"
 #include "confdefs.h"
-#include <stdio.h>
-int main()
-{
-  FILE *f=fopen("conftestval", "w");
-  if (!f) return(1);
-  fprintf(f, "%d\n", sizeof(long));
-  return(0);
-}
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __getservbyport();
+
+int main() {
+__getservbyport()
+; return 0; }
 EOF
-if { (eval echo configure:100475: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_sizeof_long=`cat conftestval`
+if { (eval echo configure:106477: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_sizeof_long=0
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
-rm -fr conftest*
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
 fi
 
+  
 fi
-echo "$ac_t""$ac_cv_sizeof_long" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_LONG $ac_cv_sizeof_long
-EOF
 
 
-echo $ac_n "checking size of long long""... $ac_c" 1>&6
-echo "configure:100495: checking size of long long" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_long_long'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  ac_cv_sizeof_long_long=8
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lnsl"
+    if test "$cross_compiling" = yes; then
+  found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 100503 "configure"
+#line 106509 "configure"
 #include "confdefs.h"
-#include <stdio.h>
-int main()
-{
-  FILE *f=fopen("conftestval", "w");
-  if (!f) return(1);
-  fprintf(f, "%d\n", sizeof(long long));
-  return(0);
-}
+main() { return (0); }
 EOF
-if { (eval echo configure:100514: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:106513: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
-  ac_cv_sizeof_long_long=`cat conftestval`
+  found=yes
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -fr conftest*
-  ac_cv_sizeof_long_long=0
+  found=no
 fi
 rm -fr conftest*
 fi
 
-fi
-echo "$ac_t""$ac_cv_sizeof_long_long" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_LONG_LONG $ac_cv_sizeof_long_long
+    LIBS=$ac_libs
+  fi
+
+  if test "$found" = "yes"; then
+    
+  
+  case nsl in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lnsl $LIBS" 
+   ;;
+  esac
+
+
+    cat >> confdefs.h <<\EOF
+#define HAVE_GETSERVBYPORT 1
 EOF
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBNSL 1
+EOF
 
-echo $ac_n "checking for size_t""... $ac_c" 1>&6
-echo "configure:100534: checking for size_t" >&5
-if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
+    ac_cv_func_getservbyport=yes
+  else
+    
+  :
+
+  fi
+  
+ ;;
+  
+  esac
+
+	
+  unset ac_cv_func_getservbyname
+  unset ac_cv_func___getservbyname
+  unset found
+  
+  echo $ac_n "checking for getservbyname""... $ac_c" 1>&6
+echo "configure:106564: checking for getservbyname" >&5
+if eval "test \"`echo '$''{'ac_cv_func_getservbyname'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 100539 "configure"
+#line 106569 "configure"
 #include "confdefs.h"
-#include <sys/types.h>
-#if STDC_HEADERS
-#include <stdlib.h>
-#include <stddef.h>
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char getservbyname(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char getservbyname();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_getservbyname) || defined (__stub___getservbyname)
+choke me
+#else
+getservbyname();
 #endif
+
+; return 0; }
 EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "(^|[^a-zA-Z_0-9])size_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
+if { (eval echo configure:106592: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  ac_cv_type_size_t=yes
+  eval "ac_cv_func_getservbyname=yes"
 else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
   rm -rf conftest*
-  ac_cv_type_size_t=no
+  eval "ac_cv_func_getservbyname=no"
 fi
 rm -f conftest*
-
-fi
-echo "$ac_t""$ac_cv_type_size_t" 1>&6
-if test $ac_cv_type_size_t = no; then
-  cat >> confdefs.h <<\EOF
-#define size_t unsigned
-EOF
-
 fi
 
-echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
-echo "configure:100567: checking whether time.h and sys/time.h may both be included" >&5
-if eval "test \"`echo '$''{'ac_cv_header_time'+set}'`\" = set"; then
+if eval "test \"`echo '$ac_cv_func_'getservbyname`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+ echo $ac_n "checking for __getservbyname""... $ac_c" 1>&6
+echo "configure:106610: checking for __getservbyname" >&5
+if eval "test \"`echo '$''{'ac_cv_func___getservbyname'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 100572 "configure"
+#line 106615 "configure"
 #include "confdefs.h"
-#include <sys/types.h>
-#include <sys/time.h>
-#include <time.h>
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char __getservbyname(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __getservbyname();
+
 int main() {
-struct tm *tp;
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub___getservbyname) || defined (__stub_____getservbyname)
+choke me
+#else
+__getservbyname();
+#endif
+
 ; return 0; }
 EOF
-if { (eval echo configure:100581: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:106638: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  ac_cv_header_time=yes
+  eval "ac_cv_func___getservbyname=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  ac_cv_header_time=no
+  eval "ac_cv_func___getservbyname=no"
 fi
 rm -f conftest*
 fi
 
-echo "$ac_t""$ac_cv_header_time" 1>&6
-if test $ac_cv_header_time = yes; then
-  cat >> confdefs.h <<\EOF
-#define TIME_WITH_SYS_TIME 1
-EOF
-
+if eval "test \"`echo '$ac_cv_func_'__getservbyname`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
+ 
 fi
 
-echo $ac_n "checking for uid_t in sys/types.h""... $ac_c" 1>&6
-echo "configure:100602: checking for uid_t in sys/types.h" >&5
-if eval "test \"`echo '$''{'ac_cv_type_uid_t'+set}'`\" = set"; then
+
+  case $found in
+  yes) 
+    cat >> confdefs.h <<\EOF
+#define HAVE_GETSERVBYNAME 1
+EOF
+
+    ac_cv_func_getservbyname=yes
+  ;;
+  
+    *) 
+  
+  unset ac_cv_lib_nsl_getservbyname
+  unset ac_cv_lib_nsl___getservbyname
+  unset found
+  echo $ac_n "checking for getservbyname in -lnsl""... $ac_c" 1>&6
+echo "configure:106676: checking for getservbyname in -lnsl" >&5
+ac_lib_var=`echo nsl'_'getservbyname | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 100607 "configure"
+  ac_save_LIBS="$LIBS"
+LIBS="-lnsl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 106684 "configure"
 #include "confdefs.h"
-#include <sys/types.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char getservbyname();
+
+int main() {
+getservbyname()
+; return 0; }
 EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "uid_t" >/dev/null 2>&1; then
+if { (eval echo configure:106695: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  ac_cv_type_uid_t=yes
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
   rm -rf conftest*
-  ac_cv_type_uid_t=no
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
 rm -f conftest*
+LIBS="$ac_save_LIBS"
 
 fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-echo "$ac_t""$ac_cv_type_uid_t" 1>&6
-if test $ac_cv_type_uid_t = no; then
-  cat >> confdefs.h <<\EOF
-#define uid_t int
-EOF
-
-  cat >> confdefs.h <<\EOF
-#define gid_t int
-EOF
-
-fi
-
-
-
-
-
-
-# Standard XMLRPC list
-for ac_func in \
- strtoul strtoull snprintf \
- strstr strpbrk strerror\
- memcpy memmove
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:100647: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+    echo $ac_n "checking for __getservbyname in -lnsl""... $ac_c" 1>&6
+echo "configure:106715: checking for __getservbyname in -lnsl" >&5
+ac_lib_var=`echo nsl'_'__getservbyname | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 100652 "configure"
+  ac_save_LIBS="$LIBS"
+LIBS="-lnsl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 106723 "configure"
 #include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __getservbyname();
 
+int main() {
+__getservbyname()
 ; return 0; }
 EOF
-if { (eval echo configure:100675: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:106734: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
 rm -f conftest*
-fi
+LIBS="$ac_save_LIBS"
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
+  found=yes
 else
   echo "$ac_t""no" 1>&6
+found=no
 fi
-done
-
 
+  
+fi
 
 
-  
-  ext_builddir=ext/xmlrpc
-  ext_srcdir=$abs_srcdir/ext/xmlrpc
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lnsl"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 106766 "configure"
+#include "confdefs.h"
+main() { return (0); }
+EOF
+if { (eval echo configure:106770: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
 
-  ac_extra=`echo "-I@ext_srcdir@/libxmlrpc -DVERSION="0.50""|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
+    LIBS=$ac_libs
+  fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_XMLRPC_SHARED=no
+  if test "$found" = "yes"; then
     
   
-  case ext/xmlrpc in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  case nsl in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lnsl $LIBS" 
+   ;;
   esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
-          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
-          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
-          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
-          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
-          libxmlrpc/xml_to_soap.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+    cat >> confdefs.h <<\EOF
+#define HAVE_GETSERVBYNAME 1
 EOF
-  done
-
-
-    EXT_STATIC="$EXT_STATIC xmlrpc"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
-    fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_XMLRPC_SHARED=yes
-      
-  case ext/xmlrpc in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
-
-
-  old_IFS=$IFS
-  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
-          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
-          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
-          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
-          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
-          libxmlrpc/xml_to_soap.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_xmlrpc="$shared_objects_xmlrpc $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBNSL 1
 EOF
-  done
-
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxmlrpc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(PHPXMLRPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxmlrpc.so '$ext_builddir'/phpxmlrpc.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXMLRPC, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(PHPXMLRPC_SHARED_LIBADD)'
-      ;;
-  esac
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxmlrpc.$suffix"
+    ac_cv_func_getservbyname=yes
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxmlrpc.$suffix"
+    
+  :
+
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpxmlrpc.$suffix: $ext_builddir/phpxmlrpc.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxmlrpc.$suffix \$(phplibdir)
-
-$ext_builddir/phpxmlrpc.$suffix: \$(shared_objects_xmlrpc) \$(PHPXMLRPC_SHARED_DEPENDENCIES)
-	$link_cmd
-
-EOF
-
-          ;;
-        *)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xmlrpc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(XMLRPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xmlrpc.so '$ext_builddir'/xmlrpc.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XMLRPC, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(XMLRPC_SHARED_LIBADD)'
-      ;;
+ ;;
+  
   esac
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xmlrpc.$suffix"
+
+	if test "$PHP_HTTP_ZLIB_COMPRESSION" != "no"; then
+		echo $ac_n "checking for zlib.h""... $ac_c" 1>&6
+echo "configure:106818: checking for zlib.h" >&5
+		ZLIB_DIR=
+		for i in "$PHP_HTTP_ZLIB_COMPRESSION" "$PHP_ZLIB_DIR" "$PHP_ZLIB" /usr/local /usr /opt; do
+			if test -f "$i/include/zlib.h"; then
+				ZLIB_DIR=$i
+				break;
+			fi
+		done
+		if test "x$ZLIB_DIR" = "x"; then
+			echo "$ac_t""not found" 1>&6
+			{ echo "configure: error: could not find zlib.h" 1>&2; exit 1; }
+		else
+			echo "$ac_t""found in $ZLIB_DIR" 1>&6
+			echo $ac_n "checking for zlib version >= 1.2.0.4""... $ac_c" 1>&6
+echo "configure:106832: checking for zlib version >= 1.2.0.4" >&5
+			ZLIB_VERSION=`$EGREP "define ZLIB_VERSION" $ZLIB_DIR/include/zlib.h | $SED -e 's/[^0-9\.]//g'`
+			echo "$ac_t""$ZLIB_VERSION" 1>&6
+			if test `echo $ZLIB_VERSION | $SED -e 's/[^0-9]/ /g' | $AWK '{print $1*1000000 + $2*10000 + $3*100 + $4}'` -lt 1020004; then
+				{ echo "configure: error: libz version greater or equal to 1.2.0.4 required" 1>&2; exit 1; }
+			else
+				
+  if test "$ZLIB_DIR/include" != "/usr/include"; then
+    
+  if test -z "$ZLIB_DIR/include" || echo "$ZLIB_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$ZLIB_DIR/include
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlrpc.$suffix"
+    
+    ep_dir="`echo $ZLIB_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ZLIB_DIR/include\"`"
   fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/xmlrpc.$suffix: $ext_builddir/xmlrpc.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlrpc.$suffix \$(phplibdir)
 
-$ext_builddir/xmlrpc.$suffix: \$(shared_objects_xmlrpc) \$(XMLRPC_SHARED_DEPENDENCIES)
-	$link_cmd
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-EOF
+  fi
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_XMLRPC 1
-EOF
+				
 
-    fi
+  if test "$ext_shared" = "yes"; then
+    HTTP_SHARED_LIBADD="-lz $HTTP_SHARED_LIBADD"
+    if test -n "$ZLIB_DIR/$PHP_LIBDIR"; then
+      
+  if test "$ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$ZLIB_DIR/$PHP_LIBDIR" || echo "$ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$ZLIB_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ZLIB_DIR/$PHP_LIBDIR\"`"
   fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_XMLRPC_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
+    
+      if test "$ext_shared" = "yes"; then
+        HTTP_SHARED_LIBADD="-L$ai_p $HTTP_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && HTTP_SHARED_LIBADD="$ld_runpath_switch$ai_p $HTTP_SHARED_LIBADD"
+      else
         
   
-  case ext/xmlrpc in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
-          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
-          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
-          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
-          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
-          libxmlrpc/xml_to_soap.c; do
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+  fi
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+      fi
+    
+  fi
 
+    fi
+  else
+    
 
-        EXT_STATIC="$EXT_STATIC xmlrpc"
-        ;;
-      *)
-        
+  if test -n "$ZLIB_DIR/$PHP_LIBDIR"; then
+    
+  if test "$ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$ZLIB_DIR/$PHP_LIBDIR" || echo "$ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$ZLIB_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ZLIB_DIR/$PHP_LIBDIR\"`"
+  fi
+
+    
+      
   
-  case ext/xmlrpc in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
-          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
-          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
-          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
-          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
-          libxmlrpc/xml_to_soap.c; do
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+  fi
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
 
+    
+  fi
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
   fi
   
   
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
+  case z in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lz $LIBS" 
+   ;;
+  esac
+
 
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=xmlrpc
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
+
+				cat >> confdefs.h <<\EOF
+#define HTTP_HAVE_ZLIB 1
+EOF
+
+			fi
+		fi
+	fi
+	
+	if test "$PHP_HTTP_CURL_REQUESTS" != "no"; then
+		echo $ac_n "checking for curl/curl.h""... $ac_c" 1>&6
+echo "configure:106976: checking for curl/curl.h" >&5
+		CURL_DIR=
+		for i in "$PHP_HTTP_CURL_REQUESTS" /usr/local /usr /opt; do
+			if test -f "$i/include/curl/curl.h"; then
+				CURL_DIR=$i
+				break
+			fi
+		done
+		if test "x$CURL_DIR" = "x"; then
+			echo "$ac_t""not found" 1>&6
+			{ echo "configure: error: could not find curl/curl.h" 1>&2; exit 1; }
+		else
+			echo "$ac_t""found in $CURL_DIR" 1>&6
+		fi
+		
+		echo $ac_n "checking for curl-config""... $ac_c" 1>&6
+echo "configure:106992: checking for curl-config" >&5
+		CURL_CONFIG=
+		for i in "$CURL_DIR/bin/curl-config" "$CURL_DIR/curl-config" `which curl-config`; do
+			if test -x "$i"; then
+				CURL_CONFIG=$i
+				break
+			fi
+		done
+		if test "x$CURL_CONFIG" = "x"; then
+			echo "$ac_t""not found" 1>&6
+			{ echo "configure: error: could not find curl-config" 1>&2; exit 1; }
+		else
+			echo "$ac_t""found: $CURL_CONFIG" 1>&6
+		fi
+		
+				echo $ac_n "checking for curl version >= 7.12.3""... $ac_c" 1>&6
+echo "configure:107008: checking for curl version >= 7.12.3" >&5
+		CURL_VERSION=`$CURL_CONFIG --version | $SED -e 's/[^0-9\.]//g'`
+		echo "$ac_t""$CURL_VERSION" 1>&6
+		if test `echo $CURL_VERSION | $SED -e 's/[^0-9]/ /g' | $AWK '{print $1*10000 + $2*100 + $3}'` -lt 71203; then
+			{ echo "configure: error: libcurl version greater or equal to 7.12.3 required" 1>&2; exit 1; }
+		fi
+		
+								
+		save_INCLUDES="$INCLUDES"
+		INCLUDES=
+		save_LIBS="$LIBS"
+		LIBS=
+		save_CFLAGS="$CFLAGS"
+		CFLAGS=`$CURL_CONFIG --cflags`
+		save_LDFLAGS="$LDFLAGS"
+		LDFLAGS=`$CURL_CONFIG --libs`
+		LDFLAGS="$LDFLAGS $ld_runpath_switch$CURL_DIR/$PHP_LIBDIR"
+		
+		echo $ac_n "checking for SSL support in libcurl""... $ac_c" 1>&6
+echo "configure:107027: checking for SSL support in libcurl" >&5
+		CURL_SSL=`$CURL_CONFIG --feature | $EGREP SSL`
+		if test "$CURL_SSL" = "SSL"; then
+			echo "$ac_t""yes" 1>&6
+			cat >> confdefs.h <<\EOF
+#define HTTP_HAVE_SSL 1
+EOF
+
+			
+			echo $ac_n "checking for openssl support in libcurl""... $ac_c" 1>&6
+echo "configure:107037: checking for openssl support in libcurl" >&5
+			if test "$cross_compiling" = yes; then
+  
+				echo "$ac_t""no" 1>&6
+			
+else
+  cat > conftest.$ac_ext <<EOF
+#line 107044 "configure"
+#include "confdefs.h"
+
+				#include <curl/curl.h>
+				int main(int argc, char *argv[]) {
+					curl_version_info_data *data = curl_version_info(CURLVERSION_NOW);
+					if (data && data->ssl_version && *data->ssl_version) {
+						const char *ptr = data->ssl_version;
+						while(*ptr == ' ') ++ptr;
+						return strncasecmp(ptr, "OpenSSL", sizeof("OpenSSL")-1);
+					}
+					return 1;
+				}
+			
+EOF
+if { (eval echo configure:107059: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
   
+				echo "$ac_t""yes" 1>&6
+				ac_safe=`echo "openssl/crypto.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for openssl/crypto.h""... $ac_c" 1>&6
+echo "configure:107065: checking for openssl/crypto.h" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 107070 "configure"
+#include "confdefs.h"
+#include <openssl/crypto.h>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:107075: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
   
-    BUILD_DIR="$BUILD_DIR $ext_builddir/libxmlrpc"
-  
+					cat >> confdefs.h <<\EOF
+#define HTTP_HAVE_OPENSSL 1
+EOF
 
-  XMLRPC_MODULE_TYPE=builtin
+				
+else
+  echo "$ac_t""no" 1>&6
+fi
 
-elif test "$PHP_XMLRPC" != "no"; then
+			
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  
+				echo "$ac_t""no" 1>&6
+			
+fi
+rm -fr conftest*
+fi
 
-  if test -r $PHP_XMLRPC/include/xmlrpc.h; then
-    XMLRPC_DIR=$PHP_XMLRPC/include
-  elif test -r $PHP_XMLRPC/include/xmlrpc-epi/xmlrpc.h; then
-    XMLRPC_DIR=$PHP_XMLRPC/include/xmlrpc-epi
-  else
-    echo $ac_n "checking for XMLRPC-EPI in default path""... $ac_c" 1>&6
-echo "configure:101029: checking for XMLRPC-EPI in default path" >&5
-    for i in /usr/local /usr; do
-      if test -r $i/include/xmlrpc.h; then
-        XMLRPC_DIR=$i/include
-        echo "$ac_t""found in $i" 1>&6
-        break
-      fi
-    done
-  fi
+			
+			echo $ac_n "checking for gnutls support in libcurl""... $ac_c" 1>&6
+echo "configure:107115: checking for gnutls support in libcurl" >&5
+			if test "$cross_compiling" = yes; then
+  
+				echo "$ac_t""no" 1>&6
+			
+else
+  cat > conftest.$ac_ext <<EOF
+#line 107122 "configure"
+#include "confdefs.h"
+
+				#include <curl/curl.h>
+				int main(int argc, char *argv[]) {
+					curl_version_info_data *data = curl_version_info(CURLVERSION_NOW);
+					if (data && data->ssl_version && *data->ssl_version) {
+						const char *ptr = data->ssl_version;
+						while(*ptr == ' ') ++ptr;
+						return strncasecmp(ptr, "GnuTLS", sizeof("GnuTLS")-1);
+					}
+					return 1;
+				}
+			
+EOF
+if { (eval echo configure:107137: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+				echo "$ac_t""yes" 1>&6
+				ac_safe=`echo "gcrypt.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for gcrypt.h""... $ac_c" 1>&6
+echo "configure:107143: checking for gcrypt.h" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 107148 "configure"
+#include "confdefs.h"
+#include <gcrypt.h>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:107153: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+					cat >> confdefs.h <<\EOF
+#define HTTP_HAVE_GNUTLS 1
+EOF
 
-  if test -z "$XMLRPC_DIR"; then
-    echo "$ac_t""not found" 1>&6
-    { echo "configure: error: Please reinstall the XMLRPC-EPI distribution" 1>&2; exit 1; }
-  fi
+				
+else
+  echo "$ac_t""no" 1>&6
+fi
 
+			
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
   
-  if test "$XMLRPC_DIR" != "/usr/include"; then
+				echo "$ac_t""no" 1>&6
+			
+fi
+rm -fr conftest*
+fi
+
+		else
+			echo "$ac_t""no" 1>&6
+		fi
+		
+		INCLUDES="$save_INCLUDES"
+		LIBS="$save_LIBS"
+		CFLAGS="$save_CFLAGS"
+		LDFLAGS="$save_LDFLAGS"
+		
+				
+		echo $ac_n "checking for bundled SSL CA info""... $ac_c" 1>&6
+echo "configure:107202: checking for bundled SSL CA info" >&5
+		CURL_CAINFO=
+		for i in `$CURL_CONFIG --ca` "/etc/ssl/certs/ca-certificates.crt"; do
+			if test -f "$i"; then
+				CURL_CAINFO="$i"
+				break
+			fi
+		done
+		if test "x$CURL_CAINFO" = "x"; then
+			echo "$ac_t""not found" 1>&6
+		else
+			echo "$ac_t""$CURL_CAINFO" 1>&6
+			cat >> confdefs.h <<EOF
+#define HTTP_CURL_CAINFO "$CURL_CAINFO"
+EOF
+
+		fi
+		
+		
+  if test "$CURL_DIR/include" != "/usr/include"; then
     
-  if test -z "$XMLRPC_DIR" || echo "$XMLRPC_DIR" | grep '^/' >/dev/null ; then
-    ai_p=$XMLRPC_DIR
+  if test -z "$CURL_DIR/include" || echo "$CURL_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$CURL_DIR/include
   else
     
-    ep_dir="`echo $XMLRPC_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $CURL_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$XMLRPC_DIR\"`"
+    ai_p="$ep_realdir/`basename \"$CURL_DIR/include\"`"
   fi
 
     
@@ -101071,28 +107247,28 @@ echo "configure:101029: checking for XML
 
   fi
 
-  
+		
 
   if test "$ext_shared" = "yes"; then
-    XMLRPC_SHARED_LIBADD="-lxmlrpc $XMLRPC_SHARED_LIBADD"
-    if test -n "$XMLRPC_DIR/$PHP_LIBDIR"; then
+    HTTP_SHARED_LIBADD="-lcurl $HTTP_SHARED_LIBADD"
+    if test -n "$CURL_DIR/$PHP_LIBDIR"; then
       
-  if test "$XMLRPC_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$XMLRPC_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  if test "$CURL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$CURL_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$XMLRPC_DIR/$PHP_LIBDIR" || echo "$XMLRPC_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$XMLRPC_DIR/$PHP_LIBDIR
+  if test -z "$CURL_DIR/$PHP_LIBDIR" || echo "$CURL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$CURL_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $XMLRPC_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $CURL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$XMLRPC_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$CURL_DIR/$PHP_LIBDIR\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        XMLRPC_SHARED_LIBADD="-L$ai_p $XMLRPC_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLRPC_SHARED_LIBADD"
+        HTTP_SHARED_LIBADD="-L$ai_p $HTTP_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && HTTP_SHARED_LIBADD="$ld_runpath_switch$ai_p $HTTP_SHARED_LIBADD"
       else
         
   
@@ -101118,18 +107294,18 @@ echo "configure:101029: checking for XML
   else
     
 
-  if test -n "$XMLRPC_DIR/$PHP_LIBDIR"; then
+  if test -n "$CURL_DIR/$PHP_LIBDIR"; then
     
-  if test "$XMLRPC_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$XMLRPC_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  if test "$CURL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$CURL_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$XMLRPC_DIR/$PHP_LIBDIR" || echo "$XMLRPC_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$XMLRPC_DIR/$PHP_LIBDIR
+  if test -z "$CURL_DIR/$PHP_LIBDIR" || echo "$CURL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$CURL_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $XMLRPC_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $CURL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$XMLRPC_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$CURL_DIR/$PHP_LIBDIR\"`"
   fi
 
     
@@ -101155,10 +107331,10 @@ echo "configure:101029: checking for XML
   fi
   
   
-  case xmlrpc in
+  case curl in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lxmlrpc $LIBS" 
+      LIBS="-lcurl $LIBS" 
    ;;
   esac
 
@@ -101168,412 +107344,262 @@ echo "configure:101029: checking for XML
   fi
 
 
+		
+  for ac_i in `$CURL_CONFIG --libs`; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        HTTP_SHARED_LIBADD="$HTTP_SHARED_LIBADD -pthread"
+      else
+        
   
-  ext_builddir=ext/xmlrpc
-  ext_srcdir=$abs_srcdir/ext/xmlrpc
-
-  ac_extra=
-
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_XMLRPC_SHARED=no
-    
-  
-  case ext/xmlrpc in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in xmlrpc-epi-php.c; do
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        HTTP_SHARED_LIBADD="$HTTP_SHARED_LIBADD -l$ac_ii" 
+    else
       
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
 
-    EXT_STATIC="$EXT_STATIC xmlrpc"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
     fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_XMLRPC_SHARED=yes
-      
-  case ext/xmlrpc in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+   ;;
   esac
-  
-  
-
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
 
 
-  old_IFS=$IFS
-  for ac_src in xmlrpc-epi-php.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
       
-      shared_objects_xmlrpc="$shared_objects_xmlrpc $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxmlrpc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(PHPXMLRPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxmlrpc.so '$ext_builddir'/phpxmlrpc.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXMLRPC, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(PHPXMLRPC_SHARED_LIBADD)'
-      ;;
-  esac
-
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxmlrpc.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxmlrpc.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpxmlrpc.$suffix: $ext_builddir/phpxmlrpc.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxmlrpc.$suffix \$(phplibdir)
-
-$ext_builddir/phpxmlrpc.$suffix: \$(shared_objects_xmlrpc) \$(PHPXMLRPC_SHARED_DEPENDENCIES)
-	$link_cmd
-
-EOF
-
-          ;;
-        *)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xmlrpc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(XMLRPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xmlrpc.so '$ext_builddir'/xmlrpc.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XMLRPC, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(XMLRPC_SHARED_LIBADD)'
-      ;;
-  esac
-
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xmlrpc.$suffix"
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlrpc.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/xmlrpc.$suffix: $ext_builddir/xmlrpc.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlrpc.$suffix \$(phplibdir)
-
-$ext_builddir/xmlrpc.$suffix: \$(shared_objects_xmlrpc) \$(XMLRPC_SHARED_DEPENDENCIES)
-	$link_cmd
-
-EOF
-
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_XMLRPC 1
-EOF
-
-    fi
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_XMLRPC_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
+    
+      if test "$ext_shared" = "yes"; then
+        HTTP_SHARED_LIBADD="-L$ai_p $HTTP_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && HTTP_SHARED_LIBADD="$ld_runpath_switch$ai_p $HTTP_SHARED_LIBADD"
+      else
         
   
-  case ext/xmlrpc in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in xmlrpc-epi-php.c; do
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+  fi
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
+      fi
+    
+  fi
+
+    ;;
+    esac
   done
 
+		cat >> confdefs.h <<\EOF
+#define HTTP_HAVE_CURL 1
+EOF
 
-        EXT_STATIC="$EXT_STATIC xmlrpc"
-        ;;
-      *)
-        
+		
+		
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="$CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
+		"
   
-  case ext/xmlrpc in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
   
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in xmlrpc-epi-php.c; do
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
       
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
-  fi
-  
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
+    fi
+   ;;
+  esac
 
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=xmlrpc
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
     
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
-
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
 
-  XMLRPC_MODULE_TYPE=external
-fi
-
-
-
-php_enable_xmlwriter=yes
-
-echo $ac_n "checking whether to enable XMLWriter support""... $ac_c" 1>&6
-echo "configure:101472: checking whether to enable XMLWriter support" >&5
-# Check whether --enable-xmlwriter or --disable-xmlwriter was given.
-if test "${enable_xmlwriter+set}" = set; then
-  enableval="$enable_xmlwriter"
-  PHP_XMLWRITER=$enableval
-else
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
-  PHP_XMLWRITER=yes
-  test "$PHP_ENABLE_ALL" && PHP_XMLWRITER=$PHP_ENABLE_ALL
-
-fi
-
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_XMLWRITER in
-shared,*)
-  PHP_XMLWRITER=`echo "$PHP_XMLWRITER"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_XMLWRITER=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test -z "$PHP_LIBXML_DIR"; then
   
-php_with_libxml_dir=no
-
-echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
-echo "configure:101517: checking libxml2 install dir" >&5
-# Check whether --with-libxml-dir or --without-libxml-dir was given.
-if test "${with_libxml_dir+set}" = set; then
-  withval="$with_libxml_dir"
-  PHP_LIBXML_DIR=$withval
-else
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  PHP_LIBXML_DIR=no
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-
-fi
+  fi
 
 
-ext_output=$PHP_LIBXML_DIR
-echo "$ac_t""$ext_output" 1>&6
+      fi
+    
+  fi
 
+    ;;
+    esac
+  done
 
+  echo $ac_n "checking for curl_share_strerror in -lcurl""... $ac_c" 1>&6
+echo "configure:107539: checking for curl_share_strerror in -lcurl" >&5
+ac_lib_var=`echo curl'_'curl_share_strerror | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lcurl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 107547 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char curl_share_strerror();
 
+int main() {
+curl_share_strerror()
+; return 0; }
+EOF
+if { (eval echo configure:107558: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-if test "$PHP_XMLWRITER" != "no"; then
-
-  if test "$PHP_LIBXML" = "no"; then
-    { echo "configure: error: XMLWriter extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
-  fi
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    cat >> confdefs.h <<\EOF
+#define HAVE_CURL_SHARE_STRERROR 1
+EOF
 
   
-echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
-echo "configure:101545: checking for xml2-config path" >&5
-if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
 else
-  
-  for i in $PHP_LIBXML_DIR /usr/local /usr; do
-    if test -x "$i/bin/xml2-config"; then
-      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
-      break
-    fi
-  done
+  echo "$ac_t""no" 1>&6
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_curl_curl_share_strerror
+     
+  
 fi
 
-echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6
-
-  if test -x "$ac_cv_php_xml2_config_path"; then
-    XML2_CONFIG="$ac_cv_php_xml2_config_path"
-    libxml_full_version=`$XML2_CONFIG --version`
-    ac_IFS=$IFS
-    IFS="."
-    set $libxml_full_version
-    IFS=$ac_IFS
-    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
-    if test "$LIBXML_VERSION" -ge "2006011"; then
-      LIBXML_LIBS=`$XML2_CONFIG --libs`
-      LIBXML_INCS=`$XML2_CONFIG --cflags`
-      
-  for ac_i in $LIBXML_LIBS; do
+		
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="$CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
+		"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
     case $ac_i in
     -pthread)
       if test "$ext_shared" = "yes"; then
-        XMLWRITER_SHARED_LIBADD="$XMLWRITER_SHARED_LIBADD -pthread"
+        LDFLAGS="$LDFLAGS -pthread"
       else
         
   
@@ -101595,7 +107621,7 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
   c|c_r|pthread*) ;;
   *) 
     if test "$ext_shared" = "yes"; then
-        XMLWRITER_SHARED_LIBADD="$XMLWRITER_SHARED_LIBADD -l$ac_ii" 
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
     else
       
   
@@ -101630,8 +107656,8 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
 
     
       if test "$ext_shared" = "yes"; then
-        XMLWRITER_SHARED_LIBADD="-L$ai_p $XMLWRITER_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && XMLWRITER_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLWRITER_SHARED_LIBADD"
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
       else
         
   
@@ -101657,13 +107683,115 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
     esac
   done
 
-      
-  for ac_i in $LIBXML_INCS; do
+  echo $ac_n "checking for curl_multi_strerror in -lcurl""... $ac_c" 1>&6
+echo "configure:107688: checking for curl_multi_strerror in -lcurl" >&5
+ac_lib_var=`echo curl'_'curl_multi_strerror | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lcurl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 107696 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char curl_multi_strerror();
+
+int main() {
+curl_multi_strerror()
+; return 0; }
+EOF
+if { (eval echo configure:107707: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    cat >> confdefs.h <<\EOF
+#define HAVE_CURL_MULTI_STRERROR 1
+EOF
+
+  
+else
+  echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_curl_curl_multi_strerror
+     
+  
+fi
+
+		
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="$CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
+		"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
     case $ac_i in
-    -I*)
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
       ac_ii=`echo $ac_i|cut -c 3-`
       
-  if test "$ac_ii" != "/usr/include"; then
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
     
   if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
     ai_p=$ac_ii
@@ -101676,481 +107804,547 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
   fi
 
     
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
+    eval "LIBPATH$unique=set"
     
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
   fi
 
+
+      fi
+    
   fi
 
     ;;
     esac
   done
 
-
-            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
-echo "configure:101703: checking whether libxml build works" >&5
-if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
+  echo $ac_n "checking for curl_easy_strerror in -lcurl""... $ac_c" 1>&6
+echo "configure:107837: checking for curl_easy_strerror in -lcurl" >&5
+ac_lib_var=`echo curl'_'curl_easy_strerror | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  
-        
-  old_LIBS=$LIBS
-  LIBS="
-          $XMLWRITER_SHARED_LIBADD
-         $LIBS"
-  if test "$cross_compiling" = yes; then
-  
-    LIBS=$old_LIBS
-  
-else
-  cat > conftest.$ac_ext <<EOF
-#line 101719 "configure"
+  ac_save_LIBS="$LIBS"
+LIBS="-lcurl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 107845 "configure"
 #include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char curl_easy_strerror();
 
-    
-    char xmlInitParser();
-    int main() {
-      xmlInitParser();
-      return 0;
-    }
-  
+int main() {
+curl_easy_strerror()
+; return 0; }
 EOF
-if { (eval echo configure:101730: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-    LIBS=$old_LIBS
-    
-          php_cv_libxml_build_works=yes
-        
-  
+if { (eval echo configure:107856: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  
-    LIBS=$old_LIBS
-    
-          echo "$ac_t""no" 1>&6
-          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
-        
-  
-fi
-rm -fr conftest*
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-
-      
 fi
-
-echo "$ac_t""$php_cv_libxml_build_works" 1>&6
-      if test "$php_cv_libxml_build_works" = "yes"; then
-        cat >> confdefs.h <<\EOF
-#define HAVE_LIBXML 1
-EOF
-
-      fi
-      
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
     cat >> confdefs.h <<\EOF
-#define HAVE_XMLWRITER 1
+#define HAVE_CURL_EASY_STRERROR 1
 EOF
 
-    
-  ext_builddir=ext/xmlwriter
-  ext_srcdir=$abs_srcdir/ext/xmlwriter
+  
+else
+  echo "$ac_t""no" 1>&6
 
-  ac_extra=
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_curl_curl_easy_strerror
+     
+  
+fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_XMLWRITER_SHARED=no
-    
+		
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="$CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
+		"
   
-  case ext/xmlwriter in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlwriter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlwriter/"; ac_bdir="ext/xmlwriter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+  save_ext_shared=$ext_shared
+  ext_shared=yes
   
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
   
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in php_xmlwriter.c; do
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-    EXT_STATIC="$EXT_STATIC xmlwriter"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlwriter"
-    fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_XMLWRITER_SHARED=yes
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
       
-  case ext/xmlwriter in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlwriter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlwriter/"; ac_bdir="ext/xmlwriter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
-
-
-  old_IFS=$IFS
-  for ac_src in php_xmlwriter.c; do
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
       
-      shared_objects_xmlwriter="$shared_objects_xmlwriter $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxmlwriter.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) $(PHPXMLWRITER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxmlwriter.so '$ext_builddir'/phpxmlwriter.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXMLWRITER, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) $(PHPXMLWRITER_SHARED_LIBADD)'
-      ;;
-  esac
-
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxmlwriter.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxmlwriter.$suffix"
-  fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlwriter"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpxmlwriter.$suffix: $ext_builddir/phpxmlwriter.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxmlwriter.$suffix \$(phplibdir)
-
-$ext_builddir/phpxmlwriter.$suffix: \$(shared_objects_xmlwriter) \$(PHPXMLWRITER_SHARED_DEPENDENCIES)
-	$link_cmd
-
-EOF
-
-          ;;
-        *)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xmlwriter.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) $(XMLWRITER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xmlwriter.so '$ext_builddir'/xmlwriter.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XMLWRITER, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) $(XMLWRITER_SHARED_LIBADD)'
-      ;;
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
   esac
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xmlwriter.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlwriter.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlwriter"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/xmlwriter.$suffix: $ext_builddir/xmlwriter.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlwriter.$suffix \$(phplibdir)
-
-$ext_builddir/xmlwriter.$suffix: \$(shared_objects_xmlwriter) \$(XMLWRITER_SHARED_DEPENDENCIES)
-	$link_cmd
 
-EOF
+    fi
+   ;;
+  esac
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_XMLWRITER 1
-EOF
 
-    fi
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_XMLWRITER_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
         
   
-  case ext/xmlwriter in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlwriter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlwriter/"; ac_bdir="ext/xmlwriter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
+  fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
 
+      fi
+    
+  fi
 
-  old_IFS=$IFS
-  for ac_src in php_xmlwriter.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+    ;;
+    esac
+  done
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+  echo $ac_n "checking for curl_easy_reset in -lcurl""... $ac_c" 1>&6
+echo "configure:107986: checking for curl_easy_reset in -lcurl" >&5
+ac_lib_var=`echo curl'_'curl_easy_reset | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lcurl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 107994 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char curl_easy_reset();
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+int main() {
+curl_easy_reset()
+; return 0; }
 EOF
-  done
-
+if { (eval echo configure:108005: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-        EXT_STATIC="$EXT_STATIC xmlwriter"
-        ;;
-      *)
-        
-  
-  case ext/xmlwriter in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlwriter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlwriter/"; ac_bdir="ext/xmlwriter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
   
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    cat >> confdefs.h <<\EOF
+#define HAVE_CURL_EASY_RESET 1
+EOF
+
   
+else
+  echo "$ac_t""no" 1>&6
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_curl_curl_easy_reset
+     
+  
+fi
 
+		
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="$CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
+		"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-  old_IFS=$IFS
-  for ac_src in php_xmlwriter.c; do
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
       
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+    fi
+   ;;
+  esac
 
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlwriter"
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
   
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
+  fi
 
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=xmlwriter
+      fi
     
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
-
   fi
 
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLWRITER_SHARED_LIBADD"
+    ;;
+    esac
+  done
 
-  
-    else
-      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
-    fi
-else 
-    { echo "configure: error: xml2-config not found. Please check your libxml2 installation." 1>&2; exit 1; }
-  
-  fi
+  echo $ac_n "checking for curl_formget in -lcurl""... $ac_c" 1>&6
+echo "configure:108135: checking for curl_formget in -lcurl" >&5
+ac_lib_var=`echo curl'_'curl_formget | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lcurl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 108143 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char curl_formget();
+
+int main() {
+curl_formget()
+; return 0; }
+EOF
+if { (eval echo configure:108154: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
 fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    cat >> confdefs.h <<\EOF
+#define HAVE_CURL_FORMGET 1
+EOF
 
+  
+else
+  echo "$ac_t""no" 1>&6
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_curl_curl_formget
+     
+  
+fi
 
-php_with_xsl=no
+		
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="$CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
+		"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-echo $ac_n "checking for XSL support""... $ac_c" 1>&6
-echo "configure:102080: checking for XSL support" >&5
-# Check whether --with-xsl or --without-xsl was given.
-if test "${with_xsl+set}" = set; then
-  withval="$with_xsl"
-  PHP_XSL=$withval
-else
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
-  PHP_XSL=no
-  test "$PHP_ENABLE_ALL" && PHP_XSL=$PHP_ENABLE_ALL
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-fi
 
+    fi
+   ;;
+  esac
 
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_XSL in
-shared,*)
-  PHP_XSL=`echo "$PHP_XSL"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_XSL=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
 
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
 
-echo "$ac_t""$ext_output" 1>&6
+      fi
+    
+  fi
 
+    ;;
+    esac
+  done
 
+  echo $ac_n "checking for curl_multi_setopt in -lcurl""... $ac_c" 1>&6
+echo "configure:108284: checking for curl_multi_setopt in -lcurl" >&5
+ac_lib_var=`echo curl'_'curl_multi_setopt | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lcurl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 108292 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char curl_multi_setopt();
 
+int main() {
+curl_multi_setopt()
+; return 0; }
+EOF
+if { (eval echo configure:108303: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-if test "$PHP_XSL" != "no"; then
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    cat >> confdefs.h <<\EOF
+#define HAVE_CURL_MULTI_SETOPT 1
+EOF
 
-  if test "$PHP_LIBXML" = "no"; then
-    { echo "configure: error: XSL extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
-  fi
   
-  if test "$PHP_DOM" = "no"; then
-    { echo "configure: error: XSL extension requires DOM extension, add --enable-dom" 1>&2; exit 1; }
-  fi
+else
+  echo "$ac_t""no" 1>&6
 
-  for i in $PHP_XSL /usr/local /usr; do
-    if test -x "$i/bin/xslt-config"; then
-      XSLT_CONFIG=$i/bin/xslt-config
-      break
-    fi
-  done
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_curl_curl_multi_setopt
+     
+  
+fi
 
-  if test -z "$XSLT_CONFIG"; then
-    { echo "configure: error: xslt-config not found. Please reinstall the libxslt >= 1.1.0 distribution" 1>&2; exit 1; }
-  else
-    libxslt_full_version=`$XSLT_CONFIG --version`
-    ac_IFS=$IFS
-    IFS="."
-    set $libxslt_full_version
-    IFS=$ac_IFS
-    LIBXSLT_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
-    if test "$LIBXSLT_VERSION" -ge "1001000"; then
-      XSL_LIBS=`$XSLT_CONFIG --libs`
-      XSL_INCS=`$XSLT_CONFIG --cflags`
-      
-  for ac_i in $XSL_LIBS; do
+		
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="$CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
+		"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
     case $ac_i in
     -pthread)
       if test "$ext_shared" = "yes"; then
-        XSL_SHARED_LIBADD="$XSL_SHARED_LIBADD -pthread"
+        LDFLAGS="$LDFLAGS -pthread"
       else
         
   
@@ -102172,7 +108366,7 @@ if test "$PHP_XSL" != "no"; then
   c|c_r|pthread*) ;;
   *) 
     if test "$ext_shared" = "yes"; then
-        XSL_SHARED_LIBADD="$XSL_SHARED_LIBADD -l$ac_ii" 
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
     else
       
   
@@ -102207,8 +108401,8 @@ if test "$PHP_XSL" != "no"; then
 
     
       if test "$ext_shared" = "yes"; then
-        XSL_SHARED_LIBADD="-L$ai_p $XSL_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && XSL_SHARED_LIBADD="$ld_runpath_switch$ai_p $XSL_SHARED_LIBADD"
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
       else
         
   
@@ -102234,22 +108428,128 @@ if test "$PHP_XSL" != "no"; then
     esac
   done
 
-      
-  for ac_i in $XSL_INCS; do
-    case $ac_i in
-    -I*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/include"; then
+  echo $ac_n "checking for curl_multi_timeout in -lcurl""... $ac_c" 1>&6
+echo "configure:108433: checking for curl_multi_timeout in -lcurl" >&5
+ac_lib_var=`echo curl'_'curl_multi_timeout | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lcurl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 108441 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char curl_multi_timeout();
+
+int main() {
+curl_multi_timeout()
+; return 0; }
+EOF
+if { (eval echo configure:108452: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    cat >> confdefs.h <<\EOF
+#define HAVE_CURL_MULTI_TIMEOUT 1
+EOF
+
+  
+else
+  echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_curl_curl_multi_timeout
+     
+  
+fi
+
+		
+								
+		if test "$PHP_HTTP_CURL_LIBEVENT" != "no"; then
+			
+		extname=event
+		haveext=$PHP_EVENT
+		
+		echo $ac_n "checking for ext/$extname support""... $ac_c" 1>&6
+echo "configure:108493: checking for ext/$extname support" >&5
+		if test -x "$PHP_EXECUTABLE"; then
+			grepext=`$PHP_EXECUTABLE -m | $EGREP ^$extname\$`
+			if test "$grepext" = "$extname"; then
+				HTTP_HAVE_EXT_EVENT=1
+				echo "$ac_t""yes" 1>&6
+				
+				echo "configure: warning: event support is incompatible with pecl/event; continuing without libevent support" 1>&2
+			
+			else
+				HTTP_HAVE_EXT_EVENT=
+				echo "$ac_t""no" 1>&6
+				
+				echo $ac_n "checking for event.h""... $ac_c" 1>&6
+echo "configure:108507: checking for event.h" >&5
+				EVENT_DIR=
+				for i in "$PHP_HTTP_CURL_LIBEVENT" /usr/local /usr /opt; do
+					if test -f "$i/include/event.h"; then
+						EVENT_DIR=$i
+						break
+					fi
+				done
+				if test "x$EVENT_DIR" = "x"; then
+					echo "$ac_t""not found" 1>&6
+					echo "configure: warning: continuing without libevent support" 1>&2
+				else
+					echo "$ac_t""found in $EVENT_DIR" 1>&6
+					
+					echo $ac_n "checking for libevent version, roughly""... $ac_c" 1>&6
+echo "configure:108522: checking for libevent version, roughly" >&5
+					EVENT_VER="1.1b or lower"
+					if test -f "$EVENT_DIR/include/evhttp.h" && test -f "$EVENT_DIR/include/evdns.h"; then
+						if test -f "$EVENT_DIR/include/evrpc.h"; then
+							EVENT_VER="1.4 or greater"
+						else
+							EVENT_VER="1.2 or greater"
+						fi
+					fi
+					cat >> confdefs.h <<EOF
+#define HTTP_EVENT_VERSION "$EVENT_VER"
+EOF
+
+					echo "$ac_t""$EVENT_VER" 1>&6
+					
+					echo $ac_n "checking for libcurl version >= 7.16.0""... $ac_c" 1>&6
+echo "configure:108538: checking for libcurl version >= 7.16.0" >&5
+					echo "$ac_t""$CURL_VERSION" 1>&6
+					if test `echo $CURL_VERSION | $SED -e 's/[^0-9]/ /g' | $AWK '{print $1*10000 + $2*100 + $3}'` -lt 71600; then
+						echo "configure: warning: libcurl version greater or equal to 7.16.0 required; continuing without libevent support" 1>&2
+					else
+						
+  if test "$EVENT_DIR/include" != "/usr/include"; then
     
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+  if test -z "$EVENT_DIR/include" || echo "$EVENT_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$EVENT_DIR/include
   else
     
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $EVENT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    ai_p="$ep_realdir/`basename \"$EVENT_DIR/include\"`"
   fi
 
     
@@ -102270,45 +108570,28 @@ if test "$PHP_XSL" != "no"; then
 
   fi
 
-    ;;
-    esac
-  done
-
-      
-      echo $ac_n "checking for EXSLT support""... $ac_c" 1>&6
-echo "configure:102280: checking for EXSLT support" >&5
-      for i in $PHP_XSL /usr/local /usr; do
-        if test -r "$i/include/libexslt/exslt.h"; then
-          PHP_XSL_EXSL_DIR=$i
-          break
-        fi
-      done
-      if test -z "$PHP_XSL_EXSL_DIR"; then
-        echo "$ac_t""not found" 1>&6
-      else 
-        echo "$ac_t""found" 1>&6
-        
+						
 
   if test "$ext_shared" = "yes"; then
-    XSL_SHARED_LIBADD="-lexslt $XSL_SHARED_LIBADD"
-    if test -n "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR"; then
+    HTTP_SHARED_LIBADD="-levent $HTTP_SHARED_LIBADD"
+    if test -n "$EVENT_DIR/$PHP_LIBDIR"; then
       
-  if test "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  if test "$EVENT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EVENT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" || echo "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_XSL_EXSL_DIR/$PHP_LIBDIR
+  if test -z "$EVENT_DIR/$PHP_LIBDIR" || echo "$EVENT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$EVENT_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $PHP_XSL_EXSL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $EVENT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_XSL_EXSL_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$EVENT_DIR/$PHP_LIBDIR\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        XSL_SHARED_LIBADD="-L$ai_p $XSL_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && XSL_SHARED_LIBADD="$ld_runpath_switch$ai_p $XSL_SHARED_LIBADD"
+        HTTP_SHARED_LIBADD="-L$ai_p $HTTP_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && HTTP_SHARED_LIBADD="$ld_runpath_switch$ai_p $HTTP_SHARED_LIBADD"
       else
         
   
@@ -102334,18 +108617,18 @@ echo "configure:102280: checking for EXS
   else
     
 
-  if test -n "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR"; then
+  if test -n "$EVENT_DIR/$PHP_LIBDIR"; then
     
-  if test "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  if test "$EVENT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EVENT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" || echo "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_XSL_EXSL_DIR/$PHP_LIBDIR
+  if test -z "$EVENT_DIR/$PHP_LIBDIR" || echo "$EVENT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$EVENT_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $PHP_XSL_EXSL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $EVENT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_XSL_EXSL_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$EVENT_DIR/$PHP_LIBDIR\"`"
   fi
 
     
@@ -102371,10 +108654,10 @@ echo "configure:102280: checking for EXS
   fi
   
   
-  case exslt in
+  case event in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lexslt $LIBS" 
+      LIBS="-levent $LIBS" 
    ;;
   esac
 
@@ -102384,514 +108667,569 @@ echo "configure:102280: checking for EXS
   fi
 
 
+						cat >> confdefs.h <<\EOF
+#define HTTP_HAVE_EVENT 1
+EOF
+
+						
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="$CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
+						"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
         
-  if test "$PHP_XSL_EXSL_DIR/include" != "/usr/include"; then
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
     
-  if test -z "$PHP_XSL_EXSL_DIR/include" || echo "$PHP_XSL_EXSL_DIR/include" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_XSL_EXSL_DIR/include
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
     
-    ep_dir="`echo $PHP_XSL_EXSL_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_XSL_EXSL_DIR/include\"`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
 
     
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
+    eval "LIBPATH$unique=set"
     
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
   fi
 
-  fi
-
-        cat >> confdefs.h <<\EOF
-#define HAVE_XSL_EXSLT 1
-EOF
 
       fi
-    else
-      { echo "configure: error: libxslt version 1.1.0 or greater required." 1>&2; exit 1; }
-    fi
     
-  
   fi
-  
-  cat >> confdefs.h <<\EOF
-#define HAVE_XSL 1
-EOF
-
-  
-  ext_builddir=ext/xsl
-  ext_srcdir=$abs_srcdir/ext/xsl
-
-  ac_extra=
-
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_XSL_SHARED=no
-    
-  
-  case ext/xsl in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xsl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xsl/"; ac_bdir="ext/xsl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in php_xsl.c xsltprocessor.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
+    ;;
+    esac
   done
 
+  echo $ac_n "checking for curl_multi_socket_action in -lcurl""... $ac_c" 1>&6
+echo "configure:108772: checking for curl_multi_socket_action in -lcurl" >&5
+ac_lib_var=`echo curl'_'curl_multi_socket_action | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lcurl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 108780 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char curl_multi_socket_action();
 
-    EXT_STATIC="$EXT_STATIC xsl"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC xsl"
-    fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_XSL_SHARED=yes
-      
-  case ext/xsl in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xsl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xsl/"; ac_bdir="ext/xsl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
-
-
-  old_IFS=$IFS
-  for ac_src in php_xsl.c xsltprocessor.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_xsl="$shared_objects_xsl $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+int main() {
+curl_multi_socket_action()
+; return 0; }
 EOF
-  done
-
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxsl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) $(PHPXSL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxsl.so '$ext_builddir'/phpxsl.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXSL, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) $(PHPXSL_SHARED_LIBADD)'
-      ;;
-  esac
+if { (eval echo configure:108791: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxsl.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxsl.$suffix"
-  fi
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xsl"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpxsl.$suffix: $ext_builddir/phpxsl.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxsl.$suffix \$(phplibdir)
-
-$ext_builddir/phpxsl.$suffix: \$(shared_objects_xsl) \$(PHPXSL_SHARED_DEPENDENCIES)
-	$link_cmd
-
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    cat >> confdefs.h <<\EOF
+#define HAVE_CURL_MULTI_SOCKET_ACTION 1
 EOF
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xsl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) $(XSL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xsl.so '$ext_builddir'/xsl.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XSL, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) $(XSL_SHARED_LIBADD)'
-      ;;
-  esac
-
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xsl.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xsl.$suffix"
-  fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xsl"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/xsl.$suffix: $ext_builddir/xsl.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/xsl.$suffix \$(phplibdir)
-
-$ext_builddir/xsl.$suffix: \$(shared_objects_xsl) \$(XSL_SHARED_DEPENDENCIES)
-	$link_cmd
-
-EOF
+else
+  echo "$ac_t""no" 1>&6
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_XSL 1
-EOF
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_curl_curl_multi_socket_action
+     
+  
+fi
 
-    fi
+					fi
+				fi
+			
+			fi
+		elif test "$haveext" != "no" && test "x$haveext" != "x"; then
+			HTTP_HAVE_EXT_EVENT=1
+			echo "$ac_t""yes" 1>&6
+			
+				echo "configure: warning: event support is incompatible with pecl/event; continuing without libevent support" 1>&2
+			
+		else
+			HTTP_HAVE_EXT_EVENT=
+			echo "$ac_t""no" 1>&6
+			
+				echo $ac_n "checking for event.h""... $ac_c" 1>&6
+echo "configure:108839: checking for event.h" >&5
+				EVENT_DIR=
+				for i in "$PHP_HTTP_CURL_LIBEVENT" /usr/local /usr /opt; do
+					if test -f "$i/include/event.h"; then
+						EVENT_DIR=$i
+						break
+					fi
+				done
+				if test "x$EVENT_DIR" = "x"; then
+					echo "$ac_t""not found" 1>&6
+					echo "configure: warning: continuing without libevent support" 1>&2
+				else
+					echo "$ac_t""found in $EVENT_DIR" 1>&6
+					
+					echo $ac_n "checking for libevent version, roughly""... $ac_c" 1>&6
+echo "configure:108854: checking for libevent version, roughly" >&5
+					EVENT_VER="1.1b or lower"
+					if test -f "$EVENT_DIR/include/evhttp.h" && test -f "$EVENT_DIR/include/evdns.h"; then
+						if test -f "$EVENT_DIR/include/evrpc.h"; then
+							EVENT_VER="1.4 or greater"
+						else
+							EVENT_VER="1.2 or greater"
+						fi
+					fi
+					cat >> confdefs.h <<EOF
+#define HTTP_EVENT_VERSION "$EVENT_VER"
+EOF
+
+					echo "$ac_t""$EVENT_VER" 1>&6
+					
+					echo $ac_n "checking for libcurl version >= 7.16.0""... $ac_c" 1>&6
+echo "configure:108870: checking for libcurl version >= 7.16.0" >&5
+					echo "$ac_t""$CURL_VERSION" 1>&6
+					if test `echo $CURL_VERSION | $SED -e 's/[^0-9]/ /g' | $AWK '{print $1*10000 + $2*100 + $3}'` -lt 71600; then
+						echo "configure: warning: libcurl version greater or equal to 7.16.0 required; continuing without libevent support" 1>&2
+					else
+						
+  if test "$EVENT_DIR/include" != "/usr/include"; then
+    
+  if test -z "$EVENT_DIR/include" || echo "$EVENT_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$EVENT_DIR/include
+  else
+    
+    ep_dir="`echo $EVENT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$EVENT_DIR/include\"`"
   fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_XSL_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
-  
-  case ext/xsl in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xsl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xsl/"; ac_bdir="ext/xsl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+    
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+  fi
 
+						
 
-  old_IFS=$IFS
-  for ac_src in php_xsl.c xsltprocessor.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+  if test "$ext_shared" = "yes"; then
+    HTTP_SHARED_LIBADD="-levent $HTTP_SHARED_LIBADD"
+    if test -n "$EVENT_DIR/$PHP_LIBDIR"; then
       
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
+  if test "$EVENT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EVENT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$EVENT_DIR/$PHP_LIBDIR" || echo "$EVENT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$EVENT_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $EVENT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$EVENT_DIR/$PHP_LIBDIR\"`"
+  fi
 
-        EXT_STATIC="$EXT_STATIC xsl"
-        ;;
-      *)
+    
+      if test "$ext_shared" = "yes"; then
+        HTTP_SHARED_LIBADD="-L$ai_p $HTTP_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && HTTP_SHARED_LIBADD="$ld_runpath_switch$ai_p $HTTP_SHARED_LIBADD"
+      else
         
   
-  case ext/xsl in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xsl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xsl/"; ac_bdir="ext/xsl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in php_xsl.c xsltprocessor.c; do
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+  fi
 
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC xsl"
+      fi
+    
   fi
-  
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
 
-
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=xsl
+    fi
+  else
     
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
+  if test -n "$EVENT_DIR/$PHP_LIBDIR"; then
+    
+  if test "$EVENT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EVENT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$EVENT_DIR/$PHP_LIBDIR" || echo "$EVENT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$EVENT_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $EVENT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$EVENT_DIR/$PHP_LIBDIR\"`"
   fi
 
+    
+      
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST XSL_SHARED_LIBADD"
-
   
-  am_i_shared=$PHP_XSL_SHARED
-  is_it_shared=$PHP_LIBXML_SHARED
-  is_it_enabled=$PHP_LIBXML
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension xsl to build statically, but it
-depends on extension libxml, which you've configured to build shared.
-You either need to build xsl shared or build libxml statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension xsl, which depends on extension libxml,
-but you've either not enabled libxml, or have disabled it.
-" 1>&2; exit 1; }
-  fi
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-fi
-
-
-
-php_enable_zip=no
-
-echo $ac_n "checking for zip archive read/writesupport""... $ac_c" 1>&6
-echo "configure:102756: checking for zip archive read/writesupport" >&5
-# Check whether --enable-zip or --disable-zip was given.
-if test "${enable_zip+set}" = set; then
-  enableval="$enable_zip"
-  PHP_ZIP=$enableval
-else
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  PHP_ZIP=no
-  test "$PHP_ENABLE_ALL" && PHP_ZIP=$PHP_ENABLE_ALL
-
-fi
+  fi
 
 
+    
+  fi
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_ZIP in
-shared,*)
-  PHP_ZIP=`echo "$PHP_ZIP"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_ZIP=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
+  fi
+  
+  
+  case event in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-levent $LIBS" 
+   ;;
+  esac
 
 
 
-echo "$ac_t""$ext_output" 1>&6
 
+  fi
 
 
+						cat >> confdefs.h <<\EOF
+#define HTTP_HAVE_EVENT 1
+EOF
 
-if test -z "$PHP_ZLIB_DIR"; then
+						
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="$CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
+						"
   
-php_with_zlib_dir=no
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-echo $ac_n "checking for the location of libz""... $ac_c" 1>&6
-echo "configure:102801: checking for the location of libz" >&5
-# Check whether --with-zlib-dir or --without-zlib-dir was given.
-if test "${with_zlib_dir+set}" = set; then
-  withval="$with_zlib_dir"
-  PHP_ZLIB_DIR=$withval
-else
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
-  PHP_ZLIB_DIR=no
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
   
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-fi
 
+    fi
+   ;;
+  esac
 
-ext_output=$PHP_ZLIB_DIR
-echo "$ac_t""$ext_output" 1>&6
 
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
 
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-fi
 
+      fi
+    
+  fi
 
-php_with_pcre_dir=no
+    ;;
+    esac
+  done
 
-echo $ac_n "checking pcre install prefix""... $ac_c" 1>&6
-echo "configure:102825: checking pcre install prefix" >&5
-# Check whether --with-pcre-dir or --without-pcre-dir was given.
-if test "${with_pcre_dir+set}" = set; then
-  withval="$with_pcre_dir"
-  PHP_PCRE_DIR=$withval
+  echo $ac_n "checking for curl_multi_socket_action in -lcurl""... $ac_c" 1>&6
+echo "configure:109104: checking for curl_multi_socket_action in -lcurl" >&5
+ac_lib_var=`echo curl'_'curl_multi_socket_action | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
-  
-  PHP_PCRE_DIR=no
-  
+  ac_save_LIBS="$LIBS"
+LIBS="-lcurl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 109112 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char curl_multi_socket_action();
 
+int main() {
+curl_multi_socket_action()
+; return 0; }
+EOF
+if { (eval echo configure:109123: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    cat >> confdefs.h <<\EOF
+#define HAVE_CURL_MULTI_SOCKET_ACTION 1
+EOF
 
-ext_output=$PHP_PCRE_DIR
-echo "$ac_t""$ext_output" 1>&6
-
-
+  
+else
+  echo "$ac_t""no" 1>&6
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_curl_curl_multi_socket_action
+     
+  
+fi
 
-if test "$PHP_ZIP" != "no"; then
+					fi
+				fi
+			
+		fi
+	
+		fi
+	fi
 
-  if test "$PHP_ZLIB_DIR" != "no" && test "$PHP_ZLIB_DIR" != "yes"; then
-    if test -f "$PHP_ZLIB_DIR/include/zlib/zlib.h"; then
-      PHP_ZLIB_DIR="$PHP_ZLIB_DIR"
-      PHP_ZLIB_INCDIR="$PHP_ZLIB_DIR/include/zlib"
-    elif test -f "$PHP_ZLIB_DIR/include/zlib.h"; then
-      PHP_ZLIB_DIR="$PHP_ZLIB_DIR"
-      PHP_ZLIB_INCDIR="$PHP_ZLIB_DIR/include"
-    else
-      { echo "configure: error: Can not find zlib headers under "$PHP_ZLIB_DIR"" 1>&2; exit 1; }
-    fi
+	if test "$PHP_HTTP_MAGIC_MIME" != "no"; then
+		echo $ac_n "checking for magic.h""... $ac_c" 1>&6
+echo "configure:109166: checking for magic.h" >&5
+		MAGIC_DIR=
+		for i in "$PHP_HTTP_MAGIC_MIME" /usr/local /usr /opt; do
+			if test -f "$i/include/magic.h"; then
+				MAGIC_DIR=$i
+				break
+			fi
+		done
+		if test "x$MAGIC_DIR" = "x"; then
+			echo "$ac_t""not found" 1>&6
+			{ echo "configure: error: could not find magic.h" 1>&2; exit 1; }
+		else
+			echo "$ac_t""found in $MAGIC_DIR" 1>&6
+		fi
+		
+		
+  if test "$MAGIC_DIR/include" != "/usr/include"; then
+    
+  if test -z "$MAGIC_DIR/include" || echo "$MAGIC_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$MAGIC_DIR/include
   else
-    for i in /usr/local /usr; do
-      if test -f "$i/include/zlib/zlib.h"; then
-        PHP_ZLIB_DIR="$i"
-        PHP_ZLIB_INCDIR="$i/include/zlib"
-      elif test -f "$i/include/zlib.h"; then
-        PHP_ZLIB_DIR="$i"
-        PHP_ZLIB_INCDIR="$i/include"
-      fi
-    done
+    
+    ep_dir="`echo $MAGIC_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$MAGIC_DIR/include\"`"
   fi
 
-    echo $ac_n "checking for the location of zlib""... $ac_c" 1>&6
-echo "configure:102869: checking for the location of zlib" >&5
-  if test "$PHP_ZLIB_DIR" = "no"; then
-    { echo "configure: error: zip support requires ZLIB. Use --with-zlib-dir=<DIR> to specify prefix where ZLIB include and library are located" 1>&2; exit 1; }
-  else
-    echo "$ac_t""$PHP_ZLIB_DIR" 1>&6
     
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+		
 
   if test "$ext_shared" = "yes"; then
-    ZIP_SHARED_LIBADD="-lz $ZIP_SHARED_LIBADD"
-    if test -n "$PHP_ZLIB_DIR/$PHP_LIBDIR"; then
+    HTTP_SHARED_LIBADD="-lmagic $HTTP_SHARED_LIBADD"
+    if test -n "$MAGIC_DIR/$PHP_LIBDIR"; then
       
-  if test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  if test "$MAGIC_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$MAGIC_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$PHP_ZLIB_DIR/$PHP_LIBDIR" || echo "$PHP_ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_ZLIB_DIR/$PHP_LIBDIR
+  if test -z "$MAGIC_DIR/$PHP_LIBDIR" || echo "$MAGIC_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$MAGIC_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $PHP_ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $MAGIC_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$MAGIC_DIR/$PHP_LIBDIR\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        ZIP_SHARED_LIBADD="-L$ai_p $ZIP_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && ZIP_SHARED_LIBADD="$ld_runpath_switch$ai_p $ZIP_SHARED_LIBADD"
+        HTTP_SHARED_LIBADD="-L$ai_p $HTTP_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && HTTP_SHARED_LIBADD="$ld_runpath_switch$ai_p $HTTP_SHARED_LIBADD"
       else
         
   
@@ -102917,18 +109255,18 @@ echo "configure:102869: checking for the
   else
     
 
-  if test -n "$PHP_ZLIB_DIR/$PHP_LIBDIR"; then
+  if test -n "$MAGIC_DIR/$PHP_LIBDIR"; then
     
-  if test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  if test "$MAGIC_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$MAGIC_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$PHP_ZLIB_DIR/$PHP_LIBDIR" || echo "$PHP_ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_ZLIB_DIR/$PHP_LIBDIR
+  if test -z "$MAGIC_DIR/$PHP_LIBDIR" || echo "$MAGIC_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$MAGIC_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $PHP_ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $MAGIC_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$MAGIC_DIR/$PHP_LIBDIR\"`"
   fi
 
     
@@ -102954,10 +109292,10 @@ echo "configure:102869: checking for the
   fi
   
   
-  case z in
+  case magic in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lz $LIBS" 
+      LIBS="-lmagic $LIBS" 
    ;;
   esac
 
@@ -102967,17 +109305,57 @@ echo "configure:102869: checking for the
   fi
 
 
+		cat >> confdefs.h <<\EOF
+#define HTTP_HAVE_MAGIC 1
+EOF
+
+	fi
+
+	
+		extname=hash
+		haveext=$PHP_HASH
+		
+		echo $ac_n "checking for ext/$extname support""... $ac_c" 1>&6
+echo "configure:109320: checking for ext/$extname support" >&5
+		if test -x "$PHP_EXECUTABLE"; then
+			grepext=`$PHP_EXECUTABLE -m | $EGREP ^$extname\$`
+			if test "$grepext" = "$extname"; then
+				HTTP_HAVE_EXT_HASH=1
+				echo "$ac_t""yes" 1>&6
+				
+		echo $ac_n "checking for php_hash.h""... $ac_c" 1>&6
+echo "configure:109328: checking for php_hash.h" >&5
+		HTTP_EXT_HASH_INCDIR=
+		for i in `echo $INCLUDES | $SED -e's/-I//g'` $abs_srcdir ../hash; do
+			if test -d $i; then
+				if test -f $i/php_hash.h; then
+					HTTP_EXT_HASH_INCDIR=$i
+					break
+				elif test -f $i/ext/hash/php_hash.h; then
+					HTTP_EXT_HASH_INCDIR=$i/ext/hash
+					break
+				fi
+			fi
+		done
+		if test "x$HTTP_EXT_HASH_INCDIR" = "x"; then
+			echo "$ac_t""not found" 1>&6
+		else
+			echo "$ac_t""$HTTP_EXT_HASH_INCDIR" 1>&6
+			cat >> confdefs.h <<\EOF
+#define HTTP_HAVE_PHP_HASH_H 1
+EOF
+
+			
+  if test "$HTTP_EXT_HASH_INCDIR" != "/usr/include"; then
     
-  if test "$PHP_ZLIB_INCDIR" != "/usr/include"; then
-    
-  if test -z "$PHP_ZLIB_INCDIR" || echo "$PHP_ZLIB_INCDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_ZLIB_INCDIR
+  if test -z "$HTTP_EXT_HASH_INCDIR" || echo "$HTTP_EXT_HASH_INCDIR" | grep '^/' >/dev/null ; then
+    ai_p=$HTTP_EXT_HASH_INCDIR
   else
     
-    ep_dir="`echo $PHP_ZLIB_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $HTTP_EXT_HASH_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_INCDIR\"`"
+    ai_p="$ep_realdir/`basename \"$HTTP_EXT_HASH_INCDIR\"`"
   fi
 
     
@@ -102998,97 +109376,160 @@ echo "configure:102869: checking for the
 
   fi
 
-  fi
-
-    old_CPPFLAGS=$CPPFLAGS
-  CPPFLAGS=$INCLUDES
-  cat > conftest.$ac_ext <<EOF
-#line 103007 "configure"
-#include "confdefs.h"
-
-#include <main/php_config.h>
-#if defined(HAVE_BUNDLED_PCRE) && !defined(COMPILE_DL_PCRE)
-yes
-#endif
-  
+		fi
+	
+			else
+				HTTP_HAVE_EXT_HASH=
+				echo "$ac_t""no" 1>&6
+				
+			fi
+		elif test "$haveext" != "no" && test "x$haveext" != "x"; then
+			HTTP_HAVE_EXT_HASH=1
+			echo "$ac_t""yes" 1>&6
+			
+		echo $ac_n "checking for php_hash.h""... $ac_c" 1>&6
+echo "configure:109392: checking for php_hash.h" >&5
+		HTTP_EXT_HASH_INCDIR=
+		for i in `echo $INCLUDES | $SED -e's/-I//g'` $abs_srcdir ../hash; do
+			if test -d $i; then
+				if test -f $i/php_hash.h; then
+					HTTP_EXT_HASH_INCDIR=$i
+					break
+				elif test -f $i/ext/hash/php_hash.h; then
+					HTTP_EXT_HASH_INCDIR=$i/ext/hash
+					break
+				fi
+			fi
+		done
+		if test "x$HTTP_EXT_HASH_INCDIR" = "x"; then
+			echo "$ac_t""not found" 1>&6
+		else
+			echo "$ac_t""$HTTP_EXT_HASH_INCDIR" 1>&6
+			cat >> confdefs.h <<\EOF
+#define HTTP_HAVE_PHP_HASH_H 1
 EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "yes" >/dev/null 2>&1; then
-  rm -rf conftest*
-  
-    PHP_PCRE_REGEX=yes
-  
-else
-  rm -rf conftest*
-  
-    cat > conftest.$ac_ext <<EOF
-#line 103026 "configure"
-#include "confdefs.h"
 
-#include <main/php_config.h>
-#if defined(HAVE_PCRE) && !defined(COMPILE_DL_PCRE)
-yes
-#endif
+			
+  if test "$HTTP_EXT_HASH_INCDIR" != "/usr/include"; then
     
-EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "yes" >/dev/null 2>&1; then
-  rm -rf conftest*
-  
-      PHP_PCRE_REGEX=pecl
+  if test -z "$HTTP_EXT_HASH_INCDIR" || echo "$HTTP_EXT_HASH_INCDIR" | grep '^/' >/dev/null ; then
+    ai_p=$HTTP_EXT_HASH_INCDIR
+  else
     
-else
-  rm -rf conftest*
-  
-      PHP_PCRE_REGEX=no
+    ep_dir="`echo $HTTP_EXT_HASH_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
-fi
-rm -f conftest*
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$HTTP_EXT_HASH_INCDIR\"`"
+  fi
 
+    
   
-fi
-rm -f conftest*
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-  CPPFLAGS=$old_CPPFLAGS
+  fi
 
-  PHP_ZIP_SOURCES="$PHP_ZIP_SOURCES lib/zip_add.c lib/zip_error.c lib/zip_fclose.c \
-                         lib/zip_fread.c lib/zip_open.c lib/zip_source_filep.c  \
-                         lib/zip_strerror.c lib/zip_close.c lib/zip_error_get.c \
-                         lib/zip_file_error_get.c lib/zip_free.c lib/zip_rename.c \
-                         lib/zip_source_free.c lib/zip_unchange_all.c lib/zip_delete.c \
-                         lib/zip_error_get_sys_type.c lib/zip_file_get_offset.c \
-                         lib/zip_get_name.c lib/zip_replace.c lib/zip_source_function.c \
-                         lib/zip_unchange.c lib/zip_dirent.c lib/zip_error_strerror.c \
-                         lib/zip_filerange_crc.c lib/zip_file_strerror.c lib/zip_get_num_files.c \
-                         lib/zip_get_archive_flag.c lib/zip_set_archive_flag.c \
-                         lib/zip_set_name.c lib/zip_source_zip.c lib/zip_unchange_data.c \
-                         lib/zip_entry_free.c lib/zip_error_to_str.c lib/zip_fopen.c \
-                         lib/zip_name_locate.c lib/zip_source_buffer.c lib/zip_stat.c \
-                         lib/zip_entry_new.c lib/zip_err_str.c lib/zip_fopen_index.c \
-                         lib/zip_get_archive_comment.c lib/zip_get_file_comment.c \
-                         lib/zip_new.c lib/zip_source_file.c lib/zip_stat_index.c \
-                         lib/zip_set_archive_comment.c lib/zip_set_file_comment.c \
-                         lib/zip_unchange_archive.c lib/zip_memdup.c lib/zip_stat_init.c lib/zip_add_dir.c \
-                         lib/zip_error_clear.c lib/zip_file_error_clear.c"
+		fi
+	
+		else
+			HTTP_HAVE_EXT_HASH=
+			echo "$ac_t""no" 1>&6
+			
+		fi
+	
 
-  cat >> confdefs.h <<\EOF
-#define HAVE_ZIP 1
-EOF
+	
+		extname=iconv
+		haveext=$PHP_ICONV
+		
+		echo $ac_n "checking for ext/$extname support""... $ac_c" 1>&6
+echo "configure:109458: checking for ext/$extname support" >&5
+		if test -x "$PHP_EXECUTABLE"; then
+			grepext=`$PHP_EXECUTABLE -m | $EGREP ^$extname\$`
+			if test "$grepext" = "$extname"; then
+				HTTP_HAVE_EXT_ICONV=1
+				echo "$ac_t""yes" 1>&6
+				
+			else
+				HTTP_HAVE_EXT_ICONV=
+				echo "$ac_t""no" 1>&6
+				
+			fi
+		elif test "$haveext" != "no" && test "x$haveext" != "x"; then
+			HTTP_HAVE_EXT_ICONV=1
+			echo "$ac_t""yes" 1>&6
+			
+		else
+			HTTP_HAVE_EXT_ICONV=
+			echo "$ac_t""no" 1>&6
+			
+		fi
+	
 
-  
-  ext_builddir=ext/zip
-  ext_srcdir=$abs_srcdir/ext/zip
+	
+		extname=session
+		haveext=$PHP_SESSION
+		
+		echo $ac_n "checking for ext/$extname support""... $ac_c" 1>&6
+echo "configure:109486: checking for ext/$extname support" >&5
+		if test -x "$PHP_EXECUTABLE"; then
+			grepext=`$PHP_EXECUTABLE -m | $EGREP ^$extname\$`
+			if test "$grepext" = "$extname"; then
+				HTTP_HAVE_EXT_SESSION=1
+				echo "$ac_t""yes" 1>&6
+				
+			else
+				HTTP_HAVE_EXT_SESSION=
+				echo "$ac_t""no" 1>&6
+				
+			fi
+		elif test "$haveext" != "no" && test "x$haveext" != "x"; then
+			HTTP_HAVE_EXT_SESSION=1
+			echo "$ac_t""yes" 1>&6
+			
+		else
+			HTTP_HAVE_EXT_SESSION=
+			echo "$ac_t""no" 1>&6
+			
+		fi
+	
+
+	PHP_HTTP_SOURCES="missing.c http.c http_functions.c phpstr/phpstr.c \
+		http_util_object.c http_message_object.c http_request_object.c http_request_pool_api.c \
+		http_response_object.c http_exception_object.c http_requestpool_object.c \
+		http_api.c http_cache_api.c http_request_api.c http_request_info.c http_date_api.c \
+		http_headers_api.c http_message_api.c http_send_api.c http_url_api.c \
+		http_info_api.c http_request_method_api.c http_encoding_api.c \
+		http_filter_api.c http_request_body_api.c http_querystring_object.c \
+		http_deflatestream_object.c http_inflatestream_object.c http_cookie_api.c \
+		http_querystring_api.c http_request_datashare_api.c http_requestdatashare_object.c \
+		http_persistent_handle_api.c"
+	
+	
+  ext_builddir=ext/http
+  ext_srcdir=$abs_srcdir/ext/http
 
   ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_ZIP_SHARED=no
+    PHP_HTTP_SHARED=no
     
   
-  case ext/zip in
+  case ext/http in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/http"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/http/"; ac_bdir="ext/http/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -103103,7 +109544,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_zip.c zip_stream.c $PHP_ZIP_SOURCES; do
+  for ac_src in $PHP_HTTP_SOURCES; do
   
       IFS=.
       set $ac_src
@@ -103126,18 +109567,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC zip"
+    EXT_STATIC="$EXT_STATIC http"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC zip"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC http"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_ZIP_SHARED=yes
+      PHP_HTTP_SHARED=yes
       
-  case ext/zip in
+  case ext/http in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/http"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/http/"; ac_bdir="ext/http/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -103152,14 +109593,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_zip.c zip_stream.c $PHP_ZIP_SOURCES; do
+  for ac_src in $PHP_HTTP_SOURCES; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_zip="$shared_objects_zip $ac_bdir$ac_obj.lo"
+      shared_objects_http="$shared_objects_http $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -103182,31 +109623,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpzip.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) $(PHPZIP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpzip.so '$ext_builddir'/phpzip.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phphttp.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_http) $(PHPHTTP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phphttp.so '$ext_builddir'/phphttp.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPZIP, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_http) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPHTTP, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) $(PHPZIP_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_http) $(PHPHTTP_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpzip.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phphttp.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpzip.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phphttp.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_zip"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_http"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpzip.$suffix: $ext_builddir/phpzip.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpzip.$suffix \$(phplibdir)
+\$(phplibdir)/phphttp.$suffix: $ext_builddir/phphttp.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phphttp.$suffix \$(phplibdir)
 
-$ext_builddir/phpzip.$suffix: \$(shared_objects_zip) \$(PHPZIP_SHARED_DEPENDENCIES)
+$ext_builddir/phphttp.$suffix: \$(shared_objects_http) \$(PHPHTTP_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -103219,31 +109660,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/zip.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) $(ZIP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/zip.so '$ext_builddir'/zip.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/http.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_http) $(HTTP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/http.so '$ext_builddir'/http.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(ZIP, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_http) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(HTTP, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) $(ZIP_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_http) $(HTTP_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/zip.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/http.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/zip.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/http.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_zip"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_http"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/zip.$suffix: $ext_builddir/zip.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/zip.$suffix \$(phplibdir)
+\$(phplibdir)/http.$suffix: $ext_builddir/http.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/http.$suffix \$(phplibdir)
 
-$ext_builddir/zip.$suffix: \$(shared_objects_zip) \$(ZIP_SHARED_DEPENDENCIES)
+$ext_builddir/http.$suffix: \$(shared_objects_http) \$(HTTP_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -103251,22 +109692,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_ZIP 1
+#define COMPILE_DL_HTTP 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_ZIP_SHARED=no
+    PHP_HTTP_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/zip in
+  case ext/http in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/http"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/http/"; ac_bdir="ext/http/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -103281,7 +109722,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_zip.c zip_stream.c $PHP_ZIP_SOURCES; do
+  for ac_src in $PHP_HTTP_SOURCES; do
   
       IFS=.
       set $ac_src
@@ -103304,15 +109745,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC zip"
+        EXT_STATIC="$EXT_STATIC http"
         ;;
       *)
         
   
-  case ext/zip in
+  case ext/http in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/http"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/http/"; ac_bdir="ext/http/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -103327,7 +109768,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_zip.c zip_stream.c $PHP_ZIP_SOURCES; do
+  for ac_src in $PHP_HTTP_SOURCES; do
   
       IFS=.
       set $ac_src
@@ -103352,7 +109793,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC zip"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC http"
   fi
   
   
@@ -103361,26 +109802,172 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=zip
+    PHP_PECL_EXTENSION=http
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
+	
+		
+		extname=hash
+		haveext=$HTTP_HAVE_EXT_HASH
+		
+		echo $ac_n "checking whether to add a dependency on ext/$extname""... $ac_c" 1>&6
+echo "configure:109818: checking whether to add a dependency on ext/$extname" >&5
+		if test "$PHP_HTTP_SHARED_DEPS" = "no"; then
+			echo "$ac_t""no" 1>&6
+			
+		elif test "$haveext"; then
+			echo "$ac_t""yes" 1>&6
+			
+				
+  am_i_shared=$PHP_HTTP_SHARED
+  is_it_shared=$PHP_HASH_SHARED
+  is_it_enabled=$PHP_HASH
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension http to build statically, but it
+depends on extension hash, which you've configured to build shared.
+You either need to build http shared or build hash statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension http, which depends on extension hash,
+but you've either not enabled hash, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+			
+			
+		else
+			echo "$ac_t""no" 1>&6
+			
+		fi
+	
+	
+		extname=iconv
+		haveext=$HTTP_HAVE_EXT_ICONV
+		
+		echo $ac_n "checking whether to add a dependency on ext/$extname""... $ac_c" 1>&6
+echo "configure:109856: checking whether to add a dependency on ext/$extname" >&5
+		if test "$PHP_HTTP_SHARED_DEPS" = "no"; then
+			echo "$ac_t""no" 1>&6
+			
+		elif test "$haveext"; then
+			echo "$ac_t""yes" 1>&6
+			
+				
+  am_i_shared=$PHP_HTTP_SHARED
+  is_it_shared=$PHP_ICONV_SHARED
+  is_it_enabled=$PHP_ICONV
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension http to build statically, but it
+depends on extension iconv, which you've configured to build shared.
+You either need to build http shared or build iconv statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension http, which depends on extension iconv,
+but you've either not enabled iconv, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+			
+			
+		else
+			echo "$ac_t""no" 1>&6
+			
+		fi
+	
+	
+		extname=session
+		haveext=$HTTP_HAVE_EXT_SESSION
+		
+		echo $ac_n "checking whether to add a dependency on ext/$extname""... $ac_c" 1>&6
+echo "configure:109894: checking whether to add a dependency on ext/$extname" >&5
+		if test "$PHP_HTTP_SHARED_DEPS" = "no"; then
+			echo "$ac_t""no" 1>&6
+			
+		elif test "$haveext"; then
+			echo "$ac_t""yes" 1>&6
+			
+				
+  am_i_shared=$PHP_HTTP_SHARED
+  is_it_shared=$PHP_SESSION_SHARED
+  is_it_enabled=$PHP_SESSION
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension http to build statically, but it
+depends on extension session, which you've configured to build shared.
+You either need to build http shared or build session statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension http, which depends on extension session,
+but you've either not enabled session, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+			
+			
+		else
+			echo "$ac_t""no" 1>&6
+			
+		fi
+	
+	
+	
+  
+    $php_shtool mkdir -p $ext_builddir/phpstr
+  
+
+	
+  PHP_VAR_SUBST="$PHP_VAR_SUBST HTTP_SHARED_LIBADD"
+
+
+	PHP_HTTP_HEADERS="php_http_std_defs.h php_http.h php_http_api.h php_http_cache_api.h \
+		php_http_date_api.h php_http_headers_api.h php_http_info_api.h php_http_message_api.h \
+		php_http_request_api.h php_http_request_method_api.h php_http_send_api.h php_http_url_api.h \
+		php_http_encoding_api.h phpstr/phpstr.h missing.h php_http_request_body_api.h \
+		php_http_exception_object.h php_http_message_object.h php_http_request_object.h \
+		php_http_requestpool_object.h php_http_response_object.h php_http_util_object.h \
+		php_http_querystring_object.h php_http_deflatestream_object.h php_http_inflatestream_object.h \
+		php_http_cookie_api.h php_http_querystring_api.h php_http_request_datashare_api.h php_http_requestdatashare_object.h \
+		php_http_persistent_handle_api.h"
+	
+		
   
+    header_path=ext/http
+    for header_file in $PHP_HTTP_HEADERS; do
+      hp_hf="$header_path/$header_file"
+      
   
-    $php_shtool mkdir -p $ext_builddir/lib
+  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
   
+  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INSTALLHEADERS$unique=set"
+    
+        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
+      
+  fi
 
+    done 
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST ZIP_SHARED_LIBADD"
 
+	
 
-    
-  src=$ext_srcdir/Makefile.frag
-  ac_srcdir=$ext_srcdir
-  ac_builddir=$ext_builddir
-  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments
+	cat >> confdefs.h <<\EOF
+#define HAVE_HTTP 1
+EOF
 
 fi
 
@@ -103390,7 +109977,7 @@ fi
 php_enable_disable_mysqlnd_compression_support=yes
 
 echo $ac_n "checking whether to disable compressed protocol support in mysqlnd""... $ac_c" 1>&6
-echo "configure:103394: checking whether to disable compressed protocol support in mysqlnd" >&5
+echo "configure:109981: checking whether to disable compressed protocol support in mysqlnd" >&5
 # Check whether --enable-disable_mysqlnd_compression_support or --disable-disable_mysqlnd_compression_support was given.
 if test "${enable_disable_mysqlnd_compression_support+set}" = set; then
   enableval="$enable_disable_mysqlnd_compression_support"
@@ -103435,7 +110022,7 @@ if test -z "$PHP_ZLIB_DIR"; then
 php_with_zlib_dir=no
 
 echo $ac_n "checking for the location of libz""... $ac_c" 1>&6
-echo "configure:103439: checking for the location of libz" >&5
+echo "configure:110026: checking for the location of libz" >&5
 # Check whether --with-zlib-dir or --without-zlib-dir was given.
 if test "${with_zlib_dir+set}" = set; then
   withval="$with_zlib_dir"
@@ -103901,7 +110488,7 @@ if test "$PHP_MYSQLND_ENABLED" = "yes" |
     
   for php_typename in int8 uint8 int16 uint16 int32 uint32 uchar ulong int8_t uint8_t int16_t uint16_t int32_t uint32_t int64_t uint64_t; do
     echo $ac_n "checking whether $php_typename exists""... $ac_c" 1>&6
-echo "configure:103905: checking whether $php_typename exists" >&5
+echo "configure:110492: checking whether $php_typename exists" >&5
     
   php_cache_value=php_cv_sizeof_$php_typename
   if eval "test \"`echo '$''{'php_cv_sizeof_$php_typename'+set}'`\" = set"; then
@@ -103918,7 +110505,7 @@ else
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 103922 "configure"
+#line 110509 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 #if STDC_HEADERS
@@ -103948,7 +110535,7 @@ int main()
 }
   
 EOF
-if { (eval echo configure:103952: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:110539: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     eval $php_cache_value=`cat conftestval`
@@ -104088,7 +110675,7 @@ if test "$PHP_RECODE" != "no"; then
   done
 
   echo $ac_n "checking for hash_insert in -l$MYSQL_LIBNAME""... $ac_c" 1>&6
-echo "configure:104092: checking for hash_insert in -l$MYSQL_LIBNAME" >&5
+echo "configure:110679: checking for hash_insert in -l$MYSQL_LIBNAME" >&5
 ac_lib_var=`echo $MYSQL_LIBNAME'_'hash_insert | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -104096,7 +110683,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$MYSQL_LIBNAME  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 104100 "configure"
+#line 110687 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -104107,7 +110694,7 @@ int main() {
 hash_insert()
 ; return 0; }
 EOF
-if { (eval echo configure:104111: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:110698: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -104209,7 +110796,7 @@ fi
 php_with_pear=DEFAULT
 
 echo $ac_n "checking whether to install PEAR""... $ac_c" 1>&6
-echo "configure:104213: checking whether to install PEAR" >&5
+echo "configure:110800: checking whether to install PEAR" >&5
 # Check whether --with-pear or --without-pear was given.
 if test "${with_pear+set}" = set; then
   withval="$with_pear"
@@ -104311,7 +110898,7 @@ fi
   bison_version=none
   if test "$YACC"; then
     echo $ac_n "checking for bison version""... $ac_c" 1>&6
-echo "configure:104315: checking for bison version" >&5
+echo "configure:110902: checking for bison version" >&5
 if eval "test \"`echo '$''{'php_cv_bison_version'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -104367,17 +110954,17 @@ dlfcn.h
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:104371: checking for $ac_hdr" >&5
+echo "configure:110958: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 104376 "configure"
+#line 110963 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:104381: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:110968: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -104405,12 +110992,12 @@ done
 
 
 echo $ac_n "checking for size_t""... $ac_c" 1>&6
-echo "configure:104409: checking for size_t" >&5
+echo "configure:110996: checking for size_t" >&5
 if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 104414 "configure"
+#line 111001 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #if STDC_HEADERS
@@ -104438,12 +111025,12 @@ EOF
 fi
 
 echo $ac_n "checking return type of signal handlers""... $ac_c" 1>&6
-echo "configure:104442: checking return type of signal handlers" >&5
+echo "configure:111029: checking return type of signal handlers" >&5
 if eval "test \"`echo '$''{'ac_cv_type_signal'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 104447 "configure"
+#line 111034 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <signal.h>
@@ -104460,7 +111047,7 @@ int main() {
 int i;
 ; return 0; }
 EOF
-if { (eval echo configure:104464: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:111051: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_type_signal=void
 else
@@ -104484,12 +111071,12 @@ EOF
 
 
 echo $ac_n "checking for uint""... $ac_c" 1>&6
-echo "configure:104488: checking for uint" >&5
+echo "configure:111075: checking for uint" >&5
 if eval "test \"`echo '$''{'ac_cv_type_uint'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 104493 "configure"
+#line 111080 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #if STDC_HEADERS
@@ -104517,12 +111104,12 @@ EOF
 fi
 
 echo $ac_n "checking for ulong""... $ac_c" 1>&6
-echo "configure:104521: checking for ulong" >&5
+echo "configure:111108: checking for ulong" >&5
 if eval "test \"`echo '$''{'ac_cv_type_ulong'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 104526 "configure"
+#line 111113 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #if STDC_HEADERS
@@ -104552,9 +111139,9 @@ fi
 
 
 echo $ac_n "checking for int32_t""... $ac_c" 1>&6
-echo "configure:104556: checking for int32_t" >&5
+echo "configure:111143: checking for int32_t" >&5
 cat > conftest.$ac_ext <<EOF
-#line 104558 "configure"
+#line 111145 "configure"
 #include "confdefs.h"
 
 #if HAVE_SYS_TYPES_H  
@@ -104573,7 +111160,7 @@ if (sizeof (int32_t))
 
 ; return 0; }
 EOF
-if { (eval echo configure:104577: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:111164: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
   cat >> confdefs.h <<EOF
@@ -104592,9 +111179,9 @@ fi
 rm -f conftest*
 
 echo $ac_n "checking for uint32_t""... $ac_c" 1>&6
-echo "configure:104596: checking for uint32_t" >&5
+echo "configure:111183: checking for uint32_t" >&5
 cat > conftest.$ac_ext <<EOF
-#line 104598 "configure"
+#line 111185 "configure"
 #include "confdefs.h"
 
 #if HAVE_SYS_TYPES_H  
@@ -104613,7 +111200,7 @@ if (sizeof (uint32_t))
 
 ; return 0; }
 EOF
-if { (eval echo configure:104617: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:111204: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
   cat >> confdefs.h <<EOF
@@ -104632,12 +111219,12 @@ fi
 rm -f conftest*
 
 echo $ac_n "checking for vprintf""... $ac_c" 1>&6
-echo "configure:104636: checking for vprintf" >&5
+echo "configure:111223: checking for vprintf" >&5
 if eval "test \"`echo '$''{'ac_cv_func_vprintf'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 104641 "configure"
+#line 111228 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char vprintf(); below.  */
@@ -104660,7 +111247,7 @@ vprintf();
 
 ; return 0; }
 EOF
-if { (eval echo configure:104664: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:111251: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_vprintf=yes"
 else
@@ -104684,12 +111271,12 @@ fi
 
 if test "$ac_cv_func_vprintf" != yes; then
 echo $ac_n "checking for _doprnt""... $ac_c" 1>&6
-echo "configure:104688: checking for _doprnt" >&5
+echo "configure:111275: checking for _doprnt" >&5
 if eval "test \"`echo '$''{'ac_cv_func__doprnt'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 104693 "configure"
+#line 111280 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char _doprnt(); below.  */
@@ -104712,7 +111299,7 @@ _doprnt();
 
 ; return 0; }
 EOF
-if { (eval echo configure:104716: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:111303: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func__doprnt=yes"
 else
@@ -104737,7 +111324,7 @@ fi
 fi
 
 echo $ac_n "checking for 8-bit clean memcmp""... $ac_c" 1>&6
-echo "configure:104741: checking for 8-bit clean memcmp" >&5
+echo "configure:111328: checking for 8-bit clean memcmp" >&5
 if eval "test \"`echo '$''{'ac_cv_func_memcmp_clean'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -104745,7 +111332,7 @@ else
   ac_cv_func_memcmp_clean=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 104749 "configure"
+#line 111336 "configure"
 #include "confdefs.h"
 
 main()
@@ -104755,7 +111342,7 @@ main()
 }
 
 EOF
-if { (eval echo configure:104759: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:111346: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_func_memcmp_clean=yes
 else
@@ -104775,19 +111362,19 @@ test $ac_cv_func_memcmp_clean = no && LI
 # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
 # for constant arguments.  Useless!
 echo $ac_n "checking for working alloca.h""... $ac_c" 1>&6
-echo "configure:104779: checking for working alloca.h" >&5
+echo "configure:111366: checking for working alloca.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_alloca_h'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 104784 "configure"
+#line 111371 "configure"
 #include "confdefs.h"
 #include <alloca.h>
 int main() {
 char *p = alloca(2 * sizeof(int));
 ; return 0; }
 EOF
-if { (eval echo configure:104791: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:111378: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_header_alloca_h=yes
 else
@@ -104808,12 +111395,12 @@ EOF
 fi
 
 echo $ac_n "checking for alloca""... $ac_c" 1>&6
-echo "configure:104812: checking for alloca" >&5
+echo "configure:111399: checking for alloca" >&5
 if eval "test \"`echo '$''{'ac_cv_func_alloca_works'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 104817 "configure"
+#line 111404 "configure"
 #include "confdefs.h"
 
 #ifdef __GNUC__
@@ -104841,7 +111428,7 @@ int main() {
 char *p = (char *) alloca(1);
 ; return 0; }
 EOF
-if { (eval echo configure:104845: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:111432: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_func_alloca_works=yes
 else
@@ -104873,12 +111460,12 @@ EOF
 
 
 echo $ac_n "checking whether alloca needs Cray hooks""... $ac_c" 1>&6
-echo "configure:104877: checking whether alloca needs Cray hooks" >&5
+echo "configure:111464: checking whether alloca needs Cray hooks" >&5
 if eval "test \"`echo '$''{'ac_cv_os_cray'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 104882 "configure"
+#line 111469 "configure"
 #include "confdefs.h"
 #if defined(CRAY) && ! defined(CRAY2)
 webecray
@@ -104903,12 +111490,12 @@ echo "$ac_t""$ac_cv_os_cray" 1>&6
 if test $ac_cv_os_cray = yes; then
 for ac_func in _getb67 GETB67 getb67; do
   echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:104907: checking for $ac_func" >&5
+echo "configure:111494: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 104912 "configure"
+#line 111499 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -104931,7 +111518,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:104935: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:111522: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -104958,7 +111545,7 @@ done
 fi
 
 echo $ac_n "checking stack direction for C alloca""... $ac_c" 1>&6
-echo "configure:104962: checking stack direction for C alloca" >&5
+echo "configure:111549: checking stack direction for C alloca" >&5
 if eval "test \"`echo '$''{'ac_cv_c_stack_direction'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -104966,7 +111553,7 @@ else
   ac_cv_c_stack_direction=0
 else
   cat > conftest.$ac_ext <<EOF
-#line 104970 "configure"
+#line 111557 "configure"
 #include "confdefs.h"
 find_stack_direction ()
 {
@@ -104985,7 +111572,7 @@ main ()
   exit (find_stack_direction() < 0);
 }
 EOF
-if { (eval echo configure:104989: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:111576: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_c_stack_direction=1
 else
@@ -105009,12 +111596,12 @@ fi
 for ac_func in memcpy strdup getpid kill strtod strtol finite fpclass sigsetjmp
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:105013: checking for $ac_func" >&5
+echo "configure:111600: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 105018 "configure"
+#line 111605 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -105037,7 +111624,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:105041: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:111628: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -105063,7 +111650,7 @@ done
 
 
   echo $ac_n "checking whether sprintf is broken""... $ac_c" 1>&6
-echo "configure:105067: checking whether sprintf is broken" >&5
+echo "configure:111654: checking whether sprintf is broken" >&5
 if eval "test \"`echo '$''{'ac_cv_broken_sprintf'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -105074,11 +111661,11 @@ else
     
 else
   cat > conftest.$ac_ext <<EOF
-#line 105078 "configure"
+#line 111665 "configure"
 #include "confdefs.h"
 main() {char buf[20];exit(sprintf(buf,"testing 123")!=11); }
 EOF
-if { (eval echo configure:105082: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:111669: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
       ac_cv_broken_sprintf=no
@@ -105112,12 +111699,12 @@ EOF
 for ac_func in finite isfinite isinf isnan
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:105116: checking for $ac_func" >&5
+echo "configure:111703: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 105121 "configure"
+#line 111708 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -105140,7 +111727,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:105144: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:111731: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -105167,13 +111754,13 @@ done
 
 
   echo $ac_n "checking whether fp_except is defined""... $ac_c" 1>&6
-echo "configure:105171: checking whether fp_except is defined" >&5
+echo "configure:111758: checking whether fp_except is defined" >&5
 if eval "test \"`echo '$''{'ac_cv_type_fp_except'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
     cat > conftest.$ac_ext <<EOF
-#line 105177 "configure"
+#line 111764 "configure"
 #include "confdefs.h"
 
 #include <floatingpoint.h>
@@ -105184,7 +111771,7 @@ fp_except x = (fp_except) 0;
 
 ; return 0; }
 EOF
-if { (eval echo configure:105188: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:111775: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
      ac_cv_type_fp_except=yes
@@ -105211,9 +111798,9 @@ EOF
 
 
   echo $ac_n "checking for usable _FPU_SETCW""... $ac_c" 1>&6
-echo "configure:105215: checking for usable _FPU_SETCW" >&5
+echo "configure:111802: checking for usable _FPU_SETCW" >&5
   cat > conftest.$ac_ext <<EOF
-#line 105217 "configure"
+#line 111804 "configure"
 #include "confdefs.h"
 
     #include <fpu_control.h>
@@ -105233,7 +111820,7 @@ int main() {
   
 ; return 0; }
 EOF
-if { (eval echo configure:105237: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:111824: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cfp_have__fpu_setcw=yes
 else
@@ -105254,9 +111841,9 @@ EOF
   fi
   
   echo $ac_n "checking for usable fpsetprec""... $ac_c" 1>&6
-echo "configure:105258: checking for usable fpsetprec" >&5
+echo "configure:111845: checking for usable fpsetprec" >&5
   cat > conftest.$ac_ext <<EOF
-#line 105260 "configure"
+#line 111847 "configure"
 #include "confdefs.h"
 
     #include <machine/ieeefp.h>
@@ -105275,7 +111862,7 @@ int main() {
   
 ; return 0; }
 EOF
-if { (eval echo configure:105279: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:111866: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cfp_have_fpsetprec=yes
 else
@@ -105296,9 +111883,9 @@ EOF
   fi
 
   echo $ac_n "checking for usable _controlfp""... $ac_c" 1>&6
-echo "configure:105300: checking for usable _controlfp" >&5
+echo "configure:111887: checking for usable _controlfp" >&5
   cat > conftest.$ac_ext <<EOF
-#line 105302 "configure"
+#line 111889 "configure"
 #include "confdefs.h"
 
     #include <float.h>
@@ -105317,7 +111904,7 @@ int main() {
   
 ; return 0; }
 EOF
-if { (eval echo configure:105321: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:111908: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cfp_have__controlfp=yes
 else
@@ -105338,9 +111925,9 @@ EOF
   fi
 
   echo $ac_n "checking for usable _controlfp_s""... $ac_c" 1>&6
-echo "configure:105342: checking for usable _controlfp_s" >&5
+echo "configure:111929: checking for usable _controlfp_s" >&5
   cat > conftest.$ac_ext <<EOF
-#line 105344 "configure"
+#line 111931 "configure"
 #include "confdefs.h"
 
    #include <float.h>
@@ -105360,7 +111947,7 @@ int main() {
   
 ; return 0; }
 EOF
-if { (eval echo configure:105364: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:111951: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cfp_have__controlfp_s=yes
 else
@@ -105381,9 +111968,9 @@ EOF
   fi
 
   echo $ac_n "checking whether FPU control word can be manipulated by inline assembler""... $ac_c" 1>&6
-echo "configure:105385: checking whether FPU control word can be manipulated by inline assembler" >&5
+echo "configure:111972: checking whether FPU control word can be manipulated by inline assembler" >&5
   cat > conftest.$ac_ext <<EOF
-#line 105387 "configure"
+#line 111974 "configure"
 #include "confdefs.h"
 
     /* nothing */
@@ -105405,7 +111992,7 @@ int main() {
   
 ; return 0; }
 EOF
-if { (eval echo configure:105409: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:111996: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cfp_have_fpu_inline_asm_x86=yes
 else
@@ -105427,7 +112014,7 @@ EOF
 
 
 echo $ac_n "checking whether double cast to long preserves least significant bits""... $ac_c" 1>&6
-echo "configure:105431: checking whether double cast to long preserves least significant bits" >&5
+echo "configure:112018: checking whether double cast to long preserves least significant bits" >&5
 
 if test "$cross_compiling" = yes; then
   
@@ -105435,7 +112022,7 @@ if test "$cross_compiling" = yes; then
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 105439 "configure"
+#line 112026 "configure"
 #include "confdefs.h"
 
 #include <limits.h>
@@ -105459,7 +112046,7 @@ int main()
 }
 
 EOF
-if { (eval echo configure:105463: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:112050: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   cat >> confdefs.h <<\EOF
@@ -105485,17 +112072,17 @@ for ac_hdr in dlfcn.h
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:105489: checking for $ac_hdr" >&5
+echo "configure:112076: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 105494 "configure"
+#line 112081 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:105499: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:112086: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -105523,14 +112110,14 @@ done
 
 
 echo $ac_n "checking whether dlsym() requires a leading underscore in symbol names""... $ac_c" 1>&6
-echo "configure:105527: checking whether dlsym() requires a leading underscore in symbol names" >&5
+echo "configure:112114: checking whether dlsym() requires a leading underscore in symbol names" >&5
 if test "$cross_compiling" = yes; then :
   
 else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 105534 "configure"
+#line 112121 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -105593,7 +112180,7 @@ int main ()
     exit (status);
 }
 EOF
-  if { (eval echo configure:105597: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} 2>/dev/null; then
+  if { (eval echo configure:112184: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} 2>/dev/null; then
     (./conftest; exit; ) >&5 2>/dev/null
     lt_status=$?
     case x$lt_status in
@@ -105676,23 +112263,23 @@ fi
 
 
 echo $ac_n "checking virtual machine dispatch method""... $ac_c" 1>&6
-echo "configure:105680: checking virtual machine dispatch method" >&5
+echo "configure:112267: checking virtual machine dispatch method" >&5
 echo "$ac_t""$PHP_ZEND_VM" 1>&6
 
 echo $ac_n "checking whether to enable thread-safety""... $ac_c" 1>&6
-echo "configure:105684: checking whether to enable thread-safety" >&5
+echo "configure:112271: checking whether to enable thread-safety" >&5
 echo "$ac_t""$ZEND_MAINTAINER_ZTS" 1>&6
 
 echo $ac_n "checking whether to enable inline optimization for GCC""... $ac_c" 1>&6
-echo "configure:105688: checking whether to enable inline optimization for GCC" >&5
+echo "configure:112275: checking whether to enable inline optimization for GCC" >&5
 echo "$ac_t""$ZEND_INLINE_OPTIMIZATION" 1>&6
 
 echo $ac_n "checking whether to enable Zend debugging""... $ac_c" 1>&6
-echo "configure:105692: checking whether to enable Zend debugging" >&5
+echo "configure:112279: checking whether to enable Zend debugging" >&5
 echo "$ac_t""$ZEND_DEBUG" 1>&6
 
 echo $ac_n "checking whether to enable Zend multibyte""... $ac_c" 1>&6
-echo "configure:105696: checking whether to enable Zend multibyte" >&5
+echo "configure:112283: checking whether to enable Zend multibyte" >&5
 echo "$ac_t""$ZEND_MULTIBYTE" 1>&6
 
 case $PHP_ZEND_VM in
@@ -105765,21 +112352,21 @@ fi
 
 
 echo $ac_n "checking for inline""... $ac_c" 1>&6
-echo "configure:105769: checking for inline" >&5
+echo "configure:112356: checking for inline" >&5
 if eval "test \"`echo '$''{'ac_cv_c_inline'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_cv_c_inline=no
 for ac_kw in inline __inline__ __inline; do
   cat > conftest.$ac_ext <<EOF
-#line 105776 "configure"
+#line 112363 "configure"
 #include "confdefs.h"
 
 int main() {
 } $ac_kw foo() {
 ; return 0; }
 EOF
-if { (eval echo configure:105783: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:112370: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_c_inline=$ac_kw; break
 else
@@ -105808,7 +112395,7 @@ esac
 
 
 echo $ac_n "checking target system is Darwin""... $ac_c" 1>&6
-echo "configure:105812: checking target system is Darwin" >&5
+echo "configure:112399: checking target system is Darwin" >&5
 if echo "$target" | grep "darwin" > /dev/null; then
   cat >> confdefs.h <<\EOF
 #define DARWIN 1
@@ -105820,7 +112407,7 @@ else
 fi
 
 echo $ac_n "checking for MM alignment and log values""... $ac_c" 1>&6
-echo "configure:105824: checking for MM alignment and log values" >&5
+echo "configure:112411: checking for MM alignment and log values" >&5
 
 if test "$cross_compiling" = yes; then
   
@@ -105828,7 +112415,7 @@ if test "$cross_compiling" = yes; then
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 105832 "configure"
+#line 112419 "configure"
 #include "confdefs.h"
 
 #include <stdio.h>
@@ -105864,7 +112451,7 @@ int main()
 }
 
 EOF
-if { (eval echo configure:105868: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:112455: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   LIBZEND_MM_ALIGN=`cat conftest.zend | cut -d ' ' -f 1`
@@ -105889,7 +112476,7 @@ fi
 echo "$ac_t""done" 1>&6
 
 echo $ac_n "checking for memory allocation using mmap(MAP_ANON)""... $ac_c" 1>&6
-echo "configure:105893: checking for memory allocation using mmap(MAP_ANON)" >&5
+echo "configure:112480: checking for memory allocation using mmap(MAP_ANON)" >&5
 
 if test "$cross_compiling" = yes; then
   
@@ -105897,7 +112484,7 @@ if test "$cross_compiling" = yes; then
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 105901 "configure"
+#line 112488 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
@@ -105933,7 +112520,7 @@ int main()
 }
 
 EOF
-if { (eval echo configure:105937: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:112524: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   cat >> confdefs.h <<\EOF
@@ -105955,7 +112542,7 @@ fi
 
 
 echo $ac_n "checking for memory allocation using mmap("/dev/zero")""... $ac_c" 1>&6
-echo "configure:105959: checking for memory allocation using mmap("/dev/zero")" >&5
+echo "configure:112546: checking for memory allocation using mmap("/dev/zero")" >&5
 
 if test "$cross_compiling" = yes; then
   
@@ -105963,7 +112550,7 @@ if test "$cross_compiling" = yes; then
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 105967 "configure"
+#line 112554 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
@@ -106009,7 +112596,7 @@ int main()
 }
 
 EOF
-if { (eval echo configure:106013: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:112600: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   cat >> confdefs.h <<\EOF
@@ -106033,12 +112620,12 @@ fi
 for ac_func in mremap
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:106037: checking for $ac_func" >&5
+echo "configure:112624: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 106042 "configure"
+#line 112629 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -106061,7 +112648,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:106065: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:112652: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -106128,17 +112715,17 @@ for ac_hdr in stdarg.h
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:106132: checking for $ac_hdr" >&5
+echo "configure:112719: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 106137 "configure"
+#line 112724 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:106142: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:112729: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -106215,7 +112802,7 @@ if test "$TSRM_PTH" != "no"; then
   
 
 echo $ac_n "checking for GNU Pth""... $ac_c" 1>&6
-echo "configure:106219: checking for GNU Pth" >&5
+echo "configure:112806: checking for GNU Pth" >&5
 PTH_PREFIX="`$TSRM_PTH --prefix`"
 if test -z "$PTH_PREFIX"; then
   echo "$ac_t""Please check your Pth installation" 1>&6
@@ -106245,17 +112832,17 @@ elif test "$TSRM_ST" != "no"; then
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:106249: checking for $ac_hdr" >&5
+echo "configure:112836: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 106254 "configure"
+#line 112841 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:106259: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:112846: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -106285,7 +112872,7 @@ done
 
   LIBS="$LIBS -lst"
   echo $ac_n "checking for SGI's State Threads""... $ac_c" 1>&6
-echo "configure:106289: checking for SGI's State Threads" >&5
+echo "configure:112876: checking for SGI's State Threads" >&5
   echo "$ac_t""yes" 1>&6
   cat >> confdefs.h <<\EOF
 #define TSRM_ST 1
@@ -106324,7 +112911,7 @@ if test "$cross_compiling" = yes; then
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 106328 "configure"
+#line 112915 "configure"
 #include "confdefs.h"
 
 #include <pthread.h>
@@ -106342,7 +112929,7 @@ int main() {
     return pthread_create(&thd, NULL, thread_routine, &data);
 } 
 EOF
-if { (eval echo configure:106346: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:112933: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   pthreads_working=yes
@@ -106362,7 +112949,7 @@ fi
   CFLAGS=$save_CFLAGS
 
   echo $ac_n "checking for pthreads_cflags""... $ac_c" 1>&6
-echo "configure:106366: checking for pthreads_cflags" >&5
+echo "configure:112953: checking for pthreads_cflags" >&5
 if eval "test \"`echo '$''{'ac_cv_pthreads_cflags'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -106384,7 +112971,7 @@ if test "$cross_compiling" = yes; then
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 106388 "configure"
+#line 112975 "configure"
 #include "confdefs.h"
 
 #include <pthread.h>
@@ -106402,7 +112989,7 @@ int main() {
     return pthread_create(&thd, NULL, thread_routine, &data);
 } 
 EOF
-if { (eval echo configure:106406: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:112993: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   pthreads_working=yes
@@ -106432,7 +113019,7 @@ fi
 echo "$ac_t""$ac_cv_pthreads_cflags" 1>&6
 
 echo $ac_n "checking for pthreads_lib""... $ac_c" 1>&6
-echo "configure:106436: checking for pthreads_lib" >&5
+echo "configure:113023: checking for pthreads_lib" >&5
 if eval "test \"`echo '$''{'ac_cv_pthreads_lib'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -106454,7 +113041,7 @@ if test "$cross_compiling" = yes; then
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 106458 "configure"
+#line 113045 "configure"
 #include "confdefs.h"
 
 #include <pthread.h>
@@ -106472,7 +113059,7 @@ int main() {
     return pthread_create(&thd, NULL, thread_routine, &data);
 } 
 EOF
-if { (eval echo configure:106476: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:113063: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   pthreads_working=yes
@@ -106523,7 +113110,7 @@ EOF
 
 
   echo $ac_n "checking for POSIX threads""... $ac_c" 1>&6
-echo "configure:106527: checking for POSIX threads" >&5
+echo "configure:113114: checking for POSIX threads" >&5
   echo "$ac_t""yes" 1>&6
 fi
 
@@ -107157,7 +113744,7 @@ fi
 
 
 echo $ac_n "checking build system type""... $ac_c" 1>&6
-echo "configure:107161: checking build system type" >&5
+echo "configure:113748: checking build system type" >&5
 
 build_alias=$build
 case "$build_alias" in
@@ -107186,7 +113773,7 @@ ac_prog=ld
 if test "$GCC" = yes; then
   # Check if gcc -print-prog-name=ld gives a path.
   echo $ac_n "checking for ld used by $CC""... $ac_c" 1>&6
-echo "configure:107190: checking for ld used by $CC" >&5
+echo "configure:113777: checking for ld used by $CC" >&5
   case $host in
   *-*-mingw*)
     # gcc leaves a trailing carriage return which upsets mingw
@@ -107216,10 +113803,10 @@ echo "configure:107190: checking for ld
   esac
 elif test "$with_gnu_ld" = yes; then
   echo $ac_n "checking for GNU ld""... $ac_c" 1>&6
-echo "configure:107220: checking for GNU ld" >&5
+echo "configure:113807: checking for GNU ld" >&5
 else
   echo $ac_n "checking for non-GNU ld""... $ac_c" 1>&6
-echo "configure:107223: checking for non-GNU ld" >&5
+echo "configure:113810: checking for non-GNU ld" >&5
 fi
 if eval "test \"`echo '$''{'lt_cv_path_LD'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -107258,7 +113845,7 @@ else
 fi
 test -z "$LD" && { echo "configure: error: no acceptable ld found in \$PATH" 1>&2; exit 1; }
 echo $ac_n "checking if the linker ($LD) is GNU ld""... $ac_c" 1>&6
-echo "configure:107262: checking if the linker ($LD) is GNU ld" >&5
+echo "configure:113849: checking if the linker ($LD) is GNU ld" >&5
 if eval "test \"`echo '$''{'lt_cv_prog_gnu_ld'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -107278,7 +113865,7 @@ with_gnu_ld=$lt_cv_prog_gnu_ld
 
 
 echo $ac_n "checking for $LD option to reload object files""... $ac_c" 1>&6
-echo "configure:107282: checking for $LD option to reload object files" >&5
+echo "configure:113869: checking for $LD option to reload object files" >&5
 if eval "test \"`echo '$''{'lt_cv_ld_reload_flag'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -107303,7 +113890,7 @@ case $host_os in
 esac
 
 echo $ac_n "checking for BSD-compatible nm""... $ac_c" 1>&6
-echo "configure:107307: checking for BSD-compatible nm" >&5
+echo "configure:113894: checking for BSD-compatible nm" >&5
 if eval "test \"`echo '$''{'lt_cv_path_NM'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -107356,7 +113943,7 @@ echo "$ac_t""$lt_cv_path_NM" 1>&6
 NM="$lt_cv_path_NM"
 
 echo $ac_n "checking how to recognize dependent libraries""... $ac_c" 1>&6
-echo "configure:107360: checking how to recognize dependent libraries" >&5
+echo "configure:113947: checking how to recognize dependent libraries" >&5
 if eval "test \"`echo '$''{'lt_cv_deplibs_check_method'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -107548,13 +114135,13 @@ deplibs_check_method=$lt_cv_deplibs_chec
 test -z "$deplibs_check_method" && deplibs_check_method=unknown
 
 echo $ac_n "checking for object suffix""... $ac_c" 1>&6
-echo "configure:107552: checking for object suffix" >&5
+echo "configure:114139: checking for object suffix" >&5
 if eval "test \"`echo '$''{'ac_cv_objext'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   rm -f conftest*
 echo 'int i = 1;' > conftest.$ac_ext
-if { (eval echo configure:107558: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:114145: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   for ac_file in conftest.*; do
     case $ac_file in
     *.c) ;;
@@ -107574,7 +114161,7 @@ ac_objext=$ac_cv_objext
 
 
 echo $ac_n "checking for executable suffix""... $ac_c" 1>&6
-echo "configure:107578: checking for executable suffix" >&5
+echo "configure:114165: checking for executable suffix" >&5
 if eval "test \"`echo '$''{'ac_cv_exeext'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -107584,10 +114171,10 @@ else
   rm -f conftest*
   echo 'int main () { return 0; }' > conftest.$ac_ext
   ac_cv_exeext=
-  if { (eval echo configure:107588: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
+  if { (eval echo configure:114175: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
     for file in conftest.*; do
       case $file in
-      *.c | *.o | *.obj) ;;
+      *.$ac_ext | *.c | *.o | *.obj) ;;
       *) ac_cv_exeext=`echo $file | sed -e s/conftest//` ;;
       esac
     done
@@ -107630,7 +114217,7 @@ case $host in
 ia64-*-hpux*)
   # Find out which ABI we are using.
   echo 'int i;' > conftest.$ac_ext
-  if { (eval echo configure:107634: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  if { (eval echo configure:114221: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
     case `/usr/bin/file conftest.$ac_objext` in
     *ELF-32*)
       HPUX_IA64_MODE="32"
@@ -107644,8 +114231,8 @@ ia64-*-hpux*)
   ;;
 *-*-irix6*)
   # Find out which ABI we are using.
-  echo '#line 107648 "configure"' > conftest.$ac_ext
-  if { (eval echo configure:107649: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  echo '#line 114235 "configure"' > conftest.$ac_ext
+  if { (eval echo configure:114236: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    if test "$lt_cv_prog_gnu_ld" = yes; then
     case `/usr/bin/file conftest.$ac_objext` in
     *32-bit*)
@@ -107679,7 +114266,7 @@ x86_64-*kfreebsd*-gnu|x86_64-*linux*|ppc
 s390*-*linux*|sparc*-*linux*)
   # Find out which ABI we are using.
   echo 'int i;' > conftest.$ac_ext
-  if { (eval echo configure:107683: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  if { (eval echo configure:114270: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
     case `/usr/bin/file conftest.o` in
     *32-bit*)
       case $host in
@@ -107729,7 +114316,7 @@ s390*-*linux*|sparc*-*linux*)
   SAVE_CFLAGS="$CFLAGS"
   CFLAGS="$CFLAGS -belf"
   echo $ac_n "checking whether the C compiler needs -belf""... $ac_c" 1>&6
-echo "configure:107733: checking whether the C compiler needs -belf" >&5
+echo "configure:114320: checking whether the C compiler needs -belf" >&5
 if eval "test \"`echo '$''{'lt_cv_cc_needs_belf'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -107742,14 +114329,14 @@ ac_link='${CC-cc} -o conftest${ac_exeext
 cross_compiling=$ac_cv_prog_cc_cross
 
      cat > conftest.$ac_ext <<EOF
-#line 107746 "configure"
+#line 114333 "configure"
 #include "confdefs.h"
 
 int main() {
 
 ; return 0; }
 EOF
-if { (eval echo configure:107753: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:114340: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   lt_cv_cc_needs_belf=yes
 else
@@ -107777,7 +114364,7 @@ echo "$ac_t""$lt_cv_cc_needs_belf" 1>&6
 sparc*-*solaris*)
   # Find out which ABI we are using.
   echo 'int i;' > conftest.$ac_ext
-  if { (eval echo configure:107781: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  if { (eval echo configure:114368: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
     case `/usr/bin/file conftest.o` in
     *64-bit*)
       case $lt_cv_prog_gnu_ld in
@@ -107806,7 +114393,7 @@ if test -n "$CXX" && ( test "X$CXX" != "
     ( (test "X$CXX" = "Xg++" && `g++ -v >/dev/null 2>&1` ) ||
     (test "X$CXX" != "Xg++"))) ; then
   echo $ac_n "checking how to run the C++ preprocessor""... $ac_c" 1>&6
-echo "configure:107810: checking how to run the C++ preprocessor" >&5
+echo "configure:114397: checking how to run the C++ preprocessor" >&5
 if test -z "$CXXCPP"; then
 if eval "test \"`echo '$''{'ac_cv_prog_CXXCPP'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -107819,12 +114406,12 @@ ac_link='${CXX-g++} -o conftest${ac_exee
 cross_compiling=$ac_cv_prog_cxx_cross
   CXXCPP="${CXX-g++} -E"
   cat > conftest.$ac_ext <<EOF
-#line 107823 "configure"
+#line 114410 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:107828: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:114415: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -107854,7 +114441,7 @@ fi
 # Autoconf 2.13's AC_OBJEXT and AC_EXEEXT macros only works for C compilers!
 # find the maximum length of command line arguments
 echo $ac_n "checking the maximum length of command line arguments""... $ac_c" 1>&6
-echo "configure:107858: checking the maximum length of command line arguments" >&5
+echo "configure:114445: checking the maximum length of command line arguments" >&5
 if eval "test \"`echo '$''{'lt_cv_sys_max_cmd_len'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -107976,7 +114563,7 @@ fi
 
 # Check for command to grab the raw symbol name followed by C symbol from nm.
 echo $ac_n "checking command to parse $NM output from $compiler object""... $ac_c" 1>&6
-echo "configure:107980: checking command to parse $NM output from $compiler object" >&5
+echo "configure:114567: checking command to parse $NM output from $compiler object" >&5
 if eval "test \"`echo '$''{'lt_cv_sys_global_symbol_pipe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108080,10 +114667,10 @@ void nm_test_func(){}
 int main(){nm_test_var='a';nm_test_func();return(0);}
 EOF
 
-  if { (eval echo configure:108084: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  if { (eval echo configure:114671: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
     # Now try to grab the symbols.
     nlist=conftest.nm
-    if { (eval echo configure:108087: \"$NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist\") 1>&5; (eval $NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist) 2>&5; } && test -s "$nlist"; then
+    if { (eval echo configure:114674: \"$NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist\") 1>&5; (eval $NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist) 2>&5; } && test -s "$nlist"; then
       # Try sorting and uniquifying the output.
       if sort "$nlist" | uniq > "$nlist"T; then
 	mv -f "$nlist"T "$nlist"
@@ -108134,7 +114721,7 @@ EOF
 	  lt_save_CFLAGS="$CFLAGS"
 	  LIBS="conftstm.$ac_objext"
 	  CFLAGS="$CFLAGS$lt_prog_compiler_no_builtin_flag"
-	  if { (eval echo configure:108138: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+	  if { (eval echo configure:114725: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
 	    pipe_works=yes
 	  fi
 	  LIBS="$lt_save_LIBS"
@@ -108174,7 +114761,7 @@ else
 fi
 
 echo $ac_n "checking for objdir""... $ac_c" 1>&6
-echo "configure:108178: checking for objdir" >&5
+echo "configure:114765: checking for objdir" >&5
 if eval "test \"`echo '$''{'lt_cv_objdir'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108240,7 +114827,7 @@ with_gnu_ld="$lt_cv_prog_gnu_ld"
 # Extract the first word of "${ac_tool_prefix}ar", so it can be a program name with args.
 set dummy ${ac_tool_prefix}ar; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:108244: checking for $ac_word" >&5
+echo "configure:114831: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_AR'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108272,7 +114859,7 @@ if test -n "$ac_tool_prefix"; then
   # Extract the first word of "ar", so it can be a program name with args.
 set dummy ar; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:108276: checking for $ac_word" >&5
+echo "configure:114863: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_AR'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108307,7 +114894,7 @@ fi
 # Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
 set dummy ${ac_tool_prefix}ranlib; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:108311: checking for $ac_word" >&5
+echo "configure:114898: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108339,7 +114926,7 @@ if test -n "$ac_tool_prefix"; then
   # Extract the first word of "ranlib", so it can be a program name with args.
 set dummy ranlib; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:108343: checking for $ac_word" >&5
+echo "configure:114930: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108374,7 +114961,7 @@ fi
 # Extract the first word of "${ac_tool_prefix}strip", so it can be a program name with args.
 set dummy ${ac_tool_prefix}strip; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:108378: checking for $ac_word" >&5
+echo "configure:114965: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_STRIP'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108406,7 +114993,7 @@ if test -n "$ac_tool_prefix"; then
   # Extract the first word of "strip", so it can be a program name with args.
 set dummy strip; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:108410: checking for $ac_word" >&5
+echo "configure:114997: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_STRIP'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108493,7 +115080,7 @@ case $deplibs_check_method in
 file_magic*)
   if test "$file_magic_cmd" = '$MAGIC_CMD'; then
     echo $ac_n "checking for ${ac_tool_prefix}file""... $ac_c" 1>&6
-echo "configure:108497: checking for ${ac_tool_prefix}file" >&5
+echo "configure:115084: checking for ${ac_tool_prefix}file" >&5
 if eval "test \"`echo '$''{'lt_cv_path_MAGIC_CMD'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108553,7 +115140,7 @@ fi
 if test -z "$lt_cv_path_MAGIC_CMD"; then
   if test -n "$ac_tool_prefix"; then
     echo $ac_n "checking for file""... $ac_c" 1>&6
-echo "configure:108557: checking for file" >&5
+echo "configure:115144: checking for file" >&5
 if eval "test \"`echo '$''{'lt_cv_path_MAGIC_CMD'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108625,7 +115212,7 @@ esac
     # Extract the first word of "${ac_tool_prefix}dsymutil", so it can be a program name with args.
 set dummy ${ac_tool_prefix}dsymutil; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:108629: checking for $ac_word" >&5
+echo "configure:115216: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_DSYMUTIL'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108657,7 +115244,7 @@ if test -n "$ac_tool_prefix"; then
   # Extract the first word of "dsymutil", so it can be a program name with args.
 set dummy dsymutil; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:108661: checking for $ac_word" >&5
+echo "configure:115248: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_DSYMUTIL'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108692,7 +115279,7 @@ fi
     # Extract the first word of "${ac_tool_prefix}nmedit", so it can be a program name with args.
 set dummy ${ac_tool_prefix}nmedit; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:108696: checking for $ac_word" >&5
+echo "configure:115283: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_NMEDIT'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108724,7 +115311,7 @@ if test -n "$ac_tool_prefix"; then
   # Extract the first word of "nmedit", so it can be a program name with args.
 set dummy nmedit; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:108728: checking for $ac_word" >&5
+echo "configure:115315: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_NMEDIT'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108758,7 +115345,7 @@ fi
 
 
     echo $ac_n "checking for -single_module linker flag""... $ac_c" 1>&6
-echo "configure:108762: checking for -single_module linker flag" >&5
+echo "configure:115349: checking for -single_module linker flag" >&5
 if eval "test \"`echo '$''{'lt_cv_apple_cc_single_mod'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108781,7 +115368,7 @@ fi
 
 echo "$ac_t""$lt_cv_apple_cc_single_mod" 1>&6
     echo $ac_n "checking for -exported_symbols_list linker flag""... $ac_c" 1>&6
-echo "configure:108785: checking for -exported_symbols_list linker flag" >&5
+echo "configure:115372: checking for -exported_symbols_list linker flag" >&5
 if eval "test \"`echo '$''{'lt_cv_ld_exported_symbols_list'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108791,12 +115378,12 @@ else
       LDFLAGS="$LDFLAGS -Wl,-exported_symbols_list,conftest.sym"
       
 cat > conftest.$ac_ext <<EOF
-#line 108795 "configure"
+#line 115382 "configure"
 #include "confdefs.h"
 int main() {
 ; return 0; }
 EOF
-if { (eval echo configure:108800: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:115387: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  lt_cv_ld_exported_symbols_list=yes
   rm -rf conftest*
 else
@@ -108930,7 +115517,7 @@ if test "$GCC" = yes; then
 
   
 echo $ac_n "checking if $compiler supports -fno-rtti -fno-exceptions""... $ac_c" 1>&6
-echo "configure:108934: checking if $compiler supports -fno-rtti -fno-exceptions" >&5
+echo "configure:115521: checking if $compiler supports -fno-rtti -fno-exceptions" >&5
 if eval "test \"`echo '$''{'lt_cv_prog_compiler_rtti_exceptions'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108947,11 +115534,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"configure:108951: $lt_compile\"" >&5)
+   (eval echo "\"configure:115538: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "configure:108955: \$? = $ac_status" >&5
+   echo "configure:115542: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -108980,7 +115567,7 @@ lt_prog_compiler_pic=
 lt_prog_compiler_static=
 
 echo $ac_n "checking for $compiler option to produce PIC""... $ac_c" 1>&6
-echo "configure:108984: checking for $compiler option to produce PIC" >&5
+echo "configure:115571: checking for $compiler option to produce PIC" >&5
  
   if test "$GCC" = yes; then
     lt_prog_compiler_wl='-Wl,'
@@ -109227,7 +115814,7 @@ echo "$ac_t""$lt_prog_compiler_pic" 1>&6
 if test -n "$lt_prog_compiler_pic"; then
   
 echo $ac_n "checking if $compiler PIC flag $lt_prog_compiler_pic works""... $ac_c" 1>&6
-echo "configure:109231: checking if $compiler PIC flag $lt_prog_compiler_pic works" >&5
+echo "configure:115818: checking if $compiler PIC flag $lt_prog_compiler_pic works" >&5
 if eval "test \"`echo '$''{'lt_cv_prog_compiler_pic_works'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -109244,11 +115831,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"configure:109248: $lt_compile\"" >&5)
+   (eval echo "\"configure:115835: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "configure:109252: \$? = $ac_status" >&5
+   echo "configure:115839: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -109290,7 +115877,7 @@ esac
 #
 wl=$lt_prog_compiler_wl eval lt_tmp_static_flag=\"$lt_prog_compiler_static\"
 echo $ac_n "checking if $compiler static flag $lt_tmp_static_flag works""... $ac_c" 1>&6
-echo "configure:109294: checking if $compiler static flag $lt_tmp_static_flag works" >&5
+echo "configure:115881: checking if $compiler static flag $lt_tmp_static_flag works" >&5
 if eval "test \"`echo '$''{'lt_cv_prog_compiler_static_works'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -109328,7 +115915,7 @@ fi
 
 
 echo $ac_n "checking if $compiler supports -c -o file.$ac_objext""... $ac_c" 1>&6
-echo "configure:109332: checking if $compiler supports -c -o file.$ac_objext" >&5
+echo "configure:115919: checking if $compiler supports -c -o file.$ac_objext" >&5
 if eval "test \"`echo '$''{'lt_cv_prog_compiler_c_o'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -109348,11 +115935,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"configure:109352: $lt_compile\"" >&5)
+   (eval echo "\"configure:115939: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "configure:109356: \$? = $ac_status" >&5
+   echo "configure:115943: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -109382,7 +115969,7 @@ hard_links="nottested"
 if test "$lt_cv_prog_compiler_c_o" = no && test "$need_locks" != no; then
   # do not overwrite the value of need_locks provided by the user
   echo $ac_n "checking if we can lock with hard links""... $ac_c" 1>&6
-echo "configure:109386: checking if we can lock with hard links" >&5
+echo "configure:115973: checking if we can lock with hard links" >&5
   hard_links=yes
   $rm conftest*
   ln conftest.a conftest.b 2>/dev/null && hard_links=no
@@ -109399,7 +115986,7 @@ else
 fi
 
 echo $ac_n "checking whether the $compiler linker ($LD) supports shared libraries""... $ac_c" 1>&6
-echo "configure:109403: checking whether the $compiler linker ($LD) supports shared libraries" >&5
+echo "configure:115990: checking whether the $compiler linker ($LD) supports shared libraries" >&5
 
   runpath_var=
   allow_undefined_flag=
@@ -109810,12 +116397,12 @@ _LT_EOF
        # Determine the default libpath from the value encoded in an empty executable.
        
 cat > conftest.$ac_ext <<EOF
-#line 109814 "configure"
+#line 116401 "configure"
 #include "confdefs.h"
 int main() {
 ; return 0; }
 EOF
-if { (eval echo configure:109819: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:116406: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  
 lt_aix_libpath_sed='
     /Import File Strings/,/^$/ {
@@ -109848,12 +116435,12 @@ if test -z "$aix_libpath"; then aix_libp
 	 # Determine the default libpath from the value encoded in an empty executable.
 	 
 cat > conftest.$ac_ext <<EOF
-#line 109852 "configure"
+#line 116439 "configure"
 #include "confdefs.h"
 int main() {
 ; return 0; }
 EOF
-if { (eval echo configure:109857: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:116444: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  
 lt_aix_libpath_sed='
     /Import File Strings/,/^$/ {
@@ -110343,11 +116930,11 @@ x|xyes)
       # systems, -lgcc has to come before -lc. If gcc already passes -lc
       # to ld, don't add -lc before -lgcc.
       echo $ac_n "checking whether -lc should be explicitly linked in""... $ac_c" 1>&6
-echo "configure:110347: checking whether -lc should be explicitly linked in" >&5
+echo "configure:116934: checking whether -lc should be explicitly linked in" >&5
       $rm conftest*
       echo "$lt_simple_compile_test_code" > conftest.$ac_ext
 
-      if { (eval echo configure:110351: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; } 2>conftest.err; then
+      if { (eval echo configure:116938: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; } 2>conftest.err; then
         soname=conftest
         lib=conftest
         libobjs=conftest.$ac_objext
@@ -110361,7 +116948,7 @@ echo "configure:110347: checking whether
         libname=conftest
         lt_save_allow_undefined_flag=$allow_undefined_flag
         allow_undefined_flag=
-        if { (eval echo configure:110365: \"$archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\") 1>&5; (eval $archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5; }
+        if { (eval echo configure:116952: \"$archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\") 1>&5; (eval $archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5; }
         then
 	  archive_cmds_need_lc=no
         else
@@ -110380,7 +116967,7 @@ echo "configure:110347: checking whether
 esac
 
 echo $ac_n "checking dynamic linker characteristics""... $ac_c" 1>&6
-echo "configure:110384: checking dynamic linker characteristics" >&5
+echo "configure:116971: checking dynamic linker characteristics" >&5
 library_names_spec=
 libname_spec='lib$name'
 soname_spec=
@@ -111005,7 +117592,7 @@ if test "$GCC" = yes; then
 fi
 
 echo $ac_n "checking how to hardcode library paths into programs""... $ac_c" 1>&6
-echo "configure:111009: checking how to hardcode library paths into programs" >&5
+echo "configure:117596: checking how to hardcode library paths into programs" >&5
 hardcode_action=
 if test -n "$hardcode_libdir_flag_spec" || \
    test -n "$runpath_var" || \
@@ -111043,7 +117630,7 @@ fi
 striplib=
 old_striplib=
 echo $ac_n "checking whether stripping libraries is possible""... $ac_c" 1>&6
-echo "configure:111047: checking whether stripping libraries is possible" >&5
+echo "configure:117634: checking whether stripping libraries is possible" >&5
 if test -n "$STRIP" && $STRIP -V 2>&1 | grep "GNU strip" >/dev/null; then
   test -z "$old_striplib" && old_striplib="$STRIP --strip-debug"
   test -z "$striplib" && striplib="$STRIP --strip-unneeded"
@@ -111094,7 +117681,7 @@ else
   darwin*)
   # if libdl is installed we need to link against it
     echo $ac_n "checking for dlopen in -ldl""... $ac_c" 1>&6
-echo "configure:111098: checking for dlopen in -ldl" >&5
+echo "configure:117685: checking for dlopen in -ldl" >&5
 ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -111102,7 +117689,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-ldl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 111106 "configure"
+#line 117693 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -111113,7 +117700,7 @@ int main() {
 dlopen()
 ; return 0; }
 EOF
-if { (eval echo configure:111117: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:117704: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -111142,12 +117729,12 @@ fi
 
   *)
     echo $ac_n "checking for shl_load""... $ac_c" 1>&6
-echo "configure:111146: checking for shl_load" >&5
+echo "configure:117733: checking for shl_load" >&5
 if eval "test \"`echo '$''{'ac_cv_func_shl_load'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 111151 "configure"
+#line 117738 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char shl_load(); below.  */
@@ -111170,7 +117757,7 @@ shl_load();
 
 ; return 0; }
 EOF
-if { (eval echo configure:111174: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:117761: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_shl_load=yes"
 else
@@ -111188,7 +117775,7 @@ if eval "test \"`echo '$ac_cv_func_'shl_
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for shl_load in -ldld""... $ac_c" 1>&6
-echo "configure:111192: checking for shl_load in -ldld" >&5
+echo "configure:117779: checking for shl_load in -ldld" >&5
 ac_lib_var=`echo dld'_'shl_load | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -111196,7 +117783,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-ldld  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 111200 "configure"
+#line 117787 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -111207,7 +117794,7 @@ int main() {
 shl_load()
 ; return 0; }
 EOF
-if { (eval echo configure:111211: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:117798: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -111226,12 +117813,12 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for dlopen""... $ac_c" 1>&6
-echo "configure:111230: checking for dlopen" >&5
+echo "configure:117817: checking for dlopen" >&5
 if eval "test \"`echo '$''{'ac_cv_func_dlopen'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 111235 "configure"
+#line 117822 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char dlopen(); below.  */
@@ -111254,7 +117841,7 @@ dlopen();
 
 ; return 0; }
 EOF
-if { (eval echo configure:111258: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:117845: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_dlopen=yes"
 else
@@ -111272,7 +117859,7 @@ if eval "test \"`echo '$ac_cv_func_'dlop
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for dlopen in -ldl""... $ac_c" 1>&6
-echo "configure:111276: checking for dlopen in -ldl" >&5
+echo "configure:117863: checking for dlopen in -ldl" >&5
 ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -111280,7 +117867,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-ldl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 111284 "configure"
+#line 117871 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -111291,7 +117878,7 @@ int main() {
 dlopen()
 ; return 0; }
 EOF
-if { (eval echo configure:111295: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:117882: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -111310,7 +117897,7 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for dlopen in -lsvld""... $ac_c" 1>&6
-echo "configure:111314: checking for dlopen in -lsvld" >&5
+echo "configure:117901: checking for dlopen in -lsvld" >&5
 ac_lib_var=`echo svld'_'dlopen | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -111318,7 +117905,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lsvld  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 111322 "configure"
+#line 117909 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -111329,7 +117916,7 @@ int main() {
 dlopen()
 ; return 0; }
 EOF
-if { (eval echo configure:111333: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:117920: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -111348,7 +117935,7 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for dld_link in -ldld""... $ac_c" 1>&6
-echo "configure:111352: checking for dld_link in -ldld" >&5
+echo "configure:117939: checking for dld_link in -ldld" >&5
 ac_lib_var=`echo dld'_'dld_link | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -111356,7 +117943,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-ldld  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 111360 "configure"
+#line 117947 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -111367,7 +117954,7 @@ int main() {
 dld_link()
 ; return 0; }
 EOF
-if { (eval echo configure:111371: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:117958: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -111423,7 +118010,7 @@ fi
     LIBS="$lt_cv_dlopen_libs $LIBS"
 
     echo $ac_n "checking whether a program can dlopen itself""... $ac_c" 1>&6
-echo "configure:111427: checking whether a program can dlopen itself" >&5
+echo "configure:118014: checking whether a program can dlopen itself" >&5
 if eval "test \"`echo '$''{'lt_cv_dlopen_self'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -111433,7 +118020,7 @@ else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 111437 "configure"
+#line 118024 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -111496,7 +118083,7 @@ int main ()
     exit (status);
 }
 EOF
-  if { (eval echo configure:111500: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} 2>/dev/null; then
+  if { (eval echo configure:118087: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} 2>/dev/null; then
     (./conftest; exit; ) >&5 2>/dev/null
     lt_status=$?
     case x$lt_status in
@@ -111519,7 +118106,7 @@ echo "$ac_t""$lt_cv_dlopen_self" 1>&6
     if test "x$lt_cv_dlopen_self" = xyes; then
       wl=$lt_prog_compiler_wl eval LDFLAGS=\"\$LDFLAGS $lt_prog_compiler_static\"
       echo $ac_n "checking whether a statically linked program can dlopen itself""... $ac_c" 1>&6
-echo "configure:111523: checking whether a statically linked program can dlopen itself" >&5
+echo "configure:118110: checking whether a statically linked program can dlopen itself" >&5
 if eval "test \"`echo '$''{'lt_cv_dlopen_self_static'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -111529,7 +118116,7 @@ else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 111533 "configure"
+#line 118120 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -111592,7 +118179,7 @@ int main ()
     exit (status);
 }
 EOF
-  if { (eval echo configure:111596: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} 2>/dev/null; then
+  if { (eval echo configure:118183: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} 2>/dev/null; then
     (./conftest; exit; ) >&5 2>/dev/null
     lt_status=$?
     case x$lt_status in
@@ -111633,11 +118220,11 @@ fi
 
 # Report which library types will actually be built
 echo $ac_n "checking if libtool supports shared libraries""... $ac_c" 1>&6
-echo "configure:111637: checking if libtool supports shared libraries" >&5
+echo "configure:118224: checking if libtool supports shared libraries" >&5
 echo "$ac_t""$can_build_shared" 1>&6
 
 echo $ac_n "checking whether to build shared libraries""... $ac_c" 1>&6
-echo "configure:111641: checking whether to build shared libraries" >&5
+echo "configure:118228: checking whether to build shared libraries" >&5
 test "$can_build_shared" = "no" && enable_shared=no
 
 # On AIX, shared libraries and static libraries use the same namespace, and
@@ -111660,7 +118247,7 @@ esac
 echo "$ac_t""$enable_shared" 1>&6
 
 echo $ac_n "checking whether to build static libraries""... $ac_c" 1>&6
-echo "configure:111664: checking whether to build static libraries" >&5
+echo "configure:118251: checking whether to build static libraries" >&5
 # Make sure either enable_shared or enable_static is yes.
 test "$enable_shared" = yes || enable_static=yes
 echo "$ac_t""$enable_static" 1>&6
@@ -112346,7 +118933,7 @@ ac_prog=ld
 if test "$GCC" = yes; then
   # Check if gcc -print-prog-name=ld gives a path.
   echo $ac_n "checking for ld used by $CC""... $ac_c" 1>&6
-echo "configure:112350: checking for ld used by $CC" >&5
+echo "configure:118937: checking for ld used by $CC" >&5
   case $host in
   *-*-mingw*)
     # gcc leaves a trailing carriage return which upsets mingw
@@ -112376,10 +118963,10 @@ echo "configure:112350: checking for ld
   esac
 elif test "$with_gnu_ld" = yes; then
   echo $ac_n "checking for GNU ld""... $ac_c" 1>&6
-echo "configure:112380: checking for GNU ld" >&5
+echo "configure:118967: checking for GNU ld" >&5
 else
   echo $ac_n "checking for non-GNU ld""... $ac_c" 1>&6
-echo "configure:112383: checking for non-GNU ld" >&5
+echo "configure:118970: checking for non-GNU ld" >&5
 fi
 if eval "test \"`echo '$''{'lt_cv_path_LD'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -112418,7 +119005,7 @@ else
 fi
 test -z "$LD" && { echo "configure: error: no acceptable ld found in \$PATH" 1>&2; exit 1; }
 echo $ac_n "checking if the linker ($LD) is GNU ld""... $ac_c" 1>&6
-echo "configure:112422: checking if the linker ($LD) is GNU ld" >&5
+echo "configure:119009: checking if the linker ($LD) is GNU ld" >&5
 if eval "test \"`echo '$''{'lt_cv_prog_gnu_ld'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -112484,7 +119071,7 @@ fi
 
 # PORTME: fill in a description of your system's C++ link characteristics
 echo $ac_n "checking whether the $compiler linker ($LD) supports shared libraries""... $ac_c" 1>&6
-echo "configure:112488: checking whether the $compiler linker ($LD) supports shared libraries" >&5
+echo "configure:119075: checking whether the $compiler linker ($LD) supports shared libraries" >&5
 ld_shlibs_CXX=yes
 case $host_os in
   aix3*)
@@ -112582,12 +119169,12 @@ case $host_os in
       # Determine the default libpath from the value encoded in an empty executable.
       
 cat > conftest.$ac_ext <<EOF
-#line 112586 "configure"
+#line 119173 "configure"
 #include "confdefs.h"
 int main() {
 ; return 0; }
 EOF
-if { (eval echo configure:112591: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:119178: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  
 lt_aix_libpath_sed='
     /Import File Strings/,/^$/ {
@@ -112621,12 +119208,12 @@ if test -z "$aix_libpath"; then aix_libp
 	# Determine the default libpath from the value encoded in an empty executable.
 	
 cat > conftest.$ac_ext <<EOF
-#line 112625 "configure"
+#line 119212 "configure"
 #include "confdefs.h"
 int main() {
 ; return 0; }
 EOF
-if { (eval echo configure:112630: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:119217: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  
 lt_aix_libpath_sed='
     /Import File Strings/,/^$/ {
@@ -113393,7 +119980,7 @@ private:
 };
 EOF
 
-if { (eval echo configure:113397: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:119984: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   # Parse the compiler output and extract the necessary
   # objects, libraries and library flags.
 
@@ -113549,7 +120136,7 @@ lt_prog_compiler_pic_CXX=
 lt_prog_compiler_static_CXX=
 
 echo $ac_n "checking for $compiler option to produce PIC""... $ac_c" 1>&6
-echo "configure:113553: checking for $compiler option to produce PIC" >&5
+echo "configure:120140: checking for $compiler option to produce PIC" >&5
  
   # C++ specific cases for pic, static, wl, etc.
   if test "$GXX" = yes; then
@@ -113846,7 +120433,7 @@ echo "$ac_t""$lt_prog_compiler_pic_CXX"
 if test -n "$lt_prog_compiler_pic_CXX"; then
   
 echo $ac_n "checking if $compiler PIC flag $lt_prog_compiler_pic_CXX works""... $ac_c" 1>&6
-echo "configure:113850: checking if $compiler PIC flag $lt_prog_compiler_pic_CXX works" >&5
+echo "configure:120437: checking if $compiler PIC flag $lt_prog_compiler_pic_CXX works" >&5
 if eval "test \"`echo '$''{'lt_cv_prog_compiler_pic_works_CXX'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -113863,11 +120450,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"configure:113867: $lt_compile\"" >&5)
+   (eval echo "\"configure:120454: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "configure:113871: \$? = $ac_status" >&5
+   echo "configure:120458: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -113909,7 +120496,7 @@ esac
 #
 wl=$lt_prog_compiler_wl_CXX eval lt_tmp_static_flag=\"$lt_prog_compiler_static_CXX\"
 echo $ac_n "checking if $compiler static flag $lt_tmp_static_flag works""... $ac_c" 1>&6
-echo "configure:113913: checking if $compiler static flag $lt_tmp_static_flag works" >&5
+echo "configure:120500: checking if $compiler static flag $lt_tmp_static_flag works" >&5
 if eval "test \"`echo '$''{'lt_cv_prog_compiler_static_works_CXX'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -113947,7 +120534,7 @@ fi
 
 
 echo $ac_n "checking if $compiler supports -c -o file.$ac_objext""... $ac_c" 1>&6
-echo "configure:113951: checking if $compiler supports -c -o file.$ac_objext" >&5
+echo "configure:120538: checking if $compiler supports -c -o file.$ac_objext" >&5
 if eval "test \"`echo '$''{'lt_cv_prog_compiler_c_o_CXX'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -113967,11 +120554,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"configure:113971: $lt_compile\"" >&5)
+   (eval echo "\"configure:120558: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "configure:113975: \$? = $ac_status" >&5
+   echo "configure:120562: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -114001,7 +120588,7 @@ hard_links="nottested"
 if test "$lt_cv_prog_compiler_c_o_CXX" = no && test "$need_locks" != no; then
   # do not overwrite the value of need_locks provided by the user
   echo $ac_n "checking if we can lock with hard links""... $ac_c" 1>&6
-echo "configure:114005: checking if we can lock with hard links" >&5
+echo "configure:120592: checking if we can lock with hard links" >&5
   hard_links=yes
   $rm conftest*
   ln conftest.a conftest.b 2>/dev/null && hard_links=no
@@ -114018,7 +120605,7 @@ else
 fi
 
 echo $ac_n "checking whether the $compiler linker ($LD) supports shared libraries""... $ac_c" 1>&6
-echo "configure:114022: checking whether the $compiler linker ($LD) supports shared libraries" >&5
+echo "configure:120609: checking whether the $compiler linker ($LD) supports shared libraries" >&5
 
   export_symbols_cmds_CXX='$NM $libobjs $convenience | $global_symbol_pipe | $SED '\''s/.* //'\'' | sort | uniq > $export_symbols'
   case $host_os in
@@ -114064,11 +120651,11 @@ x|xyes)
       # systems, -lgcc has to come before -lc. If gcc already passes -lc
       # to ld, don't add -lc before -lgcc.
       echo $ac_n "checking whether -lc should be explicitly linked in""... $ac_c" 1>&6
-echo "configure:114068: checking whether -lc should be explicitly linked in" >&5
+echo "configure:120655: checking whether -lc should be explicitly linked in" >&5
       $rm conftest*
       echo "$lt_simple_compile_test_code" > conftest.$ac_ext
 
-      if { (eval echo configure:114072: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; } 2>conftest.err; then
+      if { (eval echo configure:120659: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; } 2>conftest.err; then
         soname=conftest
         lib=conftest
         libobjs=conftest.$ac_objext
@@ -114082,7 +120669,7 @@ echo "configure:114068: checking whether
         libname=conftest
         lt_save_allow_undefined_flag=$allow_undefined_flag_CXX
         allow_undefined_flag_CXX=
-        if { (eval echo configure:114086: \"$archive_cmds_CXX 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\") 1>&5; (eval $archive_cmds_CXX 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5; }
+        if { (eval echo configure:120673: \"$archive_cmds_CXX 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\") 1>&5; (eval $archive_cmds_CXX 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5; }
         then
 	  archive_cmds_need_lc_CXX=no
         else
@@ -114101,7 +120688,7 @@ echo "configure:114068: checking whether
 esac
 
 echo $ac_n "checking dynamic linker characteristics""... $ac_c" 1>&6
-echo "configure:114105: checking dynamic linker characteristics" >&5
+echo "configure:120692: checking dynamic linker characteristics" >&5
 library_names_spec=
 libname_spec='lib$name'
 soname_spec=
@@ -114674,7 +121261,7 @@ if test "$GCC" = yes; then
 fi
 
 echo $ac_n "checking how to hardcode library paths into programs""... $ac_c" 1>&6
-echo "configure:114678: checking how to hardcode library paths into programs" >&5
+echo "configure:121265: checking how to hardcode library paths into programs" >&5
 hardcode_action_CXX=
 if test -n "$hardcode_libdir_flag_spec_CXX" || \
    test -n "$runpath_var_CXX" || \
--- a/generated_lists
+++ b/generated_lists
@@ -1,3 +1,3 @@
 makefile_am_files = Zend/Makefile.am TSRM/Makefile.am
 config_h_files = Zend/acconfig.h TSRM/acconfig.h
-config_m4_files = Zend/Zend.m4 TSRM/tsrm.m4 TSRM/threads.m4 Zend/acinclude.m4 ext/bcmath/config.m4 ext/bz2/config.m4 ext/calendar/config.m4 ext/ctype/config.m4 ext/curl/config.m4 ext/date/config0.m4 ext/dba/config.m4 ext/dom/config.m4 ext/enchant/config.m4 ext/ereg/config0.m4 ext/exif/config.m4 ext/fileinfo/config.m4 ext/filter/config.m4 ext/ftp/config.m4 ext/gd/config.m4 ext/gettext/config.m4 ext/gmp/config.m4 ext/hash/config.m4 ext/iconv/config.m4 ext/imap/config.m4 ext/interbase/config.m4 ext/intl/config.m4 ext/json/config.m4 ext/ldap/config.m4 ext/libxml/config0.m4 ext/mbstring/config.m4 ext/mcrypt/config.m4 ext/mssql/config.m4 ext/mysql/config.m4 ext/mysqli/config.m4 ext/mysqlnd/config9.m4 ext/oci8/config.m4 ext/odbc/config.m4 ext/openssl/config0.m4 ext/pcntl/config.m4 ext/pcre/config0.m4 ext/pdo/config.m4 ext/pdo_dblib/config.m4 ext/pdo_firebird/config.m4 ext/pdo_mysql/config.m4 ext/pdo_oci/config.m4 ext/pdo_odbc/config.m4 ext/pdo_pgsql/config.m4 ext/pdo_sqlite/config.m4 ext/pgsql/config.m4 ext/phar/config.m4 ext/posix/config.m4 ext/pspell/config.m4 ext/readline/config.m4 ext/recode/config.m4 ext/recode/config9.m4 ext/reflection/config.m4 ext/session/config.m4 ext/shmop/config.m4 ext/simplexml/config.m4 ext/snmp/config.m4 ext/soap/config.m4 ext/sockets/config.m4 ext/spl/config.m4 ext/sqlite/config.m4 ext/sqlite3/config0.m4 ext/standard/config.m4 ext/sybase_ct/config.m4 ext/sysvmsg/config.m4 ext/sysvsem/config.m4 ext/sysvshm/config.m4 ext/tidy/config.m4 ext/tokenizer/config.m4 ext/wddx/config.m4 ext/xml/config.m4 ext/xmlreader/config.m4 ext/xmlrpc/config.m4 ext/xmlwriter/config.m4 ext/xsl/config.m4 ext/zip/config.m4 ext/zlib/config0.m4 sapi/aolserver/config.m4 sapi/apache/config.m4 sapi/apache2filter/config.m4 sapi/apache2handler/config.m4 sapi/apache_hooks/config.m4 sapi/caudium/config.m4 sapi/cli/config.m4 sapi/continuity/config.m4 sapi/embed/config.m4 sapi/fpm/config.m4 sapi/isapi/config.m4 sapi/litespeed/config.m4 sapi/milter/config.m4 sapi/nsapi/config.m4 sapi/phttpd/config.m4 sapi/pi3web/config.m4 sapi/roxen/config.m4 sapi/thttpd/config.m4 sapi/tux/config.m4 sapi/webjames/config.m4
+config_m4_files = Zend/Zend.m4 TSRM/tsrm.m4 TSRM/threads.m4 Zend/acinclude.m4 ext/apc/config.m4 ext/bcmath/config.m4 ext/bz2/config.m4 ext/calendar/config.m4 ext/ctype/config.m4 ext/curl/config.m4 ext/date/config0.m4 ext/dba/config.m4 ext/dio/config.m4 ext/dom/config.m4 ext/enchant/config.m4 ext/ereg/config0.m4 ext/exif/config.m4 ext/fileinfo/config.m4 ext/filter/config.m4 ext/ftp/config.m4 ext/gd/config.m4 ext/gettext/config.m4 ext/gmp/config.m4 ext/hash/config.m4 ext/http/config9.m4 ext/http/config.m4 ext/iconv/config.m4 ext/imap/config.m4 ext/interbase/config.m4 ext/intl/config.m4 ext/json/config.m4 ext/ldap/config.m4 ext/libevent/config.m4 ext/libxml/config0.m4 ext/mbstring/config.m4 ext/mcrypt/config.m4 ext/mssql/config.m4 ext/mysql/config.m4 ext/mysqli/config.m4 ext/mysqlnd/config9.m4 ext/oci8/config.m4 ext/odbc/config.m4 ext/openssl/config0.m4 ext/pcntl/config.m4 ext/pcre/config0.m4 ext/pdo/config.m4 ext/pdo_dblib/config.m4 ext/pdo_firebird/config.m4 ext/pdo_mysql/config.m4 ext/pdo_oci/config.m4 ext/pdo_odbc/config.m4 ext/pdo_pgsql/config.m4 ext/pdo_sqlite/config.m4 ext/pgsql/config.m4 ext/phar/config.m4 ext/posix/config.m4 ext/pspell/config.m4 ext/readline/config.m4 ext/recode/config9.m4 ext/recode/config.m4 ext/reflection/config.m4 ext/session/config.m4 ext/shmop/config.m4 ext/simplexml/config.m4 ext/snmp/config.m4 ext/soap/config.m4 ext/sockets/config.m4 ext/spl/config.m4 ext/sqlite3/config0.m4 ext/sqlite/config.m4 ext/standard/config.m4 ext/sybase_ct/config.m4 ext/sysvmsg/config.m4 ext/sysvsem/config.m4 ext/sysvshm/config.m4 ext/tidy/config.m4 ext/tokenizer/config.m4 ext/wddx/config.m4 ext/xml/config.m4 ext/xmlreader/config.m4 ext/xmlrpc/config.m4 ext/xmlwriter/config.m4 ext/xsl/config.m4 ext/zip/config.m4 ext/zlib/config0.m4 sapi/aolserver/config.m4 sapi/apache2filter/config.m4 sapi/apache2handler/config.m4 sapi/apache/config.m4 sapi/apache_hooks/config.m4 sapi/caudium/config.m4 sapi/cli/config.m4 sapi/continuity/config.m4 sapi/embed/config.m4 sapi/fpm/config.m4 sapi/isapi/config.m4 sapi/litespeed/config.m4 sapi/milter/config.m4 sapi/nsapi/config.m4 sapi/phttpd/config.m4 sapi/pi3web/config.m4 sapi/roxen/config.m4 sapi/thttpd/config.m4 sapi/tux/config.m4 sapi/webjames/config.m4
--- a/main/php_config.h.in
+++ b/main/php_config.h.in
@@ -1,4 +1,4 @@
-/* main/php_config.h.in.  Generated automatically from configure.in by autoheader.  */
+/* main/php_config.h.in.  Generated automatically from configure.in by autoheader 2.13.  */
 /* Leave this file alone */
 /*
    +----------------------------------------------------------------------+
@@ -1325,6 +1325,51 @@
 /*   */
 #undef HAVE_ZLIB
 
+/*   */
+#undef APC_MMAP
+
+/*   */
+#undef APC_FILEHITS
+
+/*   */
+#undef __DEBUG_APC__
+
+/*   */
+#undef APC_SEM_LOCKS
+
+/*   */
+#undef APC_SPIN_LOCKS
+
+/*   */
+#undef APC_PTHREADMUTEX_LOCKS
+
+/*   */
+#undef APC_FCNTL_LOCKS
+
+/*  shm/mmap memory protection  */
+#undef APC_MEMPROTECT
+
+/*   */
+#undef APC_HAVE_LOOKUP_HOOKS
+
+/*   */
+#undef APC_HAVE_LOOKUP_HOOKS
+
+/*   */
+#undef HAVE_SEMUN
+
+/*   */
+#undef HAVE_SEMUN
+
+/* enable valgrind memchecks */
+#undef HAVE_VALGRIND_MEMCHECK_H
+
+/* Whether to build apc as dynamic module */
+#undef COMPILE_DL_APC
+
+/*   */
+#undef HAVE_APC
+
 /* Whether to build bcmath as dynamic module */
 #undef COMPILE_DL_BCMATH
 
@@ -1463,6 +1508,9 @@
 /* Whether to build dba as dynamic module */
 #undef COMPILE_DL_DBA
 
+/* Whether to build dio as dynamic module */
+#undef COMPILE_DL_DIO
+
 /*   */
 #undef HAVE_LIBXML
 
@@ -1886,6 +1934,9 @@
 /* LDAP SASL support */
 #undef HAVE_LDAP_SASL
 
+/* Whether to build libevent as dynamic module */
+#undef COMPILE_DL_LIBEVENT
+
 /* whether to have multibyte string support */
 #undef HAVE_MBSTRING
 
@@ -2804,6 +2855,120 @@
 /* Whether to build zip as dynamic module */
 #undef COMPILE_DL_ZIP
 
+/*   */
+#undef HTTP_SHARED_DEPS
+
+/*   */
+#undef HTTP_SHARED_DEPS
+
+/*   */
+#undef HAVE_GETHOSTNAME
+
+/*   */
+#undef HAVE_GETHOSTNAME
+
+/*   */
+#undef HAVE_LIBNSL
+
+/*   */
+#undef HAVE_GETDOMAINNAME
+
+/*   */
+#undef HAVE_GETDOMAINNAME
+
+/*   */
+#undef HAVE_LIBNSL
+
+/*   */
+#undef HAVE_GETSERVBYPORT
+
+/*   */
+#undef HAVE_GETSERVBYPORT
+
+/*   */
+#undef HAVE_LIBNSL
+
+/*   */
+#undef HAVE_GETSERVBYNAME
+
+/*   */
+#undef HAVE_GETSERVBYNAME
+
+/*   */
+#undef HAVE_LIBNSL
+
+/* Have zlib support */
+#undef HTTP_HAVE_ZLIB
+
+/*   */
+#undef HTTP_HAVE_SSL
+
+/*   */
+#undef HTTP_HAVE_OPENSSL
+
+/*   */
+#undef HTTP_HAVE_GNUTLS
+
+/* path to bundled SSL CA info */
+#undef HTTP_CURL_CAINFO
+
+/* Have cURL support */
+#undef HTTP_HAVE_CURL
+
+/*   */
+#undef HAVE_CURL_SHARE_STRERROR
+
+/*   */
+#undef HAVE_CURL_MULTI_STRERROR
+
+/*   */
+#undef HAVE_CURL_EASY_STRERROR
+
+/*   */
+#undef HAVE_CURL_EASY_RESET
+
+/*   */
+#undef HAVE_CURL_FORMGET
+
+/*   */
+#undef HAVE_CURL_MULTI_SETOPT
+
+/*   */
+#undef HAVE_CURL_MULTI_TIMEOUT
+
+/*   */
+#undef HTTP_EVENT_VERSION
+
+/* Have libevent support for cURL */
+#undef HTTP_HAVE_EVENT
+
+/*   */
+#undef HAVE_CURL_MULTI_SOCKET_ACTION
+
+/*   */
+#undef HTTP_EVENT_VERSION
+
+/* Have libevent support for cURL */
+#undef HTTP_HAVE_EVENT
+
+/*   */
+#undef HAVE_CURL_MULTI_SOCKET_ACTION
+
+/* Have magic mime support */
+#undef HTTP_HAVE_MAGIC
+
+/* Have ext/hash support */
+#undef HTTP_HAVE_PHP_HASH_H
+
+/* Have ext/hash support */
+#undef HTTP_HAVE_PHP_HASH_H
+
+/* Whether to build http as dynamic module */
+#undef COMPILE_DL_HTTP
+
+/* Have extended HTTP support */
+#undef HAVE_HTTP
+
 /* Whether to build mysqlnd as dynamic module */
 #undef COMPILE_DL_MYSQLND
 
