--- xf86-input-evdev-1.1.2.orig/src/evdev.c.orig	2008-08-17 19:24:37.000000000 +0200
+++ xf86-input-evdev-1.1.2/src/evdev.c	2008-08-17 19:33:40.000000000 +0200
@@ -234,10 +234,6 @@
 	    else
 		return !Success;
 	    break;
-	case SendCoreEvents:
-	case DontSendCoreEvents:
-	    xf86XInputSetSendCoreEvents (pInfo, (mode == SendCoreEvents));
-	    break;
 	default:
 	    return !Success;
     }
@@ -264,7 +260,9 @@
     pInfo->device_control = EvdevProc;
     pInfo->read_input = EvdevReadInput;
     pInfo->switch_mode = EvdevSwitchMode;
+#if GET_ABI_MAJOR(ABI_XINPUT_VERSION) == 0
     pInfo->motion_history_proc = xf86GetMotionEvents;
+#endif
     pInfo->conf_idev = driver->dev;
 
     pInfo->private = device;
@@ -451,8 +449,6 @@
     0
 };
 
-#ifdef XFree86LOADER
-
 static void
 EvdevUnplug(pointer	p)
 {
@@ -474,7 +470,7 @@
     MODULEVENDORSTRING,
     MODINFOSTRING1,
     MODINFOSTRING2,
-    0, /* Missing from SDK: XORG_VERSION_CURRENT, */
+    XORG_VERSION_CURRENT,
     1, 1, 0,
     ABI_CLASS_XINPUT,
     ABI_XINPUT_VERSION,
@@ -488,4 +484,3 @@
     EvdevPlug,
     EvdevUnplug
 };
-#endif /* XFree86LOADER */
